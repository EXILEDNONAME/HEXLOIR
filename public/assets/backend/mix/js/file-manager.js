!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var i=[],n=i.slice,a=i.concat,o=i.push,s=i.indexOf,r={},l=r.toString,c=r.hasOwnProperty,d="".trim,u={},h="1.11.0",p=function(e,t){return new p.fn.init(e,t)},f=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,m=/^-ms-/,g=/-([\da-z])/gi,v=function(e,t){return t.toUpperCase()};function b(e){var t=e.length,i=p.type(e);return"function"!==i&&!p.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e))}p.fn=p.prototype={jquery:h,constructor:p,selector:"",length:0,toArray:function(){return n.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:n.call(this)},pushStack:function(e){var t=p.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return p.each(this,e,t)},map:function(e){return this.pushStack(p.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:o,sort:i.sort,splice:i.splice},p.extend=p.fn.extend=function(){var e,t,i,n,a,o,s=arguments[0]||{},r=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[r]||{},r++),"object"==typeof s||p.isFunction(s)||(s={}),r===l&&(s=this,r--);l>r;r++)if(null!=(a=arguments[r]))for(n in a)e=s[n],s!==(i=a[n])&&(c&&i&&(p.isPlainObject(i)||(t=p.isArray(i)))?(t?(t=!1,o=e&&p.isArray(e)?e:[]):o=e&&p.isPlainObject(e)?e:{},s[n]=p.extend(c,o,i)):void 0!==i&&(s[n]=i));return s},p.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===p.type(e)},isArray:Array.isArray||function(e){return"array"===p.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==p.type(e)||e.nodeType||p.isWindow(e))return!1;try{if(e.constructor&&!c.call(e,"constructor")&&!c.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(u.ownLast)for(t in e)return c.call(e,t);for(t in e);return void 0===t||c.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?r[l.call(e)]||"object":typeof e},globalEval:function(t){t&&p.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(m,"ms-").replace(g,v)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var n=0,a=e.length,o=b(e);if(i){if(o)for(;a>n&&!1!==t.apply(e[n],i);n++);else for(n in e)if(!1===t.apply(e[n],i))break}else if(o)for(;a>n&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:d&&!d.call("\ufeffÂ ")?function(e){return null==e?"":d.call(e)}:function(e){return null==e?"":(e+"").replace(f,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(b(Object(e))?p.merge(i,"string"==typeof e?[e]:e):o.call(i,e)),i},inArray:function(e,t,i){var n;if(t){if(s)return s.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,t){for(var i=+t.length,n=0,a=e.length;i>n;)e[a++]=t[n++];if(i!=i)for(;void 0!==t[n];)e[a++]=t[n++];return e.length=a,e},grep:function(e,t,i){for(var n=[],a=0,o=e.length,s=!i;o>a;a++)!t(e[a],a)!==s&&n.push(e[a]);return n},map:function(e,t,i){var n,o=0,s=e.length,r=[];if(b(e))for(;s>o;o++)null!=(n=t(e[o],o,i))&&r.push(n);else for(o in e)null!=(n=t(e[o],o,i))&&r.push(n);return a.apply([],r)},guid:1,proxy:function(e,t){var i,a,o;return"string"==typeof t&&(o=e[t],t=e,e=o),p.isFunction(e)?(i=n.call(arguments,2),a=function(){return e.apply(t||this,i.concat(n.call(arguments)))},a.guid=e.guid=e.guid||p.guid++,a):void 0},now:function(){return+new Date},support:u}),p.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){r["[object "+t+"]"]=t.toLowerCase()});var y=function(e){var t,i,n,a,o,s,r,l,c,d,u,h,p,f,m,g,v,b="sizzle"+-new Date,y=e.document,w=0,x=0,k=ne(),C=ne(),_=ne(),T=function(e,t){return e===t&&(c=!0),0},D="undefined",z=1<<31,A={}.hasOwnProperty,S=[],I=S.pop,M=S.push,E=S.push,O=S.slice,j=S.indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",H="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=H.replace("w","w#"),U="\\["+F+"*("+H+")"+F+"*(?:([*^$|!~]?=)"+F+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+N+")|)|)"+F+"*\\]",R=":("+H+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+U.replace(3,8)+")*)|.*)\\)|)",q=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),L=new RegExp("^"+F+"*,"+F+"*"),W=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),B=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),$=new RegExp(R),Y=new RegExp("^"+N+"$"),K={ID:new RegExp("^#("+H+")"),CLASS:new RegExp("^\\.("+H+")"),TAG:new RegExp("^("+H.replace("w","w*")+")"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},V=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,G=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,Z=/'|\\/g,ee=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),te=function(e,t,i){var n="0x"+t-65536;return n!=n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{E.apply(S=O.call(y.childNodes),y.childNodes),S[y.childNodes.length].nodeType}catch(e){E={apply:S.length?function(e,t){M.apply(e,O.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function ie(e,t,n,a){var o,s,r,l,c,h,m,g,w,x;if((t?t.ownerDocument||t:y)!==u&&d(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(l=(t=t||u).nodeType)&&9!==l)return[];if(p&&!a){if(o=J.exec(e))if(r=o[1]){if(9===l){if(!(s=t.getElementById(r))||!s.parentNode)return n;if(s.id===r)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(r))&&v(t,s)&&s.id===r)return n.push(s),n}else{if(o[2])return E.apply(n,t.getElementsByTagName(e)),n;if((r=o[3])&&i.getElementsByClassName&&t.getElementsByClassName)return E.apply(n,t.getElementsByClassName(r)),n}if(i.qsa&&(!f||!f.test(e))){if(g=m=b,w=t,x=9===l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){for(h=pe(e),(m=t.getAttribute("id"))?g=m.replace(Z,"\\$&"):t.setAttribute("id",g),g="[id='"+g+"'] ",c=h.length;c--;)h[c]=g+fe(h[c]);w=Q.test(e)&&ue(t.parentNode)||t,x=h.join(",")}if(x)try{return E.apply(n,w.querySelectorAll(x)),n}catch(e){}finally{m||t.removeAttribute("id")}}}return xe(e.replace(q,"$1"),t,n,a)}function ne(){var e=[];return function t(i,a){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=a}}function ae(e){return e[b]=!0,e}function oe(e){var t=u.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function se(e,t){for(var i=e.split("|"),a=e.length;a--;)n.attrHandle[i[a]]=t}function re(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||z)-(~e.sourceIndex||z);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function le(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ce(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function de(e){return ae(function(t){return t=+t,ae(function(i,n){for(var a,o=e([],i.length,t),s=o.length;s--;)i[a=o[s]]&&(i[a]=!(n[a]=i[a]))})})}function ue(e){return e&&typeof e.getElementsByTagName!==D&&e}for(t in i=ie.support={},o=ie.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},d=ie.setDocument=function(e){var t,a=e?e.ownerDocument||e:y,s=a.defaultView;return a!==u&&9===a.nodeType&&a.documentElement?(u=a,h=a.documentElement,p=!o(a),s&&s!==s.top&&(s.addEventListener?s.addEventListener("unload",function(){d()},!1):s.attachEvent&&s.attachEvent("onunload",function(){d()})),i.attributes=oe(function(e){return e.className="i",!e.getAttribute("className")}),i.getElementsByTagName=oe(function(e){return e.appendChild(a.createComment("")),!e.getElementsByTagName("*").length}),i.getElementsByClassName=G.test(a.getElementsByClassName)&&oe(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),i.getById=oe(function(e){return h.appendChild(e).id=b,!a.getElementsByName||!a.getElementsByName(b).length}),i.getById?(n.find.ID=function(e,t){if(typeof t.getElementById!==D&&p){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},n.filter.ID=function(e){var t=e.replace(ee,te);return function(e){return e.getAttribute("id")===t}}):(delete n.find.ID,n.filter.ID=function(e){var t=e.replace(ee,te);return function(e){var i=typeof e.getAttributeNode!==D&&e.getAttributeNode("id");return i&&i.value===t}}),n.find.TAG=i.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==D?t.getElementsByTagName(e):void 0}:function(e,t){var i,n=[],a=0,o=t.getElementsByTagName(e);if("*"===e){for(;i=o[a++];)1===i.nodeType&&n.push(i);return n}return o},n.find.CLASS=i.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==D&&p?t.getElementsByClassName(e):void 0},m=[],f=[],(i.qsa=G.test(a.querySelectorAll))&&(oe(function(e){e.innerHTML="<select t=''><option selected=''></option></select>",e.querySelectorAll("[t^='']").length&&f.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||f.push("\\["+F+"*(?:value|"+P+")"),e.querySelectorAll(":checked").length||f.push(":checked")}),oe(function(e){var t=a.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&f.push("name"+F+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||f.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),f.push(",.*:")})),(i.matchesSelector=G.test(g=h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&oe(function(e){i.disconnectedMatch=g.call(e,"div"),g.call(e,"[s!='']:x"),m.push("!=",R)}),f=f.length&&new RegExp(f.join("|")),m=m.length&&new RegExp(m.join("|")),t=G.test(h.compareDocumentPosition),v=t||G.test(h.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},T=t?function(e,t){if(e===t)return c=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===n?e===a||e.ownerDocument===y&&v(y,e)?-1:t===a||t.ownerDocument===y&&v(y,t)?1:l?j.call(l,e)-j.call(l,t):0:4&n?-1:1)}:function(e,t){if(e===t)return c=!0,0;var i,n=0,o=e.parentNode,s=t.parentNode,r=[e],d=[t];if(!o||!s)return e===a?-1:t===a?1:o?-1:s?1:l?j.call(l,e)-j.call(l,t):0;if(o===s)return re(e,t);for(i=e;i=i.parentNode;)r.unshift(i);for(i=t;i=i.parentNode;)d.unshift(i);for(;r[n]===d[n];)n++;return n?re(r[n],d[n]):r[n]===y?-1:d[n]===y?1:0},a):u},ie.matches=function(e,t){return ie(e,null,null,t)},ie.matchesSelector=function(e,t){if((e.ownerDocument||e)!==u&&d(e),t=t.replace(B,"='$1']"),!(!i.matchesSelector||!p||m&&m.test(t)||f&&f.test(t)))try{var n=g.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return ie(t,u,null,[e]).length>0},ie.contains=function(e,t){return(e.ownerDocument||e)!==u&&d(e),v(e,t)},ie.attr=function(e,t){(e.ownerDocument||e)!==u&&d(e);var a=n.attrHandle[t.toLowerCase()],o=a&&A.call(n.attrHandle,t.toLowerCase())?a(e,t,!p):void 0;return void 0!==o?o:i.attributes||!p?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},ie.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ie.uniqueSort=function(e){var t,n=[],a=0,o=0;if(c=!i.detectDuplicates,l=!i.sortStable&&e.slice(0),e.sort(T),c){for(;t=e[o++];)t===e[o]&&(a=n.push(o));for(;a--;)e.splice(n[a],1)}return l=null,e},a=ie.getText=function(e){var t,i="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=a(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n++];)i+=a(t);return i},n=ie.selectors={cacheLength:50,createPseudo:ae,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ee,te),e[3]=(e[4]||e[5]||"").replace(ee,te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ie.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ie.error(e[0]),e},PSEUDO:function(e){var t,i=!e[5]&&e[2];return K.CHILD.test(e[0])?null:(e[3]&&void 0!==e[4]?e[2]=e[4]:i&&$.test(i)&&(t=pe(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ee,te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=k[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&k(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==D&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(n){var a=ie.attr(n,e);return null==a?"!="===t:!t||(a+="","="===t?a===i:"!="===t?a!==i:"^="===t?i&&0===a.indexOf(i):"*="===t?i&&a.indexOf(i)>-1:"$="===t?i&&a.slice(-i.length)===i:"~="===t?(" "+a+" ").indexOf(i)>-1:"|="===t&&(a===i||a.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,a){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),r="of-type"===t;return 1===n&&0===a?function(e){return!!e.parentNode}:function(t,i,l){var c,d,u,h,p,f,m=o!==s?"nextSibling":"previousSibling",g=t.parentNode,v=r&&t.nodeName.toLowerCase(),y=!l&&!r;if(g){if(o){for(;m;){for(u=t;u=u[m];)if(r?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&y){for(p=(c=(d=g[b]||(g[b]={}))[e]||[])[0]===w&&c[1],h=c[0]===w&&c[2],u=p&&g.childNodes[p];u=++p&&u&&u[m]||(h=p=0)||f.pop();)if(1===u.nodeType&&++h&&u===t){d[e]=[w,p,h];break}}else if(y&&(c=(t[b]||(t[b]={}))[e])&&c[0]===w)h=c[1];else for(;(u=++p&&u&&u[m]||(h=p=0)||f.pop())&&((r?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++h||(y&&((u[b]||(u[b]={}))[e]=[w,h]),u!==t)););return(h-=a)===n||h%n===0&&h/n>=0}}},PSEUDO:function(e,t){var i,a=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ie.error("unsupported pseudo: "+e);return a[b]?a(t):a.length>1?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?ae(function(e,i){for(var n,o=a(e,t),s=o.length;s--;)e[n=j.call(e,o[s])]=!(i[n]=o[s])}):function(e){return a(e,0,i)}):a}},pseudos:{not:ae(function(e){var t=[],i=[],n=s(e.replace(q,"$1"));return n[b]?ae(function(e,t,i,a){for(var o,s=n(e,null,a,[]),r=e.length;r--;)(o=s[r])&&(e[r]=!(t[r]=o))}):function(e,a,o){return t[0]=e,n(t,null,o,i),!i.pop()}}),has:ae(function(e){return function(t){return ie(e,t).length>0}}),contains:ae(function(e){return function(t){return(t.textContent||t.innerText||a(t)).indexOf(e)>-1}}),lang:ae(function(e){return Y.test(e||"")||ie.error("unsupported lang: "+e),e=e.replace(ee,te).toLowerCase(),function(t){var i;do{if(i=p?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===u.activeElement&&(!u.hasFocus||u.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return V.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:de(function(){return[0]}),last:de(function(e,t){return[t-1]}),eq:de(function(e,t,i){return[0>i?i+t:i]}),even:de(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:de(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:de(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:de(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},n.pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=le(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=ce(t);function he(){}function pe(e,t){var i,a,o,s,r,l,c,d=C[e+" "];if(d)return t?0:d.slice(0);for(r=e,l=[],c=n.preFilter;r;){for(s in(!i||(a=L.exec(r)))&&(a&&(r=r.slice(a[0].length)||r),l.push(o=[])),i=!1,(a=W.exec(r))&&(i=a.shift(),o.push({value:i,type:a[0].replace(q," ")}),r=r.slice(i.length)),n.filter)!(a=K[s].exec(r))||c[s]&&!(a=c[s](a))||(i=a.shift(),o.push({value:i,type:s,matches:a}),r=r.slice(i.length));if(!i)break}return t?r.length:r?ie.error(e):C(e,l).slice(0)}function fe(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function me(e,t,i){var n=t.dir,a=i&&"parentNode"===n,o=x++;return t.first?function(t,i,o){for(;t=t[n];)if(1===t.nodeType||a)return e(t,i,o)}:function(t,i,s){var r,l,c=[w,o];if(s){for(;t=t[n];)if((1===t.nodeType||a)&&e(t,i,s))return!0}else for(;t=t[n];)if(1===t.nodeType||a){if((r=(l=t[b]||(t[b]={}))[n])&&r[0]===w&&r[1]===o)return c[2]=r[2];if(l[n]=c,c[2]=e(t,i,s))return!0}}}function ge(e){return e.length>1?function(t,i,n){for(var a=e.length;a--;)if(!e[a](t,i,n))return!1;return!0}:e[0]}function ve(e,t,i,n,a){for(var o,s=[],r=0,l=e.length,c=null!=t;l>r;r++)(o=e[r])&&(!i||i(o,n,a))&&(s.push(o),c&&t.push(r));return s}function be(e,t,i,n,a,o){return n&&!n[b]&&(n=be(n)),a&&!a[b]&&(a=be(a,o)),ae(function(o,s,r,l){var c,d,u,h=[],p=[],f=s.length,m=o||function(e,t,i){for(var n=0,a=t.length;a>n;n++)ie(e,t[n],i);return i}(t||"*",r.nodeType?[r]:r,[]),g=!e||!o&&t?m:ve(m,h,e,r,l),v=i?a||(o?e:f||n)?[]:s:g;if(i&&i(g,v,r,l),n)for(c=ve(v,p),n(c,[],r,l),d=c.length;d--;)(u=c[d])&&(v[p[d]]=!(g[p[d]]=u));if(o){if(a||e){if(a){for(c=[],d=v.length;d--;)(u=v[d])&&c.push(g[d]=u);a(null,v=[],c,l)}for(d=v.length;d--;)(u=v[d])&&(c=a?j.call(o,u):h[d])>-1&&(o[c]=!(s[c]=u))}}else v=ve(v===s?v.splice(f,v.length):v),a?a(null,s,v,l):E.apply(s,v)})}function ye(e){for(var t,i,a,o=e.length,s=n.relative[e[0].type],l=s||n.relative[" "],c=s?1:0,d=me(function(e){return e===t},l,!0),u=me(function(e){return j.call(t,e)>-1},l,!0),h=[function(e,i,n){return!s&&(n||i!==r)||((t=i).nodeType?d(e,i,n):u(e,i,n))}];o>c;c++)if(i=n.relative[e[c].type])h=[me(ge(h),i)];else{if((i=n.filter[e[c].type].apply(null,e[c].matches))[b]){for(a=++c;o>a&&!n.relative[e[a].type];a++);return be(c>1&&ge(h),c>1&&fe(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(q,"$1"),i,a>c&&ye(e.slice(c,a)),o>a&&ye(e=e.slice(a)),o>a&&fe(e))}h.push(i)}return ge(h)}function we(e,t){var i=t.length>0,a=e.length>0,o=function(o,s,l,c,d){var h,p,f,m=0,g="0",v=o&&[],b=[],y=r,x=o||a&&n.find.TAG("*",d),k=w+=null==y?1:Math.random()||.1,C=x.length;for(d&&(r=s!==u&&s);g!==C&&null!=(h=x[g]);g++){if(a&&h){for(p=0;f=e[p++];)if(f(h,s,l)){c.push(h);break}d&&(w=k)}i&&((h=!f&&h)&&m--,o&&v.push(h))}if(m+=g,i&&g!==m){for(p=0;f=t[p++];)f(v,b,s,l);if(o){if(m>0)for(;g--;)v[g]||b[g]||(b[g]=I.call(c));b=ve(b)}E.apply(c,b),d&&!o&&b.length>0&&m+t.length>1&&ie.uniqueSort(c)}return d&&(w=k,r=y),v};return i?ae(o):o}function xe(e,t,a,o){var r,l,c,d,u,h=pe(e);if(!o&&1===h.length){if((l=h[0]=h[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&i.getById&&9===t.nodeType&&p&&n.relative[l[1].type]){if(!(t=(n.find.ID(c.matches[0].replace(ee,te),t)||[])[0]))return a;e=e.slice(l.shift().value.length)}for(r=K.needsContext.test(e)?0:l.length;r--&&(c=l[r],!n.relative[d=c.type]);)if((u=n.find[d])&&(o=u(c.matches[0].replace(ee,te),Q.test(l[0].type)&&ue(t.parentNode)||t))){if(l.splice(r,1),!(e=o.length&&fe(l)))return E.apply(a,o),a;break}}return s(e,h)(o,t,!p,a,Q.test(e)&&ue(t.parentNode)||t),a}return he.prototype=n.filters=n.pseudos,n.setFilters=new he,s=ie.compile=function(e,t){var i,n=[],a=[],o=_[e+" "];if(!o){for(t||(t=pe(e)),i=t.length;i--;)(o=ye(t[i]))[b]?n.push(o):a.push(o);o=_(e,we(a,n))}return o},i.sortStable=b.split("").sort(T).join("")===b,i.detectDuplicates=!!c,d(),i.sortDetached=oe(function(e){return 1&e.compareDocumentPosition(u.createElement("div"))}),oe(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||se("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),i.attributes&&oe(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||se("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),oe(function(e){return null==e.getAttribute("disabled")})||se(P,function(e,t,i){var n;return i?void 0:!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),ie}(e);p.find=y,p.expr=y.selectors,p.expr[":"]=p.expr.pseudos,p.unique=y.uniqueSort,p.text=y.getText,p.isXMLDoc=y.isXML,p.contains=y.contains;var w=p.expr.match.needsContext,x=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^.[^:#\[\.,]*$/;function C(e,t,i){if(p.isFunction(t))return p.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return p.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(k.test(t))return p.filter(t,e,i);t=p.filter(t,e)}return p.grep(e,function(e){return p.inArray(e,t)>=0!==i})}p.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?p.find.matchesSelector(n,e)?[n]:[]:p.find.matches(e,p.grep(t,function(e){return 1===e.nodeType}))},p.fn.extend({find:function(e){var t,i=[],n=this,a=n.length;if("string"!=typeof e)return this.pushStack(p(e).filter(function(){for(t=0;a>t;t++)if(p.contains(n[t],this))return!0}));for(t=0;a>t;t++)p.find(e,n[t],i);return(i=this.pushStack(a>1?p.unique(i):i)).selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(C(this,e||[],!1))},not:function(e){return this.pushStack(C(this,e||[],!0))},is:function(e){return!!C(this,"string"==typeof e&&w.test(e)?p(e):e||[],!1).length}});var _,T=e.document,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,z=p.fn.init=function(e,t){var i,n;if(!e)return this;if("string"==typeof e){if(!(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:D.exec(e))||!i[1]&&t)return!t||t.jquery?(t||_).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof p?t[0]:t,p.merge(this,p.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:T,!0)),x.test(i[1])&&p.isPlainObject(t))for(i in t)p.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}if((n=T.getElementById(i[2]))&&n.parentNode){if(n.id!==i[2])return _.find(e);this.length=1,this[0]=n}return this.context=T,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):p.isFunction(e)?void 0!==_.ready?_.ready(e):e(p):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),p.makeArray(e,this))};z.prototype=p.fn,_=p(T);var A=/^(?:parents|prev(?:Until|All))/,S={children:!0,contents:!0,next:!0,prev:!0};function I(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}p.extend({dir:function(e,t,i){for(var n=[],a=e[t];a&&9!==a.nodeType&&(void 0===i||1!==a.nodeType||!p(a).is(i));)1===a.nodeType&&n.push(a),a=a[t];return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),p.fn.extend({has:function(e){var t,i=p(e,this),n=i.length;return this.filter(function(){for(t=0;n>t;t++)if(p.contains(this,i[t]))return!0})},closest:function(e,t){for(var i,n=0,a=this.length,o=[],s=w.test(e)||"string"!=typeof e?p(e,t||this.context):0;a>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&p.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(o.length>1?p.unique(o):o)},index:function(e){return e?"string"==typeof e?p.inArray(this[0],p(e)):p.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(p.unique(p.merge(this.get(),p(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),p.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return p.dir(e,"parentNode")},parentsUntil:function(e,t,i){return p.dir(e,"parentNode",i)},next:function(e){return I(e,"nextSibling")},prev:function(e){return I(e,"previousSibling")},nextAll:function(e){return p.dir(e,"nextSibling")},prevAll:function(e){return p.dir(e,"previousSibling")},nextUntil:function(e,t,i){return p.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return p.dir(e,"previousSibling",i)},siblings:function(e){return p.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return p.sibling(e.firstChild)},contents:function(e){return p.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:p.merge([],e.childNodes)}},function(e,t){p.fn[e]=function(i,n){var a=p.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(a=p.filter(n,a)),this.length>1&&(S[e]||(a=p.unique(a)),A.test(e)&&(a=a.reverse())),this.pushStack(a)}});var M,E=/\S+/g,O={};function j(){T.addEventListener?(T.removeEventListener("DOMContentLoaded",P,!1),e.removeEventListener("load",P,!1)):(T.detachEvent("onreadystatechange",P),e.detachEvent("onload",P))}function P(){(T.addEventListener||"load"===event.type||"complete"===T.readyState)&&(j(),p.ready())}p.Callbacks=function(e){e="string"==typeof e?O[e]||function(e){var t=O[e]={};return p.each(e.match(E)||[],function(e,i){t[i]=!0}),t}(e):p.extend({},e);var t,i,n,a,o,s,r=[],l=!e.once&&[],c=function(u){for(i=e.memory&&u,n=!0,o=s||0,s=0,a=r.length,t=!0;r&&a>o;o++)if(!1===r[o].apply(u[0],u[1])&&e.stopOnFalse){i=!1;break}t=!1,r&&(l?l.length&&c(l.shift()):i?r=[]:d.disable())},d={add:function(){if(r){var n=r.length;!function t(i){p.each(i,function(i,n){var a=p.type(n);"function"===a?e.unique&&d.has(n)||r.push(n):n&&n.length&&"string"!==a&&t(n)})}(arguments),t?a=r.length:i&&(s=n,c(i))}return this},remove:function(){return r&&p.each(arguments,function(e,i){for(var n;(n=p.inArray(i,r,n))>-1;)r.splice(n,1),t&&(a>=n&&a--,o>=n&&o--)}),this},has:function(e){return e?p.inArray(e,r)>-1:!(!r||!r.length)},empty:function(){return r=[],a=0,this},disable:function(){return r=l=i=void 0,this},disabled:function(){return!r},lock:function(){return l=void 0,i||d.disable(),this},locked:function(){return!l},fireWith:function(e,i){return!r||n&&!l||(i=[e,(i=i||[]).slice?i.slice():i],t?l.push(i):c(i)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},p.extend({Deferred:function(e){var t=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var e=arguments;return p.Deferred(function(i){p.each(t,function(t,o){var s=p.isFunction(e[t])&&e[t];a[o[1]](function(){var e=s&&s.apply(this,arguments);e&&p.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o[0]+"With"](this===n?i.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?p.extend(e,n):n}},a={};return n.pipe=n.then,p.each(t,function(e,o){var s=o[2],r=o[3];n[o[1]]=s.add,r&&s.add(function(){i=r},t[1^e][2].disable,t[2][2].lock),a[o[0]]=function(){return a[o[0]+"With"](this===a?n:this,arguments),this},a[o[0]+"With"]=s.fireWith}),n.promise(a),e&&e.call(a,a),a},when:function(e){var t,i,a,o=0,s=n.call(arguments),r=s.length,l=1!==r||e&&p.isFunction(e.promise)?r:0,c=1===l?e:p.Deferred(),d=function(e,i,a){return function(o){i[e]=this,a[e]=arguments.length>1?n.call(arguments):o,a===t?c.notifyWith(i,a):--l||c.resolveWith(i,a)}};if(r>1)for(t=new Array(r),i=new Array(r),a=new Array(r);r>o;o++)s[o]&&p.isFunction(s[o].promise)?s[o].promise().done(d(o,a,s)).fail(c.reject).progress(d(o,i,t)):--l;return l||c.resolveWith(a,s),c.promise()}}),p.fn.ready=function(e){return p.ready.promise().done(e),this},p.extend({isReady:!1,readyWait:1,holdReady:function(e){e?p.readyWait++:p.ready(!0)},ready:function(e){if(!0===e?! --p.readyWait:!p.isReady){if(!T.body)return setTimeout(p.ready);p.isReady=!0,!0!==e&&--p.readyWait>0||(M.resolveWith(T,[p]),p.fn.trigger&&p(T).trigger("ready").off("ready"))}}}),p.ready.promise=function(t){if(!M)if(M=p.Deferred(),"complete"===T.readyState)setTimeout(p.ready);else if(T.addEventListener)T.addEventListener("DOMContentLoaded",P,!1),e.addEventListener("load",P,!1);else{T.attachEvent("onreadystatechange",P),e.attachEvent("onload",P);var i=!1;try{i=null==e.frameElement&&T.documentElement}catch(e){}i&&i.doScroll&&function e(){if(!p.isReady){try{i.doScroll("left")}catch(t){return setTimeout(e,50)}j(),p.ready()}}()}return M.promise(t)};var F,H="undefined";for(F in p(u))break;u.ownLast="0"!==F,u.inlineBlockNeedsLayout=!1,p(function(){var e,t,i=T.getElementsByTagName("body")[0];i&&((e=T.createElement("div")).style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",t=T.createElement("div"),i.appendChild(e).appendChild(t),typeof t.style.zoom!==H&&(t.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(u.inlineBlockNeedsLayout=3===t.offsetWidth)&&(i.style.zoom=1)),i.removeChild(e),e=t=null)}),function(){var e=T.createElement("div");if(null==u.deleteExpando){u.deleteExpando=!0;try{delete e.test}catch(e){u.deleteExpando=!1}}e=null}(),p.acceptData=function(e){var t=p.noData[(e.nodeName+" ").toLowerCase()],i=+e.nodeType||1;return(1===i||9===i)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,U=/([A-Z])/g;function R(e,t,i){if(void 0===i&&1===e.nodeType){var n="data-"+t.replace(U,"-$1").toLowerCase();if("string"==typeof(i=e.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:N.test(i)?p.parseJSON(i):i)}catch(e){}p.data(e,t,i)}else i=void 0}return i}function q(e){var t;for(t in e)if(("data"!==t||!p.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function L(e,t,n,a){if(p.acceptData(e)){var o,s,r=p.expando,l=e.nodeType,c=l?p.cache:e,d=l?e[r]:e[r]&&r;if(d&&c[d]&&(a||c[d].data)||void 0!==n||"string"!=typeof t)return d||(d=l?e[r]=i.pop()||p.guid++:r),c[d]||(c[d]=l?{}:{toJSON:p.noop}),("object"==typeof t||"function"==typeof t)&&(a?c[d]=p.extend(c[d],t):c[d].data=p.extend(c[d].data,t)),s=c[d],a||(s.data||(s.data={}),s=s.data),void 0!==n&&(s[p.camelCase(t)]=n),"string"==typeof t?null==(o=s[t])&&(o=s[p.camelCase(t)]):o=s,o}}function W(e,t,i){if(p.acceptData(e)){var n,a,o=e.nodeType,s=o?p.cache:e,r=o?e[p.expando]:p.expando;if(s[r]){if(t&&(n=i?s[r]:s[r].data)){p.isArray(t)?t=t.concat(p.map(t,p.camelCase)):t in n?t=[t]:t=(t=p.camelCase(t))in n?[t]:t.split(" "),a=t.length;for(;a--;)delete n[t[a]];if(i?!q(n):!p.isEmptyObject(n))return}(i||(delete s[r].data,q(s[r])))&&(o?p.cleanData([e],!0):u.deleteExpando||s!=s.window?delete s[r]:s[r]=null)}}}p.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?p.cache[e[p.expando]]:e[p.expando])&&!q(e)},data:function(e,t,i){return L(e,t,i)},removeData:function(e,t){return W(e,t)},_data:function(e,t,i){return L(e,t,i,!0)},_removeData:function(e,t){return W(e,t,!0)}}),p.fn.extend({data:function(e,t){var i,n,a,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(a=p.data(o),1===o.nodeType&&!p._data(o,"parsedAttrs"))){for(i=s.length;i--;)0===(n=s[i].name).indexOf("data-")&&R(o,n=p.camelCase(n.slice(5)),a[n]);p._data(o,"parsedAttrs",!0)}return a}return"object"==typeof e?this.each(function(){p.data(this,e)}):arguments.length>1?this.each(function(){p.data(this,e,t)}):o?R(o,e,p.data(o,e)):void 0},removeData:function(e){return this.each(function(){p.removeData(this,e)})}}),p.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=p._data(e,t),i&&(!n||p.isArray(i)?n=p._data(e,t,p.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=p.queue(e,t),n=i.length,a=i.shift(),o=p._queueHooks(e,t);"inprogress"===a&&(a=i.shift(),n--),a&&("fx"===t&&i.unshift("inprogress"),delete o.stop,a.call(e,function(){p.dequeue(e,t)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return p._data(e,i)||p._data(e,i,{empty:p.Callbacks("once memory").add(function(){p._removeData(e,t+"queue"),p._removeData(e,i)})})}}),p.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?p.queue(this[0],e):void 0===t?this:this.each(function(){var i=p.queue(this,e,t);p._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&p.dequeue(this,e)})},dequeue:function(e){return this.each(function(){p.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,a=p.Deferred(),o=this,s=this.length,r=function(){--n||a.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(i=p._data(o[s],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(r));return r(),a.promise(t)}});var B=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,$=["Top","Right","Bottom","Left"],Y=function(e,t){return e=t||e,"none"===p.css(e,"display")||!p.contains(e.ownerDocument,e)},K=p.access=function(e,t,i,n,a,o,s){var r=0,l=e.length,c=null==i;if("object"===p.type(i))for(r in a=!0,i)p.access(e,t,r,i[r],!0,o,s);else if(void 0!==n&&(a=!0,p.isFunction(n)||(s=!0),c&&(s?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(p(e),i)})),t))for(;l>r;r++)t(e[r],i,s?n:n.call(e[r],r,t(e[r],i)));return a?e:c?t.call(e):l?t(e[0],i):o},V=/^(?:checkbox|radio)$/i;!function(){var e=T.createDocumentFragment(),t=T.createElement("div"),i=T.createElement("input");if(t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a>",u.leadingWhitespace=3===t.firstChild.nodeType,u.tbody=!t.getElementsByTagName("tbody").length,u.htmlSerialize=!!t.getElementsByTagName("link").length,u.html5Clone="<:nav></:nav>"!==T.createElement("nav").cloneNode(!0).outerHTML,i.type="checkbox",i.checked=!0,e.appendChild(i),u.appendChecked=i.checked,t.innerHTML="<textarea>x</textarea>",u.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,e.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",u.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,u.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){u.noCloneEvent=!1}),t.cloneNode(!0).click()),null==u.deleteExpando){u.deleteExpando=!0;try{delete t.test}catch(e){u.deleteExpando=!1}}e=t=i=null}(),function(){var t,i,n=T.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})i="on"+t,(u[t+"Bubbles"]=i in e)||(n.setAttribute(i,"t"),u[t+"Bubbles"]=!1===n.attributes[i].expando);n=null}();var X=/^(?:input|select|textarea)$/i,G=/^key/,J=/^(?:mouse|contextmenu)|click/,Q=/^(?:focusinfocus|focusoutblur)$/,Z=/^([^.]*)(?:\.(.+)|)$/;function ee(){return!0}function te(){return!1}function ie(){try{return T.activeElement}catch(e){}}function ne(e){var t=ae.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}p.event={global:{},add:function(e,t,i,n,a){var o,s,r,l,c,d,u,h,f,m,g,v=p._data(e);if(v){for(i.handler&&(i=(l=i).handler,a=l.selector),i.guid||(i.guid=p.guid++),(s=v.events)||(s=v.events={}),(d=v.handle)||(d=v.handle=function(e){return typeof p===H||e&&p.event.triggered===e.type?void 0:p.event.dispatch.apply(d.elem,arguments)},d.elem=e),r=(t=(t||"").match(E)||[""]).length;r--;)f=g=(o=Z.exec(t[r])||[])[1],m=(o[2]||"").split(".").sort(),f&&(c=p.event.special[f]||{},f=(a?c.delegateType:c.bindType)||f,c=p.event.special[f]||{},u=p.extend({type:f,origType:g,data:n,handler:i,guid:i.guid,selector:a,needsContext:a&&p.expr.match.needsContext.test(a),namespace:m.join(".")},l),(h=s[f])||((h=s[f]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,n,m,d)||(e.addEventListener?e.addEventListener(f,d,!1):e.attachEvent&&e.attachEvent("on"+f,d))),c.add&&(c.add.call(e,u),u.handler.guid||(u.handler.guid=i.guid)),a?h.splice(h.delegateCount++,0,u):h.push(u),p.event.global[f]=!0);e=null}},remove:function(e,t,i,n,a){var o,s,r,l,c,d,u,h,f,m,g,v=p.hasData(e)&&p._data(e);if(v&&(d=v.events)){for(c=(t=(t||"").match(E)||[""]).length;c--;)if(f=g=(r=Z.exec(t[c])||[])[1],m=(r[2]||"").split(".").sort(),f){for(u=p.event.special[f]||{},h=d[f=(n?u.delegateType:u.bindType)||f]||[],r=r[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=h.length;o--;)s=h[o],!a&&g!==s.origType||i&&i.guid!==s.guid||r&&!r.test(s.namespace)||n&&n!==s.selector&&("**"!==n||!s.selector)||(h.splice(o,1),s.selector&&h.delegateCount--,u.remove&&u.remove.call(e,s));l&&!h.length&&(u.teardown&&!1!==u.teardown.call(e,m,v.handle)||p.removeEvent(e,f,v.handle),delete d[f])}else for(f in d)p.event.remove(e,f+t[c],i,n,!0);p.isEmptyObject(d)&&(delete v.handle,p._removeData(e,"events"))}},trigger:function(t,i,n,a){var o,s,r,l,d,u,h,f=[n||T],m=c.call(t,"type")?t.type:t,g=c.call(t,"namespace")?t.namespace.split("."):[];if(r=u=n=n||T,3!==n.nodeType&&8!==n.nodeType&&!Q.test(m+p.event.triggered)&&(m.indexOf(".")>=0&&(g=m.split("."),m=g.shift(),g.sort()),s=m.indexOf(":")<0&&"on"+m,(t=t[p.expando]?t:new p.Event(m,"object"==typeof t&&t)).isTrigger=a?2:3,t.namespace=g.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:p.makeArray(i,[t]),d=p.event.special[m]||{},a||!d.trigger||!1!==d.trigger.apply(n,i))){if(!a&&!d.noBubble&&!p.isWindow(n)){for(l=d.delegateType||m,Q.test(l+m)||(r=r.parentNode);r;r=r.parentNode)f.push(r),u=r;u===(n.ownerDocument||T)&&f.push(u.defaultView||u.parentWindow||e)}for(h=0;(r=f[h++])&&!t.isPropagationStopped();)t.type=h>1?l:d.bindType||m,(o=(p._data(r,"events")||{})[t.type]&&p._data(r,"handle"))&&o.apply(r,i),(o=s&&r[s])&&o.apply&&p.acceptData(r)&&(t.result=o.apply(r,i),!1===t.result&&t.preventDefault());if(t.type=m,!a&&!t.isDefaultPrevented()&&(!d._default||!1===d._default.apply(f.pop(),i))&&p.acceptData(n)&&s&&n[m]&&!p.isWindow(n)){(u=n[s])&&(n[s]=null),p.event.triggered=m;try{n[m]()}catch(e){}p.event.triggered=void 0,u&&(n[s]=u)}return t.result}},dispatch:function(e){e=p.event.fix(e);var t,i,a,o,s,r=[],l=n.call(arguments),c=(p._data(this,"events")||{})[e.type]||[],d=p.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,e)){for(r=p.event.handlers.call(this,e,c),t=0;(o=r[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,s=0;(a=o.handlers[s++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(a.namespace))&&(e.handleObj=a,e.data=a.data,void 0!==(i=((p.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,l))&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,a,o,s=[],r=t.delegateCount,l=e.target;if(r&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(a=[],o=0;r>o;o++)void 0===a[i=(n=t[o]).selector+" "]&&(a[i]=n.needsContext?p(i,this).index(l)>=0:p.find(i,this,null,[l]).length),a[i]&&a.push(n);a.length&&s.push({elem:l,handlers:a})}return r<t.length&&s.push({elem:this,handlers:t.slice(r)}),s},fix:function(e){if(e[p.expando])return e;var t,i,n,a=e.type,o=e,s=this.fixHooks[a];for(s||(this.fixHooks[a]=s=J.test(a)?this.mouseHooks:G.test(a)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,e=new p.Event(o),t=n.length;t--;)e[i=n[t]]=o[i];return e.target||(e.target=o.srcElement||T),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,a,o=t.button,s=t.fromElement;return null==e.pageX&&null!=t.clientX&&(a=(n=e.target.ownerDocument||T).documentElement,i=n.body,e.pageX=t.clientX+(a&&a.scrollLeft||i&&i.scrollLeft||0)-(a&&a.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(a&&a.scrollTop||i&&i.scrollTop||0)-(a&&a.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?t.toElement:s),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ie()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===ie()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return p.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return p.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var a=p.extend(new p.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?p.event.trigger(a,null,t):p.event.dispatch.call(t,a),a.isDefaultPrevented()&&i.preventDefault()}},p.removeEvent=T.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&(typeof e[n]===H&&(e[n]=null),e.detachEvent(n,i))},p.Event=function(e,t){return this instanceof p.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&(!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault())?ee:te):this.type=e,t&&p.extend(this,t),this.timeStamp=e&&e.timeStamp||p.now(),void(this[p.expando]=!0)):new p.Event(e,t)},p.Event.prototype={isDefaultPrevented:te,isPropagationStopped:te,isImmediatePropagationStopped:te,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ee,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ee,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ee,this.stopPropagation()}},p.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){p.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=e.relatedTarget,a=e.handleObj;return(!n||n!==this&&!p.contains(this,n))&&(e.type=a.origType,i=a.handler.apply(this,arguments),e.type=t),i}}}),u.submitBubbles||(p.event.special.submit={setup:function(){return!p.nodeName(this,"form")&&void p.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,i=p.nodeName(t,"input")||p.nodeName(t,"button")?t.form:void 0;i&&!p._data(i,"submitBubbles")&&(p.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),p._data(i,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&p.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return!p.nodeName(this,"form")&&void p.event.remove(this,"._submit")}}),u.changeBubbles||(p.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(p.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),p.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),p.event.simulate("change",this,e,!0)})),!1):void p.event.add(this,"beforeactivate._change",function(e){var t=e.target;X.test(t.nodeName)&&!p._data(t,"changeBubbles")&&(p.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||p.event.simulate("change",this.parentNode,e,!0)}),p._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return p.event.remove(this,"._change"),!X.test(this.nodeName)}}),u.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){p.event.simulate(t,e.target,p.event.fix(e),!0)};p.event.special[t]={setup:function(){var n=this.ownerDocument||this,a=p._data(n,t);a||n.addEventListener(e,i,!0),p._data(n,t,(a||0)+1)},teardown:function(){var n=this.ownerDocument||this,a=p._data(n,t)-1;a?p._data(n,t,a):(n.removeEventListener(e,i,!0),p._removeData(n,t))}}}),p.fn.extend({on:function(e,t,i,n,a){var o,s;if("object"==typeof e){for(o in"string"!=typeof t&&(i=i||t,t=void 0),e)this.on(o,t,i,e[o],a);return this}if(null==i&&null==n?(n=t,i=t=void 0):null==n&&("string"==typeof t?(n=i,i=void 0):(n=i,i=t,t=void 0)),!1===n)n=te;else if(!n)return this;return 1===a&&(s=n,n=function(e){return p().off(e),s.apply(this,arguments)},n.guid=s.guid||(s.guid=p.guid++)),this.each(function(){p.event.add(this,e,n,i,t)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){var n,a;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,p(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return(!1===t||"function"==typeof t)&&(i=t,t=void 0),!1===i&&(i=te),this.each(function(){p.event.remove(this,e,i,t)})},trigger:function(e,t){return this.each(function(){p.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?p.event.trigger(e,t,i,!0):void 0}});var ae="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",oe=/ jQuery\d+="(?:null|\d+)"/g,se=new RegExp("<(?:"+ae+")[\\s/>]","i"),re=/^\s+/,le=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ce=/<([\w:]+)/,de=/<tbody/i,ue=/<|&#?\w+;/,he=/<(?:script|style|link)/i,pe=/checked\s*(?:[^=]|=\s*.checked.)/i,fe=/^$|\/(?:java|ecma)script/i,me=/^true\/(.*)/,ge=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ve={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:u.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},be=ne(T).appendChild(T.createElement("div"));function ye(e,t){var i,n,a=0,o=typeof e.getElementsByTagName!==H?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==H?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],i=e.childNodes||e;null!=(n=i[a]);a++)!t||p.nodeName(n,t)?o.push(n):p.merge(o,ye(n,t));return void 0===t||t&&p.nodeName(e,t)?p.merge([e],o):o}function we(e){V.test(e.type)&&(e.defaultChecked=e.checked)}function xe(e,t){return p.nodeName(e,"table")&&p.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ke(e){return e.type=(null!==p.find.attr(e,"type"))+"/"+e.type,e}function Ce(e){var t=me.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _e(e,t){for(var i,n=0;null!=(i=e[n]);n++)p._data(i,"globalEval",!t||p._data(t[n],"globalEval"))}function Te(e,t){if(1===t.nodeType&&p.hasData(e)){var i,n,a,o=p._data(e),s=p._data(t,o),r=o.events;if(r)for(i in delete s.handle,s.events={},r)for(n=0,a=r[i].length;a>n;n++)p.event.add(t,i,r[i][n]);s.data&&(s.data=p.extend({},s.data))}}function De(e,t){var i,n,a;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!u.noCloneEvent&&t[p.expando]){for(n in(a=p._data(t)).events)p.removeEvent(t,n,a.handle);t.removeAttribute(p.expando)}"script"===i&&t.text!==e.text?(ke(t).text=e.text,Ce(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),u.html5Clone&&e.innerHTML&&!p.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&V.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}}ve.optgroup=ve.option,ve.tbody=ve.tfoot=ve.colgroup=ve.caption=ve.thead,ve.th=ve.td,p.extend({clone:function(e,t,i){var n,a,o,s,r,l=p.contains(e.ownerDocument,e);if(u.html5Clone||p.isXMLDoc(e)||!se.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(be.innerHTML=e.outerHTML,be.removeChild(o=be.firstChild)),!(u.noCloneEvent&&u.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||p.isXMLDoc(e)))for(n=ye(o),r=ye(e),s=0;null!=(a=r[s]);++s)n[s]&&De(a,n[s]);if(t)if(i)for(r=r||ye(e),n=n||ye(o),s=0;null!=(a=r[s]);s++)Te(a,n[s]);else Te(e,o);return(n=ye(o,"script")).length>0&&_e(n,!l&&ye(e,"script")),n=r=a=null,o},buildFragment:function(e,t,i,n){for(var a,o,s,r,l,c,d,h=e.length,f=ne(t),m=[],g=0;h>g;g++)if((o=e[g])||0===o)if("object"===p.type(o))p.merge(m,o.nodeType?[o]:o);else if(ue.test(o)){for(r=r||f.appendChild(t.createElement("div")),l=(ce.exec(o)||["",""])[1].toLowerCase(),d=ve[l]||ve._default,r.innerHTML=d[1]+o.replace(le,"<$1></$2>")+d[2],a=d[0];a--;)r=r.lastChild;if(!u.leadingWhitespace&&re.test(o)&&m.push(t.createTextNode(re.exec(o)[0])),!u.tbody)for(a=(o="table"!==l||de.test(o)?"<table>"!==d[1]||de.test(o)?0:r:r.firstChild)&&o.childNodes.length;a--;)p.nodeName(c=o.childNodes[a],"tbody")&&!c.childNodes.length&&o.removeChild(c);for(p.merge(m,r.childNodes),r.textContent="";r.firstChild;)r.removeChild(r.firstChild);r=f.lastChild}else m.push(t.createTextNode(o));for(r&&f.removeChild(r),u.appendChecked||p.grep(ye(m,"input"),we),g=0;o=m[g++];)if((!n||-1===p.inArray(o,n))&&(s=p.contains(o.ownerDocument,o),r=ye(f.appendChild(o),"script"),s&&_e(r),i))for(a=0;o=r[a++];)fe.test(o.type||"")&&i.push(o);return r=null,f},cleanData:function(e,t){for(var n,a,o,s,r=0,l=p.expando,c=p.cache,d=u.deleteExpando,h=p.event.special;null!=(n=e[r]);r++)if((t||p.acceptData(n))&&(s=(o=n[l])&&c[o])){if(s.events)for(a in s.events)h[a]?p.event.remove(n,a):p.removeEvent(n,a,s.handle);c[o]&&(delete c[o],d?delete n[l]:typeof n.removeAttribute!==H?n.removeAttribute(l):n[l]=null,i.push(o))}}}),p.fn.extend({text:function(e){return K(this,function(e){return void 0===e?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||T).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||xe(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=xe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?p.filter(e,this):this,a=0;null!=(i=n[a]);a++)t||1!==i.nodeType||p.cleanData(ye(i)),i.parentNode&&(t&&p.contains(i.ownerDocument,i)&&_e(ye(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&p.cleanData(ye(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&p.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return p.clone(this,e,t)})},html:function(e){return K(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(oe,""):void 0;if(!("string"!=typeof e||he.test(e)||!u.htmlSerialize&&se.test(e)||!u.leadingWhitespace&&re.test(e)||ve[(ce.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(le,"<$1></$2>");try{for(;n>i;i++)1===(t=this[i]||{}).nodeType&&(p.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,p.cleanData(ye(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=a.apply([],e);var i,n,o,s,r,l,c=0,d=this.length,h=this,f=d-1,m=e[0],g=p.isFunction(m);if(g||d>1&&"string"==typeof m&&!u.checkClone&&pe.test(m))return this.each(function(i){var n=h.eq(i);g&&(e[0]=m.call(this,i,n.html())),n.domManip(e,t)});if(d&&(i=(l=p.buildFragment(e,this[0].ownerDocument,!1,this)).firstChild,1===l.childNodes.length&&(l=i),i)){for(o=(s=p.map(ye(l,"script"),ke)).length;d>c;c++)n=l,c!==f&&(n=p.clone(n,!0,!0),o&&p.merge(s,ye(n,"script"))),t.call(this[c],n,c);if(o)for(r=s[s.length-1].ownerDocument,p.map(s,Ce),c=0;o>c;c++)n=s[c],fe.test(n.type||"")&&!p._data(n,"globalEval")&&p.contains(r,n)&&(n.src?p._evalUrl&&p._evalUrl(n.src):p.globalEval((n.text||n.textContent||n.innerHTML||"").replace(ge,"")));l=i=null}return this}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){p.fn[e]=function(e){for(var i,n=0,a=[],s=p(e),r=s.length-1;r>=n;n++)i=n===r?this:this.clone(!0),p(s[n])[t](i),o.apply(a,i.get());return this.pushStack(a)}});var ze,Ae={};function Se(t,i){var n=p(i.createElement(t)).appendTo(i.body),a=e.getDefaultComputedStyle?e.getDefaultComputedStyle(n[0]).display:p.css(n[0],"display");return n.detach(),a}function Ie(e){var t=T,i=Ae[e];return i||("none"!==(i=Se(e,t))&&i||((t=((ze=(ze||p("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentWindow||ze[0].contentDocument).document).write(),t.close(),i=Se(e,t),ze.detach()),Ae[e]=i),i}!function(){var e,t,i=T.createElement("div");i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(e=i.getElementsByTagName("a")[0]).style.cssText="float:left;opacity:.5",u.opacity=/^0.5/.test(e.style.opacity),u.cssFloat=!!e.style.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",u.clearCloneStyle="content-box"===i.style.backgroundClip,e=i=null,u.shrinkWrapBlocks=function(){var e,i,n;if(null==t){if(!(e=T.getElementsByTagName("body")[0]))return;i=T.createElement("div"),n=T.createElement("div"),e.appendChild(i).appendChild(n),t=!1,typeof n.style.zoom!==H&&(n.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0;width:1px;padding:1px;zoom:1",n.innerHTML="<div></div>",n.firstChild.style.width="5px",t=3!==n.offsetWidth),e.removeChild(i),e=i=n=null}return t}}();var Me,Ee,Oe=/^margin/,je=new RegExp("^("+B+")(?!px)[a-z%]+$","i"),Pe=/^(top|right|bottom|left)$/;function Fe(e,t){return{get:function(){var i=e();if(null!=i)return i?void delete this.get:(this.get=t).apply(this,arguments)}}}e.getComputedStyle?(Me=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},Ee=function(e,t,i){var n,a,o,s,r=e.style;return s=(i=i||Me(e))?i.getPropertyValue(t)||i[t]:void 0,i&&(""!==s||p.contains(e.ownerDocument,e)||(s=p.style(e,t)),je.test(s)&&Oe.test(t)&&(n=r.width,a=r.minWidth,o=r.maxWidth,r.minWidth=r.maxWidth=r.width=s,s=i.width,r.width=n,r.minWidth=a,r.maxWidth=o)),void 0===s?s:s+""}):T.documentElement.currentStyle&&(Me=function(e){return e.currentStyle},Ee=function(e,t,i){var n,a,o,s,r=e.style;return null==(s=(i=i||Me(e))?i[t]:void 0)&&r&&r[t]&&(s=r[t]),je.test(s)&&!Pe.test(t)&&(n=r.left,(o=(a=e.runtimeStyle)&&a.left)&&(a.left=e.currentStyle.left),r.left="fontSize"===t?"1em":s,s=r.pixelLeft+"px",r.left=n,o&&(a.left=o)),void 0===s?s:s+""||"auto"}),function(){var t,i,n,a,o,s,r=T.createElement("div"),l="border:0;width:0;height:0;position:absolute;top:0;left:-9999px";function c(){var t,i,r=T.getElementsByTagName("body")[0];r&&(t=T.createElement("div"),i=T.createElement("div"),t.style.cssText=l,r.appendChild(t).appendChild(i),i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",p.swap(r,null!=r.style.zoom?{zoom:1}:{},function(){n=4===i.offsetWidth}),a=!0,o=!1,s=!0,e.getComputedStyle&&(o="1%"!==(e.getComputedStyle(i,null)||{}).top,a="4px"===(e.getComputedStyle(i,null)||{width:"4px"}).width),r.removeChild(t),i=r=null)}r.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(t=r.getElementsByTagName("a")[0]).style.cssText="float:left;opacity:.5",u.opacity=/^0.5/.test(t.style.opacity),u.cssFloat=!!t.style.cssFloat,r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",u.clearCloneStyle="content-box"===r.style.backgroundClip,t=r=null,p.extend(u,{reliableHiddenOffsets:function(){if(null!=i)return i;var e,t,n,a=T.createElement("div"),o=T.getElementsByTagName("body")[0];return o?(a.setAttribute("className","t"),a.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(e=T.createElement("div")).style.cssText=l,o.appendChild(e).appendChild(a),a.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(t=a.getElementsByTagName("td"))[0].style.cssText="padding:0;margin:0;border:0;display:none",n=0===t[0].offsetHeight,t[0].style.display="",t[1].style.display="none",i=n&&0===t[0].offsetHeight,o.removeChild(e),a=o=null,i):void 0},boxSizing:function(){return null==n&&c(),n},boxSizingReliable:function(){return null==a&&c(),a},pixelPosition:function(){return null==o&&c(),o},reliableMarginRight:function(){var t,i,n,a;if(null==s&&e.getComputedStyle){if(!(t=T.getElementsByTagName("body")[0]))return;i=T.createElement("div"),n=T.createElement("div"),i.style.cssText=l,t.appendChild(i).appendChild(n),(a=n.appendChild(T.createElement("div"))).style.cssText=n.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0",a.style.marginRight=a.style.width="0",n.style.width="1px",s=!parseFloat((e.getComputedStyle(a,null)||{}).marginRight),t.removeChild(i)}return s}})}(),p.swap=function(e,t,i,n){var a,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];for(o in a=i.apply(e,n||[]),t)e.style[o]=s[o];return a};var He=/alpha\([^)]*\)/i,Ne=/opacity\s*=\s*([^)]*)/,Ue=/^(none|table(?!-c[ea]).+)/,Re=new RegExp("^("+B+")(.*)$","i"),qe=new RegExp("^([+-])=("+B+")","i"),Le={position:"absolute",visibility:"hidden",display:"block"},We={letterSpacing:0,fontWeight:400},Be=["Webkit","O","Moz","ms"];function $e(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,a=Be.length;a--;)if((t=Be[a]+i)in e)return t;return n}function Ye(e,t){for(var i,n,a,o=[],s=0,r=e.length;r>s;s++)(n=e[s]).style&&(o[s]=p._data(n,"olddisplay"),i=n.style.display,t?(o[s]||"none"!==i||(n.style.display=""),""===n.style.display&&Y(n)&&(o[s]=p._data(n,"olddisplay",Ie(n.nodeName)))):o[s]||(a=Y(n),(i&&"none"!==i||!a)&&p._data(n,"olddisplay",a?i:p.css(n,"display"))));for(s=0;r>s;s++)(n=e[s]).style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?o[s]||"":"none"));return e}function Ke(e,t,i){var n=Re.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function Ve(e,t,i,n,a){for(var o=i===(n?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===i&&(s+=p.css(e,i+$[o],!0,a)),n?("content"===i&&(s-=p.css(e,"padding"+$[o],!0,a)),"margin"!==i&&(s-=p.css(e,"border"+$[o]+"Width",!0,a))):(s+=p.css(e,"padding"+$[o],!0,a),"padding"!==i&&(s+=p.css(e,"border"+$[o]+"Width",!0,a)));return s}function Xe(e,t,i){var n=!0,a="width"===t?e.offsetWidth:e.offsetHeight,o=Me(e),s=u.boxSizing()&&"border-box"===p.css(e,"boxSizing",!1,o);if(0>=a||null==a){if((0>(a=Ee(e,t,o))||null==a)&&(a=e.style[t]),je.test(a))return a;n=s&&(u.boxSizingReliable()||a===e.style[t]),a=parseFloat(a)||0}return a+Ve(e,t,i||(s?"border":"content"),n,o)+"px"}function Ge(e,t,i,n,a){return new Ge.prototype.init(e,t,i,n,a)}p.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ee(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:u.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,o,s,r=p.camelCase(t),l=e.style;if(t=p.cssProps[r]||(p.cssProps[r]=$e(l,r)),s=p.cssHooks[t]||p.cssHooks[r],void 0===i)return s&&"get"in s&&void 0!==(a=s.get(e,!1,n))?a:l[t];if("string"===(o=typeof i)&&(a=qe.exec(i))&&(i=(a[1]+1)*a[2]+parseFloat(p.css(e,t)),o="number"),null!=i&&i==i&&("number"!==o||p.cssNumber[r]||(i+="px"),u.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),!s||!("set"in s)||void 0!==(i=s.set(e,i,n))))try{l[t]="",l[t]=i}catch(e){}}},css:function(e,t,i,n){var a,o,s,r=p.camelCase(t);return t=p.cssProps[r]||(p.cssProps[r]=$e(e.style,r)),(s=p.cssHooks[t]||p.cssHooks[r])&&"get"in s&&(o=s.get(e,!0,i)),void 0===o&&(o=Ee(e,t,n)),"normal"===o&&t in We&&(o=We[t]),""===i||i?(a=parseFloat(o),!0===i||p.isNumeric(a)?a||0:o):o}}),p.each(["height","width"],function(e,t){p.cssHooks[t]={get:function(e,i,n){return i?0===e.offsetWidth&&Ue.test(p.css(e,"display"))?p.swap(e,Le,function(){return Xe(e,t,n)}):Xe(e,t,n):void 0},set:function(e,i,n){var a=n&&Me(e);return Ke(0,i,n?Ve(e,t,n,u.boxSizing()&&"border-box"===p.css(e,"boxSizing",!1,a),a):0)}}}),u.opacity||(p.cssHooks.opacity={get:function(e,t){return Ne.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,a=p.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=n&&n.filter||i.filter||"";i.zoom=1,(t>=1||""===t)&&""===p.trim(o.replace(He,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||n&&!n.filter)||(i.filter=He.test(o)?o.replace(He,a):o+" "+a)}}),p.cssHooks.marginRight=Fe(u.reliableMarginRight,function(e,t){return t?p.swap(e,{display:"inline-block"},Ee,[e,"marginRight"]):void 0}),p.each({margin:"",padding:"",border:"Width"},function(e,t){p.cssHooks[e+t]={expand:function(i){for(var n=0,a={},o="string"==typeof i?i.split(" "):[i];4>n;n++)a[e+$[n]+t]=o[n]||o[n-2]||o[0];return a}},Oe.test(e)||(p.cssHooks[e+t].set=Ke)}),p.fn.extend({css:function(e,t){return K(this,function(e,t,i){var n,a,o={},s=0;if(p.isArray(t)){for(n=Me(e),a=t.length;a>s;s++)o[t[s]]=p.css(e,t[s],!1,n);return o}return void 0!==i?p.style(e,t,i):p.css(e,t)},e,t,arguments.length>1)},show:function(){return Ye(this,!0)},hide:function(){return Ye(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Y(this)?p(this).show():p(this).hide()})}}),p.Tween=Ge,Ge.prototype={constructor:Ge,init:function(e,t,i,n,a,o){this.elem=e,this.prop=i,this.easing=a||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(p.cssNumber[i]?"":"px")},cur:function(){var e=Ge.propHooks[this.prop];return e&&e.get?e.get(this):Ge.propHooks._default.get(this)},run:function(e){var t,i=Ge.propHooks[this.prop];return this.pos=t=this.options.duration?p.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Ge.propHooks._default.set(this),this}},Ge.prototype.init.prototype=Ge.prototype,Ge.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=p.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){p.fx.step[e.prop]?p.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[p.cssProps[e.prop]]||p.cssHooks[e.prop])?p.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Ge.propHooks.scrollTop=Ge.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},p.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},p.fx=Ge.prototype.init,p.fx.step={};var Je,Qe,Ze=/^(?:toggle|show|hide)$/,et=new RegExp("^(?:([+-])=|)("+B+")([a-z%]*)$","i"),tt=/queueHooks$/,it=[function(e,t,i){var n,a,o,s,r,l,c,d,h=this,f={},m=e.style,g=e.nodeType&&Y(e),v=p._data(e,"fxshow");for(n in i.queue||(null==(r=p._queueHooks(e,"fx")).unqueued&&(r.unqueued=0,l=r.empty.fire,r.empty.fire=function(){r.unqueued||l()}),r.unqueued++,h.always(function(){h.always(function(){r.unqueued--,p.queue(e,"fx").length||r.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[m.overflow,m.overflowX,m.overflowY],c=p.css(e,"display"),d=Ie(e.nodeName),"none"===c&&(c=d),"inline"===c&&"none"===p.css(e,"float")&&(u.inlineBlockNeedsLayout&&"inline"!==d?m.zoom=1:m.display="inline-block")),i.overflow&&(m.overflow="hidden",u.shrinkWrapBlocks()||h.always(function(){m.overflow=i.overflow[0],m.overflowX=i.overflow[1],m.overflowY=i.overflow[2]})),t)if(a=t[n],Ze.exec(a)){if(delete t[n],o=o||"toggle"===a,a===(g?"hide":"show")){if("show"!==a||!v||void 0===v[n])continue;g=!0}f[n]=v&&v[n]||p.style(e,n)}if(!p.isEmptyObject(f))for(n in v?"hidden"in v&&(g=v.hidden):v=p._data(e,"fxshow",{}),o&&(v.hidden=!g),g?p(e).show():h.done(function(){p(e).hide()}),h.done(function(){var t;for(t in p._removeData(e,"fxshow"),f)p.style(e,t,f[t])}),f)s=st(g?v[n]:0,n,h),n in v||(v[n]=s.start,g&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}],nt={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),a=et.exec(t),o=a&&a[3]||(p.cssNumber[e]?"":"px"),s=(p.cssNumber[e]||"px"!==o&&+n)&&et.exec(p.css(i.elem,e)),r=1,l=20;if(s&&s[3]!==o){o=o||s[3],a=a||[],s=+n||1;do{s/=r=r||".5",p.style(i.elem,e,s+o)}while(r!==(r=i.cur()/n)&&1!==r&&--l)}return a&&(s=i.start=+s||+n||0,i.unit=o,i.end=a[1]?s+(a[1]+1)*a[2]:+a[2]),i}]};function at(){return setTimeout(function(){Je=void 0}),Je=p.now()}function ot(e,t){var i,n={height:e},a=0;for(t=t?1:0;4>a;a+=2-t)n["margin"+(i=$[a])]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function st(e,t,i){for(var n,a=(nt[t]||[]).concat(nt["*"]),o=0,s=a.length;s>o;o++)if(n=a[o].call(i,t,e))return n}function rt(e,t,i){var n,a,o=0,s=it.length,r=p.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=Je||at(),i=Math.max(0,c.startTime+c.duration-t),n=1-(i/c.duration||0),o=0,s=c.tweens.length;s>o;o++)c.tweens[o].run(n);return r.notifyWith(e,[c,n,i]),1>n&&s?i:(r.resolveWith(e,[c]),!1)},c=r.promise({elem:e,props:p.extend({},t),opts:p.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Je||at(),duration:i.duration,tweens:[],createTween:function(t,i){var n=p.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(a)return this;for(a=!0;n>i;i++)c.tweens[i].run(1);return t?r.resolveWith(e,[c,t]):r.rejectWith(e,[c,t]),this}}),d=c.props;for(function(e,t){var i,n,a,o,s;for(i in e)if(a=t[n=p.camelCase(i)],o=e[i],p.isArray(o)&&(a=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),(s=p.cssHooks[n])&&"expand"in s)for(i in o=s.expand(o),delete e[n],o)i in e||(e[i]=o[i],t[i]=a);else t[n]=a}(d,c.opts.specialEasing);s>o;o++)if(n=it[o].call(c,e,d,c.opts))return n;return p.map(d,st,c),p.isFunction(c.opts.start)&&c.opts.start.call(e,c),p.fx.timer(p.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}p.Animation=p.extend(rt,{tweener:function(e,t){p.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,a=e.length;a>n;n++)i=e[n],nt[i]=nt[i]||[],nt[i].unshift(t)},prefilter:function(e,t){t?it.unshift(e):it.push(e)}}),p.speed=function(e,t,i){var n=e&&"object"==typeof e?p.extend({},e):{complete:i||!i&&t||p.isFunction(e)&&e,duration:e,easing:i&&t||t&&!p.isFunction(t)&&t};return n.duration=p.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in p.fx.speeds?p.fx.speeds[n.duration]:p.fx.speeds._default,(null==n.queue||!0===n.queue)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){p.isFunction(n.old)&&n.old.call(this),n.queue&&p.dequeue(this,n.queue)},n},p.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Y).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var a=p.isEmptyObject(e),o=p.speed(t,i,n),s=function(){var t=rt(this,p.extend({},e),o);(a||p._data(this,"finish"))&&t.stop(!0)};return s.finish=s,a||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",o=p.timers,s=p._data(this);if(a)s[a]&&s[a].stop&&n(s[a]);else for(a in s)s[a]&&s[a].stop&&tt.test(a)&&n(s[a]);for(a=o.length;a--;)o[a].elem!==this||null!=e&&o[a].queue!==e||(o[a].anim.stop(i),t=!1,o.splice(a,1));(t||!i)&&p.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,i=p._data(this),n=i[e+"queue"],a=i[e+"queueHooks"],o=p.timers,s=n?n.length:0;for(i.finish=!0,p.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),p.each(["toggle","show","hide"],function(e,t){var i=p.fn[t];p.fn[t]=function(e,n,a){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(ot(t,!0),e,n,a)}}),p.each({slideDown:ot("show"),slideUp:ot("hide"),slideToggle:ot("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){p.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),p.timers=[],p.fx.tick=function(){var e,t=p.timers,i=0;for(Je=p.now();i<t.length;i++)(e=t[i])()||t[i]!==e||t.splice(i--,1);t.length||p.fx.stop(),Je=void 0},p.fx.timer=function(e){p.timers.push(e),e()?p.fx.start():p.timers.pop()},p.fx.interval=13,p.fx.start=function(){Qe||(Qe=setInterval(p.fx.tick,p.fx.interval))},p.fx.stop=function(){clearInterval(Qe),Qe=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(e,t){return e=p.fx&&p.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},function(){var e,t,i,n,a=T.createElement("div");a.setAttribute("className","t"),a.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=a.getElementsByTagName("a")[0],n=(i=T.createElement("select")).appendChild(T.createElement("option")),t=a.getElementsByTagName("input")[0],e.style.cssText="top:1px",u.getSetAttribute="t"!==a.className,u.style=/top/.test(e.getAttribute("style")),u.hrefNormalized="/a"===e.getAttribute("href"),u.checkOn=!!t.value,u.optSelected=n.selected,u.enctype=!!T.createElement("form").enctype,i.disabled=!0,u.optDisabled=!n.disabled,(t=T.createElement("input")).setAttribute("value",""),u.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),u.radioValue="t"===t.value,e=t=i=n=a=null}();var lt=/\r/g;p.fn.extend({val:function(e){var t,i,n,a=this[0];return arguments.length?(n=p.isFunction(e),this.each(function(i){var a;1===this.nodeType&&(null==(a=n?e.call(this,i,p(this).val()):e)?a="":"number"==typeof a?a+="":p.isArray(a)&&(a=p.map(a,function(e){return null==e?"":e+""})),(t=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))})):a?(t=p.valHooks[a.type]||p.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(a,"value"))?i:"string"==typeof(i=a.value)?i.replace(lt,""):null==i?"":i:void 0}}),p.extend({valHooks:{option:{get:function(e){var t=p.find.attr(e,"value");return null!=t?t:p.text(e)}},select:{get:function(e){for(var t,i,n=e.options,a=e.selectedIndex,o="select-one"===e.type||0>a,s=o?null:[],r=o?a+1:n.length,l=0>a?r:o?a:0;r>l;l++)if(!(!(i=n[l]).selected&&l!==a||(u.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&p.nodeName(i.parentNode,"optgroup"))){if(t=p(i).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var i,n,a=e.options,o=p.makeArray(t),s=a.length;s--;)if(n=a[s],p.inArray(p.valHooks.option.get(n),o)>=0)try{n.selected=i=!0}catch(e){n.scrollHeight}else n.selected=!1;return i||(e.selectedIndex=-1),a}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(e,t){return p.isArray(t)?e.checked=p.inArray(p(e).val(),t)>=0:void 0}},u.checkOn||(p.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var ct,dt,ut=p.expr.attrHandle,ht=/^(?:checked|selected)$/i,pt=u.getSetAttribute,ft=u.input;p.fn.extend({attr:function(e,t){return K(this,p.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){p.removeAttr(this,e)})}}),p.extend({attr:function(e,t,i){var n,a,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===H?p.prop(e,t,i):(1===o&&p.isXMLDoc(e)||(t=t.toLowerCase(),n=p.attrHooks[t]||(p.expr.match.bool.test(t)?dt:ct)),void 0===i?n&&"get"in n&&null!==(a=n.get(e,t))?a:null==(a=p.find.attr(e,t))?void 0:a:null!==i?n&&"set"in n&&void 0!==(a=n.set(e,i,t))?a:(e.setAttribute(t,i+""),i):void p.removeAttr(e,t))},removeAttr:function(e,t){var i,n,a=0,o=t&&t.match(E);if(o&&1===e.nodeType)for(;i=o[a++];)n=p.propFix[i]||i,p.expr.match.bool.test(i)?ft&&pt||!ht.test(i)?e[n]=!1:e[p.camelCase("default-"+i)]=e[n]=!1:p.attr(e,i,""),e.removeAttribute(pt?i:n)},attrHooks:{type:{set:function(e,t){if(!u.radioValue&&"radio"===t&&p.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),dt={set:function(e,t,i){return!1===t?p.removeAttr(e,i):ft&&pt||!ht.test(i)?e.setAttribute(!pt&&p.propFix[i]||i,i):e[p.camelCase("default-"+i)]=e[i]=!0,i}},p.each(p.expr.match.bool.source.match(/\w+/g),function(e,t){var i=ut[t]||p.find.attr;ut[t]=ft&&pt||!ht.test(t)?function(e,t,n){var a,o;return n||(o=ut[t],ut[t]=a,a=null!=i(e,t,n)?t.toLowerCase():null,ut[t]=o),a}:function(e,t,i){return i?void 0:e[p.camelCase("default-"+t)]?t.toLowerCase():null}}),ft&&pt||(p.attrHooks.value={set:function(e,t,i){return p.nodeName(e,"input")?void(e.defaultValue=t):ct&&ct.set(e,t,i)}}),pt||(ct={set:function(e,t,i){var n=e.getAttributeNode(i);return n||e.setAttributeNode(n=e.ownerDocument.createAttribute(i)),n.value=t+="","value"===i||t===e.getAttribute(i)?t:void 0}},ut.id=ut.name=ut.coords=function(e,t,i){var n;return i?void 0:(n=e.getAttributeNode(t))&&""!==n.value?n.value:null},p.valHooks.button={get:function(e,t){var i=e.getAttributeNode(t);return i&&i.specified?i.value:void 0},set:ct.set},p.attrHooks.contenteditable={set:function(e,t,i){ct.set(e,""!==t&&t,i)}},p.each(["width","height"],function(e,t){p.attrHooks[t]={set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}}})),u.style||(p.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var mt=/^(?:input|select|textarea|button|object)$/i,gt=/^(?:a|area)$/i;p.fn.extend({prop:function(e,t){return K(this,p.prop,e,t,arguments.length>1)},removeProp:function(e){return e=p.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(e){}})}}),p.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,i){var n,a,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(1!==o||!p.isXMLDoc(e))&&(t=p.propFix[t]||t,a=p.propHooks[t]),void 0!==i?a&&"set"in a&&void 0!==(n=a.set(e,i,t))?n:e[t]=i:a&&"get"in a&&null!==(n=a.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=p.find.attr(e,"tabindex");return t?parseInt(t,10):mt.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}}}),u.hrefNormalized||p.each(["href","src"],function(e,t){p.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),u.optSelected||(p.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this}),u.enctype||(p.propFix.enctype="encoding");var vt=/[\t\r\n\f]/g;p.fn.extend({addClass:function(e){var t,i,n,a,o,s,r=0,l=this.length,c="string"==typeof e&&e;if(p.isFunction(e))return this.each(function(t){p(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(E)||[];l>r;r++)if(n=1===(i=this[r]).nodeType&&(i.className?(" "+i.className+" ").replace(vt," "):" ")){for(o=0;a=t[o++];)n.indexOf(" "+a+" ")<0&&(n+=a+" ");s=p.trim(n),i.className!==s&&(i.className=s)}return this},removeClass:function(e){var t,i,n,a,o,s,r=0,l=this.length,c=0===arguments.length||"string"==typeof e&&e;if(p.isFunction(e))return this.each(function(t){p(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(E)||[];l>r;r++)if(n=1===(i=this[r]).nodeType&&(i.className?(" "+i.className+" ").replace(vt," "):"")){for(o=0;a=t[o++];)for(;n.indexOf(" "+a+" ")>=0;)n=n.replace(" "+a+" "," ");s=e?p.trim(n):"",i.className!==s&&(i.className=s)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):this.each(p.isFunction(e)?function(i){p(this).toggleClass(e.call(this,i,this.className,t),t)}:function(){if("string"===i)for(var t,n=0,a=p(this),o=e.match(E)||[];t=o[n++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else(i===H||"boolean"===i)&&(this.className&&p._data(this,"__className__",this.className),this.className=this.className||!1===e?"":p._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(vt," ").indexOf(t)>=0)return!0;return!1}}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){p.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),p.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var bt=p.now(),yt=/\?/,wt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;p.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var i,n=null,a=p.trim(t+"");return a&&!p.trim(a.replace(wt,function(e,t,a,o){return i&&t&&(n=0),0===n?e:(i=a||t,n+=!o-!a,"")}))?Function("return "+a)():p.error("Invalid JSON: "+t)},p.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{e.DOMParser?i=(new DOMParser).parseFromString(t,"text/xml"):((i=new ActiveXObject("Microsoft.XMLDOM")).async="false",i.loadXML(t))}catch(e){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||p.error("Invalid XML: "+t),i};var xt,kt,Ct=/#.*$/,_t=/([?&])_=[^&]*/,Tt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Dt=/^(?:GET|HEAD)$/,zt=/^\/\//,At=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,St={},It={},Mt="*/".concat("*");try{kt=location.href}catch(e){(kt=T.createElement("a")).href="",kt=kt.href}function Et(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,a=0,o=t.toLowerCase().match(E)||[];if(p.isFunction(i))for(;n=o[a++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function Ot(e,t,i,n){var a={},o=e===It;function s(r){var l;return a[r]=!0,p.each(e[r]||[],function(e,r){var c=r(t,i,n);return"string"!=typeof c||o||a[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)}),l}return s(t.dataTypes[0])||!a["*"]&&s("*")}function jt(e,t){var i,n,a=p.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((a[n]?e:i||(i={}))[n]=t[n]);return i&&p.extend(!0,e,i),e}xt=At.exec(kt.toLowerCase())||[],p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:kt,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Mt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?jt(jt(e,p.ajaxSettings),t):jt(p.ajaxSettings,e)},ajaxPrefilter:Et(St),ajaxTransport:Et(It),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,n,a,o,s,r,l,c,d=p.ajaxSetup({},t),u=d.context||d,h=d.context&&(u.nodeType||u.jquery)?p(u):p.event,f=p.Deferred(),m=p.Callbacks("once memory"),g=d.statusCode||{},v={},b={},y=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!c)for(c={};t=Tt.exec(o);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return y||(e=b[i]=b[i]||e,v[e]=t),this},overrideMimeType:function(e){return y||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)g[t]=[g[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return l&&l.abort(t),k(0,t),this}};if(f.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,d.url=((e||d.url||kt)+"").replace(Ct,"").replace(zt,xt[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=p.trim(d.dataType||"*").toLowerCase().match(E)||[""],null==d.crossDomain&&(i=At.exec(d.url.toLowerCase()),d.crossDomain=!(!i||i[1]===xt[1]&&i[2]===xt[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(xt[3]||("http:"===xt[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=p.param(d.data,d.traditional)),Ot(St,d,t,x),2===y)return x;for(n in(r=d.global)&&0===p.active++&&p.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Dt.test(d.type),a=d.url,d.hasContent||(d.data&&(a=d.url+=(yt.test(a)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=_t.test(a)?a.replace(_t,"$1_="+bt++):a+(yt.test(a)?"&":"?")+"_="+bt++)),d.ifModified&&(p.lastModified[a]&&x.setRequestHeader("If-Modified-Since",p.lastModified[a]),p.etag[a]&&x.setRequestHeader("If-None-Match",p.etag[a])),(d.data&&d.hasContent&&!1!==d.contentType||t.contentType)&&x.setRequestHeader("Content-Type",d.contentType),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Mt+"; q=0.01":""):d.accepts["*"]),d.headers)x.setRequestHeader(n,d.headers[n]);if(d.beforeSend&&(!1===d.beforeSend.call(u,x,d)||2===y))return x.abort();for(n in w="abort",{success:1,error:1,complete:1})x[n](d[n]);if(l=Ot(It,d,t,x)){x.readyState=1,r&&h.trigger("ajaxSend",[x,d]),d.async&&d.timeout>0&&(s=setTimeout(function(){x.abort("timeout")},d.timeout));try{y=1,l.send(v,k)}catch(e){if(!(2>y))throw e;k(-1,e)}}else k(-1,"No Transport");function k(e,t,i,n){var c,v,b,w,k,C=t;2!==y&&(y=2,s&&clearTimeout(s),l=void 0,o=n||"",x.readyState=e>0?4:0,c=e>=200&&300>e||304===e,i&&(w=function(e,t,i){for(var n,a,o,s,r=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===a&&(a=e.mimeType||t.getResponseHeader("Content-Type"));if(a)for(s in r)if(r[s]&&r[s].test(a)){l.unshift(s);break}if(l[0]in i)o=l[0];else{for(s in i){if(!l[0]||e.converters[s+" "+l[0]]){o=s;break}n||(n=s)}o=o||n}return o?(o!==l[0]&&l.unshift(o),i[o]):void 0}(d,x,i)),w=function(e,t,i,n){var a,o,s,r,l,c={},d=e.dataTypes.slice();if(d[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=d.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=d.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(s=c[l+" "+o]||c["* "+o]))for(a in c)if((r=a.split(" "))[1]===o&&(s=c[l+" "+r[0]]||c["* "+r[0]])){!0===s?s=c[a]:!0!==c[a]&&(o=r[0],d.unshift(r[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(d,w,x,c),c?(d.ifModified&&((k=x.getResponseHeader("Last-Modified"))&&(p.lastModified[a]=k),(k=x.getResponseHeader("etag"))&&(p.etag[a]=k)),204===e||"HEAD"===d.type?C="nocontent":304===e?C="notmodified":(C=w.state,v=w.data,c=!(b=w.error))):(b=C,(e||!C)&&(C="error",0>e&&(e=0))),x.status=e,x.statusText=(t||C)+"",c?f.resolveWith(u,[v,C,x]):f.rejectWith(u,[x,C,b]),x.statusCode(g),g=void 0,r&&h.trigger(c?"ajaxSuccess":"ajaxError",[x,d,c?v:b]),m.fireWith(u,[x,C]),r&&(h.trigger("ajaxComplete",[x,d]),--p.active||p.event.trigger("ajaxStop")))}return x},getJSON:function(e,t,i){return p.get(e,t,i,"json")},getScript:function(e,t){return p.get(e,void 0,t,"script")}}),p.each(["get","post"],function(e,t){p[t]=function(e,i,n,a){return p.isFunction(i)&&(a=a||n,n=i,i=void 0),p.ajax({url:e,type:t,dataType:a,data:i,success:n})}}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){p.fn[t]=function(e){return this.on(t,e)}}),p._evalUrl=function(e){return p.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},p.fn.extend({wrapAll:function(e){if(p.isFunction(e))return this.each(function(t){p(this).wrapAll(e.call(this,t))});if(this[0]){var t=p(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(p.isFunction(e)?function(t){p(this).wrapInner(e.call(this,t))}:function(){var t=p(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=p.isFunction(e);return this.each(function(i){p(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()}}),p.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!u.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||p.css(e,"display"))},p.expr.filters.visible=function(e){return!p.expr.filters.hidden(e)};var Pt=/%20/g,Ft=/\[\]$/,Ht=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,Ut=/^(?:input|select|textarea|keygen)/i;function Rt(e,t,i,n){var a;if(p.isArray(t))p.each(t,function(t,a){i||Ft.test(e)?n(e,a):Rt(e+"["+("object"==typeof a?t:"")+"]",a,i,n)});else if(i||"object"!==p.type(t))n(e,t);else for(a in t)Rt(e+"["+a+"]",t[a],i,n)}p.param=function(e,t){var i,n=[],a=function(e,t){t=p.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=p.ajaxSettings&&p.ajaxSettings.traditional),p.isArray(e)||e.jquery&&!p.isPlainObject(e))p.each(e,function(){a(this.name,this.value)});else for(i in e)Rt(i,e[i],t,a);return n.join("&").replace(Pt,"+")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=p.prop(this,"elements");return e?p.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!p(this).is(":disabled")&&Ut.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!V.test(e))}).map(function(e,t){var i=p(this).val();return null==i?null:p.isArray(i)?p.map(i,function(e){return{name:t.name,value:e.replace(Ht,"\r\n")}}):{name:t.name,value:i.replace(Ht,"\r\n")}}).get()}}),p.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Bt()||function(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:Bt;var qt=0,Lt={},Wt=p.ajaxSettings.xhr();function Bt(){try{return new e.XMLHttpRequest}catch(e){}}e.ActiveXObject&&p(e).on("unload",function(){for(var e in Lt)Lt[e](void 0,!0)}),u.cors=!!Wt&&"withCredentials"in Wt,(Wt=u.ajax=!!Wt)&&p.ajaxTransport(function(e){var t;if(!e.crossDomain||u.cors)return{send:function(i,n){var a,o=e.xhr(),s=++qt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)o[a]=e.xhrFields[a];for(a in e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)void 0!==i[a]&&o.setRequestHeader(a,i[a]+"");o.send(e.hasContent&&e.data||null),t=function(i,a){var r,l,c;if(t&&(a||4===o.readyState))if(delete Lt[s],t=void 0,o.onreadystatechange=p.noop,a)4!==o.readyState&&o.abort();else{c={},r=o.status,"string"==typeof o.responseText&&(c.text=o.responseText);try{l=o.statusText}catch(e){l=""}r||!e.isLocal||e.crossDomain?1223===r&&(r=204):r=c.text?200:404}c&&n(r,l,c,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=Lt[s]=t:t()},abort:function(){t&&t(void 0,!0)}}}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return p.globalEval(e),e}}}),p.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),p.ajaxTransport("script",function(e){if(e.crossDomain){var t,i=T.head||p("head")[0]||T.documentElement;return{send:function(n,a){(t=T.createElement("script")).async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,i){(i||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,i||a(200,"success"))},i.insertBefore(t,i.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var $t=[],Yt=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=$t.pop()||p.expando+"_"+bt++;return this[e]=!0,e}}),p.ajaxPrefilter("json jsonp",function(t,i,n){var a,o,s,r=!1!==t.jsonp&&(Yt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(t.data)&&"data");return r||"jsonp"===t.dataTypes[0]?(a=t.jsonpCallback=p.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,r?t[r]=t[r].replace(Yt,"$1"+a):!1!==t.jsonp&&(t.url+=(yt.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return s||p.error(a+" was not called"),s[0]},t.dataTypes[0]="json",o=e[a],e[a]=function(){s=arguments},n.always(function(){e[a]=o,t[a]&&(t.jsonpCallback=i.jsonpCallback,$t.push(a)),s&&p.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),p.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||T;var n=x.exec(e),a=!i&&[];return n?[t.createElement(n[1])]:(n=p.buildFragment([e],t,a),a&&a.length&&p(a).remove(),p.merge([],n.childNodes))};var Kt=p.fn.load;p.fn.load=function(e,t,i){if("string"!=typeof e&&Kt)return Kt.apply(this,arguments);var n,a,o,s=this,r=e.indexOf(" ");return r>=0&&(n=e.slice(r,e.length),e=e.slice(0,r)),p.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(o="POST"),s.length>0&&p.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){a=arguments,s.html(n?p("<div>").append(p.parseHTML(e)).find(n):e)}).complete(i&&function(e,t){s.each(i,a||[e.responseText,t,e])}),this},p.expr.filters.animated=function(e){return p.grep(p.timers,function(t){return e===t.elem}).length};var Vt=e.document.documentElement;function Xt(e){return p.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}p.offset={setOffset:function(e,t,i){var n,a,o,s,r,l,c=p.css(e,"position"),d=p(e),u={};"static"===c&&(e.style.position="relative"),r=d.offset(),o=p.css(e,"top"),l=p.css(e,"left"),("absolute"===c||"fixed"===c)&&p.inArray("auto",[o,l])>-1?(s=(n=d.position()).top,a=n.left):(s=parseFloat(o)||0,a=parseFloat(l)||0),p.isFunction(t)&&(t=t.call(e,i,r)),null!=t.top&&(u.top=t.top-r.top+s),null!=t.left&&(u.left=t.left-r.left+a),"using"in t?t.using.call(e,u):d.css(u)}},p.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){p.offset.setOffset(this,e,t)});var t,i,n={top:0,left:0},a=this[0],o=a&&a.ownerDocument;return o?(t=o.documentElement,p.contains(t,a)?(typeof a.getBoundingClientRect!==H&&(n=a.getBoundingClientRect()),i=Xt(o),{top:n.top+(i.pageYOffset||t.scrollTop)-(t.clientTop||0),left:n.left+(i.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):n):void 0},position:function(){if(this[0]){var e,t,i={top:0,left:0},n=this[0];return"fixed"===p.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),p.nodeName(e[0],"html")||(i=e.offset()),i.top+=p.css(e[0],"borderTopWidth",!0),i.left+=p.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-p.css(n,"marginTop",!0),left:t.left-i.left-p.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Vt;e&&!p.nodeName(e,"html")&&"static"===p.css(e,"position");)e=e.offsetParent;return e||Vt})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i=/Y/.test(t);p.fn[e]=function(n){return K(this,function(e,n,a){var o=Xt(e);return void 0===a?o?t in o?o[t]:o.document.documentElement[n]:e[n]:void(o?o.scrollTo(i?p(o).scrollLeft():a,i?a:p(o).scrollTop()):e[n]=a)},e,n,arguments.length,null)}}),p.each(["top","left"],function(e,t){p.cssHooks[t]=Fe(u.pixelPosition,function(e,i){return i?(i=Ee(e,t),je.test(i)?p(e).position()[t]+"px":i):void 0})}),p.each({Height:"height",Width:"width"},function(e,t){p.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){p.fn[n]=function(n,a){var o=arguments.length&&(i||"boolean"!=typeof n),s=i||(!0===n||!0===a?"margin":"border");return K(this,function(t,i,n){var a;return p.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===n?p.css(t,i,s):p.style(t,i,n,s)},t,o?n:void 0,o,null)}})}),p.fn.size=function(){return this.length},p.fn.andSelf=p.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return p});var Gt=e.jQuery,Jt=e.$;return p.noConflict=function(t){return e.$===p&&(e.$=Jt),t&&e.jQuery===p&&(e.jQuery=Gt),p},typeof t===H&&(e.jQuery=e.$=p),p}),function(e,t){function i(t,i){var a,o,s,r=t.nodeName.toLowerCase();return"area"===r?(o=(a=t.parentNode).name,!(!t.href||!o||"map"!==a.nodeName.toLowerCase())&&(!!(s=e("img[usemap=#"+o+"]")[0])&&n(s))):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r&&t.href||i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var a=0,o=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,a,o=e(this[0]);o.length&&o[0]!==document;){if(("absolute"===(n=o.css("position"))||"relative"===n||"fixed"===n)&&(a=parseInt(o.css("zIndex"),10),!isNaN(a)&&0!==a))return a;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),a=isNaN(n);return(a||n>=0)&&i(t,!a)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function a(t,i,n,a){return e.each(o,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var o="Width"===n?["Left","Right"]:["Top","Bottom"],s=n.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?r["inner"+n].call(this):this.each(function(){e(this).css(s,a(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?r["outer"+n].call(this,t):this.each(function(){e(this).css(s,a(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var a,o=e.ui[t].prototype;for(a in n)o.plugins[a]=o.plugins[a]||[],o.plugins[a].push([i,n[a]])},call:function(e,t,i){var n,a=e.plugins[t];if(a&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;a.length>n;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return t[n]>0||(t[n]=1,a=t[n]>0,t[n]=0,a)}})}(jQuery),function(e,t){var i=0,n=Array.prototype.slice,a=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(e){}a(t)},e.widget=function(i,n,a){var o,s,r,l,c={},d=i.split(".")[0];i=i.split(".")[1],o=d+"-"+i,a||(a=n,n=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[d]=e[d]||{},s=e[d][i],r=e[d][i]=function(e,i){return this._createWidget?(arguments.length&&this._createWidget(e,i),t):new r(e,i)},e.extend(r,s,{version:a.version,_proto:e.extend({},a),_childConstructors:[]}),(l=new n).options=e.widget.extend({},l.options),e.each(a,function(i,a){return e.isFunction(a)?(c[i]=function(){var e=function(){return n.prototype[i].apply(this,arguments)},t=function(e){return n.prototype[i].apply(this,e)};return function(){var i,n=this._super,o=this._superApply;return this._super=e,this._superApply=t,i=a.apply(this,arguments),this._super=n,this._superApply=o,i}}(),t):(c[i]=a,t)}),r.prototype=e.widget.extend(l,{widgetEventPrefix:s&&l.widgetEventPrefix||i},c,{constructor:r,namespace:d,widgetName:i,widgetFullName:o}),s?(e.each(s._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete s._childConstructors):n._childConstructors.push(r),e.widget.bridge(i,r)},e.widget.extend=function(i){for(var a,o,s=n.call(arguments,1),r=0,l=s.length;l>r;r++)for(a in s[r])o=s[r][a],s[r].hasOwnProperty(a)&&o!==t&&(i[a]=e.isPlainObject(o)?e.isPlainObject(i[a])?e.widget.extend({},i[a],o):e.widget.extend({},o):o);return i},e.widget.bridge=function(i,a){var o=a.prototype.widgetFullName||i;e.fn[i]=function(s){var r="string"==typeof s,l=n.call(arguments,1),c=this;return s=!r&&l.length?e.widget.extend.apply(null,[s].concat(l)):s,r?this.each(function(){var n,a=e.data(this,o);return a?e.isFunction(a[s])&&"_"!==s.charAt(0)?(n=a[s].apply(a,l))!==a&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):t:e.error("no such method '"+s+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+s+"'")}):this.each(function(){var t=e.data(this,o);t?t.option(s||{})._init():e.data(this,o,new a(s,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var a,o,s,r=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(r={},a=i.split("."),i=a.shift(),a.length){for(o=r[i]=e.widget.extend({},this.options[i]),s=0;a.length-1>s;s++)o[a[s]]=o[a[s]]||{},o=o[a[s]];if(i=a.pop(),1===arguments.length)return o[i]===t?null:o[i];o[i]=n}else{if(1===arguments.length)return this.options[i]===t?null:this.options[i];r[i]=n}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,n,a){var o,s=this;"boolean"!=typeof i&&(a=n,n=i,i=!1),a?(n=o=e(n),this.bindings=this.bindings.add(n)):(a=n,n=this.element,o=this.widget()),e.each(a,function(a,r){function l(){return i||!0!==s.options.disabled&&!e(this).hasClass("ui-state-disabled")?("string"==typeof r?s[r]:r).apply(s,arguments):t}"string"!=typeof r&&(l.guid=r.guid=r.guid||l.guid||e.guid++);var c=a.match(/^(\w+)\s*(.*)$/),d=c[1]+s.eventNamespace,u=c[2];u?o.delegate(u,d,l):n.bind(d,l)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var i=this;return setTimeout(function(){return("string"==typeof e?i[e]:e).apply(i,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var a,o,s=this.options[t];if(n=n||{},(i=e.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(a in o)a in i||(i[a]=o[a]);return this.element.trigger(i,n),!(e.isFunction(s)&&!1===s.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,a,o){"string"==typeof a&&(a={effect:a});var s,r=a?!0===a||"number"==typeof a?i:a.effect||i:t;"number"==typeof(a=a||{})&&(a={duration:a}),s=!e.isEmptyObject(a),a.complete=o,a.delay&&n.delay(a.delay),s&&e.effects&&e.effects.effect[r]?n[t](a):r!==t&&n[r]?n[r](a.duration,a.easing,o):n.queue(function(i){e(this)[t](),o&&o.call(n[0]),i()})}})}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,a=1===i.which,o=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&e(i.target).closest(this.options.cancel).length;return!(a&&!o&&this._mouseCapture(i))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=!1!==this._mouseStart(i),!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0))}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){function t(e,t,i){return[parseFloat(e[0])*(u.test(e[0])?t/100:1),parseFloat(e[1])*(u.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}e.ui=e.ui||{};var n,a=Math.max,o=Math.abs,s=Math.round,r=/left|center|right/,l=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,u=/%$/,h=e.fn.position;e.position={scrollbarWidth:function(){if(undefined!==n)return n;var t,i,a=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=a.children()[0];return e("body").append(a),t=o.offsetWidth,a.css("overflow","scroll"),t===(i=o.offsetWidth)&&(i=a[0].clientWidth),a.remove(),n=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),a="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:a?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,isDocument:!!i[0]&&9===i[0].nodeType,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(n){if(!n||!n.of)return h.apply(this,arguments);n=e.extend({},n);var u,p,f,m,g,v,b=e(n.of),y=e.position.getWithinInfo(n.within),w=e.position.getScrollInfo(y),x=(n.collision||"flip").split(" "),k={};return v=function(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}(b),b[0].preventDefault&&(n.at="left top"),p=v.width,f=v.height,m=v.offset,g=e.extend({},m),e.each(["my","at"],function(){var e,t,i=(n[this]||"").split(" ");1===i.length&&(i=r.test(i[0])?i.concat(["center"]):l.test(i[0])?["center"].concat(i):["center","center"]),i[0]=r.test(i[0])?i[0]:"center",i[1]=l.test(i[1])?i[1]:"center",e=c.exec(i[0]),t=c.exec(i[1]),k[this]=[e?e[0]:0,t?t[0]:0],n[this]=[d.exec(i[0])[0],d.exec(i[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===n.at[0]?g.left+=p:"center"===n.at[0]&&(g.left+=p/2),"bottom"===n.at[1]?g.top+=f:"center"===n.at[1]&&(g.top+=f/2),u=t(k.at,p,f),g.left+=u[0],g.top+=u[1],this.each(function(){var r,l,c=e(this),d=c.outerWidth(),h=c.outerHeight(),v=i(this,"marginLeft"),C=i(this,"marginTop"),_=d+v+i(this,"marginRight")+w.width,T=h+C+i(this,"marginBottom")+w.height,D=e.extend({},g),z=t(k.my,c.outerWidth(),c.outerHeight());"right"===n.my[0]?D.left-=d:"center"===n.my[0]&&(D.left-=d/2),"bottom"===n.my[1]?D.top-=h:"center"===n.my[1]&&(D.top-=h/2),D.left+=z[0],D.top+=z[1],e.support.offsetFractions||(D.left=s(D.left),D.top=s(D.top)),r={marginLeft:v,marginTop:C},e.each(["left","top"],function(t,i){e.ui.position[x[t]]&&e.ui.position[x[t]][i](D,{targetWidth:p,targetHeight:f,elemWidth:d,elemHeight:h,collisionPosition:r,collisionWidth:_,collisionHeight:T,offset:[u[0]+z[0],u[1]+z[1]],my:n.my,at:n.at,within:y,elem:c})}),n.using&&(l=function(e){var t=m.left-D.left,i=t+p-d,s=m.top-D.top,r=s+f-h,l={target:{element:b,left:m.left,top:m.top,width:p,height:f},element:{element:c,left:D.left,top:D.top,width:d,height:h},horizontal:0>i?"left":t>0?"right":"center",vertical:0>r?"top":s>0?"bottom":"middle"};d>p&&p>o(t+i)&&(l.horizontal="center"),h>f&&f>o(s+r)&&(l.vertical="middle"),l.important=a(o(t),o(i))>a(o(s),o(r))?"horizontal":"vertical",n.using.call(this,e,l)}),c.offset(e.extend(D,{using:l}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,r=e.left-t.collisionPosition.marginLeft,l=o-r,c=r+t.collisionWidth-s-o;t.collisionWidth>s?l>0&&0>=c?(i=e.left+l+t.collisionWidth-s-o,e.left+=l-i):e.left=c>0&&0>=l?o:l>c?o+s-t.collisionWidth:o:l>0?e.left+=l:c>0?e.left-=c:e.left=a(e.left-r,e.left)},top:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,r=e.top-t.collisionPosition.marginTop,l=o-r,c=r+t.collisionHeight-s-o;t.collisionHeight>s?l>0&&0>=c?(i=e.top+l+t.collisionHeight-s-o,e.top+=l-i):e.top=c>0&&0>=l?o:l>c?o+s-t.collisionHeight:o:l>0?e.top+=l:c>0?e.top-=c:e.top=a(e.top-r,e.top)}},flip:{left:function(e,t){var i,n,a=t.within,s=a.offset.left+a.scrollLeft,r=a.width,l=a.isWindow?a.scrollLeft:a.offset.left,c=e.left-t.collisionPosition.marginLeft,d=c-l,u=c+t.collisionWidth-r-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>d?(0>(i=e.left+h+p+f+t.collisionWidth-r-s)||o(d)>i)&&(e.left+=h+p+f):u>0&&(((n=e.left-t.collisionPosition.marginLeft+h+p+f-l)>0||u>o(n))&&(e.left+=h+p+f))},top:function(e,t){var i,n,a=t.within,s=a.offset.top+a.scrollTop,r=a.height,l=a.isWindow?a.scrollTop:a.offset.top,c=e.top-t.collisionPosition.marginTop,d=c-l,u=c+t.collisionHeight-r-l,h="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,f=-2*t.offset[1];0>d?(n=e.top+h+p+f+t.collisionHeight-r-s,e.top+h+p+f>d&&(0>n||o(d)>n)&&(e.top+=h+p+f)):u>0&&(i=e.top-t.collisionPosition.marginTop+h+p+f-l,e.top+h+p+f>u&&(i>0||u>o(i))&&(e.top+=h+p+f))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,a,o,s=document.getElementsByTagName("body")[0],r=document.createElement("div");for(o in t=document.createElement(s?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"}),n)t.style[o]=n[o];t.appendChild(r),(i=s||document.documentElement).insertBefore(t,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",a=e(r).offset().left,e.support.offsetFractions=a>10&&11>a,t.innerHTML="",i.removeChild(t)}()}(jQuery),function(e){var t=0,i={},n={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||!1!==this.options.active||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),void("disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)))},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,n=this.headers.length,a=this.headers.index(t.target),o=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:o=this.headers[(a+1)%n];break;case i.LEFT:case i.UP:o=this.headers[(a-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:o=this.headers[0];break;case i.END:o=this.headers[n-1]}o&&(e(t.target).attr("tabIndex",-1),e(o).attr("tabIndex",0),o.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),!1===t.active&&!0===t.collapsible||!this.headers.length?(t.active=!1,this.active=e()):!1===t.active?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,n=this.options,a=n.heightStyle,o=this.element.parent(),s=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t);this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var i=e(this),n=i.attr("id"),a=i.next(),o=a.attr("id");n||(n=s+"-header-"+t,i.attr("id",n)),o||(o=s+"-panel-"+t,a.attr("id",o)),i.attr("aria-controls",o),a.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===a?(i=o.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.headers.each(function(){i-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===a&&(i=0,this.headers.next().each(function(){i=Math.max(i,e(this).css("height","").height())}).height(i))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,n=this.active,a=e(t.currentTarget),o=a[0]===n[0],s=o&&i.collapsible,r=s?e():a.next(),l=n.next(),c={oldHeader:n,oldPanel:l,newHeader:s?e():a,newPanel:r};t.preventDefault(),o&&!i.collapsible||!1===this._trigger("beforeActivate",t,c)||(i.active=!s&&this.headers.index(a),this.active=o?e():a,this._toggle(c),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),o||(a.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&a.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),a.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,t):(n.hide(),i.show(),this._toggleComplete(t)),n.attr({"aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(e,t,a){var o,s,r,l=this,c=0,d=e.length&&(!t.length||e.index()<t.index()),u=this.options.animate||{},h=d&&u.down||u,p=function(){l._toggleComplete(a)};return"number"==typeof h&&(r=h),"string"==typeof h&&(s=h),s=s||h.easing||u.easing,r=r||h.duration||u.duration,t.length?e.length?(o=e.show().outerHeight(),t.animate(i,{duration:r,easing:s,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(n,{duration:r,easing:s,complete:p,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?c+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(o-t.outerHeight()-c),c=0)}})):t.animate(i,r,s,p):e.animate(n,r,s,p)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),function(e){e.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,n,a=this.element[0].nodeName.toLowerCase(),o="textarea"===a,s="input"===a;this.isMultiLine=!!o||!s&&this.element.prop("isContentEditable"),this.valueMethod=this.element[o||s?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(a){if(this.element.prop("readOnly"))return t=!0,n=!0,void(i=!0);t=!1,n=!1,i=!1;var o=e.ui.keyCode;switch(a.keyCode){case o.PAGE_UP:t=!0,this._move("previousPage",a);break;case o.PAGE_DOWN:t=!0,this._move("nextPage",a);break;case o.UP:t=!0,this._keyEvent("previous",a);break;case o.DOWN:t=!0,this._keyEvent("next",a);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(t=!0,a.preventDefault(),this.menu.select(a));break;case o.TAB:this.menu.active&&this.menu.select(a);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(a),a.preventDefault());break;default:i=!0,this._searchTimeout(a)}},keypress:function(n){if(t)return t=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault());if(!i){var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:this._move("previousPage",n);break;case a.PAGE_DOWN:this._move("nextPage",n);break;case a.UP:this._keyEvent("previous",n);break;case a.DOWN:this._keyEvent("next",n)}}},input:function(e){return n?(n=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(n){n.target===t.element[0]||n.target===i||e.contains(i,n.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,a){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){a(e)},error:function(){a([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e){var t,i="ui-button ui-widget ui-state-default ui-corner-all",n="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",a=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},o=function(t){var i=t.name,n=t.form,a=e([]);return i&&(i=i.replace(/'/g,"\\'"),a=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),a};e.widget("ui.button",{version:"1.10.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,a),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var n=this,s=this.options,r="checkbox"===this.type||"radio"===this.type,l=r?"":"ui-state-active";null===s.label&&(s.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(i).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){s.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){s.disabled||e(this).removeClass(l)}).bind("click"+this.eventNamespace,function(e){s.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),r&&this.element.bind("change"+this.eventNamespace,function(){n.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return!s.disabled&&void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(s.disabled)return!1;e(this).addClass("ui-state-active"),n.buttonElement.attr("aria-pressed","true");var t=n.element[0];o(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return!s.disabled&&(e(this).addClass("ui-state-active"),t=this,void n.document.one("mouseup",function(){t=null}))}).bind("mouseup"+this.eventNamespace,function(){return!s.disabled&&void e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){return!s.disabled&&void((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",s.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),(i=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(i+" ui-state-active "+n).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.element.prop("disabled",!!t),void(t&&this.buttonElement.removeClass("ui-state-focus"))):void this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?o(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var t=this.buttonElement.removeClass(n),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),a=this.options.icons,o=a.primary&&a.secondary,s=[];a.primary||a.secondary?(this.options.text&&s.push("ui-button-text-icon"+(o?"s":a.primary?"-primary":"-secondary")),a.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+a.primary+"'></span>"),a.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+a.secondary+"'></span>"),this.options.text||(s.push(o?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),e.widget("ui.buttonset",{version:"1.10.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=n(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(o.inline?t.parent()[0]:o.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function a(t,i){for(var n in e.extend(t,i),i)null==i[n]&&(t[n]=i[n]);return t}e.extend(e.ui,{datepicker:{version:"1.10.4"}});var o,s="datepicker";e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return a(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var n,a,o;a="div"===(n=t.nodeName.toLowerCase())||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(o=this._newInst(e(t),a)).settings=e.extend({},i||{}),"input"===n?this._connectDatepicker(t,o):a&&this._inlineDatepicker(t,o)},_newInst:function(t,i){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]),i.trigger=e([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,s,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var n,a,o,s=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),s&&(i.append=e("<span class='"+this._appendClass+"'>"+s+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),("focus"===(n=this._get(i,"showOn"))||"both"===n)&&t.focus(this._showDatepicker),("button"===n||"both"===n)&&(a=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:o,alt:a,title:a}):e("<button type='button'></button>").addClass(this._triggerClass).html(o?e("<img/>").attr({src:o,alt:a,title:a}):a)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,a,o=new Date(2009,11,20),s=this._get(e,"dateFormat");s.match(/[DM]/)&&(t=function(e){for(i=0,n=0,a=0;e.length>a;a++)e[a].length>i&&(i=e[a].length,n=a);return n},o.setMonth(t(this._get(e,s.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(t(this._get(e,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),e.input.attr("size",this._formatDate(e,o).length)}},_inlineDatepicker:function(t,i){var n=e(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),e.data(t,s,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,n,o,r){var l,c,d,u,h,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),(p=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},e.data(this._dialogInput[0],s,p)),a(p.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(c=document.documentElement.clientWidth,d=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+u,d/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],s,p),this},_destroyDatepicker:function(t){var i,n=e(t),a=e.data(t,s);n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,s),"input"===i?(a.append.remove(),a.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,n,a=e(t),o=e.data(t,s);a.hasClass(this.markerClassName)&&("input"===(i=t.nodeName.toLowerCase())?(t.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&((n=a.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,n,a=e(t),o=e.data(t,s);a.hasClass(this.markerClassName)&&("input"===(i=t.nodeName.toLowerCase())?(t.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&((n=a.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,s)}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,n,o){var s,r,l,c,d=this._getInst(i);return 2===arguments.length&&"string"==typeof n?"defaults"===n?e.extend({},e.datepicker._defaults):d?"all"===n?e.extend({},d.settings):this._get(d,n):null:(s=n||{},"string"==typeof n&&((s={})[n]=o),d&&(this._curInst===d&&this._hideDatepicker(),r=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(d,"min"),c=this._getMinMaxDate(d,"max"),a(d.settings,s),null!==l&&s.dateFormat!==t&&s.minDate===t&&(d.settings.minDate=this._formatDate(d,l)),null!==c&&s.dateFormat!==t&&s.maxDate===t&&(d.settings.maxDate=this._formatDate(d,c)),"disabled"in s&&(s.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(e(i),d),this._autoSize(d),this._setDate(d,r),this._updateAlternate(d),this._updateDatepicker(d)),t)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,n,a,o=e.datepicker._getInst(t.target),s=!0,r=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),s=!1;break;case 13:return(a=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",o.dpDiv))[0]&&e.datepicker._selectDay(t.target,o.selectedMonth,o.selectedYear,a[0]),(i=e.datepicker._get(o,"onSelect"))?(n=e.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[n,o])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),s=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),s=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),s=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(o,"stepBigMonths"):-e.datepicker._get(o,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),s=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),s=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(o,"stepBigMonths"):+e.datepicker._get(o,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),s=t.ctrlKey||t.metaKey;break;default:s=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):s=!1;s&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(i){var n,a,o=e.datepicker._getInst(i.target);return e.datepicker._get(o,"constrainInput")?(n=e.datepicker._possibleChars(e.datepicker._get(o,"dateFormat")),a=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">a||!n||n.indexOf(a)>-1):t},_doKeyUp:function(t){var i=e.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{e.datepicker.parseDate(e.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,e.datepicker._getFormatConfig(i))&&(e.datepicker._setDateFromField(i),e.datepicker._updateAlternate(i),e.datepicker._updateDatepicker(i))}catch(e){}return!0},_showDatepicker:function(t){var i,n,o,s,r,l,c;("input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)||(i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),!1!==(o=(n=e.datepicker._get(i,"beforeShow"))?n.apply(t,[t,i]):{})&&(a(i.settings,o),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),s=!1,e(t).parents().each(function(){return!(s|="fixed"===e(this).css("position"))}),r={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),r=e.datepicker._checkOffset(i,r,s),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":s?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),c=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),c):i.dpDiv[l||"show"](l?c:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i)))},_updateDatepicker:function(t){this.maxRows=4,o=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,n=this._getNumberOfMonths(t),a=n[1];t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),a>1&&t.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",17*a+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,n){var a=t.dpDiv.outerWidth(),o=t.dpDiv.outerHeight(),s=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?a-s:0,i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=n&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+a>l&&l>a?Math.abs(i.left+a-l):0),i.top-=Math.min(i.top,i.top+o>c&&c>o?Math.abs(o+r):0),i},_findPos:function(t){for(var i,n=this._getInst(t),a=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[a?"previousSibling":"nextSibling"];return[(i=e(t).offset()).left,i.top]},_hideDatepicker:function(t){var i,n,a,o,r=this._curInst;!r||t&&r!==e.data(t,s)||this._datepickerShowing&&(i=this._get(r,"showAnim"),n=this._get(r,"duration"),a=function(){e.datepicker._tidyDialog(r)},e.effects&&(e.effects.effect[i]||e.effects[i])?r.dpDiv.hide(i,e.datepicker._get(r,"showOptions"),n,a):r.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,a),i||a(),this._datepickerShowing=!1,(o=this._get(r,"onClose"))&&o.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),n=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==n)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var a=e(t),o=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(o,i+("M"===n?this._get(o,"showCurrentAtPos"):0),n),this._updateDatepicker(o))},_gotoToday:function(t){var i,n=e(t),a=this._getInst(n[0]);this._get(a,"gotoCurrent")&&a.currentDay?(a.selectedDay=a.currentDay,a.drawMonth=a.selectedMonth=a.currentMonth,a.drawYear=a.selectedYear=a.currentYear):(i=new Date,a.selectedDay=i.getDate(),a.drawMonth=a.selectedMonth=i.getMonth(),a.drawYear=a.selectedYear=i.getFullYear()),this._notifyChange(a),this._adjustDate(n)},_selectMonthYear:function(t,i,n){var a=e(t),o=this._getInst(a[0]);o["selected"+("M"===n?"Month":"Year")]=o["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(a)},_selectDay:function(t,i,n,a){var o,s=e(t);e(a).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||((o=this._getInst(s[0])).selectedDay=o.currentDay=e("a",a).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=n,this._selectDate(t,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,a=e(t),o=this._getInst(a[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),(n=this._get(o,"onSelect"))?n.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,n,a,o=this._get(t,"altField");o&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),a=this.formatDate(i,n,this._getFormatConfig(t)),e(o).each(function(){e(this).val(a)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(i,n,a){if(null==i||null==n)throw"Invalid arguments";if(""===(n="object"==typeof n?""+n:n+""))return null;var o,s,r,l,c=0,d=(a?a.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof d?d:(new Date).getFullYear()%100+parseInt(d,10),h=(a?a.dayNamesShort:null)||this._defaults.dayNamesShort,p=(a?a.dayNames:null)||this._defaults.dayNames,f=(a?a.monthNamesShort:null)||this._defaults.monthNamesShort,m=(a?a.monthNames:null)||this._defaults.monthNames,g=-1,v=-1,b=-1,y=-1,w=!1,x=function(e){var t=i.length>o+1&&i.charAt(o+1)===e;return t&&o++,t},k=function(e){var t=x(e),i=RegExp("^\\d{1,"+("@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2)+"}"),a=n.substring(c).match(i);if(!a)throw"Missing number at position "+c;return c+=a[0].length,parseInt(a[0],10)},C=function(i,a,o){var s=-1,r=e.map(x(i)?o:a,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(r,function(e,i){var a=i[1];return n.substr(c,a.length).toLowerCase()===a.toLowerCase()?(s=i[0],c+=a.length,!1):t}),-1!==s)return s+1;throw"Unknown name at position "+c},_=function(){if(n.charAt(c)!==i.charAt(o))throw"Unexpected literal at position "+c;c++};for(o=0;i.length>o;o++)if(w)"'"!==i.charAt(o)||x("'")?_():w=!1;else switch(i.charAt(o)){case"d":b=k("d");break;case"D":C("D",h,p);break;case"o":y=k("o");break;case"m":v=k("m");break;case"M":v=C("M",f,m);break;case"y":g=k("y");break;case"@":g=(l=new Date(k("@"))).getFullYear(),v=l.getMonth()+1,b=l.getDate();break;case"!":g=(l=new Date((k("!")-this._ticksTo1970)/1e4)).getFullYear(),v=l.getMonth()+1,b=l.getDate();break;case"'":x("'")?_():w=!0;break;default:_()}if(n.length>c&&(r=n.substr(c),!/^\s+/.test(r)))throw"Extra/unparsed characters found in date: "+r;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=g?0:-100)),y>-1)for(v=1,b=y;!((s=this._getDaysInMonth(g,v-1))>=b);)v++,b-=s;if((l=this._daylightSavingAdjust(new Date(g,v-1,b))).getFullYear()!==g||l.getMonth()+1!==v||l.getDate()!==b)throw"Invalid date";return l},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var n,a=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,s=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=e.length>n+1&&e.charAt(n+1)===t;return i&&n++,i},c=function(e,t,i){var n=""+t;if(l(e))for(;i>n.length;)n="0"+n;return n},d=function(e,t,i,n){return l(e)?n[t]:i[t]},u="",h=!1;if(t)for(n=0;e.length>n;n++)if(h)"'"!==e.charAt(n)||l("'")?u+=e.charAt(n):h=!1;else switch(e.charAt(n)){case"d":u+=c("d",t.getDate(),2);break;case"D":u+=d("D",t.getDay(),a,o);break;case"o":u+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=c("m",t.getMonth()+1,2);break;case"M":u+=d("M",t.getMonth(),s,r);break;case"y":u+=l("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":h=!0;break;default:u+=e.charAt(n)}return u},_possibleChars:function(e){var t,i="",n=!1,a=function(i){var n=e.length>t+1&&e.charAt(t+1)===i;return n&&t++,n};for(t=0;e.length>t;t++)if(n)"'"!==e.charAt(t)||a("'")?i+=e.charAt(t):n=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":a("'")?i+="'":n=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,i){return e.settings[i]!==t?e.settings[i]:this._defaults[i]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,a=this._getDefaultDate(e),o=a,s=this._getFormatConfig(e);try{o=this.parseDate(i,n,s)||a}catch(e){n=t?"":n}e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),e.currentDay=n?o.getDate():0,e.currentMonth=n?o.getMonth():0,e.currentYear=n?o.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var a=null==i||""===i?n:"string"==typeof i?function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(e){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,a=n.getFullYear(),o=n.getMonth(),s=n.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=r.exec(i);l;){switch(l[2]||"d"){case"d":case"D":s+=parseInt(l[1],10);break;case"w":case"W":s+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),s=Math.min(s,e.datepicker._getDaysInMonth(a,o));break;case"y":case"Y":a+=parseInt(l[1],10),s=Math.min(s,e.datepicker._getDaysInMonth(a,o))}l=r.exec(i)}return new Date(a,o,s)}(i):"number"==typeof i?isNaN(i)?n:function(e){var t=new Date;return t.setDate(t.getDate()+e),t}(i):new Date(i.getTime());return(a=a&&"Invalid Date"==""+a?n:a)&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,a=e.selectedMonth,o=e.selectedYear,s=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=s.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=s.getMonth(),e.drawYear=e.selectedYear=e.currentYear=s.getFullYear(),a===e.selectedMonth&&o===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(n,-i,"M")},next:function(){e.datepicker._adjustDate(n,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(n)},selectDay:function(){return e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(n,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,a,o,s,r,l,c,d,u,h,p,f,m,g,v,b,y,w,x,k,C,_,T,D,z,A,S,I,M,E,O,j,P,F,H,N,U,R=new Date,q=this._daylightSavingAdjust(new Date(R.getFullYear(),R.getMonth(),R.getDate())),L=this._get(e,"isRTL"),W=this._get(e,"showButtonPanel"),B=this._get(e,"hideIfNoPrevNext"),$=this._get(e,"navigationAsDateFormat"),Y=this._getNumberOfMonths(e),K=this._get(e,"showCurrentAtPos"),V=this._get(e,"stepMonths"),X=1!==Y[0]||1!==Y[1],G=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(e,"min"),Q=this._getMinMaxDate(e,"max"),Z=e.drawMonth-K,ee=e.drawYear;if(0>Z&&(Z+=12,ee--),Q)for(t=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-Y[0]*Y[1]+1,Q.getDate())),t=J&&J>t?J:t;this._daylightSavingAdjust(new Date(ee,Z,1))>t;)0>--Z&&(Z=11,ee--);for(e.drawMonth=Z,e.drawYear=ee,i=this._get(e,"prevText"),i=$?this.formatDate(i,this._daylightSavingAdjust(new Date(ee,Z-V,1)),this._getFormatConfig(e)):i,n=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(L?"e":"w")+"'>"+i+"</span></a>":B?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(L?"e":"w")+"'>"+i+"</span></a>",a=this._get(e,"nextText"),a=$?this.formatDate(a,this._daylightSavingAdjust(new Date(ee,Z+V,1)),this._getFormatConfig(e)):a,o=this._canAdjustMonth(e,1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(L?"w":"e")+"'>"+a+"</span></a>":B?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+(L?"w":"e")+"'>"+a+"</span></a>",s=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?G:q,s=$?this.formatDate(s,r,this._getFormatConfig(e)):s,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=W?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(L?l:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+(L?"":l)+"</div>":"",d=parseInt(this._get(e,"firstDay"),10),d=isNaN(d)?0:d,u=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),b=this._get(e,"selectOtherMonths"),y=this._getDefaultDate(e),w="",k=0;Y[0]>k;k++){for(C="",this.maxRows=4,_=0;Y[1]>_;_++){if(T=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay)),D=" ui-corner-all",z="",X){if(z+="<div class='ui-datepicker-group",Y[1]>1)switch(_){case 0:z+=" ui-datepicker-group-first",D=" ui-corner-"+(L?"right":"left");break;case Y[1]-1:z+=" ui-datepicker-group-last",D=" ui-corner-"+(L?"left":"right");break;default:z+=" ui-datepicker-group-middle",D=""}z+="'>"}for(z+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+D+"'>"+(/all|left/.test(D)&&0===k?L?o:n:"")+(/all|right/.test(D)&&0===k?L?n:o:"")+this._generateMonthYearHeader(e,Z,ee,J,Q,k>0||_>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",A=u?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;7>x;x++)A+="<th"+((x+d+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+h[S=(x+d)%7]+"'>"+p[S]+"</span></th>";for(z+=A+"</tr></thead><tbody>",I=this._getDaysInMonth(ee,Z),ee===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,I)),M=(this._getFirstDayOfMonth(ee,Z)-d+7)%7,E=Math.ceil((M+I)/7),O=X&&this.maxRows>E?this.maxRows:E,this.maxRows=O,j=this._daylightSavingAdjust(new Date(ee,Z,1-M)),P=0;O>P;P++){for(z+="<tr>",F=u?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(j)+"</td>":"",x=0;7>x;x++)H=g?g.apply(e.input?e.input[0]:null,[j]):[!0,""],U=(N=j.getMonth()!==Z)&&!b||!H[0]||J&&J>j||Q&&j>Q,F+="<td class='"+((x+d+6)%7>=5?" ui-datepicker-week-end":"")+(N?" ui-datepicker-other-month":"")+(j.getTime()===T.getTime()&&Z===e.selectedMonth&&e._keyEvent||y.getTime()===j.getTime()&&y.getTime()===T.getTime()?" "+this._dayOverClass:"")+(U?" "+this._unselectableClass+" ui-state-disabled":"")+(N&&!v?"":" "+H[1]+(j.getTime()===G.getTime()?" "+this._currentClass:"")+(j.getTime()===q.getTime()?" ui-datepicker-today":""))+"'"+(N&&!v||!H[2]?"":" title='"+H[2].replace(/'/g,"&#39;")+"'")+(U?"":" data-handler='selectDay' data-event='click' data-month='"+j.getMonth()+"' data-year='"+j.getFullYear()+"'")+">"+(N&&!v?"&#xa0;":U?"<span class='ui-state-default'>"+j.getDate()+"</span>":"<a class='ui-state-default"+(j.getTime()===q.getTime()?" ui-state-highlight":"")+(j.getTime()===G.getTime()?" ui-state-active":"")+(N?" ui-priority-secondary":"")+"' href='#'>"+j.getDate()+"</a>")+"</td>",j.setDate(j.getDate()+1),j=this._daylightSavingAdjust(j);z+=F+"</tr>"}++Z>11&&(Z=0,ee++),C+=z+="</tbody></table>"+(X?"</div>"+(Y[0]>0&&_===Y[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}w+=C}return w+=c,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,i,n,a,o,s,r){var l,c,d,u,h,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),b=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",w="";if(o||!g)w+="<span class='ui-datepicker-month'>"+s[t]+"</span>";else{for(l=n&&n.getFullYear()===i,c=a&&a.getFullYear()===i,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",d=0;12>d;d++)(!l||d>=n.getMonth())&&(!c||a.getMonth()>=d)&&(w+="<option value='"+d+"'"+(d===t?" selected='selected'":"")+">"+r[d]+"</option>");w+="</select>"}if(b||(y+=w+(!o&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!v)y+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},f=p(u[0]),m=Math.max(f,p(u[1]||"")),f=n?Math.max(f,n.getFullYear()):f,m=a?Math.min(m,a.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",y+=e.yearshtml,e.yearshtml=null}return y+=this._get(e,"yearSuffix"),b&&(y+=(!o&&g&&v?"":"&#xa0;")+w),y+"</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"===i?t:0),a=e.drawMonth+("M"===i?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(n,a))+("D"===i?t:0),s=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,a,o)));e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),a=i&&i>t?i:t;return n&&a>n?n:a},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var a=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(i,n+(0>t?t:a[0]*a[1]),1));return 0>t&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(e,o)},_isInRange:function(e,t){var i,n,a=this._getMinMaxDate(e,"min"),o=this._getMinMaxDate(e,"max"),s=null,r=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),s=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(s+=n),i[1].match(/[+\-].*/)&&(r+=n)),(!a||t.getTime()>=a.getTime())&&(!o||t.getTime()<=o.getTime())&&(!s||t.getFullYear()>=s)&&(!r||r>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var a=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),a,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.4"}(jQuery),function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,n=this;if(this._isOpen&&!1!==this._trigger("beforeClose",t)){if(this._isOpen=!1,this._destroyOverlay(),!this.opener.filter(":focusable").focus().length)try{(i=this.document[0].activeElement)&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(e){}this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",e),i},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement;this.uiDialog[0]===t||e.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),a=i.filter(":last");t.target!==a[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(a.focus(1),t.preventDefault()):(n.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(i,function(i,n){var a,o;n=e.isFunction(n)?{click:n,text:i}:n,n=e.extend({type:"button"},n),a=n.click,n.click=function(){a.apply(t.element[0],arguments)},o={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,e("<button></button>",n).button(o).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,a){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,t(a))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(a,o){n.position=[o.position.left-i.document.scrollLeft(),o.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",a,t(o))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,n=this.options,a=n.resizable,o=this.uiDialog.css("position"),s="string"==typeof a?a:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:s,start:function(n,a){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,t(a))},resize:function(e,n){i._trigger("resize",e,t(n))},stop:function(a,o){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",a,t(o))}}).css("position",o)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(n){var a=this,o=!1,s={};e.each(n,function(e,n){a._setOption(e,n),e in t&&(o=!0),e in i&&(s[e]=n)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(e,t){var i,n,a=this.uiDialog;"dialogClass"===e&&a.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&((i=a.is(":data(ui-draggable)"))&&!t&&a.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&((n=a.is(":data(ui-resizable)"))&&!t&&a.resizable("destroy"),n&&"string"==typeof t&&a.resizable("option","handles",t),n||!1===t||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(n){t._allowInteraction(n)||(n.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,!1!==e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,i=this.options.position,n=[],a=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(1===(n=i.split?i.split(" "):[i[0],i[1]]).length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(a[e]=n[e],n[e]=t)}),i={my:n[0]+(0>a[0]?a[0]:"+"+a[0])+" "+n[1]+(0>a[1]?a[1]:"+"+a[1]),at:n.join(" ")}),i=e.extend({},e.ui.dialog.prototype.options.position,i)):i=e.ui.dialog.prototype.options.position,(t=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.position(i),t||this.uiDialog.hide()}})}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(e(!0===i.iframeFix?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0))},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),!("original"===this.options.helper&&!e.contains(this.element[0].ownerDocument,this.element[0]))&&("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==i._trigger("stop",t)&&i._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,a=this.options;return a.containment?"window"===a.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===a.containment?void(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):a.containment.constructor===Array?void(this.containment=a.containment):("parent"===a.containment&&(a.containment=this.helper[0].parentNode),void((n=(i=e(a.containment))[0])&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(t){var i,n,a,o,s=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,c=t.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),s.grid&&(a=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=i?a-this.offset.click.top>=i[1]||a-this.offset.click.top>i[3]?a:a-this.offset.click.top>=i[1]?a-s.grid[1]:a+s.grid[1]:a,o=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-s.grid[0]:o+s.grid[0]:o)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("ui-draggable"),a=n.options,o=e.extend({},i,{item:n.element});n.sortables=[],e(a.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,o))})},stop:function(t,i){var n=e(this).data("ui-draggable"),a=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,a))})},drag:function(t,i){var n=e(this).data("ui-draggable"),a=this;e.each(n.sortables,function(){var o=!1,s=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==s&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(s.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(a).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),a=e(this).data("ui-draggable").options;n.css("opacity")&&(a._opacity=n.css("opacity")),n.css("opacity",a.opacity)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),n=i.options,a=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=a=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=a=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=a=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=a=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),!1!==a&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){var n,a,o,s,r,l,c,d,u,h,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,b=i.offset.top,y=b+p.helperProportions.height;for(u=p.snapElements.length-1;u>=0;u--)l=(r=p.snapElements[u].left)+p.snapElements[u].width,d=(c=p.snapElements[u].top)+p.snapElements[u].height,r-m>v||g>l+m||c-m>y||b>d+m||!e.contains(p.snapElements[u].item.ownerDocument,p.snapElements[u].item)?(p.snapElements[u].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=!1):("inner"!==f.snapMode&&(n=m>=Math.abs(c-y),a=m>=Math.abs(d-b),o=m>=Math.abs(r-v),s=m>=Math.abs(l-g),n&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),a&&(i.position.top=p._convertPositionTo("relative",{top:d,left:0}).top-p.margins.top),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),s&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),h=n||a||o||s,"outer"!==f.snapMode&&(n=m>=Math.abs(c-b),a=m>=Math.abs(d-y),o=m>=Math.abs(r-g),s=m>=Math.abs(l-v),n&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),a&&(i.position.top=p._convertPositionTo("relative",{top:d-p.helperProportions.height,left:0}).top-p.margins.top),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),s&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[u].snapping&&(n||a||o||s||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=n||a||o||s||h)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,n=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});n.length&&(t=parseInt(e(n[0]).css("zIndex"),10)||0,e(n).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+n.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),a=e(this).data("ui-draggable").options;n.css("zIndex")&&(a._zIndex=n.css("zIndex")),n.css("zIndex",a.zIndex)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(jQuery),function(e){function t(e,t,i){return e>t&&t+i>e}e.widget("ui.droppable",{version:"1.10.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,n=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions=function(){return arguments.length?void(t=arguments[0]):t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight})},e.ui.ddmanager.droppables[i.scope]=e.ui.ddmanager.droppables[i.scope]||[],e.ui.ddmanager.droppables[i.scope].push(this),i.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=e.ui.ddmanager.droppables[this.options.scope];i.length>t;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"===t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current,a=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(a=!0,!1):void 0}),!a&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,i,n){if(!i.offset)return!1;var a,o=(e.positionAbs||e.position.absolute).left,s=(e.positionAbs||e.position.absolute).top,r=o+e.helperProportions.width,l=s+e.helperProportions.height,c=i.offset.left,d=i.offset.top,u=c+i.proportions().width,h=d+i.proportions().height;switch(n){case"fit":return o>=c&&u>=r&&s>=d&&h>=l;case"intersect":return o+e.helperProportions.width/2>c&&u>r-e.helperProportions.width/2&&s+e.helperProportions.height/2>d&&h>l-e.helperProportions.height/2;case"pointer":return a=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,t((e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,d,i.proportions().height)&&t(a,c,i.proportions().width);case"touch":return(s>=d&&h>=s||l>=d&&h>=l||d>s&&l>h)&&(o>=c&&u>=o||r>=c&&u>=r||c>o&&r>u);default:return!1}},e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,i){var n,a,o=e.ui.ddmanager.droppables[t.options.scope]||[],s=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;o.length>n;n++)if(!(o[n].options.disabled||t&&!o[n].accept.call(o[n].element[0],t.currentItem||t.element))){for(a=0;r.length>a;a++)if(r[a]===o[n].element[0]){o[n].proportions().height=0;continue e}o[n].visible="none"!==o[n].element.css("display"),o[n].visible&&("mousedown"===s&&o[n]._activate.call(o[n],i),o[n].offset=o[n].element.offset(),o[n].proportions({width:o[n].element[0].offsetWidth,height:o[n].element[0].offsetHeight}))}},drop:function(t,i){var n=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,a,o,s=e.ui.intersect(t,this,this.options.tolerance),r=!s&&this.isover?"isout":s&&!this.isover?"isover":null;r&&(this.options.greedy&&(a=this.options.scope,(o=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===a})).length&&((n=e.data(o[0],"ui-droppable")).greedyChild="isover"===r)),n&&"isover"===r&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),n&&"isout"===r&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(e,t){var i="ui-effects-";e.effects={effect:{}},function(e,t){function i(e,t,i){var n=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:e>n.max?n.max:e)}function n(i){var n=l(),a=n._rgba=[];return i=i.toLowerCase(),p(r,function(e,o){var s,r=o.re.exec(i),l=r&&o.parse(r),d=o.space||"rgba";return l?(s=n[d](l),n[c[d].cache]=s[c[d].cache],a=n._rgba=s._rgba,!1):t}),a.length?("0,0,0,0"===a.join()&&e.extend(a,o.transparent),n):o[i]}function a(e,t,i){return 1>6*(i=(i+1)%1)?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}var o,s=/^([\-+])=\s*(\d+\.?\d*)/,r=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,i,n,a){return new e.Color.fn.parse(t,i,n,a)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},u=l.support={},h=e("<p>")[0],p=e.each;h.style.cssText="background-color:rgba(1,1,1,.5)",u.rgba=h.style.backgroundColor.indexOf("rgba")>-1,p(c,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(a,s,r,d){if(a===t)return this._rgba=[null,null,null,null],this;(a.jquery||a.nodeType)&&(a=e(a).css(s),s=t);var u=this,h=e.type(a),f=this._rgba=[];return s!==t&&(a=[a,s,r,d],h="array"),"string"===h?this.parse(n(a)||o._default):"array"===h?(p(c.rgba.props,function(e,t){f[t.idx]=i(a[t.idx],t)}),this):"object"===h?(p(c,a instanceof l?function(e,t){a[t.cache]&&(u[t.cache]=a[t.cache].slice())}:function(t,n){var o=n.cache;p(n.props,function(e,t){if(!u[o]&&n.to){if("alpha"===e||null==a[e])return;u[o]=n.to(u._rgba)}u[o][t.idx]=i(a[e],t,!0)}),u[o]&&0>e.inArray(null,u[o].slice(0,3))&&(u[o][3]=1,n.from&&(u._rgba=n.from(u[o])))}),this):t},is:function(e){var i=l(e),n=!0,a=this;return p(c,function(e,o){var s,r=i[o.cache];return r&&(s=a[o.cache]||o.to&&o.to(a._rgba)||[],p(o.props,function(e,i){return null!=r[i.idx]?n=r[i.idx]===s[i.idx]:t})),n}),n},_space:function(){var e=[],t=this;return p(c,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var n=l(e),a=n._space(),o=c[a],s=0===this.alpha()?l("transparent"):this,r=s[o.cache]||o.to(s._rgba),u=r.slice();return n=n[o.cache],p(o.props,function(e,a){var o=a.idx,s=r[o],l=n[o],c=d[a.type]||{};null!==l&&(null===s?u[o]=l:(c.mod&&(l-s>c.mod/2?s+=c.mod:s-l>c.mod/2&&(s-=c.mod)),u[o]=i((l-s)*t+s,a)))}),this[a](u)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),a=l(t)._rgba;return l(e.map(i,function(e,t){return(1-n)*a[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return 1===(e=(e||0).toString(16)).length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,c.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,a=e[1]/255,o=e[2]/255,s=e[3],r=Math.max(n,a,o),l=Math.min(n,a,o),c=r-l,d=r+l,u=.5*d;return t=l===r?0:n===r?60*(a-o)/c+360:a===r?60*(o-n)/c+120:60*(n-a)/c+240,i=0===c?0:.5>=u?c/d:c/(2-d),[Math.round(t)%360,i,u,null==s?1:s]},c.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],o=e[3],s=.5>=n?n*(1+i):n+i-n*i,r=2*n-s;return[Math.round(255*a(r,s,t+1/3)),Math.round(255*a(r,s,t)),Math.round(255*a(r,s,t-1/3)),o]},p(c,function(n,a){var o=a.props,r=a.cache,c=a.to,d=a.from;l.fn[n]=function(n){if(c&&!this[r]&&(this[r]=c(this._rgba)),n===t)return this[r].slice();var a,s=e.type(n),u="array"===s||"object"===s?n:arguments,h=this[r].slice();return p(o,function(e,t){var n=u["object"===s?e:t.idx];null==n&&(n=h[t.idx]),h[t.idx]=i(n,t)}),d?((a=l(d(h)))[r]=h,a):l(h)},p(o,function(t,i){l.fn[t]||(l.fn[t]=function(a){var o,r=e.type(a),l="alpha"===t?this._hsla?"hsla":"rgba":n,c=this[l](),d=c[i.idx];return"undefined"===r?d:("function"===r&&(a=a.call(this,d),r=e.type(a)),null==a&&i.empty?this:("string"===r&&((o=s.exec(a))&&(a=d+parseFloat(o[2])*("+"===o[1]?1:-1))),c[i.idx]=a,this[l](c)))})})}),l.hook=function(t){var i=t.split(" ");p(i,function(t,i){e.cssHooks[i]={set:function(t,a){var o,s,r="";if("transparent"!==a&&("string"!==e.type(a)||(o=n(a)))){if(a=l(o||a),!u.rgba&&1!==a._rgba[3]){for(s="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&s&&s.style;)try{r=e.css(s,"backgroundColor"),s=s.parentNode}catch(e){}a=a.blend(r&&"transparent"!==r?r:"_default")}a=a.toRgbaString()}try{t.style[i]=a}catch(e){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),e.cssHooks.borderColor={expand:function(e){var t={};return p(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(t){var i,n,a=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,o={};if(a&&a.length&&a[0]&&a[a[0]])for(n=a.length;n--;)"string"==typeof a[i=a[n]]&&(o[e.camelCase(i)]=a[i]);else for(i in a)"string"==typeof a[i]&&(o[i]=a[i]);return o}function n(t,i){var n,a,s={};for(n in i)a=i[n],t[n]!==a&&(o[n]||(e.fx.step[n]||!isNaN(parseFloat(a)))&&(s[n]=a));return s}var a=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,o,s,r){var l=e.speed(o,s,r);return this.queue(function(){var o,s=e(this),r=s.attr("class")||"",c=l.children?s.find("*").addBack():s;c=c.map(function(){return{el:e(this),start:i(this)}}),o=function(){e.each(a,function(e,i){t[i]&&s[i+"Class"](t[i])})},o(),c=c.map(function(){return this.end=i(this.el[0]),this.diff=n(this.start,this.end),this}),s.attr("class",r),c=c.map(function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()}),e.when.apply(e,c.get()).done(function(){o(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(s[0])})})},e.fn.extend({addClass:function(t){return function(i,n,a,o){return n?e.effects.animateClass.call(this,{add:i},n,a,o):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,n,a,o){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},n,a,o):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(i){return function(n,a,o,s,r){return"boolean"==typeof a||a===t?o?e.effects.animateClass.call(this,a?{add:n}:{remove:n},o,s,r):i.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},a,o,s)}}(e.fn.toggleClass),switchClass:function(t,i,n,a,o){return e.effects.animateClass.call(this,{add:i,remove:t},n,a,o)}})}(),function(){function n(t,i,n,a){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(a=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(a=n,n=i,i={}),e.isFunction(n)&&(a=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=a||i.complete,t}function a(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||("string"==typeof t&&!e.effects.effect[t]||(!!e.isFunction(t)||"object"==typeof t&&!t.effect))}e.extend(e.effects,{version:"1.10.4",save:function(e,t){for(var n=0;t.length>n;n++)null!==t[n]&&e.data(i+t[n],e[0].style[t[n]])},restore:function(e,n){var a,o;for(o=0;n.length>o;o++)null!==n[o]&&((a=e.data(i+n[o]))===t&&(a=""),e.css(n[o],a))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),a={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(e){o=document.body}return t.wrap(n),(t[0]===o||e.contains(t[0],o))&&e(o).focus(),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(a),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,n,a){return a=a||{},e.each(i,function(e,i){var o=t.cssUnit(i);o[0]>0&&(a[i]=o[0]*n+o[1])}),a}}),e.fn.extend({effect:function(){function t(t){function n(){e.isFunction(o)&&o.call(a[0]),e.isFunction(t)&&t()}var a=e(this),o=i.complete,r=i.mode;(a.is(":hidden")?"hide"===r:"show"===r)?(a[r](),n()):s.call(a[0],i,n)}var i=n.apply(this,arguments),a=i.mode,o=i.queue,s=e.effects.effect[i.effect];return e.fx.off||!s?a?this[a](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):!1===o?this.each(t):this.queue(o||"fx",t)},show:function(e){return function(t){if(a(t))return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(e.fn.show),hide:function(e){return function(t){if(a(t))return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(e.fn.hide),toggle:function(e){return function(t){if(a(t)||"boolean"==typeof t)return e.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}()}(jQuery),function(e){var t=/up|down|vertical/,i=/up|left|vertical|horizontal/;e.effects.effect.blind=function(n,a){var o,s,r,l=e(this),c=["position","top","bottom","left","right","height","width"],d=e.effects.setMode(l,n.mode||"hide"),u=n.direction||"up",h=t.test(u),p=h?"height":"width",f=h?"top":"left",m=i.test(u),g={},v="show"===d;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),c):e.effects.save(l,c),l.show(),s=(o=e.effects.createWrapper(l).css({overflow:"hidden"}))[p](),r=parseFloat(o.css(f))||0,g[p]=v?s:0,m||(l.css(h?"bottom":"right",0).css(h?"top":"left","auto").css({position:"absolute"}),g[f]=v?r:s+r),v&&(o.css(p,0),m||o.css(f,r+s)),o.animate(g,{duration:n.duration,easing:n.easing,queue:!1,complete:function(){"hide"===d&&l.hide(),e.effects.restore(l,c),e.effects.removeWrapper(l),a()}})}}(jQuery),function(e){e.effects.effect.bounce=function(t,i){var n,a,o,s=e(this),r=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(s,t.mode||"effect"),c="hide"===l,d="show"===l,u=t.direction||"up",h=t.distance,p=t.times||5,f=2*p+(d||c?1:0),m=t.duration/f,g=t.easing,v="up"===u||"down"===u?"top":"left",b="up"===u||"left"===u,y=s.queue(),w=y.length;for((d||c)&&r.push("opacity"),e.effects.save(s,r),s.show(),e.effects.createWrapper(s),h||(h=s["top"===v?"outerHeight":"outerWidth"]()/3),d&&((o={opacity:1})[v]=0,s.css("opacity",0).css(v,b?2*-h:2*h).animate(o,m,g)),c&&(h/=Math.pow(2,p-1)),(o={})[v]=0,n=0;p>n;n++)(a={})[v]=(b?"-=":"+=")+h,s.animate(a,m,g).animate(o,m,g),h=c?2*h:h/2;c&&((a={opacity:0})[v]=(b?"-=":"+=")+h,s.animate(a,m,g)),s.queue(function(){c&&s.hide(),e.effects.restore(s,r),e.effects.removeWrapper(s),i()}),w>1&&y.splice.apply(y,[1,0].concat(y.splice(w,f+1))),s.dequeue()}}(jQuery),function(e){e.effects.effect.clip=function(t,i){var n,a,o,s=e(this),r=["position","top","bottom","left","right","height","width"],l="show"===e.effects.setMode(s,t.mode||"hide"),c="vertical"===(t.direction||"vertical"),d=c?"height":"width",u=c?"top":"left",h={};e.effects.save(s,r),s.show(),n=e.effects.createWrapper(s).css({overflow:"hidden"}),o=(a="IMG"===s[0].tagName?n:s)[d](),l&&(a.css(d,0),a.css(u,o/2)),h[d]=l?o:0,h[u]=l?0:o/2,a.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||s.hide(),e.effects.restore(s,r),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e){e.effects.effect.drop=function(t,i){var n,a=e(this),o=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(a,t.mode||"hide"),r="show"===s,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",d="up"===l||"left"===l?"pos":"neg",u={opacity:r?1:0};e.effects.save(a,o),a.show(),e.effects.createWrapper(a),n=t.distance||a["top"===c?"outerHeight":"outerWidth"](!0)/2,r&&a.css("opacity",0).css(c,"pos"===d?-n:n),u[c]=(r?"pos"===d?"+=":"-=":"pos"===d?"-=":"+=")+n,a.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()}})}}(jQuery),function(e){e.effects.effect.explode=function(t,i){function n(){v.push(this),v.length===d*u&&(h.css({visibility:"visible"}),e(v).remove(),p||h.hide(),i())}var a,o,s,r,l,c,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,u=d,h=e(this),p="show"===e.effects.setMode(h,t.mode||"hide"),f=h.show().css("visibility","hidden").offset(),m=Math.ceil(h.outerWidth()/u),g=Math.ceil(h.outerHeight()/d),v=[];for(a=0;d>a;a++)for(r=f.top+a*g,c=a-(d-1)/2,o=0;u>o;o++)s=f.left+o*m,l=o-(u-1)/2,h.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*m,top:-a*g}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:m,height:g,left:s+(p?l*m:0),top:r+(p?c*g:0),opacity:p?0:1}).animate({left:s+(p?0:l*m),top:r+(p?0:c*g),opacity:p?1:0},t.duration||500,t.easing,n)}}(jQuery),function(e){e.effects.effect.fade=function(t,i){var n=e(this),a=e.effects.setMode(n,t.mode||"toggle");n.animate({opacity:a},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(jQuery),function(e){e.effects.effect.fold=function(t,i){var n,a,o=e(this),s=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(o,t.mode||"hide"),l="show"===r,c="hide"===r,d=t.size||15,u=/([0-9]+)%/.exec(d),h=!!t.horizFirst,p=l!==h,f=p?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(o,s),o.show(),n=e.effects.createWrapper(o).css({overflow:"hidden"}),a=p?[n.width(),n.height()]:[n.height(),n.width()],u&&(d=parseInt(u[1],10)/100*a[c?0:1]),l&&n.css(h?{height:0,width:d}:{height:d,width:0}),g[f[0]]=l?a[0]:d,v[f[1]]=l?a[1]:0,n.animate(g,m,t.easing).animate(v,m,t.easing,function(){c&&o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),i()})}}(jQuery),function(e){e.effects.effect.highlight=function(t,i){var n=e(this),a=["backgroundImage","backgroundColor","opacity"],o=e.effects.setMode(n,t.mode||"show"),s={backgroundColor:n.css("backgroundColor")};"hide"===o&&(s.opacity=0),e.effects.save(n,a),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(s,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),i()}})}}(jQuery),function(e){e.effects.effect.pulsate=function(t,i){var n,a=e(this),o=e.effects.setMode(a,t.mode||"show"),s="show"===o,r="hide"===o,l=s||"hide"===o,c=2*(t.times||5)+(l?1:0),d=t.duration/c,u=0,h=a.queue(),p=h.length;for((s||!a.is(":visible"))&&(a.css("opacity",0).show(),u=1),n=1;c>n;n++)a.animate({opacity:u},d,t.easing),u=1-u;a.animate({opacity:u},d,t.easing),a.queue(function(){r&&a.hide(),i()}),p>1&&h.splice.apply(h,[1,0].concat(h.splice(p,c+1))),a.dequeue()}}(jQuery),function(e){e.effects.effect.puff=function(t,i){var n=e(this),a=e.effects.setMode(n,t.mode||"hide"),o="hide"===a,s=parseInt(t.percent,10)||150,r=s/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:a,complete:i,percent:o?s:100,from:o?l:{height:l.height*r,width:l.width*r,outerHeight:l.outerHeight*r,outerWidth:l.outerWidth*r}}),n.effect(t)},e.effects.effect.scale=function(t,i){var n=e(this),a=e.extend(!0,{},t),o=e.effects.setMode(n,t.mode||"effect"),s=parseInt(t.percent,10)||(0===parseInt(t.percent,10)||"hide"===o?0:100),r=t.direction||"both",l=t.origin,c={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},d="horizontal"!==r?s/100:1,u="vertical"!==r?s/100:1;a.effect="size",a.queue=!1,a.complete=i,"effect"!==o&&(a.origin=l||["middle","center"],a.restore=!0),a.from=t.from||("show"===o?{height:0,width:0,outerHeight:0,outerWidth:0}:c),a.to={height:c.height*d,width:c.width*u,outerHeight:c.outerHeight*d,outerWidth:c.outerWidth*u},a.fade&&("show"===o&&(a.from.opacity=0,a.to.opacity=1),"hide"===o&&(a.from.opacity=1,a.to.opacity=0)),n.effect(a)},e.effects.effect.size=function(t,i){var n,a,o,s=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["width","height","overflow"],c=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],u=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],h=e.effects.setMode(s,t.mode||"effect"),p=t.restore||"effect"!==h,f=t.scale||"both",m=t.origin||["middle","center"],g=s.css("position"),v=p?r:["position","top","bottom","left","right","overflow","opacity"],b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===h&&s.show(),n={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},"toggle"===t.mode&&"show"===h?(s.from=t.to||b,s.to=t.from||n):(s.from=t.from||("show"===h?b:n),s.to=t.to||("hide"===h?b:n)),o={from:{y:s.from.height/n.height,x:s.from.width/n.width},to:{y:s.to.height/n.height,x:s.to.width/n.width}},("box"===f||"both"===f)&&(o.from.y!==o.to.y&&(v=v.concat(d),s.from=e.effects.setTransition(s,d,o.from.y,s.from),s.to=e.effects.setTransition(s,d,o.to.y,s.to)),o.from.x!==o.to.x&&(v=v.concat(u),s.from=e.effects.setTransition(s,u,o.from.x,s.from),s.to=e.effects.setTransition(s,u,o.to.x,s.to))),("content"===f||"both"===f)&&o.from.y!==o.to.y&&(v=v.concat(c).concat(l),s.from=e.effects.setTransition(s,c,o.from.y,s.from),s.to=e.effects.setTransition(s,c,o.to.y,s.to)),e.effects.save(s,v),s.show(),e.effects.createWrapper(s),s.css("overflow","hidden").css(s.from),m&&(a=e.effects.getBaseline(m,n),s.from.top=(n.outerHeight-s.outerHeight())*a.y,s.from.left=(n.outerWidth-s.outerWidth())*a.x,s.to.top=(n.outerHeight-s.to.outerHeight)*a.y,s.to.left=(n.outerWidth-s.to.outerWidth)*a.x),s.css(s.from),("content"===f||"both"===f)&&(d=d.concat(["marginTop","marginBottom"]).concat(c),u=u.concat(["marginLeft","marginRight"]),l=r.concat(d).concat(u),s.find("*[width]").each(function(){var i=e(this),n=i.height(),a=i.width(),s=i.outerHeight(),r=i.outerWidth();p&&e.effects.save(i,l),i.from={height:n*o.from.y,width:a*o.from.x,outerHeight:s*o.from.y,outerWidth:r*o.from.x},i.to={height:n*o.to.y,width:a*o.to.x,outerHeight:n*o.to.y,outerWidth:a*o.to.x},o.from.y!==o.to.y&&(i.from=e.effects.setTransition(i,d,o.from.y,i.from),i.to=e.effects.setTransition(i,d,o.to.y,i.to)),o.from.x!==o.to.x&&(i.from=e.effects.setTransition(i,u,o.from.x,i.from),i.to=e.effects.setTransition(i,u,o.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){p&&e.effects.restore(i,l)})})),s.animate(s.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===s.to.opacity&&s.css("opacity",s.from.opacity),"hide"===h&&s.hide(),e.effects.restore(s,v),p||("static"===g?s.css({position:"relative",top:s.to.top,left:s.to.left}):e.each(["top","left"],function(e,t){s.css(t,function(t,i){var n=parseInt(i,10),a=e?s.to.left:s.to.top;return"auto"===i?a+"px":n+a+"px"})})),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e){e.effects.effect.shake=function(t,i){var n,a=e(this),o=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(a,t.mode||"effect"),r=t.direction||"left",l=t.distance||20,c=t.times||3,d=2*c+1,u=Math.round(t.duration/d),h="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},m={},g={},v=a.queue(),b=v.length;for(e.effects.save(a,o),a.show(),e.effects.createWrapper(a),f[h]=(p?"-=":"+=")+l,m[h]=(p?"+=":"-=")+2*l,g[h]=(p?"-=":"+=")+2*l,a.animate(f,u,t.easing),n=1;c>n;n++)a.animate(m,u,t.easing).animate(g,u,t.easing);a.animate(m,u,t.easing).animate(f,u/2,t.easing).queue(function(){"hide"===s&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()}),b>1&&v.splice.apply(v,[1,0].concat(v.splice(b,d+1))),a.dequeue()}}(jQuery),function(e){e.effects.effect.slide=function(t,i){var n,a=e(this),o=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(a,t.mode||"show"),r="show"===s,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",d="up"===l||"left"===l,u={};e.effects.save(a,o),a.show(),n=t.distance||a["top"===c?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(a).css({overflow:"hidden"}),r&&a.css(c,d?isNaN(n)?"-"+n:-n:n),u[c]=(r?d?"+=":"-=":d?"-=":"+=")+n,a.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()}})}}(jQuery),function(e){e.effects.effect.transfer=function(t,i){var n=e(this),a=e(t.to),o="fixed"===a.css("position"),s=e("body"),r=o?s.scrollTop():0,l=o?s.scrollLeft():0,c=a.offset(),d={top:c.top-r,left:c.left-l,height:a.innerHeight(),width:a.innerWidth()},u=n.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:u.top-r,left:u.left-l,height:n.innerHeight(),width:n.innerWidth(),position:o?"fixed":"absolute"}).animate(d,t.duration,t.easing,function(){h.remove(),i()})}}(jQuery),function(e){e.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,a,o,s,r,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,a=this.previousFilter||"",o=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),o===a?s=!0:o=a+o,r=RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(e(this).children("a").text())}),(n=s&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n).length||(o=String.fromCharCode(t.keyCode),r=RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev("a"),a=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(a),t.attr("aria-labelledby",n.attr("id"))}),(t=n.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(i=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,a,o,s,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,a=t.offset().top-this.activeMenu.offset().top-i-n,o=this.activeMenu.scrollTop(),s=this.activeMenu.height(),r=t.height(),0>a?this.activeMenu.scrollTop(o+a):a+r>s&&this.activeMenu.scrollTop(o+a-s+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,n)},nextPage:function(t){var i,n,a;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,a=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return 0>(i=e(this)).offset().top-n-a}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var i,n,a;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,a=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return(i=e(this)).offset().top-n+a>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.10.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),t)},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=!1===e,"number"!=typeof e&&(e=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),function(e){function t(e){return parseInt(e,10)||0}function i(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,n,a,o=this,s=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!s.aspectRatio,aspectRatio:s.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:s.helper||s.ghost||s.animate?s.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=s.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)n=e.trim(t[i]),(a=e("<div class='ui-resizable-handle "+("ui-resizable-"+n)+"'></div>")).css({zIndex:s.zIndex}),"se"===n&&a.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(a);this._renderAxis=function(t){var i,n,a,o;for(i in t=t||this.element,this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=e(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),a=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(a,o),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=a&&a[1]?a[1]:"se")}),s.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){s.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){s.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,n,a=!1;for(i in this.handles)((n=e(this.handles[i])[0])===t.target||e.contains(n,t.target))&&(a=!0);return!this.options.disabled&&a},_mouseStart:function(i){var n,a,o,s=this.options,r=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),n=t(this.helper.css("left")),a=t(this.helper.css("top")),s.containment&&(n+=e(s.containment).scrollLeft()||0,a+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:a},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:n,top:a},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),l.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var i,n=this.helper,a={},o=this.originalMousePosition,s=this.axis,r=this.position.top,l=this.position.left,c=this.size.width,d=this.size.height,u=t.pageX-o.left||0,h=t.pageY-o.top||0,p=this._change[s];return!!p&&(i=p.apply(this,[t,u,h]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==r&&(a.top=this.position.top+"px"),this.position.left!==l&&(a.left=this.position.left+"px"),this.size.width!==c&&(a.width=this.size.width+"px"),this.size.height!==d&&(a.height=this.size.height+"px"),n.css(a),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(a)||this._trigger("resize",t,this.ui()),!1)},_mouseStop:function(t){this.resizing=!1;var i,n,a,o,s,r,l,c=this.options,d=this;return this._helper&&(a=(n=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&e.ui.hasScroll(i[0],"left")?0:d.sizeDiff.height,o=n?0:d.sizeDiff.width,s={width:d.helper.width()-o,height:d.helper.height()-a},r=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null,c.animate||this.element.css(e.extend(s,{top:l,left:r})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,a,o,s,r=this.options;s={minWidth:i(r.minWidth)?r.minWidth:0,maxWidth:i(r.maxWidth)?r.maxWidth:1/0,minHeight:i(r.minHeight)?r.minHeight:0,maxHeight:i(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||e)&&(t=s.minHeight*this.aspectRatio,a=s.minWidth/this.aspectRatio,n=s.maxHeight*this.aspectRatio,o=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),a>s.minHeight&&(s.minHeight=a),s.maxWidth>n&&(s.maxWidth=n),s.maxHeight>o&&(s.maxHeight=o)),this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,a=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===a&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===a&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,a=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=i(e.width)&&t.minWidth&&t.minWidth>e.width,r=i(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,d=/sw|nw|w/.test(n),u=/nw|ne|n/.test(n);return s&&(e.width=t.minWidth),r&&(e.height=t.minHeight),a&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),s&&d&&(e.left=l-t.minWidth),a&&d&&(e.left=l-t.maxWidth),r&&u&&(e.top=c-t.minHeight),o&&u&&(e.top=c-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,n,a,o=this.helper||this.element;for(e=0;this._proportionallyResizeElements.length>e;e++){if(a=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")],n=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")],t=0;i.length>t;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(n[t],10)||0);a.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),n=i.options,a=i._proportionallyResizeElements,o=a.length&&/textarea/i.test(a[0].nodeName),s=o&&e.ui.hasScroll(a[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-s},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,d=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,d&&c?{top:d,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};a&&a.length&&e(a[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i,n,a,o,s,r,l,c=e(this).data("ui-resizable"),d=c.options,u=c.element,h=d.containment,p=h instanceof e?h.get(0):/parent/.test(h)?u.parent().get(0):h;p&&(c.containerElement=e(p),/document/.test(h)||h===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(i=e(p),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,a){n[e]=t(i.css("padding"+a))}),c.containerOffset=i.offset(),c.containerPosition=i.position(),c.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]},a=c.containerOffset,o=c.containerSize.height,s=c.containerSize.width,r=e.ui.hasScroll(p,"left")?p.scrollWidth:s,l=e.ui.hasScroll(p)?p.scrollHeight:o,c.parentData={element:p,left:a.left,top:a.top,width:r,height:l}))},resize:function(t){var i,n,a,o,s=e(this).data("ui-resizable"),r=s.options,l=s.containerOffset,c=s.position,d=s._aspectRatio||t.shiftKey,u={top:0,left:0},h=s.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(u=l),c.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-u.left),d&&(s.size.height=s.size.width/s.aspectRatio),s.position.left=r.helper?l.left:0),c.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),d&&(s.size.width=s.size.height*s.aspectRatio),s.position.top=s._helper?l.top:0),s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top,i=Math.abs((s._helper,s.offset.left-u.left+s.sizeDiff.width)),n=Math.abs((s._helper?s.offset.top-u.top:s.offset.top-l.top)+s.sizeDiff.height),a=s.containerElement.get(0)===s.element.parent().get(0),o=/relative|absolute/.test(s.containerElement.css("position")),a&&o&&(i-=Math.abs(s.parentData.left)),i+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-i,d&&(s.size.height=s.size.width/s.aspectRatio)),n+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-n,d&&(s.size.width=s.size.height*s.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.containerOffset,a=t.containerPosition,o=t.containerElement,s=e(t.helper),r=s.offset(),l=s.outerWidth()-t.sizeDiff.width,c=s.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(o.css("position"))&&e(this).css({left:r.left-a.left-n.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(o.css("position"))&&e(this).css({left:r.left-a.left-n.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable").options,i=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof t.alsoResize||t.alsoResize.parentNode?i(t.alsoResize):t.alsoResize.length?(t.alsoResize=t.alsoResize[0],i(t.alsoResize)):e.each(t.alsoResize,function(e){i(e)})},resize:function(t,i){var n=e(this).data("ui-resizable"),a=n.options,o=n.originalSize,s=n.originalPosition,r={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-s.top||0,left:n.position.left-s.left||0},l=function(t,n){e(t).each(function(){var t=e(this),a=e(this).data("ui-resizable-alsoresize"),o={},s=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(e,t){var i=(a[t]||0)+(r[t]||0);i&&i>=0&&(o[t]=i||null)}),t.css(o)})};"object"!=typeof a.alsoResize||a.alsoResize.nodeType?l(a.alsoResize):e.each(a.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size,a=t.originalSize,o=t.originalPosition,s=t.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=r[0]||1,c=r[1]||1,d=Math.round((n.width-a.width)/l)*l,u=Math.round((n.height-a.height)/c)*c,h=a.width+d,p=a.height+u,f=i.maxWidth&&h>i.maxWidth,m=i.maxHeight&&p>i.maxHeight,g=i.minWidth&&i.minWidth>h,v=i.minHeight&&i.minHeight>p;i.grid=r,g&&(h+=l),v&&(p+=c),f&&(h-=l),m&&(p-=c),/^(se|s|e)$/.test(s)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(s)?(t.size.width=h,t.size.height=p,t.position.top=o.top-u):/^(sw)$/.test(s)?(t.size.width=h,t.size.height=p,t.position.left=o.left-d):(p-c>0?(t.size.height=p,t.position.top=o.top-u):(t.size.height=c,t.position.top=o.top+a.height-c),h-l>0?(t.size.width=h,t.position.left=o.left-d):(t.size.width=l,t.position.left=o.left+a.width-l))}})}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(t=e(i.options.filter,i.element[0])).addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,n=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0,t.metaKey||t.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),e(t.target).parents().addBack().each(function(){var n,a=e.data(this,"selectable-item");return a?(n=!t.metaKey&&!t.ctrlKey||!a.$element.hasClass("ui-selected"),a.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),a.unselecting=!n,a.selecting=n,a.selected=n,n?i._trigger("selecting",t,{selecting:a.element}):i._trigger("unselecting",t,{unselecting:a.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,n=this,a=this.options,o=this.opos[0],s=this.opos[1],r=t.pageX,l=t.pageY;return o>r&&(i=r,r=o,o=i),s>l&&(i=l,l=s,s=i),this.helper.css({left:o,top:s,width:r-o,height:l-s}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),c=!1;i&&i.element!==n.element[0]&&("touch"===a.tolerance?c=!(i.left>r||o>i.right||i.top>l||s>i.bottom):"fit"===a.tolerance&&(c=i.left>o&&r>i.right&&i.top>s&&l>i.bottom),c?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e){e.widget("ui.slider",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,a=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o=[];for(i=n.values&&n.values.length||1,a.length>i&&(a.slice(i).remove(),a=a.slice(0,i)),t=a.length;i>t;t++)o.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=a.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,a,o,s,r,l,c=this,d=this.options;return!d.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),a=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-c.values(t));(a>i||a===i&&(t===c._lastChangedValue||c.values(t)===d.min))&&(a=i,o=e(this),s=t)}),!1!==this._start(t,s)&&(this._mouseSliding=!0,this._handleIndex=s,o.addClass("ui-state-active").focus(),r=o.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-r.left-o.width()/2,top:t.pageY-r.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,s,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,a,o;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(n=i/t)>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),a=this._valueMax()-this._valueMin(),o=this._valueMin()+n*a,this._trimAlignValue(o)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,a,o;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&!0===this.options.range&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&((a=this.values())[t]=i,o=this._trigger("slide",e,{handle:this.handles[t],value:i,values:a}),n=this.values(t?0:1),!1!==o&&this.values(t,i))):i!==this.value()&&(!1!==(o=this._trigger("slide",e,{handle:this.handles[t],value:i}))&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var n,a,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,a=arguments[0],o=0;n.length>o;o+=1)n[o]=this._trimAlignValue(a[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,i){var n,a=0;switch("range"===t&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(a=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;a>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;i.length>n;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,a,o,s=this.options.range,r=this.options,l=this,c=!this._animateOff&&r.animate,d={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,d["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](d,r.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},r.animate),1===n&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},r.animate),1===n&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(n=this.value(),a=this._valueMin(),o=this._valueMax(),i=o!==a?(n-a)/(o-a)*100:0,d["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](d,r.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},r.animate),"max"===s&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},r.animate),"max"===s&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(t){var i,n,a,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),!1===this._start(t,o)))return}switch(a=this.options.step,i=n=this.options.values&&this.options.values.length?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;n=this._trimAlignValue(i+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;n=this._trimAlignValue(i-a)}this._slide(t,o,n)},click:function(e){e.preventDefault()},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),function(e){function t(e,t,i){return e>t&&t+i>e}function i(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||i(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=null,a=!1,o=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,o.widgetName+"-item")===o?(n=e(this),!1):void 0}),e.data(t.target,o.widgetName+"-item")===o&&(n=e(t.target)),!!n&&(!(this.options.handle&&!i&&(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(a=!0)}),!a))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,i,n){var a,o,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",s.cursor),this.storedStylesheet=e("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(o)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(a=this.containers.length-1;a>=0;a--)this.containers[a]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,a,o,s=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(t.pageY-e(document).scrollTop()<s.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<s.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+s.scrollSpeed)),t.pageX-e(document).scrollLeft()<s.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<s.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+s.scrollSpeed))),!1!==r&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(a=(n=this.items[i]).item[0],(o=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&a!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==a&&!e.contains(this.placeholder[0],a)&&("semi-dynamic"!==this.options.type||!e.contains(this.element[0],a))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,a=this.placeholder.offset(),o=this.options.axis,s={};o&&"x"!==o||(s.left=a.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(s.top=a.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,a=n+this.helperProportions.height,o=e.left,s=o+e.width,r=e.top,l=r+e.height,c=this.offset.click.top,d=this.offset.click.left,u="x"===this.options.axis||n+c>r&&l>n+c,h="y"===this.options.axis||t+d>o&&s>t+d,p=u&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>o&&s>i-this.helperProportions.width/2&&n+this.helperProportions.height/2>r&&l>a-this.helperProportions.height/2},_intersectsWithPointer:function(e){var i="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),a=i&&n,o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return!!a&&(this.floating?s&&"right"===s||"down"===o?2:1:o&&("down"===o?2:1))},_intersectsWithSides:function(e){var i=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),a=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:a&&("down"===a&&i||"up"===a&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){r.push(this)}var n,a,o,s,r=[],l=[],c=this._connectWith();if(c&&t)for(n=c.length-1;n>=0;n--)for(a=(o=e(c[n])).length-1;a>=0;a--)(s=e.data(o[a],this.widgetFullName))&&s!==this&&!s.options.disabled&&l.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=l.length-1;n>=0;n--)l[n][0].each(i);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,a,o,s,r,l,c,d=this.items,u=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(i=h.length-1;i>=0;i--)for(n=(a=e(h[i])).length-1;n>=0;n--)(o=e.data(a[n],this.widgetFullName))&&o!==this&&!o.options.disabled&&(u.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(s=u[i][1],n=0,c=(r=u[i][0]).length;c>n;n++)(l=e(r[n])).data(this.widgetName+"-item",s),d.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var i,n,a,o;for(this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),i=this.items.length-1;i>=0;i--)(n=this.items[i]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(a=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=a.outerWidth(),n.height=a.outerHeight()),o=a.offset(),n.left=o.left,n.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){var i,n=(t=t||this).options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),a=e("<"+n+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(a)}):"img"===n&&a.attr("src",t.currentItem.attr("src")),i||a.css("visibility","hidden"),a},update:function(e,a){(!i||n.forcePlaceholderSize)&&(a.height()||a.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),a.width()||a.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(n){var a,o,s,r,l,c,d,u,h,p,f=null,m=null;for(a=this.containers.length-1;a>=0;a--)if(!e.contains(this.currentItem[0],this.containers[a].element[0]))if(this._intersectsWith(this.containers[a].containerCache)){if(f&&e.contains(this.containers[a].element[0],f.element[0]))continue;f=this.containers[a],m=a}else this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",n,this._uiHash(this)),this.containers[a].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",n,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(s=1e4,r=null,l=(p=f.floating||i(this.currentItem))?"left":"top",c=p?"width":"height",d=this.positionAbs[l]+this.offset.click[l],o=this.items.length-1;o>=0;o--)e.contains(this.containers[m].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!p||t(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(u=this.items[o].item.offset()[l],h=!1,Math.abs(u-d)>Math.abs(u+this.items[o][c]-d)&&(h=!0,u+=this.items[o][c]),s>Math.abs(u-d)&&(s=Math.abs(u-d),r=this.items[o],this.direction=h?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;r?this._rearrange(n,r,null,!0):this._rearrange(n,null,this.containers[m].element,!0),this._trigger("change",n,this._uiHash()),this.containers[m]._trigger("change",n,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",n,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,a=this.options;"parent"===a.containment&&(a.containment=this.helper[0].parentNode),("document"===a.containment||"window"===a.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===a.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===a.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(a.containment)||(t=e(a.containment)[0],i=e(a.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(a[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:a.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:a.scrollLeft())*n}},_generatePosition:function(t){var i,n,a=this.options,o=t.pageX,s=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),a.grid&&(i=this.originalPageY+Math.round((s-this.originalPageY)/a.grid[1])*a.grid[1],s=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-a.grid[1]:i+a.grid[1]:i,n=this.originalPageX+Math.round((o-this.originalPageX)/a.grid[0])*a.grid[0],o=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-a.grid[0]:n+a.grid[0]:n)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:r.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var a=this.counter;this._delay(function(){a===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){function i(e,t,i){return function(n){i._trigger(e,n,t._uiHash(t))}}this.reverting=!1;var n,a=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&a.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||a.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(a.push(function(e){this._trigger("remove",e,this._uiHash())}),a.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),a.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||a.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(a.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),n=0;a.length>n;n++)a[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(n=0;a.length>n;n++)a[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,n){var a=i.attr(n);void 0!==a&&a.length&&(t[n]=a)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){this.element[0]===this.document[0].activeElement||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),!1!==this._start(t)&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?!1!==this._start(t)&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return!(!this.spinning&&!1===this._trigger("start",e))&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",t,{value:i})||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return i=e-(t=null!==n.min?n.min:0),e=t+(i=Math.round(i/n.step)*n.step),e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&n.min>e?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(i))}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&(null!==(i=this._parse(e))&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?void t(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function i(e){return(e=e.cloneNode(!1)).hash.length>1&&decodeURIComponent(e.href.replace(a,""))===decodeURIComponent(location.href.replace(a,""))}var n=0,a=/#.*$/;e.widget("ui.tabs",{version:"1.10.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=!1!==this.options.active&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var i=this.options.active,n=this.options.collapsible,a=location.hash.substring(1);return null===i&&(a&&this.tabs.each(function(n,o){return e(o).attr("aria-controls")===a?(i=n,!1):t}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===i||-1===i)&&(i=!!this.tabs.length&&0)),!1!==i&&(-1===(i=this.tabs.index(this.tabs.eq(i)))&&(i=!n&&0)),!n&&!1===i&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(i){var n=e(this.document[0].activeElement).closest("li"),a=this.tabs.index(n),o=!0;if(!this._handlePageNav(i)){switch(i.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:a++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:o=!1,a--;break;case e.ui.keyCode.END:a=this.anchors.length-1;break;case e.ui.keyCode.HOME:a=0;break;case e.ui.keyCode.SPACE:return i.preventDefault(),clearTimeout(this.activating),this._activate(a),t;case e.ui.keyCode.ENTER:return i.preventDefault(),clearTimeout(this.activating),this._activate(a!==this.options.active&&a),t;default:return}i.preventDefault(),clearTimeout(this.activating),a=this._focusNextTab(a,o),i.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(a).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",a)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(i){return i.altKey&&i.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):i.altKey&&i.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):t},_findNextTab:function(t,i){function n(){return t>a&&(t=0),0>t&&(t=a),t}for(var a=this.tabs.length-1;-1!==e.inArray(n(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,i){return"active"===e?(this._activate(i),t):"disabled"===e?(this._setupDisabled(i),t):(this._super(e,i),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",i),i||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(i),"heightStyle"===e&&this._setupHeightStyle(i),t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+ ++n},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,a){var o,s,r,l=e(a).uniqueId().attr("id"),c=e(a).closest("li"),d=c.attr("aria-controls");i(a)?(o=a.hash,s=t.element.find(t._sanitizeSelector(o))):(o="#"+(r=t._tabId(c)),(s=t.element.find(o)).length||(s=t._createPanel(r)).insertAfter(t.panels[n-1]||t.tablist),s.attr("aria-live","polite")),s.length&&(t.panels=t.panels.add(s)),d&&c.data("ui-tabs-aria-controls",d),c.attr({"aria-controls":o.substring(1),"aria-labelledby":l}),s.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,n=0;i=this.tabs[n];n++)!0===t||-1!==e.inArray(n,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();"fill"===t?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,a=e(t.currentTarget).closest("li"),o=a[0]===n[0],s=o&&i.collapsible,r=s?e():this._getPanelForTab(a),l=n.length?this._getPanelForTab(n):e(),c={oldTab:n,oldPanel:l,newTab:s?e():a,newPanel:r};t.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||!1===this._trigger("beforeActivate",t,c)||(i.active=!s&&this.tabs.index(a),this.active=o?e():a,this.xhr&&this.xhr.abort(),l.length||r.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),r.length&&this.load(this.tabs.index(a),t),this._toggle(t,c))},_toggle:function(t,i){function n(){o.running=!1,o._trigger("activate",t,i)}function a(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),s.length&&o.options.show?o._show(s,o.options.show,n):(s.show(),n())}var o=this,s=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),a()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),s.length&&r.length?i.oldTab.attr("tabIndex",-1):s.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),s.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;!1!==n&&(i===t?n=!1:(i=this._getIndex(i),n=e.isArray(n)?e.map(n,function(e){return e!==i?e:null}):e.map(this.tabs,function(e,t){return t!==i?t:null})),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(!0!==n){if(i===t)n=!0;else{if(i=this._getIndex(i),-1!==e.inArray(i,n))return;n=e.isArray(n)?e.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(t,n){t=this._getIndex(t);var a=this,o=this.tabs.eq(t),s=o.find(".ui-tabs-anchor"),r=this._getPanelForTab(o),l={tab:o,panel:r};i(s[0])||(this.xhr=e.ajax(this._ajaxSettings(s,n,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(o.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){r.html(e),a._trigger("load",n,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&a.panels.stop(!1,!0),o.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),e===a.xhr&&delete a.xhr},1)})))},_ajaxSettings:function(t,i,n){var a=this;return{url:t.attr("href"),beforeSend:function(t,o){return a._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:o},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(e){var t=0;e.widget("ui.tooltip",{version:"1.10.4",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,i){var n=this;return"disabled"===t?(this[i?"_disable":"_enable"](),void(this.options[t]=i)):(this._super(t,i),void("content"===t&&e.each(this.tooltips,function(e,t){n._updateContent(t)})))},_disable:function(){var t=this;e.each(this.tooltips,function(i,n){var a=e.Event("blur");a.target=a.currentTarget=n[0],t.close(a,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each(function(){var t,n=e(this);n.data("ui-tooltip-open")&&((t=e.Event("blur")).target=t.currentTarget=this,i.close(t,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,a=this,o=t?t.type:null;return"string"==typeof n?this._open(t,e,n):void((i=n.call(e[0],function(i){e.data("ui-tooltip-open")&&a._delay(function(){t&&(t.type=o),this._open(t,e,i)})}))&&this._open(t,e,i))},_open:function(t,i,n){function a(e){l.of=e,o.is(":hidden")||o.position(l)}var o,s,r,l=e.extend({},this.options.position);if(n){if((o=this._find(i)).length)return void o.find(".ui-tooltip-content").html(n);i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),o=this._tooltip(i),function(t,i){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(n.join(" ")))}(i,o.attr("id")),o.find(".ui-tooltip-content").html(n),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:a}),a(t)):o.position(e.extend({of:i},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){o.is(":visible")&&(a(l.of),clearInterval(r))},e.fx.interval)),this._trigger("open",t,{tooltip:o}),s={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=i[0],this.close(n,!0)}},remove:function(){this._removeTooltip(o)}},t&&"mouseover"!==t.type||(s.mouseleave="close"),t&&"focusin"!==t.type||(s.focusout="close"),this._on(!0,i,s)}},close:function(t){var i=this,n=e(t?t.currentTarget:this.element),a=this._find(n);this.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&n.attr("title",n.data("ui-tooltip-title")),function(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),a=e.inArray(i,n);-1!==a&&n.splice(a,1),t.removeData("ui-tooltip-id"),(n=e.trim(n.join(" ")))?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")}(n),a.stop(!0),this._hide(a,this.options.hide,function(){i._removeTooltip(e(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,n){e(n.element).attr("title",n.title),delete i.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:a}),this.closing=!1)},_tooltip:function(i){var n="ui-tooltip-"+t++,a=e("<div>").attr({id:n,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(a),a.appendTo(this.document[0].body),this.tooltips[n]=i,a},_find:function(t){var i=t.data("ui-tooltip-id");return i?e("#"+i):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,n){var a=e.Event("blur");a.target=a.currentTarget=n[0],t.close(a,!0),e("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(jQuery),function(e,t){if("function"==typeof define&&define.amd)define(["jquery","jquery-ui"],t);else if("undefined"!=typeof exports){var i,n;try{i=require("jquery"),n=require("jquery-ui")}catch(e){}module.exports=t(i,n)}else t(e.jQuery,e.jQuery.ui,!0)}(this,function(e,t,i){var n,a,o,s,r,l,c,d,u=function(t,i,n){var a,o,s,r,l,c,d,h,p,f,m,g,v,b,y,w,x,k,C,_,T,D,z,A,S=this,I=[],M=["button","tooltip"],E=e(t),O=e.extend(!0,{},e._data(E.get(0),"events")),j=e("<div></div>").append(E.contents()).attr("class",E.attr("class")||"").attr("style",E.attr("style")||""),P=E.attr("id")||E.attr("id","elfauto"+e(".elfinder").length).attr("id"),F="elfinder-"+P,H="mousedown."+F,N="keydown."+F,U="keypress."+F,R="keyup."+F,q=!1,L=!1,W="",B={path:"",url:"",tmbUrl:"",disabled:[],separator:"/",archives:[],extract:[],copyOverwrite:!0,uploadOverwrite:!0,uploadMaxSize:0,jpgQuality:100,tmbCrop:!1,tmbReqCustomData:!1,tmb:!1},$={},Y={},K={},V={},X=[],G={},J={},Q=[],Z={},ee=[],te=[],ie=new S.command(S),ne="auto",ae=400,oe=null,se="sounds/",re="",le=!1,ce=e(document.createElement("audio")).hide().appendTo("body")[0],de=0,ue="",he=null,pe=function(t){var i,n,a,o,s,r,l,c={},d={};S.api>=2.1?(S.commandMap=t.options.uiCmdMap&&Object.keys(t.options.uiCmdMap).length?t.options.uiCmdMap:{},ue!==JSON.stringify(S.commandMap)&&(ue=JSON.stringify(S.commandMap))):S.options.sync=0,t.init?(Y={},V={}):(s=W,i="elfinder-subtree-loaded "+S.res("class","navexpand"),S.res("class","navcollapse"),n=Object.keys(Y),a=function(e){if(!Y[e])return!0;var t="directory"===Y[e].mime,n=Y[e].phash;!(!t||c[n]||!d[n]&&S.navHash2Elm(Y[e].hash).is(":hidden")&&S.navHash2Elm(n).next(".elfinder-navbar-subtree").children().length>100)||!t&&n===W||Z[e]?t&&(d[n]=!0):(t&&!c[n]&&(c[n]=!0,S.navHash2Elm(n).removeClass(i).next(".elfinder-navbar-subtree").empty()),ge(Y[e]))},o=function(){n.length&&(he&&he._abort(),he=S.asyncJob(a,n,{interval:20,numPerOnce:100}).done(function(){var t=S.storage("hide")||{items:{}};Object.keys(K).length&&e.each(K,function(e){t.items[e]||delete K[e]})}))},S.trigger("filesgc").one("filesgc",function(){n=[]}),S.one("opendone",function(){s!==W&&(E.data("lazycnt")?S.one("lazydone",o):o())})),S.sorters={},W=t.cwd.hash,fe(t.files),Y[W]?(l=S.diff([t.cwd],!0)).changed.length&&(fe(l.changed,"change"),S.change({changed:l.changed})):fe([t.cwd]),t.changed&&t.changed.length&&fe(t.changed,"change"),r=JSON.stringify(S.sorters),re!==r&&(S.trigger("sorterupdate"),re=r),S.lastDir(W),S.autoSync()},fe=function(t,i){i=i||"files";var n,a,o,s,r,l=["sizeInfo","encoding"],c={name:!0,perm:!0,date:!0,size:!0,kind:!0},d=!S.sorters._checked&&"files"===i,u=t.length,h=function(t){var i=t||{},n=[];e.each(S.sortRules,function(e){(c[e]||void 0!==i[e]||"mode"===e&&void 0!==i.perm)&&n.push(e)}),S.sorters=S.arrayFlip(n,!0),S.sorters._checked=!0},p={},f=S.storage("hide")||{},m=f.items||{};for(a=0;a<u;a++)if(n=Object.assign({},t[a]),r=!(f.show||!m[n.hash]),n.name&&n.hash&&n.mime){if(r||(d&&n.phash===W&&(h(n),d=!1),!n.phash||"add"!==i&&("change"!==i||Y[n.hash]&&n.size===Y[n.hash])||(s=S.parents(n.phash))&&e.each(s,function(){p[this]=!0})),Y[n.hash]){for(o=0;o<l.length;o++)Y[n.hash][l[o]]&&!n[l[o]]&&(n[l[o]]=Y[n.hash][l[o]]);n.sizeInfo&&!n.size&&(n.size=n.sizeInfo.size),ge(Y[n.hash],!0)}m[n.hash]&&(K[n.hash]=n),r?(u--,t.splice(a--,1)):(Y[n.hash]=n,"directory"!==n.mime||V[n.hash]||(V[n.hash]={}),n.phash&&(V[n.phash]||(V[n.phash]={}),V[n.phash][n.hash]=!0))}e.each(Object.keys(p),function(){var e=Y[this];e&&e.sizeInfo&&delete e.sizeInfo}),d&&h()},me=function(t){var i,n=t.length,a={},o=function(t){var n=Y[t];n&&("directory"===n.mime&&(a[t]&&delete S.roots[a[t]],e.each(S.leafRoots,function(i,n){var a,o;-1!==(a=e.inArray(t,n))&&(1===n.length?((o=Object.assign({},Y[i]))&&o._realStats&&(e.each(o._realStats,function(e,t){o[e]=t}),me(Y[i]._realStats),S.change({changed:[o]})),delete S.leafRoots[i]):S.leafRoots[i].splice(a,1))}),S.searchStatus.state<2&&e.each(Y,function(e,i){i.phash==t&&o(e)})),n.phash&&(i=S.parents(n.phash))&&e.each(i,function(){s[this]=!0}),ge(Y[t]))},s={};for(e.each(S.roots,function(e,t){a[t]=e});n--;)o(t[n]);e.each(Object.keys(s),function(){var e=Y[this];e&&e.sizeInfo&&delete e.sizeInfo})},ge=function(e,t){var i=e.hash,n=e.phash;n&&V[n]&&delete V[n][i],t||(V[i]&&delete V[i],S.optionsByHashes[i]&&delete S.optionsByHashes[i]),delete Y[i]},ve=0,be=[],ye=null,we=function(t){var i,n=t.keyCode,a=!(!t.ctrlKey&&!t.metaKey),o="mousedown"===t.type;!o&&(S.keyState.keyCode=n),S.keyState.ctrlKey=a,S.keyState.shiftKey=t.shiftKey,S.keyState.metaKey=t.metaKey,S.keyState.altKey=t.altKey,o||("keyup"!==t.type?q&&(e.each(J,function(e,i){i.type==t.type&&i.keyCode==n&&i.shiftKey==t.shiftKey&&i.ctrlKey==a&&i.altKey==t.altKey&&(t.preventDefault(),t.stopPropagation(),i.callback(t,S),S.debug("shortcut-exec",e+" : "+i.description))}),n!=e.ui.keyCode.TAB||e(t.target).is(":input")||t.preventDefault(),"keydown"===t.type&&n==e.ui.keyCode.ESCAPE&&(E.find(".ui-widget:visible").length||S.clipboard().length&&S.clipboard([]),e.ui.ddmanager&&(i=e.ui.ddmanager.current)&&i.helper&&i.cancel(),S.toHide(E.find(".ui-widget.elfinder-button-menu.elfinder-frontmost:visible")),S.trigger("keydownEsc",t))):S.keyState.keyCode=null)},xe=new Date,ke=window.parent!==window,Ce=function(){var t,i;if(ke)try{(i=e("iframe",window.parent.document)).length&&e.each(i,function(i,n){if(n.contentWindow===window)return t=e(n),!1})}catch(e){}return t}();i||(i={}),S.UA.Mobile&&e(window).on("orientationchange."+F,function(){var e=(screen&&screen.orientation&&screen.orientation.angle||window.orientation||0)+0;-90===e&&(e=270),S.UA.Angle=e,S.UA.Rotated=e%180!=0}).trigger("orientationchange."+F),i.bootCallback&&"function"==typeof i.bootCallback&&(h=n,p=i.bootCallback,n=function(e,t){h&&"function"==typeof h&&h.call(this,e,t),p.call(this,e,t)}),delete i.bootCallback,this.api=null,this.newAPI=!1,this.oldAPI=!1,this.netDrivers=[],this.baseUrl="",this.i18nBaseUrl="",this.workerBaseUrl="",this.cssloaded=!1,this.theme=null,this.mimesCanMakeEmpty={},this.bootCallback,this.reloadCallback,this.id=P,this.storage=function(){try{return"localStorage"in window&&null!==window.localStorage?(S.UA.Safari&&(window.localStorage.setItem("elfstoragecheck",1),window.localStorage.removeItem("elfstoragecheck")),S.localStorage):S.cookie}catch(e){return S.cookie}}(),this.pauseUnloadCheck=function(e,t){if(void 0===e)return le;le=!!e,e&&!t&&requestAnimationFrame(function(){le=!1})},this.options=Object.assign({},this._options),i.uiOptions&&i.uiOptions.toolbar&&Array.isArray(i.uiOptions.toolbar)&&e.isPlainObject(i.uiOptions.toolbar[i.uiOptions.toolbar.length-1])&&(S.options.uiOptions.toolbarExtra=Object.assign(S.options.uiOptions.toolbarExtra||{},i.uiOptions.toolbar.pop())),f=function(t,i){e.isPlainObject(t)&&e.each(t,function(t,n){e.isPlainObject(n)?(i[t]||(i[t]={}),f(n,i[t])):i[t]=n})},f(i,S.options),this.options.uiOptions.toolbar.push(this.options.uiOptions.toolbarExtra),delete this.options.uiOptions.toolbarExtra,this.toUnbindEvents={},this.bind=function(e,t,i){var n,a;if(t&&("function"==typeof t||"function"==typeof t.done))for(a=(e=(""+e).toLowerCase().replace(/^\s+|\s+$/g,"").split(/\s+/)).length,n=0;n<a;n++)void 0===G[e[n]]&&(G[e[n]]=[]),G[e[n]][i?"unshift":"push"](t);return this},this.unbind=function(t,i){var n,a,o,s;for(a=(t=(""+t).toLowerCase().split(/\s+/)).length,n=0;n<a;n++)(o=G[t[n]])&&(s=e.inArray(i,o))>-1&&o.splice(s,1);return i=null,this},this.trigger=function(t,i,n){var a,o,s,r,l=t.toLowerCase(),c="object"==typeof i,d=G[l]||[],u=[];if(this.debug("event-"+l,i),c&&void 0!==n||(n=!0),o=d.length){for(r=e.Event(l),i&&(i._getEvent=function(){return r}),n&&(r.data=i),a=0;a<o;a++)if(d[a])if(d[a].done)u.push(d[a].done);else{if(d[a].length&&!n){if(void 0===s)try{s=JSON.stringify(i)}catch(e){s=!1}r.data=s?JSON.parse(s):i}try{if(!1===d[a].call(r,r,this)||r.isDefaultPrevented()){this.debug("event-stoped",r.type);break}}catch(e){window.console&&window.console.log&&window.console.log(e)}}if(o=u.length)for(a=0;a<o;a++)try{if(!1===u[a].call(r,r,this)||r.isDefaultPrevented()){this.debug("event-stoped",r.type+"(done)");break}}catch(e){window.console&&window.console.log&&window.console.log(e)}this.toUnbindEvents[l]&&this.toUnbindEvents[l].length&&(e.each(this.toUnbindEvents[l],function(e,t){S.unbind(t.type,t.callback)}),delete this.toUnbindEvents[l])}return this},this.getListeners=function(e){return e?G[e.toLowerCase()]:G},this.baseUrl=function(){var t,i,n;return S.options.baseUrl?S.options.baseUrl:(n="",t=null,e("head > script").each(function(){if(this.src&&this.src.match(/js\/elfinder(?:-[a-z0-9_-]+)?\.(?:min|full)\.js(?:$|\?)/i))return t=e(this),!1}),t&&((n=t.attr("src").replace(/js\/[^\/]+$/,"")).match(/^(https?\/\/|\/)/)||(i=e("head > base[href]").attr("href"))&&(n=i.replace(/\/$/,"")+"/"+n)),""!==n?S.options.baseUrl=n:(S.options.baseUrl||(S.options.baseUrl="./"),n=S.options.baseUrl),n)}(),this.i18nBaseUrl=(this.options.i18nBaseUrl||this.baseUrl+"js/i18n").replace(/\/$/,"")+"/",this.workerBaseUrl=(this.options.workerBaseUrl||this.baseUrl+"js/worker").replace(/\/$/,"")+"/",this.options.maxErrorDialogs=Math.max(1,parseInt(this.options.maxErrorDialogs||5)),B.dispInlineRegex=this.options.dispInlineRegex,this.options.cssAutoLoad&&(m=S.baseUrl,g=e('head > link[href$="css/elfinder.min.css"],link[href$="css/elfinder.full.css"]:first').length,v=function(){E.data("cssautoloadHide")&&(E.data("cssautoloadHide").remove(),E.removeData("cssautoloadHide"))},b=function(){S.cssloaded||(v(),S.cssloaded=!0,S.trigger("cssloaded"))},g||(S.cssloaded=null),Array.isArray(S.options.cssAutoLoad)&&(S.options.themes.default?!0===S.cssloaded?S.loadCss(S.options.cssAutoLoad):S.bind("cssloaded",function(){S.loadCss(S.options.cssAutoLoad)}):(S.options.themes=Object.assign({default:{name:"default",cssurls:S.options.cssAutoLoad}},S.options.themes),S.options.theme||(S.options.theme="default"))),null===S.cssloaded&&(E.addClass("elfinder").data("cssautoloadHide",e("<style>.elfinder{visibility:hidden;overflow:hidden}</style>")),e("head").append(E.data("cssautoloadHide")),requestAnimationFrame(function(){"hidden"===E.css("visibility")?S.loadCss([m+"css/elfinder.min.css"],{dfd:e.Deferred().done(function(){b()}).fail(function(){v(),S.cssloaded||(S.cssloaded=!1,S.bind("init",function(){S.cssloaded||S.error(["errRead","CSS (elfinder.min)"])}))})}):b()}))),w=S.options.themes,(x=Object.keys(w||{})).length&&(w[y=S.storage("theme")||S.options.theme]||(y=x[0]),S.cssloaded?S.changeTheme(y):S.bind("cssloaded",function(){S.changeTheme(y)})),this.optionProperties={icon:void 0,csscls:void 0,tmbUrl:void 0,uiCmdMap:{},netkey:void 0,disabled:[]},ke||this.options.enableAlways||2!==e("body").children().length||(this.options.enableAlways=!0),!0===this.options.debug?this.options.debug="all":Array.isArray(this.options.debug)?(k={},e.each(S.options.debug,function(){k[this]=!0}),S.options.debug=k):this.options.debug=!1,this.noConflicts={},this.noConflict=function(){e.each(M,function(t,i){e.fn[i]&&"function"==typeof e.fn[i].noConflict&&(S.noConflicts[i]=e.fn[i].noConflict())})},this.noConflict(),this.isCORS=!1,function(){if(void 0!==S.options.cors&&null!==S.options.cors)S.isCORS=!!S.options.cors;else{var t,n=document.createElement("a"),a=window.location.protocol,o=function(e){return"https:"===(e=e&&":"!==e?e:a)?/\:443$/:/\:80$/},s=window.location.host.replace(o(a),"");n.href=i.url,i.urlUpload&&i.urlUpload!==i.url&&((t=document.createElement("a")).href=i.urlUpload),(s!==n.host.replace(o(n.protocol),"")||":"!==n.protocol&&""!==n.protocol&&a!==n.protocol||t&&(s!==t.host.replace(o(t.protocol),"")||":"!==t.protocol&&""!==t.protocol&&a!==t.protocol))&&(S.isCORS=!0)}S.isCORS&&(e.isPlainObject(S.options.customHeaders)||(S.options.customHeaders={}),e.isPlainObject(S.options.xhrFields)||(S.options.xhrFields={}),S.options.requestType="post",S.options.customHeaders["X-Requested-With"]="XMLHttpRequest",S.options.xhrFields.withCredentials=!0)}(),this.requestType=/^(get|post)$/i.test(this.options.requestType)?this.options.requestType.toLowerCase():"get",s=Math.max(parseInt(this.options.requestMaxConn),1),this.optsCustomData=e.isPlainObject(this.options.customData)?this.options.customData:{},this.customData=Object.assign({},this.optsCustomData),this.prevCustomData=null,this.customHeaders=e.isPlainObject(this.options.customHeaders)?this.options.customHeaders:{},this.xhrFields=e.isPlainObject(this.options.xhrFields)?this.options.xhrFields:{},this.replaceXhrSend=function(){d||(d=XMLHttpRequest.prototype.send),XMLHttpRequest.prototype.send=function(){var t=this;return S.customHeaders&&e.each(S.customHeaders,function(e){t.setRequestHeader(e,this)}),S.xhrFields&&e.each(S.xhrFields,function(e){e in t&&(t[e]=this)}),d.apply(this,arguments)}},this.restoreXhrSend=function(){d&&(XMLHttpRequest.prototype.send=d)},this.abortCmdsOnOpen=this.options.abortCmdsOnOpen||["tmb","parents"],this.navPrefix="nav"+(u.prototype.uniqueid?u.prototype.uniqueid:"")+"-",this.cwdPrefix=u.prototype.uniqueid?"cwd"+u.prototype.uniqueid+"-":"",++u.prototype.uniqueid,this.uploadURL=i.urlUpload||i.url,this.namespace=F,this.today=new Date(xe.getFullYear(),xe.getMonth(),xe.getDate()).getTime()/1e3,this.yesterday=this.today-86400,r=this.options.UTCDate?"UTC":"",this.getHours="get"+r+"Hours",this.getMinutes="get"+r+"Minutes",this.getSeconds="get"+r+"Seconds",this.getDate="get"+r+"Date",this.getDay="get"+r+"Day",this.getMonth="get"+r+"Month",this.getFullYear="get"+r+"FullYear",this.zIndex,this.searchStatus={state:0,query:"",target:"",mime:"",mixed:!1,ininc:!1},this.lang=this.storage("lang")||this.options.lang,"jp"===this.lang&&(this.lang=this.options.lang="ja"),this.viewType=this.storage("view")||this.options.defaultView||"icons",this.sortType=this.storage("sortType")||this.options.sortType||"name",this.sortOrder=this.storage("sortOrder")||this.options.sortOrder||"asc",this.sortStickFolders=this.storage("sortStickFolders"),null===this.sortStickFolders?this.sortStickFolders=!!this.options.sortStickFolders:this.sortStickFolders=!!this.sortStickFolders,this.sortAlsoTreeview=this.storage("sortAlsoTreeview"),null===this.sortAlsoTreeview||null===this.options.sortAlsoTreeview?this.sortAlsoTreeview=!!this.options.sortAlsoTreeview:this.sortAlsoTreeview=!!this.sortAlsoTreeview,this.sortRules=e.extend(!0,{},this._sortRules,this.options.sortRules),e.each(this.sortRules,function(e,t){"function"!=typeof t&&delete S.sortRules[e]}),this.compare=e.proxy(this.compare,this),this.notifyDelay=this.options.notifyDelay>0?parseInt(this.options.notifyDelay):500,this.draggingUiHelper=null,this.droppable={greedy:!0,tolerance:"pointer",accept:".elfinder-cwd-file-wrapper,.elfinder-navbar-dir,.elfinder-cwd-file,.elfinder-cwd-filename",hoverClass:this.res("class","adroppable"),classes:{"ui-droppable-hover":this.res("class","adroppable")},autoDisable:!0,drop:function(t,i){var n,a,o,s=e(this),r=e.grep(i.helper.data("files")||[],function(e){return!!e}),l=[],c=[],d=[],u=i.helper.hasClass("elfinder-drag-helper-plus"),h="class";if(void 0===t.button||i.helper.data("namespace")!==F||!S.insideWorkzone(t.pageX,t.pageY))return!1;for(a=s.hasClass(S.res(h,"cwdfile"))?S.cwdId2Hash(s.attr("id")):s.hasClass(S.res(h,"navdir"))?S.navId2Hash(s.attr("id")):W,n=r.length;n--;)(o=r[n])!=a&&Y[o].phash!=a?l.push(o):(u&&o!==a&&Y[a].write?c:d).push(o);if(d.length)return!1;i.helper.data("droped",!0),c.length&&(i.helper.hide(),S.exec("duplicate",c,{_userAction:!0})),l.length&&(i.helper.hide(),S.clipboard(l,!u),S.exec("paste",a,{_userAction:!0},a).always(function(){S.clipboard([]),S.trigger("unlockfiles",{files:r})}),S.trigger("drop",{files:r}))}},this.enabled=function(){return q&&this.visible()},this.visible=function(){return E[0].elfinder&&E.is(":visible")},this.isRoot=function(e){return!(!e.isroot&&e.phash)},this.root=function(t,i){var n,a;if(t=t||W,!i&&(e.each(S.roots,function(e,i){if(0===t.indexOf(e))return n=i,!1}),n))return n;for(n=Y[t];n&&n.phash&&(i||!n.isroot);)n=Y[n.phash];if(n)return n.hash;for(;a in Y&&Y.hasOwnProperty(a);)if("directory"===(n=Y[a]).mime&&!n.phash&&n.read)return n.hash;return""},this.cwd=function(){return Y[W]||{}},this.option=function(t,i){var n,a;return i=i||W,S.optionsByHashes[i]&&void 0!==S.optionsByHashes[i][t]?S.optionsByHashes[i][t]:!S.hasVolOptions||W===i||(a=S.file(i))&&a.phash===W?$[t]||"":(n="",e.each(S.volOptions,function(e,a){if(0===i.indexOf(e))return n=a[t]||"",!1}),n)},this.getDisabledCmds=function(t,i){var n={hidden:!0};return Array.isArray(t)||(t=[t]),e.each(t,function(e,t){var i=S.option("disabledFlip",t);i&&Object.assign(n,i)}),i?n:Object.keys(n)},this.file=function(e,t){return e?Y[e]||(t?K[e]:void 0):void 0},this.files=function(t){var i={};return t?V[t]?(e.each(V[t],function(e){Y[e]?i[e]=Y[e]:delete V[t][e]}),Object.assign({},i)):{}:Object.assign({},Y)},this.parents=function(e){for(var t,i=[];e&&(t=this.file(e));)i.unshift(t.hash),e=t.phash;return i},this.path2array=function(e,t){for(var i,n=[];e;){if(!(i=Y[e])||!i.hash){n=[];break}n.unshift(t&&i.i18?i.i18:i.name),e=i.isroot?null:i.phash}return n},this.path=function(t,i,n){var a=Y[t]&&Y[t].path?Y[t].path:this.path2array(t,i).join($.separator);if(n&&Y[t]){n=Object.assign({notify:{type:"parents",cnt:1,hideCnt:!0}},n);var o,s=e.Deferred(),r=n.notify,l=!1,c=function(){S.request({data:{cmd:"parents",target:Y[t].phash},notify:r,preventFail:!0}).done(d).fail(function(){s.reject()})},d=function(){S.one("parentsdone",function(){""===(a=S.path(t,i))&&l?(l=!1,c()):(r&&(clearTimeout(o),r.cnt=-parseInt(r.cnt||0),S.notify(r)),s.resolve(a))})};return a?s.resolve(a):(S.ui.tree?(r&&(o=setTimeout(function(){S.notify(r)},S.notifyDelay)),l=!0,d(!0)):c(),s)}return a},this.url=function(t,i){var n,a=Y[t],o=i||{},s=o.async||!1,r=o.temporary||!1,l=o.onetime&&S.option("onetimeUrl",t)||!1,c=o.absurl||!1,d=s||l?e.Deferred():null,u=function(e){return e&&c&&(e=S.convAbsUrl(e)),e},h=function(i){if(i)return u(i);if(a.url)return u(a.url);if(void 0===n&&(n=p()),n)return u(n+e.map(S.path2array(t),function(e){return encodeURIComponent(e)}).slice(1).join("/"));var o=Object.assign({},S.customData,{cmd:"file",target:a.hash});return S.oldAPI&&(o.cmd="open",o.current=a.phash),u(S.options.url+(-1===S.options.url.indexOf("?")?"?":"&")+e.param(o,!0))},p=function(){return S.option("url",!S.isRoot(a)&&a.phash||a.hash)};if(!a||!a.read)return s?d.resolve(""):"";if(!l||a.url&&"1"!=a.url||(n=p()))if("1"==a.url||r&&!a.url&&!(n=p()))this.request({data:{cmd:"url",target:t,options:{temporary:r?1:0}},preventDefault:!0,options:{async:s},notify:s?{type:r?"file":"url",cnt:1,hideCnt:!0}:{},progressBar:o.progressBar}).done(function(e){a.url=e.url||""}).fail(function(){a.url=""}).always(function(){var e;if(a.url&&r&&(e=a.url,a.url="1"),!s)return h(e);d.resolve(h(e))});else{if(!s)return h();d.resolve(h())}else s=!0,this.request({data:{cmd:"url",target:t,options:{onetime:1}},preventDefault:!0,options:{async:s},notify:{type:"file",cnt:1,hideCnt:!0},progressBar:o.progressBar}).done(function(e){d.resolve(u(e.url||""))}).fail(function(){d.resolve("")});return s?d:void 0},this.forExternalUrl=function(e,t){var i={async:!0,absurl:!0};return i[S.option("onetimeUrl",e)?"onetime":"temporary"]=!0,S.url(e,Object.assign({},t,i))},this.openUrl=function(t,i,n,a){var o=Y[t],s="",r=(a||{}).onetimeSize||5242880;return o&&o.read?i&&"sameorigin"!==i||(o.url?1!=o.url&&(s=o.url):$.url&&0===o.hash.indexOf(S.cwd().volumeid)&&(s=$.url+e.map(this.path2array(t),function(e){return encodeURIComponent(e)}).slice(1).join("/")),i&&!this.isSameOrigin(s)||!s)?n&&this.hasParrotHeaders()?(a?delete a.onetimeSize:a={},!a.onetime&&!a.temporary&&o.size>r&&(o.mime.match(/^video|audio/)?a.temporary=!0:a.onetime=!0),a.onetime||a.temporary?this.url(o.hash,Object.assign({async:!0},a)).done(function(e){n(e)}).fail(function(){n("")}):this.getContents(t,"blob",a).done(function(e){s=(window.URL||window.webkitURL).createObjectURL(e),n(s)}).fail(function(){n("")})):(s=(s=this.options.url)+(-1===s.indexOf("?")?"?":"&")+(this.oldAPI?"cmd=open&current="+o.phash:"cmd=file")+"&target="+o.hash+"&_t="+(o.ts||parseInt(+new Date/1e3)),!0===i&&(s+="&download=1"),e.each(this.customData,function(e,t){s+="&"+encodeURIComponent(e)+"="+encodeURIComponent(t)}),n?void n(s):s):(s+=(s.match(/\?/)?"&":"?")+"_".repeat((s.match(/[\?&](_+)t=/g)||["&t="]).sort().shift().match(/[\?&](_*)t=/)[1].length+1)+"t="+(o.ts||parseInt(+new Date/1e3)),n?void n(s):s):""},this.tmb=function(t){var i,n,a="elfinder-cwd-bgurl",o="",s={},r=0;return!(!e.isPlainObject(t)||(S.searchStatus.state&&0!==t.hash.indexOf(S.cwd().volumeid)?(i=S.option("tmbUrl",t.hash),n=S.option("tmbCrop",t.hash)):(i=$.tmbUrl,n=$.tmbCrop),n&&(a+=" elfinder-cwd-bgurl-crop"),"self"===i&&0===t.mime.indexOf("image/")?(o=S.openUrl(t.hash),a+=" elfinder-cwd-bgself"):(S.oldAPI||i)&&t&&t.tmb&&1!=t.tmb?o=i+t.tmb:S.newAPI&&t&&t.tmb&&1!=t.tmb&&(o=t.tmb),!o))&&("self"!==i&&(t.ts&&(s._t=t.ts),$.tmbReqCustomData&&Object.keys(this.customData).length&&(s=Object.assign(s,this.customData)),Object.keys(s).length&&(o+=o.match(/\?/)?"&":"?",e.each(s,function(e,t){o+=(0===r++?"":"&")+encodeURIComponent(e)+"="+encodeURIComponent(t)}))),{url:o,className:a})},this.selected=function(){return X.slice(0)},this.selectedFiles=function(){return e.map(X,function(e){return Y[e]?Object.assign({},Y[e]):null})},this.fileByName=function(e,t){var i;for(i in Y)if(Y.hasOwnProperty(i)&&Y[i].phash==t&&Y[i].name==e)return Y[i]},this.validResponse=function(e,t){return t.error||this.rules[this.rules[e]?e:"defaults"](t)},this.returnBytes=function(e){var t;return isNaN(e)?(e||(e=""),t=(e=e.replace(/b$/i,"")).charAt(e.length-1).toLowerCase(),e=e.replace(/[tgmk]$/i,""),"t"==t?e=1024*e*1024*1024*1024:"g"==t?e=1024*e*1024*1024:"m"==t?e=1024*e*1024:"k"==t&&(e*=1024),e=isNaN(e)?0:parseInt(e)):(e=parseInt(e))<1&&(e=0),e},this.request=function(t){var i,n,a,o,r=this,l=this.options,c=e.Deferred(),d=(+new Date).toString(16)+Math.floor(1e3*Math.random()).toString(16),u=Object.assign({},r.customData,{mimes:l.onlyMimes},t.data||t),h=u.cmd,p="binary"===(t.options||{}).dataType,f=!t.asNotOpen&&"open"===h,m=!(p||t.preventDefault||t.preventFail),g=!(p||t.preventDefault||t.preventDone),v=t.progressVal||20,b=null,y=!1,w=t.progressBar?{}:t.notify?Object.assign({progress:v*t.notify.cnt},t.notify):{},x=!!t.cancel,k=p||!!t.raw,C=t.syncOnFail,_=!!t.lazy,T=t.prepare,D=t.navigate,z=(t.options||{}).cache,A=Object.assign({url:l.url,async:!0,type:this.requestType,dataType:"json",cache:r.api>=2.1029,data:u,headers:this.customHeaders,xhrFields:this.xhrFields,progress:function(e){var i=e.loaded/e.total*100;if(b&&clearTimeout(b),t.progressBar)try{t.progressBar.width(i+"%")}catch(e){}else y&&w.type&&(i*=w.cnt,v<i&&(r.notify({type:w.type,progress:i-v,cnt:0,hideCnt:w.hideCnt}),v=i));if(t.progress)try{t.progress(e)}catch(e){}}},t.options||{}),S=function(t){t.warning&&r.error(t.warning),f?pe(t):r.updateCache(t),r.lazy(function(){t.removed&&t.removed.length&&r.remove(t),t.added&&t.added.length&&r.add(t),t.changed&&t.changed.length&&r.change(t)}).then(function(){return r.lazy(function(){r.trigger(h,t,!1)})}).then(function(){return r.lazy(function(){r.trigger(h+"done")})}).then(function(){t.toasts&&Array.isArray(t.toasts)&&e.each(t.toasts,function(){this.msg&&r.toast(this)}),t.sync&&r.sync()})},I=function(e,t){var i,n,a=r.options.debug;switch(t){case"abort":i=e.quiet?"":["errConnect","errAbort"];break;case"timeout":i=["errConnect","errTimeout"];break;case"parsererror":i=["errResponse","errDataNotJSON"],e.responseText&&(!W||a&&("all"===a||a["backend-error"]))&&i.push(e.responseText);break;default:if(e.responseText)try{(n=JSON.parse(e.responseText))&&n.error&&(i=n.error)}catch(e){}if(!i)if(403==e.status)i=["errConnect","errAccess","HTTP error "+e.status];else if(404==e.status)i=["errConnect","errNotFound","HTTP error "+e.status];else if(e.status>=500)i=["errResponse","errServerError","HTTP error "+e.status];else{if(414==e.status&&"get"===A.type)return A.type="post",r.abortXHR(e),void(c.xhr=e=r.transport.send(A).fail(i).done(M));i=e.quiet?"":["errConnect","HTTP error "+e.status]}}r.trigger(h+"done"),c.reject({error:i},e,t)},M=function(t){if(r.currentReqCmd=h,t.debug&&r.responseDebug(t),r.setCustomHeaderByXhr(n),k)return r.abortXHR(n),t&&t.debug&&r.debug("backend-debug",t),c.resolve(t);if(!t)return c.reject({error:["errResponse","errDataEmpty"]},n,t);if(!e.isPlainObject(t))return c.reject({error:["errResponse","errDataNotJSON"]},n,t);if(t.error)return f&&e.each(r.leafRoots,function(t,i){r.leafRoots[t]=e.grep(i,function(e){return e!==u.target})}),c.reject({error:t.error},n,t);var i=function(){var i,a=function(i){r.leafRoots[u.target]&&t[i]&&e.each(r.leafRoots[u.target],function(e,n){var a;(a=r.file(n))&&t[i].push(a)})},o=function(){r.textMimes={},e.each(r.res("mimes","text"),function(){r.textMimes[this.toLowerCase()]=!0})};if(f?a("files"):"tree"===h&&a("tree"),t=r.normalize(t),!r.validResponse(h,t))return c.reject({error:t.norError||"errResponse"},n,t);f&&(r.api||(r.api=t.api||1,"2.0"==r.api&&void 0!==t.options.uploadMaxSize&&(r.api="2.1"),r.newAPI=r.api>=2,r.oldAPI=!r.newAPI),t.textMimes&&Array.isArray(t.textMimes)&&(r.resources.mimes.text=t.textMimes,o()),!r.textMimes&&o(),t.options&&($=Object.assign({},B,t.options)),t.netDrivers&&(r.netDrivers=t.netDrivers),t.maxTargets&&(r.maxTargets=t.maxTargets),u.init&&(r.uplMaxSize=r.returnBytes(t.uplMaxSize),r.uplMaxFile=t.uplMaxFile?Math.min(parseInt(t.uplMaxFile),50):20)),"function"==typeof T&&T(t),D&&(i=D.target||"added",t[i]&&t[i].length&&r.one(h+"done",function(){var n=t[i],a=r.findCwdNodes(n),o=function(){var t=r.cwd().hash;return e.map(n,function(e){return e.phash&&t===e.phash?e.hash:null})},s=o(),l=function(t){var i,n,a,l=void 0,c=t.action?t.action.data:void 0;return(c||s.length)&&t.action&&(n=t.action.msg)&&(i=t.action.cmd)&&(!t.action.cwdNot||t.action.cwdNot!==r.cwd().hash)&&(a=t.action.done,c=t.action.data,l=e("<div></div>").append(e('<button type="button" class="ui-button ui-widget ui-state-default ui-corner-all elfinder-tabstop"><span class="ui-button-text">'+r.i18n(n)+"</span></button>").on("mouseenter mouseleave",function(t){e(this).toggleClass("ui-state-hover","mouseenter"==t.type)}).on("click",function(){r.exec(i,c||s,{_userAction:!0,_currentType:"toast",_currentNode:e(this)}),a&&r.one(i+"done",function(){"function"==typeof a?a():"select"===a&&r.trigger("selectfiles",{files:o()})})}))),delete t.action,t.extNode=l,t};D.toast||(D.toast={}),!D.noselect&&r.trigger("selectfiles",{files:r.searchStatus.state>1?e.map(n,function(e){return e.hash}):s}),a.length?(D.noscroll||(a.first().trigger("scrolltoview",{blink:!1}),r.resources.blink(a,"lookme")),e.isPlainObject(D.toast.incwd)&&r.toast(l(D.toast.incwd))):e.isPlainObject(D.toast.inbuffer)&&r.toast(l(D.toast.inbuffer))})),c.resolve(t),t.debug&&r.debug("backend-debug",t)};r.abortXHR(n),_?r.lazy(i):i()},E=function(e){n&&"pending"===n.state()&&(r.abortXHR(n,{quiet:!0,abort:!0}),(!e||"unload"!==e.type&&"destroy"!==e.type)&&r.autoSync())},O=function(e){if(r.trigger(h+"done"),"autosync"==e.type){if("stop"!=e.data.action)return}else if(!("unload"==e.type||"destroy"==e.type||"openxhrabort"==e.type||e.data.added&&e.data.added.length))return;E(e)},j=function(t){var i=function(){C=!1,c.reject()};if(t&&"cmd"===t)return h;if(f){if(ye&&"pending"===ye.state()){if(ye._target===u.target)return c.reject("openabort");ye.xhr?ye.xhr.queueAbort():ye.reject("openabort")}(ye=c)._target=u.target}if(c.always(function(){delete A.headers["X-elFinderReqid"],f&&(ye=null)}).fail(function(t,i,n){var a,s;f&&"openabort"===t&&(t="",C=!1),a={cmd:h,err:t,xhr:i,rc:n},0===t&&be.length&&(be=e.grep(be,function(e){return e("cmd")!==h})),r.trigger("requestError",a),a._getEvent&&a._getEvent().isDefaultPrevented()&&(m=!1,C=!1,t&&(t.error="")),E(),f&&(o=r.file(u.target))&&o.volumeid&&r.isRoot(o)&&delete r.volumeExpires[o.volumeid],r.trigger(h+"fail",n),(s="object"==typeof t?t.error:t)&&(m?r.error(s):r.debug("error",r.i18n(s))),C&&r.sync()}),!h)return C=!1,c.reject({error:"errCmdReq"});if(r.maxTargets&&u.targets&&u.targets.length>r.maxTargets)return C=!1,c.reject({error:["errMaxTargets",r.maxTargets]});if(g&&c.done(S),f){for(;a=ee.pop();)a.queueAbort();if(W!==u.target)for(;a=te.pop();)a.queueAbort()}return-1!==e.inArray(h,(r.cmdsToAdd+" autosync").split(" "))&&("autosync"!==h&&(r.autoSync("stop"),c.always(function(){r.autoSync()})),r.trigger("openxhrabort")),delete A.preventFail,r.api>=2.1029&&(z?A.headers["X-elFinderReqid"]=d:Object.assign(A.data,{reqid:d})),c.syncOnFail=function(e){C=!!e},ve++,c.xhr=n=r.transport.send(A).always(function(){A._xhr&&void 0!==A._xhr.responseURL&&(n.responseURL=A._xhr.responseURL||""),--ve,be.length&&be.shift()()}).fail(I).done(M),r.api>=2.1029&&(n._requestId=d),f||u.compare&&"info"===h?(n.queueAbort=i,ee.unshift(n),u.compare&&r.bind(r.cmdsToAdd+" autosync openxhrabort",O),c.always(function(){var t=e.inArray(n,ee);u.compare&&r.unbind(r.cmdsToAdd+" autosync openxhrabort",O),-1!==t&&ee.splice(t,1)})):-1!==e.inArray(h,r.abortCmdsOnOpen)&&(n.queueAbort=i,te.unshift(n),c.always(function(){var t=e.inArray(n,te);-1!==t&&te.splice(t,1)})),r.bind("unload destroy",O),c.always(function(){r.unbind("unload destroy",O)}),c},P=function(){return w.type&&w.cnt&&(x&&(w.cancel=c,t.eachCancel&&(w.id=+new Date)),i=setTimeout(function(){b=setTimeout(F,1e3),r.notify(w),y=!0,c.always(function(){w.cnt=-(parseInt(w.cnt)||0),r.notify(w),y=!1})},r.notifyDelay),c.always(function(){clearTimeout(i)})),ve<s?j():(f?be.unshift(j):be.push(j),c)},F=function(){var e;y&&b&&(e=1*w.cnt,b=null,r.notify({type:w.type,progress:e,cnt:0,hideCnt:w.hideCnt}),(v+=e)/w.cnt<80&&(b=setTimeout(F,500)))},H={opts:t,result:!0};return r.api||u.init?(r.trigger("request."+h,H,!0),H.result?"object"==typeof H.result&&H.result.promise?(H.result.done(P).fail(function(){r.trigger(h+"done"),c.reject()}),c):P():(r.trigger(h+"done"),c.reject())):(C=!1,c.reject())},this.cache=function(e,t){Array.isArray(e)||(e=[e]),fe(e,t)},this.updateCache=function(t){e.isPlainObject(t)&&(t.files&&t.files.length&&fe(t.files,"files"),t.tree&&t.tree.length&&fe(t.tree,"tree"),t.removed&&t.removed.length&&me(t.removed),t.added&&t.added.length&&fe(t.added,"add"),t.changed&&t.changed.length&&fe(t.changed,"change"))},this.diff=function(t,i,n){var a={},o=[],s=[],r=[],l=null;return e.each(t,function(e,t){a[t.hash]=t}),n&&n.length&&(l={},e.each(n,function(){l[this]=!0})),e.each(Y,function(e,t){a[e]||i&&t.phash!==i||s.push(e)}),e.each(a,function(t,i){var n,a=Y[t],s={};a?(e.each(Object.keys(a),function(){s[this]=!0}),e.each(i,function(e){if(delete s[e],!(l&&l[e]||i[e]===a[e]))return r.push(i),s={},!1}),0!==(n=Object.keys(s).length)&&(l&&e.each(s,function(e){l[e]&&--n}),0!==n&&r.push(i))):o.push(i)}),e.each(s,function(t,i){var n=Y[i],o=n.phash;o&&"directory"==n.mime&&-1===e.inArray(o,s)&&a[o]&&!function(e){for(var t=r.length;t--;)if(r[t].hash==e)return!0}(o)&&r.push(a[o])}),{added:o,removed:s,changed:r}},this.sync=function(t,i){this.autoSync("stop");var n,a,o,s,r=this,l=(a="",o=0,s=0,t&&i&&e.each(Y,function(e,i){i.phash&&i.phash===t&&(++o,s=Math.max(s,i.ts)),a=o+":"+s}),a),c=e.Deferred().always(function(){!n&&r.trigger("sync")}),d=[this.request({data:{cmd:"open",reload:1,target:W,tree:!t&&this.ui.tree?1:0,compare:l},preventDefault:!0})];return!t&&r.api>=2&&(W!==this.root()&&d.push(this.request({data:{cmd:"parents",target:W},preventDefault:!0})),e.each(function(){for(var e,t=[],i=r.file(r.root(W)),n=i?i.volumeid:null,a=r.cwd().phash;a;)(e=r.file(a))?(0!==a.indexOf(n)&&(t.push({target:a,cmd:"tree"}),r.isRoot(e)||t.push({target:a,cmd:"parents"}),n=(i=r.file(r.root(a)))?i.volumeid:null),a=e.phash):a=null;return t}(),function(e,t){d.push(r.request({data:{cmd:t.cmd,target:t.target},preventDefault:!0}))})),e.when.apply(e,d).fail(function(t,a){n=a&&200!=a.status,i&&-1===e.inArray("errOpen",t)?c.reject(t&&0!=a.status?t:void 0):(c.reject(t),r.parseError(t)&&r.request({data:{cmd:"open",target:r.lastDir("")||r.root(),tree:1,init:1},notify:{type:"open",cnt:1,hideCnt:!0}}))}).done(function(e){var i,n,a;if(e.cwd.compare&&l===e.cwd.compare)return c.reject();if(i={tree:[]},(n=arguments.length)>1)for(a=1;a<n;a++)arguments[a].tree&&arguments[a].tree.length&&i.tree.push.apply(i.tree,arguments[a].tree);if(r.api<2.1&&(i.tree||(i.tree=[]),i.tree.push(e.cwd)),e=r.normalize(e),!r.validResponse("open",e))return c.reject(e.norError||"errResponse");if(i=r.normalize(i),!r.validResponse("tree",i))return c.reject(i.norError||"errResponse");var o=r.diff(e.files.concat(i&&i.tree?i.tree:[]),t);return o.added.push(e.cwd),r.updateCache(o),o.removed.length&&r.remove(o),o.added.length&&r.add(o),o.changed.length&&r.change(o),c.resolve(o)}).always(function(){r.autoSync()}),c},this.upload=function(e){return this.transport.upload(e,this)},this.shortcut=function(t){var i,n,a,o,s;if(this.options.allowShortcuts&&t.pattern&&e.isFunction(t.callback))for(i=t.pattern.toUpperCase().split(/\s+/),o=0;o<i.length;o++)(a=1==(a=(s=(n=i[o]).split("+")).pop()).length?a>0?a:a.charCodeAt(0):a>0?a:e.ui.keyCode[a])&&!J[n]&&(J[n]={keyCode:a,altKey:-1!=e.inArray("ALT",s),ctrlKey:-1!=e.inArray("CTRL",s),shiftKey:-1!=e.inArray("SHIFT",s),type:t.type||"keydown",callback:t.callback,description:t.description,pattern:n});return this},this.shortcuts=function(){var t=[];return e.each(J,function(e,i){t.push([i.pattern,S.i18n(i.description)])}),t},this.clipboard=function(t,i){var n=function(){return e.map(Q,function(e){return e.hash})};return void 0!==t&&(Q.length&&this.trigger("unlockfiles",{files:n()}),Z={},Q=e.map(t||[],function(e){var t=Y[e];return t?(Z[e]=!0,{hash:e,phash:t.phash,name:t.name,mime:t.mime,read:t.read,locked:t.locked,cut:!!i}):null}),this.trigger("changeclipboard",{clipboard:Q.slice(0,Q.length)}),i&&this.trigger("lockfiles",{files:n()})),Q.slice(0,Q.length)},this.isCommandEnabled=function(e,t){var i,n,a=S.cwd().volumeid||"";return!t&&S.searchStatus.state>1&&S.selected().length&&(t=S.selected()[0]),i=!t||a&&0===t.indexOf(a)?$.disabledFlip:S.option("disabledFlip",t),!!(n=this._commands[e])&&(n.alwaysEnabled||!i[e])},this.exec=function(t,i,n,a){var o,s;return!a&&this.commandMap[t]&&"hidden"!==this.commandMap[t]&&(t=this.commandMap[t]),"open"===t&&((this.searchStatus.state||this.searchStatus.ininc)&&this.trigger("searchend",{noupdate:!0}),this.autoSync("stop")),!a&&i&&(e.isArray(i)?i.length&&(a=i[0]):a=i),"object"===(s=typeof(o=this._commands[t]&&this.isCommandEnabled(t,a)?this._commands[t].exec(i,n):e.Deferred().reject("errUnknownCmd")))&&o.promise||(S.debug("warning",'"cmd.exec()" should be returned "$.Deferred" but cmd "'+t+'" returned "'+s+'"'),o=e.Deferred().resolve()),this.trigger("exec",{dfrd:o,cmd:t,files:i,opts:n,dstHash:a}),o},this.dialog=function(t,i){var n=e("<div></div>").append(t).appendTo(E).elfinderdialog(i,S),a=n.closest(".ui-dialog"),o=function(){!n.data("draged")&&n.is(":visible")&&n.elfinderdialog("posInit")};return a.length&&(S.bind("resize",o),a.on("remove",function(){S.unbind("resize",o)})),n},this.toast=function(t){return e('<div class="ui-front"></div>').appendTo(this.ui.toast).elfindertoast(t||{},this)},this.getUI=function(t){return t?this.ui[t]||e():E},this.getCommand=function(e){return void 0===e?this._commands:this._commands[e]},this.resize=function(t,i){var n,a=!E.hasClass("ui-resizable"),o=E.data("resizeSize")||{w:0,h:0},s={};oe&&oe.data("resizeTm")&&clearTimeout(oe.data("resizeTm")),S.options.noResizeBySelf||("string"==typeof i&&(n=i.match(/^([0-9.]+)%$/))&&(oe&&oe.length||(oe=e(window)),oe.data("marginToMyNode")||oe.data("marginToMyNode",function(){for(var e=E.outerHeight(!0)-E.innerHeight(),t=E;t.get(0)!==oe.get(0)&&(e+=(t=t.parent()).outerHeight(!0)-t.innerHeight(),t.parent().length););return e}()),oe.data("fitToBaseFunc")||oe.data("fitToBaseFunc",function(e){var t=oe.data("resizeTm");e.preventDefault(),e.stopPropagation(),t&&cancelAnimationFrame(t),E.hasClass("elfinder-fullscreen")||S.UA.Mobile&&oe.data("rotated")===S.UA.Rotated||(oe.data("rotated",S.UA.Rotated),oe.data("resizeTm",requestAnimationFrame(function(){S.restoreSize()})))}),void 0===oe.data("rotated")&&oe.data("rotated",S.UA.Rotated),i=oe.height()*(n[1]/100)-oe.data("marginToMyNode"),oe.off("resize."+S.namespace,oe.data("fitToBaseFunc")),a&&oe.on("resize."+S.namespace,oe.data("fitToBaseFunc"))),E.css({width:t,height:parseInt(i)})),s.w=Math.round(E.width()),s.h=Math.round(E.height()),E.data("resizeSize",s),s.w===o.w&&s.h===o.h||(E.trigger("resize"),this.trigger("resize",{width:s.w,height:s.h}))},this.restoreSize=function(){this.resize(ne,ae)},this.show=function(){E.show(),this.enable().trigger("show")},this.hide=function(){this.options.enableAlways&&(L=q,q=!1),this.disable(),this.trigger("hide"),E.hide()},this.lazy=function(t,i,n){var a=function(e){var t,i=E.data("lazycnt");e?(t=!E.data("lazyrepaint")&&n.repaint,i?E.data("lazycnt",++i):E.data("lazycnt",1).addClass("elfinder-processing"),t&&E.data("lazyrepaint",!0).css("display")):i&&i>1?E.data("lazycnt",--i):(t=E.data("lazyrepaint"),E.data("lazycnt",0).removeData("lazyrepaint").removeClass("elfinder-processing"),t&&E.css("display"),S.trigger("lazydone"))},o=e.Deferred(),s=function(){o.resolve(t.call(o)),a(!1)};return i=i||0,n=n||{},a(!0),i?setTimeout(s,i):requestAnimationFrame(s),o},this.destroy=function(){E&&E[0].elfinder&&(E.hasClass("elfinder-fullscreen")&&S.toggleFullscreen(E),this.options.syncStart=!1,this.autoSync("forcestop"),this.trigger("destroy").disable(),Q=[],X=[],G={},J={},e(window).off("."+F),e(document).off("."+F),S.trigger=function(){},e(ce).remove(),E.off().removeData().empty().append(j.contents()).attr("class",j.attr("class")).attr("style",j.attr("style")),delete E[0].elfinder,e.each(O,function(t,i){e.each(i,function(e,t){E.on(t.type+(t.namespace?"."+t.namespace:""),t.selector,t.handler)})}))},this.autoSync=function(t){var i;if(S.options.sync>=1e3){if(o&&(clearTimeout(o),o=null,S.trigger("autosync",{action:"stop"})),"stop"===t?++de:de=Math.max(0,--de),de||"forcestop"===t||!S.options.syncStart)return;(i=function(t){var n;$.syncMinMs&&(t||o)&&(t&&S.trigger("autosync",{action:"start"}),n=Math.max(S.options.sync,$.syncMinMs),o&&clearTimeout(o),o=setTimeout(function(){var t,a=!0,s=W;$.syncChkAsTs&&Y[s]&&(t=Y[s].ts)?S.request({data:{cmd:"info",targets:[s],compare:t,reload:1},preventDefault:!0}).done(function(e){var n;a=!0,e.compare&&(n=e.compare)==t&&(a=!1),a?S.sync(s).always(function(){n&&(Y[s].ts=n),i()}):i()}).fail(function(t,a){var s=S.parseError(t);s&&0!=a.status?(S.error(s),Array.isArray(s)&&-1!==e.inArray("errOpen",s)&&S.request({data:{cmd:"open",target:S.lastDir("")||S.root(),tree:1,init:1},notify:{type:"open",cnt:1,hideCnt:!0}})):o=setTimeout(function(){i()},n)}):S.sync(W,!0).always(function(){i()})},n))})(!0)}},this.insideWorkzone=function(e,t,i){var n=this.getUI("workzone").data("rectangle");return i=i||1,!(e<n.left+i||e>n.left+n.width+i||t<n.top+i||t>n.top+n.height+i)},this.toFront=function(t){var i=E.children(".ui-front").removeClass("elfinder-frontmost"),n=i.last();i.css("z-index",""),e(t).addClass("ui-front elfinder-frontmost").css("z-index",n.css("z-index")+1)},this.toHide=function(t,i){var n,a=e(t);!i&&a.hide(),a.hasClass("elfinder-frontmost")&&(a.removeClass("elfinder-frontmost"),(n=E.children(".ui-front:visible:not(.elfinder-frontmost)").last()).length&&requestAnimationFrame(function(){E.children(".elfinder-frontmost:visible").length||(S.toFront(n),n.trigger("frontmost"))}))},this.getMaximizeCss=function(){return{width:"100%",height:"100%",margin:0,top:0,left:0,display:"block",position:"fixed",zIndex:Math.max(S.zIndex?S.zIndex+1:0,1e3),maxWidth:"",maxHeight:""}},function(){ke&&S.UA.Fullscreen&&(S.UA.Fullscreen=!1,Ce&&void 0!==Ce.attr("allowfullscreen")&&(S.UA.Fullscreen=!0));var t,i,n,a,o="elfinder-fullscreen",s="elfinder-fullscreen-native",r=function(){var t=0,i=0;e.each(E.children(".ui-dialog,.ui-draggable"),function(n,a){var o=e(a),s=o.position();s.top<0&&(o.css("top",t),t+=20),s.left<0&&(o.css("left",i),i+=20)})},l=function(){var n=S.storage("useFullscreen");a=S.UA.Fullscreen&&(n?n>0:"screen"===S.options.commandsOptions.fullscreen.mode)?{fullElm:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||null},exitFull:function(){return document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():void 0},toFull:function(e){return e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():!!e.msRequestFullscreen&&e.msRequestFullscreen()}}:{fullElm:function(){var e;return E.hasClass(o)?E.get(0):(e=E.find("."+o)).length?e.get(0):null},exitFull:function(){var n;e(window).off("resize."+F,d),void 0!==i&&e("body").css("overflow",i),i=void 0,t&&(n=t.elm,c(n),e(n).trigger("resize",{fullscreen:"off"})),e(window).trigger("resize")},toFull:function(t){return i=e("body").css("overflow")||"",e("body").css("overflow","hidden"),e(t).css(S.getMaximizeCss()).addClass(o).trigger("resize",{fullscreen:"on"}),r(),e(window).on("resize."+F,d).trigger("resize"),!0}}},c=function(i){t&&t.elm==i&&(e(i).removeClass(o+" "+s).attr("style",t.style),t=null)},d=function(t){var i;t.target===window&&(n&&cancelAnimationFrame(n),n=requestAnimationFrame(function(){(i=a.fullElm())&&e(i).trigger("resize",{fullscreen:"on"})}))};l(),e(document).on("fullscreenchange."+F+" webkitfullscreenchange."+F+" mozfullscreenchange."+F+" MSFullscreenChange."+F,function(i){if(S.UA.Fullscreen){var l=a.fullElm(),u=e(window);n&&cancelAnimationFrame(n),null===l?(u.off("resize."+F,d),t&&(l=t.elm,c(l),e(l).trigger("resize",{fullscreen:"off"}))):(e(l).addClass(o+" "+s).attr("style","width:100%; height:100%; margin:0; padding:0;").trigger("resize",{fullscreen:"on"}),u.on("resize."+F,d),r()),u.trigger("resize")}}),S.toggleFullscreen=function(i,n){var o,s=e(i).get(0);if(o=a.fullElm()){if(o==s){if(!0===n)return o}else if(!1===n)return o;return a.exitFull(),null}return!1===n?null:(l(),t={elm:s,style:e(s).attr("style")},!1!==a.toFull(s)?s:(t=null,null))}}(),_="elfinder-maximized",T=function(e){if(e.target===window&&e.data&&e.data.elm){var t=e.data.elm;C&&cancelAnimationFrame(C),C=requestAnimationFrame(function(){t.trigger("resize",{maximize:"on"})})}},S.toggleMaximize=function(t,i){var n=e(t);if(n.hasClass(_)){if(!0===i)return;!function(t){e(window).off("resize."+F,T),e("body").css("overflow",t.data("bodyOvf")),t.removeClass(_).attr("style",t.data("orgStyle")).removeData("bodyOvf").removeData("orgStyle"),t.trigger("resize",{maximize:"off"})}(n)}else{if(!1===i)return;!function(t){t.data("bodyOvf",e("body").css("overflow")||"").data("orgStyle",t.attr("style")).addClass(_).css(S.getMaximizeCss()),e("body").css("overflow","hidden"),e(window).on("resize."+F,{elm:t},T),t.trigger("resize",{maximize:"on"})}(n)}},Object.assign(e.ui.keyCode,{F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,DIG0:48,DIG1:49,DIG2:50,DIG3:51,DIG4:52,DIG5:53,DIG6:54,DIG7:55,DIG8:56,DIG9:57,NUM0:96,NUM1:97,NUM2:98,NUM3:99,NUM4:100,NUM5:101,NUM6:102,NUM7:103,NUM8:104,NUM9:105,CONTEXTMENU:93,DOT:190}),this.dragUpload=!1,this.xhrUpload=("undefined"!=typeof XMLHttpRequestUpload||"undefined"!=typeof XMLHttpRequestEventTarget)&&"undefined"!=typeof File&&"undefined"!=typeof FormData,this.transport={},"object"==typeof this.options.transport&&(this.transport=this.options.transport,"function"==typeof this.transport.init&&this.transport.init(this)),"function"!=typeof this.transport.send&&(this.transport.send=function(t){return S.UA.IE||(t._xhr=new XMLHttpRequest,t.xhr=function(){return t.progress&&t._xhr.addEventListener("progress",t.progress),t._xhr}),e.ajax(t)}),"iframe"==this.transport.upload?this.transport.upload=e.proxy(this.uploads.iframe,this):"function"==typeof this.transport.upload?this.dragUpload=!!this.options.dragUploadAllow:this.xhrUpload&&this.options.dragUploadAllow?(this.transport.upload=e.proxy(this.uploads.xhr,this),this.dragUpload=!0):this.transport.upload=e.proxy(this.uploads.iframe,this),this.decodeRawString=function(e){return function(e){var t,i,n,a,o=String.fromCharCode;for(t=0,i=e.length,a="";n=e[t],t<i;t++)a+=n<=127?o(n):n<=223&&n>=194?o((31&n)<<6|63&e[++t]):n<=239&&n>=224?o((15&n)<<12|(63&e[++t])<<6|63&e[++t]):n<=247&&n>=240?o(55296|((7&n)<<8|(63&e[++t])<<2|e[++t]>>>4&3)-64,56320|(15&e[t++])<<6|63&e[t]):o(65533);return a}(function(e){var t,i,n,a=[];for("string"==typeof e&&(e=function(e){var t,i,n;for(t=0,i=e.length,n=[];t<i;t++)n.push(e.charCodeAt(t));return n}(e)),t=0,i=e.length;n=e[t],t<i;t++)n>=55296&&n<=56319?a.push(64+(1023&n)<<10|1023&e[++t]):a.push(n);return a}(e))},this.getContents=function(t,i,n){var a,o,s=this,r=e.Deferred(),l=i||"arraybuffer";return r.fail(function(){o&&"pending"===o.state()&&o.reject()}),a=s.openUrl(t),s.isSameOrigin(a)||(a=s.openUrl(t,!0)),o=s.request(Object.assign({data:{cmd:"get"},options:{url:a,type:"get",cache:!0,dataType:"binary",responseType:l,processData:!1},notify:{type:"file",cnt:1,hideCnt:!0},cancel:!0},n||{})).fail(function(){r.reject()}).done(function(e){r.resolve(e)}),r},this.getBinaryByUrl=function(t,i,n){var a,o=e.Deferred();return o.fail(function(){a&&"pending"===a.state()&&a.reject()}),a=this.request(Object.assign({data:{cmd:"get"},options:Object.assign({type:"get",cache:!0,dataType:"binary",responseType:"blob",processData:!1},t)},n||{})).fail(function(){o.reject()}).done(function(e){i&&i(e),o.resolve(e)}),o},this.getMimetype=function(e,t){var i,n,o=t;return(n=(e+"").match(/\.([^.]+)$/))&&(i=n[1])&&(a||(a=S.arrayFlip(S.mimeTypes)),(o=a[i.toLowerCase()])||(o=t)),o},S.hashCheckers=[],function(t){var i={};window.Worker&&window.ArrayBuffer&&(t.options.cdns.sparkmd5&&(i.SparkMD5=!0,t.hashCheckers.push("md5")),t.options.cdns.jssha&&(i.jsSHA=!0,t.hashCheckers=t.hashCheckers.concat(["sha1","sha224","sha256","sha384","sha512","sha3-224","sha3-256","sha3-384","sha3-512","shake128","shake256"]))),t.getContentsHashes=function(n,a,o,s){var r,l=e.Deferred(),c=t.arrayFlip(a||["md5"],!0),d=[],u={},h=o||{shake128len:256,shake256len:512};return l.fail(function(){r&&r.reject()}),Object.keys(i).length?r=t.getContents(n,"arraybuffer",s).done(function(a){c.md5&&i.SparkMD5&&d.push(function(){var o=e.Deferred();try{var s=t.getWorker();o.fail(function(){s&&s.terminate()}),s.onmessage=function(e){var i;(s&&s.terminate(),e.data.hash)?(u.md5=e.data.hash,(i=t.file(n))&&(i.md5=u.md5)):e.data.error&&(u.md5=e.data.error);l.notify(u),o.resolve()},s.onerror=function(e){o.reject()},s.postMessage({scripts:[t.options.cdns.sparkmd5,t.getWorkerUrl("calcfilehash.js")],data:{type:"md5",bin:a}}),l.fail(function(){o.reject()})}catch(e){o.reject(),delete i.SparkMD5}return o}()),i.jsSHA&&e.each(["1","224","256","384","512","3-224","3-256","3-384","3-512","ke128","ke256"],function(o,s){c["sha"+s]&&d.push(function(){var o=e.Deferred();try{var r=t.getWorker();o.fail(function(){r&&r.terminate()}),r.onmessage=function(e){var i;(r&&r.terminate(),e.data.hash)?(u["sha"+s]=e.data.hash,(i=t.file(n))&&(i["sha"+s]=u["sha"+s])):e.data.error&&(u["sha"+s]=e.data.error);l.notify(u),o.resolve()},r.onerror=function(e){o.reject()},r.postMessage({scripts:[t.options.cdns.jssha,t.getWorkerUrl("calcfilehash.js")],data:{type:s,bin:a,hashOpts:h}}),l.fail(function(){o.reject()})}catch(e){o.reject(),delete i.jsSHA}return o}())}),d.length?e.when.apply(null,d).always(function(){l.resolve(u)}):l.reject()}).fail(function(){l.reject()}):l.reject(),l}}(this),this.parseError=function(t){var i=t;return e.isPlainObject(i)&&(i=i.error),i},this.error=function(){var e,t=arguments[0],i=arguments[1]||null;return 1==arguments.length&&"function"==typeof t?S.bind("error",t):!0!==(e=this.parseError(t))&&e?S.trigger("error",{error:e,opts:i}):this},e.each(["enable","disable","load","open","reload","select","add","remove","change","dblclick","getfile","lockfiles","unlockfiles","selectfiles","unselectfiles","dragstart","dragstop","search","searchend","viewchange"],function(t,i){S[i]=function(){var t=arguments[0];return 1==arguments.length&&"function"==typeof t?S.bind(i,t):S.trigger(i,e.isPlainObject(t)?t:{})}}),this.enable(function(){!q&&S.api&&S.visible()&&S.ui.overlay.is(":hidden")&&!E.children(".elfinder-dialog."+S.res("class","editing")+":visible").length&&(q=!0,document.activeElement&&document.activeElement.blur(),E.removeClass("elfinder-disabled"))}).disable(function(){L=q,q=!1,E.addClass("elfinder-disabled")}).open(function(){X=[]}).select(function(t){var i=0,n=[];X=e.grep(t.data.selected||t.data.value||[],function(e){return n.length||S.maxTargets&&++i>S.maxTargets?(n.push(e),!1):!!Y[e]}),n.length&&(S.trigger("unselectfiles",{files:n,inselect:!0}),S.toast({mode:"warning",msg:S.i18n(["errMaxTargets",S.maxTargets])}))}).error(function(t){var i,n,a={cssClass:"elfinder-dialog-error",title:S.i18n("error"),resizable:!1,destroyOnClose:!0,buttons:{}},o=S.getUI();o.children(".elfinder-dialog-error").length<S.options.maxErrorDialogs?(a.buttons[S.i18n(S.i18n("btnClose"))]=function(){e(this).elfinderdialog("close")},t.data.opts&&e.isPlainObject(t.data.opts)&&Object.assign(a,t.data.opts),S.dialog('<span class="elfinder-dialog-icon elfinder-dialog-icon-error"></span>'+S.i18n(t.data.error),a)):(n=(i=o.children(".elfinder-dialog-error:last").children(".ui-dialog-content:first")).children(".elfinder-error-counter")).length?n.data("cnt",parseInt(n.data("cnt"))+1).html(S.i18n(["moreErrors",n.data("cnt")])):(n=e('<span class="elfinder-error-counter">'+S.i18n(["moreErrors",1])+"</span>").data("cnt",1),i.append("<br/>",n))}).bind("tmb",function(t){e.each(t.data.images||[],function(e,t){Y[e]&&(Y[e].tmb=t)})}).bind("searchstart",function(e){Object.assign(S.searchStatus,e.data),S.searchStatus.state=1}).bind("search",function(e){S.searchStatus.state=2}).bind("searchend",function(){S.searchStatus.state=0,S.searchStatus.ininc=!1,S.searchStatus.mixed=!1}).bind("canMakeEmptyFile",function(t){var i=t.data,n={};i&&Array.isArray(i.mimes)&&(i.unshift||(n=S.mimesCanMakeEmpty),e.each(i.mimes,function(){n[this]||(n[this]=S.mimeTypes[this])}),i.unshift&&(S.mimesCanMakeEmpty=Object.assign(n,S.mimesCanMakeEmpty)))}).bind("themechange",function(){requestAnimationFrame(function(){S.trigger("uiresize")})}),!0===this.options.sound&&this.bind("playsound",function(t){var i=ce.canPlayType&&ce.canPlayType('audio/wav; codecs="1"'),n=t.data&&t.data.soundFile;i&&n&&""!=i&&"no"!=i&&e(ce).html('<source src="'+se+n+'" type="audio/wav">')[0].play()}),e.each(this.options.handlers,function(e,t){S.bind(e,t)}),this.history=new this.history(this),this.roots={},this.leafRoots={},this.volumeExpires={},this._commands={},Array.isArray(this.options.commands)||(this.options.commands=[]),-1!==e.inArray("*",this.options.commands)&&(this.options.commands=Object.keys(this.commands)),this.commandMap={},this.volOptions={},this.hasVolOptions=!1,this.trashes={},this.optionsByHashes={},this.uiAutoHide=[],this.one("open",function(){S.uiAutoHide.length&&setTimeout(function(){S.trigger("uiautohide")},500)}),this.bind("uiautohide",function(){S.uiAutoHide.length&&S.uiAutoHide.shift()()}),this.options.width&&(ne=this.options.width),this.options.height&&(ae=this.options.height),this.options.heightBase&&(oe=e(this.options.heightBase)),se=this.options.soundPath?this.options.soundPath.replace(/\/+$/,"")+"/":this.baseUrl+se,this.options.parrotHeaders&&Array.isArray(this.options.parrotHeaders)&&this.options.parrotHeaders.length?(this.parrotHeaders=this.options.parrotHeaders,e.each(this.parrotHeaders,function(e,t){var i=S.sessionStorage("core-ph:"+t);i&&(S.customHeaders[t]=i)})):this.parrotHeaders=[],S.one("opendone",function(){var t;e(document).on("click."+F,function(t){q&&!S.options.enableAlways&&!e(t.target).closest(E).length&&S.disable()}).on(N+" "+U+" "+R+" "+H,we),S.options.useBrowserHistory&&e(window).on("popstate."+F,function(t){var i,n,a=t.originalEvent.state||{},o=!!a.thash,s=E.find(".elfinder-frontmost:visible"),r=E.find(".elfinder-navbar-dir,.elfinder-cwd-filename").find("input,textarea");o||(a={thash:S.cwd().hash},e("html,body").animate({scrollTop:E.offset().top})),s.length||r.length?(history.pushState(a,null,location.pathname+location.search+"#elf_"+a.thash),s.length?s.hasClass(S.res("class","preventback"))||(s.hasClass("elfinder-contextmenu")?e(document).trigger(e.Event("keydown",{keyCode:e.ui.keyCode.ESCAPE,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1})):s.hasClass("elfinder-dialog")?s.elfinderdialog("close"):s.trigger("close")):r.trigger(e.Event("keydown",{keyCode:e.ui.keyCode.ESCAPE,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1}))):o?!e.isEmptyObject(S.files())&&S.request({data:{cmd:"open",target:a.thash,onhistory:1},notify:{type:"open",cnt:1,hideCnt:!0},syncOnFail:!0}):(i=function(){n.trigger("click")},S.one("open",i,!0),n=S.toast({msg:S.i18n("pressAgainToExit"),onHidden:function(){S.unbind("open",i),history.pushState(a,null,location.pathname+location.search+"#elf_"+a.thash)}}))}),e(window).on("resize."+F,function(e){e.target===this&&(t&&cancelAnimationFrame(t),t=requestAnimationFrame(function(){var e=E.data("resizeSize")||{w:0,h:0},t={w:Math.round(E.width()),h:Math.round(E.height())};E.data("resizeSize",t),t.w===e.w&&t.h===e.h||(E.trigger("resize"),S.trigger("resize",{width:t.w,height:t.h}))}))}).on("beforeunload."+F,function(t){var i,n;if(!S.pauseUnloadCheck()){if(E.is(":visible")&&(S.ui.notify.children().length&&-1!==e.inArray("hasNotifyDialog",S.options.windowCloseConfirm)?i=S.i18n("ntfsmth"):E.find("."+S.res("class","editing")).length&&-1!==e.inArray("editingFile",S.options.windowCloseConfirm)?i=S.i18n("editingFile"):(n=Object.keys(S.selected()).length)&&-1!==e.inArray("hasSelectedItem",S.options.windowCloseConfirm)?i=S.i18n("hasSelected",""+n):(n=Object.keys(S.clipboard()).length)&&-1!==e.inArray("hasClipboardData",S.options.windowCloseConfirm)&&(i=S.i18n("hasClipboard",""+n)),i))return t.returnValue=i,i;S.trigger("unload")}}),e(window).on("message."+F,function(e){var t,i,n=e.originalEvent||null;if(n&&(0===S.convAbsUrl(S.options.url).indexOf(n.origin)||0===S.convAbsUrl(S.uploadURL).indexOf(n.origin)))try{(i=(t=JSON.parse(n.data)).data||null)&&(i.error?(t.bind&&S.trigger(t.bind+"fail",i),S.error(i.error)):(i.warning&&S.error(i.warning),S.updateCache(i),i.removed&&i.removed.length&&S.remove(i),i.added&&i.added.length&&S.add(i),i.changed&&i.changed.length&&S.change(i),t.bind&&(S.trigger(t.bind,i),S.trigger(t.bind+"done")),i.sync&&S.sync()))}catch(e){S.sync()}}),S.options.enableAlways?(e(window).on("focus."+F,function(e){e.target===this&&S.enable()}),ke&&e(window.top).on("focus."+F,function(){!S.enable()||Ce&&!Ce.is(":visible")||requestAnimationFrame(function(){e(window).trigger("focus")})})):ke&&e(window).on("blur."+F,function(e){q&&e.target===this&&S.disable()}),ke&&E.on("click",function(t){e(window).trigger("focus")}),S.options.enableByMouseOver&&E.on("mouseenter touchstart",function(t){ke&&e(window).trigger("focus"),!S.enabled()&&S.enable()}),e(window).on("visibilitychange."+F,function(e){var t=document.hidden||document.webkitHidden||document.msHidden;S.options.syncStart&&S.autoSync(t?"stop":void 0)})}),E[0].elfinder=this,I.push((D=S.lang,z=S.i18nBaseUrl+"elfinder."+D+".js",A=e.Deferred().done(function(){S.i18[D]&&(S.lang=D),S.trigger("i18load"),l="en"===S.lang?S.i18.en:e.extend(!0,{},S.i18.en,S.i18[S.lang])}),S.i18[D]?A.resolve():(S.lang="en",S.hasRequire?require([z],function(){A.resolve()},function(){A.resolve()}):S.loadScript([z],function(){A.resolve()},{loadType:"tag",error:function(){A.resolve()}})),A)),c=function(){var t,i,n,a,o,s,r,c,d,u,h,p,f,m,g,v,b,y,w,x;return S.messages=l.messages,e.fn.selectable&&e.fn.draggable&&e.fn.droppable&&e.fn.resizable&&e.fn.button&&e.fn.slider?E.length?S.options.url?(t=Object.assign({name:S.i18n("name"),perm:S.i18n("perms"),date:S.i18n("modify"),size:S.i18n("size"),kind:S.i18n("kind"),modestr:S.i18n("mode"),modeoct:S.i18n("mode"),modeboth:S.i18n("mode")},S.options.uiOptions.cwd.listView.columnsCustomName),S.getColumnName=function(e){var i=t[e]||S.i18n(e);return"function"==typeof i?i():i},S.direction=l.direction,S.dateFormat=S.options.dateFormat||l.dateFormat,S.fancyFormat=S.options.fancyDateFormat||l.fancyDateFormat,S.nonameDateFormat=(S.options.nonameDateFormat||l.nonameDateFormat).replace(/[\/\\]/g,"_"),S.cssClass="ui-helper-reset ui-helper-clearfix ui-widget ui-widget-content ui-corner-all elfinder elfinder-"+("rtl"==S.direction?"rtl":"ltr")+(S.UA.Touch?" elfinder-touch"+(S.options.resizable?" touch-punch":""):"")+(S.UA.Mobile?" elfinder-mobile":"")+(S.UA.iOS?" elfinder-ios":"")+" "+S.options.cssClass,E.addClass(S.cssClass).on(H,function(){!q&&S.enable()}),r=N+"draggable keyup."+F+"draggable",S.draggable={appendTo:E,addClasses:!1,distance:4,revert:!0,refreshPositions:!1,cursor:"crosshair",cursorAt:{left:50,top:47},scroll:!1,start:function(t,r){var l,c,d=r.helper,u=e.grep(d.data("files")||[],function(e){return!!e&&(Z[e]=!0,!0)}),h=!1;for(s=E.attr("style"),E.width(E.width()).height(E.height()),i="ltr"===S.direction,n=S.getUI("workzone").data("rectangle"),a=n.top+n.height,o=a-S.getUI("navdock").outerHeight(!0),S.draggingUiHelper=d,l=u.length;l--;)if(c=u[l],Y[c].locked){h=!0,d.data("locked",!0);break}!h&&S.trigger("lockfiles",{files:u}),d.data("autoScrTm",setInterval(function(){d.data("autoScr")&&S.autoScroll[d.data("autoScr")](d.data("autoScrVal"))},50))},drag:function(t,s){var r,l,c,d=s.helper;((l=n.top>t.pageY)||o<t.pageY)&&(r=n.cwdEdge>t.pageX?(i?"navbar":"cwd")+(l?"Up":"Down"):(i?"cwd":"navbar")+(l?"Up":"Down"),l||("cwd"===r.substr(0,3)?a<t.pageY?c=a:r=null:c=o),r&&(d.data("autoScr",r),d.data("autoScrVal",Math.pow(l?n.top-t.pageY:t.pageY-c,1.3)))),r||d.data("autoScr")&&d.data("refreshPositions",1).data("autoScr",null),d.data("refreshPositions")&&e(this).elfUiWidgetInstance("draggable")&&(d.data("refreshPositions")>0?(e(this).draggable("option",{refreshPositions:!0,elfRefresh:!0}),d.data("refreshPositions",-1)):(e(this).draggable("option",{refreshPositions:!1,elfRefresh:!1}),d.data("refreshPositions",null)))},stop:function(t,i){var n,a=i.helper;e(document).off(r),e(this).elfUiWidgetInstance("draggable")&&e(this).draggable("option",{refreshPositions:!1}),S.draggingUiHelper=null,S.trigger("focus").trigger("dragstop"),a.data("droped")||(n=e.grep(a.data("files")||[],function(e){return!!e}),S.trigger("unlockfiles",{files:n}),S.trigger("selectfiles",{files:S.selected()})),S.enable(),E.attr("style",s),a.data("autoScrTm")&&clearInterval(a.data("autoScrTm"))},helper:function(t,i){var n,a,o,s=this.id?e(this):e(this).parents("[id]:first"),l=e('<div class="elfinder-drag-helper"><span class="elfinder-drag-helper-icon-status"></span></div>'),c=function(t){var i,n=t.mime,a=S.tmb(t);return i='<div class="elfinder-cwd-icon elfinder-cwd-icon-drag '+S.mime2class(n)+' ui-corner-all"></div>',a?i=e(i).addClass(a.className).css("background-image","url('"+a.url+"')").get(0).outerHTML:t.icon&&(i=e(i).css(S.getIconStyle(t,!0)).get(0).outerHTML),t.csscls&&(i='<div class="'+t.csscls+'">'+i+"</div>"),i};return S.draggingUiHelper&&S.draggingUiHelper.stop(!0,!0),S.trigger("dragstart",{target:s[0],originalEvent:t},!0),n=s.hasClass(S.res("class","cwdfile"))?S.selected():[S.navId2Hash(s.attr("id"))],l.append(c(Y[n[0]])).data("files",n).data("locked",!1).data("droped",!1).data("namespace",F).data("dropover",0),(a=n.length)>1&&l.append(c(Y[n[a-1]])+'<span class="elfinder-drag-num">'+a+"</span>"),e(document).on(r,function(e){if(S._commands.copy){var t=e.shiftKey||e.ctrlKey||e.metaKey;o!==t&&(o=t,l.is(":visible")&&l.data("dropover")&&!l.data("droped")&&(l.toggleClass("elfinder-drag-helper-plus",!!l.data("locked")||o),S.trigger(o?"unlockfiles":"lockfiles",{files:n,helper:l})))}}),l}},S.commands.getfile&&("function"==typeof S.options.getFileCallback?(S.bind("dblclick",function(e){e.preventDefault(),S.exec("getfile").fail(function(){S.exec("open",e.data&&e.data.file?[e.data.file]:void 0)})}),S.shortcut({pattern:"enter",description:S.i18n("cmdgetfile"),callback:function(){S.exec("getfile").fail(function(){S.exec("mac"==S.OS?"rename":"open")})}}).shortcut({pattern:"ctrl+enter",description:S.i18n("mac"==S.OS?"cmdrename":"cmdopen"),callback:function(){S.exec("mac"==S.OS?"rename":"open")}})):S.options.getFileCallback=null),e.each(S.commands,function(t,i){var n,a,o=Object.assign({},i.prototype);if(e.isFunction(i)&&!S._commands[t]&&(i.prototype.forceLoad||-1!==e.inArray(t,S.options.commands))){if(n=i.prototype.extendsCmd||""){if(!e.isFunction(S.commands[n]))return!0;i.prototype=Object.assign({},ie,new S.commands[n],i.prototype)}else i.prototype=Object.assign({},ie,i.prototype);S._commands[t]=new i,i.prototype=o,a=S.options.commandsOptions[t]||{},n&&S.options.commandsOptions[n]&&(a=e.extend(!0,{},S.options.commandsOptions[n],a)),S._commands[t].setup(t,a),S._commands[t].linkedCmds.length&&e.each(S._commands[t].linkedCmds,function(t,i){var n=S.commands[i];e.isFunction(n)&&!S._commands[i]&&(n.prototype=ie,S._commands[i]=new n,S._commands[i].setup(i,S.options.commandsOptions[i]||{}))})}}),S.ui={workzone:e("<div></div>").appendTo(E).elfinderworkzone(S),navbar:e("<div></div>").appendTo(E).elfindernavbar(S,S.options.uiOptions.navbar||{}),navdock:e("<div></div>").appendTo(E).elfindernavdock(S,S.options.uiOptions.navdock||{}),contextmenu:e("<div></div>").appendTo(E).elfindercontextmenu(S),overlay:e("<div></div>").appendTo(E).elfinderoverlay({show:function(){S.disable()},hide:function(){L&&S.enable()}}),cwd:e("<div></div>").appendTo(E).elfindercwd(S,S.options.uiOptions.cwd||{}),notify:S.dialog("",{cssClass:"elfinder-dialog-notify"+(S.options.notifyDialog.canClose?"":" elfinder-titlebar-button-hide"),position:S.options.notifyDialog.position,absolute:!0,resizable:!1,autoOpen:!1,allowMinimize:!0,closeOnEscape:!!S.options.notifyDialog.canClose,title:"&nbsp;",width:S.options.notifyDialog.width?parseInt(S.options.notifyDialog.width):null,minHeight:null,minimize:function(){S.ui.notify.trigger("minimize")}}),statusbar:e('<div class="ui-widget-header ui-helper-clearfix ui-corner-bottom elfinder-statusbar"></div>').hide().appendTo(E),toast:e('<div class="elfinder-toast"></div>').appendTo(E),bottomtray:e('<div class="elfinder-bottomtray">').appendTo(E),progressbar:e('<div class="elfinder-ui-progressbar">').appendTo(E)},S.trigger("uiready"),e.each(S.options.ui||[],function(t,i){var n="elfinder"+i,a=S.options.uiOptions[i]||{};!S.ui[i]&&e.fn[n]&&(S.ui[i]=e("<"+(a.tag||"div")+"/>").appendTo(E),S.ui[i][n](S,a))}),S.ui.progressbar.appendTo(S.ui.workzone),S.ui.notify.prev(".ui-dialog-titlebar").append('<div class="elfinder-ui-progressbar"></div>'),S.resize(ne,ae),S.options.resizable&&(E.resizable({resize:function(e,t){S.resize(t.size.width,t.size.height)},handles:"se",minWidth:300,minHeight:200}),S.UA.Touch&&E.addClass("touch-punch")),function(){var e=S.getUI("navbar"),t=S.getUI("cwd").parent();S.autoScroll={navbarUp:function(t){e.scrollTop(Math.max(0,e.scrollTop()-t))},navbarDown:function(t){e.scrollTop(e.scrollTop()+t)},cwdUp:function(e){t.scrollTop(Math.max(0,t.scrollTop()-e))},cwdDown:function(e){t.scrollTop(t.scrollTop()+e)}}}(),S.UA.Touch&&(v=S.getUI("navbar"),b=S.getUI("toolbar"),y="touchmove.stopscroll",w=function(e){var t=(e.originalEvent.touches||[{}])[0].pageY||null;(!d||t<d)&&(e.preventDefault(),m&&clearTimeout(m))},x=function(e){e.preventDefault(),m&&clearTimeout(m)},v=v.children().length?v:null,b=b.length?b:null,E.on("touchstart touchmove touchend",function(e){if("touchend"===e.type)return c=!1,d=!1,void(m=setTimeout(function(){E.off(y)},100));var t,i,n,a,o=e.originalEvent.touches||[{}],s=o[0].pageX||null,r=o[0].pageY||null,l="ltr"===S.direction;null===s||null===r||"touchstart"===e.type&&o.length>1||("touchstart"===e.type?(u=E.offset(),h=E.width(),v&&(c=!1,v.is(":hidden")?(g||(g=Math.max(50,h/10)),(l?s-u.left:h+u.left-s)<g&&(c=s)):e.originalEvent._preventSwipeX||(p=v.width(),(l?s<u.left+p:s>u.left+h-p)?(g=Math.max(50,h/10),c=s):c=!1)),b&&(d=!1,e.originalEvent._preventSwipeY||(f=b.height(),r-u.top<(b.is(":hidden")?50:f+30)&&(d=r,E.on(y,b.is(":hidden")?x:w))))):(v&&!1!==c&&(t=(l?c>s:c<s)?"navhide":"navshow",i=Math.abs(c-s),("navhide"===t&&i>.6*p||i>("navhide"===t?p/3:45)&&("navshow"===t||(l?s<u.left+20:s>u.left+h-20)))&&(S.getUI("navbar").trigger(t,{handleW:g}),c=!1)),b&&!1!==d&&(n=b.offset().top,Math.abs(d-r)>Math.min(45,f/3)&&("slideDown"==(a=d>r?"slideUp":"slideDown")||n+20>r)&&(b.is("slideDown"===a?":hidden":":visible")&&b.stop(!0,!0).trigger("toggle",{duration:100,handleH:50}),d=!1))))})),S.dragUpload&&function(){var t,i,n=function(t){return"TEXTAREA"!==t.target.nodeName&&"INPUT"!==t.target.nodeName&&0===e(t.target).closest("div.ui-dialog-content").length},a="native-drag-enter",o="native-drag-disable",s="class",r=S.res(s,"navdir"),l=(S.res(s,"droppable"),S.res(s,"adroppable"),S.res(s,"navarrow"),S.res(s,"adroppable")),c=S.getUI("workzone"),d="ltr"===S.direction,u=function(){i&&cancelAnimationFrame(i),i=null};E.on("dragenter",function(e){u(),n(e)&&(e.preventDefault(),e.stopPropagation(),t=c.data("rectangle"))}).on("dragleave",function(e){u(),n(e)&&(e.preventDefault(),e.stopPropagation())}).on("dragover",function(e){var a;n(e)?(e.preventDefault(),e.stopPropagation(),e.originalEvent.dataTransfer.dropEffect="none",i||(i=requestAnimationFrame(function(){var n,o=t.top+t.height,s=o-S.getUI("navdock").outerHeight(!0);((a=e.pageY<t.top)||e.pageY>s)&&(n=t.cwdEdge>e.pageX?(d?"navbar":"cwd")+(a?"Up":"Down"):(d?"cwd":"navbar")+(a?"Up":"Down"),a||"cwd"===n.substr(0,3)&&(o<e.pageY?s=o:n=""),n&&S.autoScroll[n](Math.pow(a?t.top-e.pageY:e.pageY-s,1.3))),i=null}))):u()}).on("drop",function(e){u(),n(e)&&(e.stopPropagation(),e.preventDefault())}),E.on("dragenter",".native-droppable",function(t){if(t.originalEvent.dataTransfer){var i,n=e(t.currentTarget),s=null;if(!(t.currentTarget.id||null)){s=S.cwd(),n.data(o,!1);try{e.each(t.originalEvent.dataTransfer.types,function(e,t){"elfinderfrom:"===t.substr(0,13)&&(i=t.substr(13).toLowerCase())})}catch(t){}}s&&(!s.write||i&&i===(window.location.href+s.hash).toLowerCase())?n.data(o,!0):(t.preventDefault(),t.stopPropagation(),n.data(a,!0),n.addClass(l))}}).on("dragleave",".native-droppable",function(t){if(t.originalEvent.dataTransfer){var i=e(t.currentTarget);t.preventDefault(),t.stopPropagation(),i.data(a)?i.data(a,!1):i.removeClass(l)}}).on("dragover",".native-droppable",function(t){if(t.originalEvent.dataTransfer){var i=e(t.currentTarget);t.preventDefault(),t.stopPropagation(),t.originalEvent.dataTransfer.dropEffect=i.data(o)?"none":"copy",i.data(a,!1)}}).on("drop",".native-droppable",function(t){if(t.originalEvent&&t.originalEvent.dataTransfer){var i,n=e(t.currentTarget);t.preventDefault(),t.stopPropagation(),n.removeClass(l),i=t.currentTarget.id?n.hasClass(r)?S.navId2Hash(t.currentTarget.id):S.cwdId2Hash(t.currentTarget.id):S.cwd().hash,t.originalEvent._target=i,S.exec("upload",{dropEvt:t.originalEvent,target:i},void 0,i)}})}(),!1===S.cssloaded&&(S.cssloaded=!0,S.trigger("cssloaded")),S.zIndexCalc(),void S.trigger("init").request({data:{cmd:"open",target:S.startDir(),init:1,tree:1},preventDone:!0,notify:{type:"open",cnt:1,hideCnt:!0},freeze:!0}).fail(function(){S.trigger("fail").disable().lastDir(""),G={},J={},e(document).add(E).off("."+F),S.trigger=function(){}}).done(function(t){var i=function(e){var t=S.file(S.trashes[e]);S.options.debug;t&&t.volumeid&&delete S.volOptions[t.volumeid].trashHash,S.trashes[e]=!1,S.debug("backend-error",'Trash hash "'+e+'" was not found or not writable.')},n={};S.options.rawStringDecoder&&S.registRawStringDecoder(S.options.rawStringDecoder),S.zIndexCalc(),S.load().debug("api",S.api),E.trigger("resize"),pe(t),S.trigger("open",t,!1),S.trigger("opendone"),ke&&S.options.enableAlways&&e(window).trigger("focus"),e.each(S.trashes,function(e){var t=S.file(e);t?"directory"===t.mime&&t.write||i(e):n[e]=!0}),Object.keys(n).length&&S.request({data:{cmd:"info",targets:Object.keys(n)},preventDefault:!0}).done(function(t){t&&t.files&&e.each(t.files,function(e,t){"directory"===t.mime&&t.write&&delete n[t.hash]})}).always(function(){e.each(n,i)}),S[S.options.enableAlways?"enable":"disable"]()})):alert(S.i18n("errURL")):alert(S.i18n("errNode")):alert(S.i18n("errJqui"))},n&&"function"==typeof n&&(S.bootCallback=n,n.call(E.get(0),S,{dfrdsBeforeBootup:I})),e.when.apply(null,I).done(function(){c()}).fail(function(e){S.error(e)})};return(void 0===(i=i||!1)||i)&&(window.elFinder=u),u.prototype={uniqueid:0,res:function(e,t){return this.resources[e]&&this.resources[e][t]},OS:-1!==navigator.userAgent.indexOf("Mac")?"mac":-1!==navigator.userAgent.indexOf("Win")?"win":"other",UA:(o=!document.unqueID&&!window.opera&&!window.sidebar&&"localStorage"in window&&"WebkitAppearance"in document.documentElement.style,s=o&&window.chrome,{ltIE6:void 0===window.addEventListener&&void 0===document.documentElement.style.maxHeight,ltIE7:void 0===window.addEventListener&&void 0===document.querySelectorAll,ltIE8:void 0===window.addEventListener&&void 0===document.getElementsByClassName,ltIE9:document.uniqueID&&document.documentMode<=9,ltIE10:document.uniqueID&&document.documentMode<=10,gtIE11:document.uniqueID&&document.documentMode>=11,IE:document.uniqueID,Firefox:window.sidebar,Opera:window.opera,Webkit:o,Chrome:s,Edge:!(!s||!window.msCredentials),Safari:o&&!window.chrome,Mobile:void 0!==window.orientation,Touch:void 0!==window.ontouchstart,iOS:navigator.platform.match(/^iP(?:[ao]d|hone)/),Mac:navigator.platform.match(/^Mac/),Fullscreen:void 0!==(document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen),Angle:0,Rotated:!1,CSS:(n=document.createElement("a").style,a=document.createElement("p").style,n.cssText="position:sticky;position:-webkit-sticky;width:-webkit-max-content;width:-moz-max-content;width:-ms-max-content;width:max-content;",{positionSticky:-1!==n.position.indexOf("sticky"),widthMaxContent:-1!==n.width.indexOf("max-content"),flex:void 0!==a.flex})}),cookieEnabled:window.navigator.cookieEnabled,hasRequire:"function"==typeof define&&define.amd,currentReqCmd:"",keyState:{},i18:{en:{translator:"",language:"English",direction:"ltr",dateFormat:"d.m.Y H:i",fancyDateFormat:"$1 H:i",nonameDateFormat:"ymd-His",messages:{}},months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["msJan","msFeb","msMar","msApr","msMay","msJun","msJul","msAug","msSep","msOct","msNov","msDec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},kinds:{unknown:"Unknown",directory:"Folder",group:"Selects",symlink:"Alias","symlink-broken":"AliasBroken","application/x-empty":"TextPlain","application/postscript":"Postscript","application/vnd.ms-office":"MsOffice","application/msword":"MsWord","application/vnd.ms-word":"MsWord","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"MsWord","application/vnd.ms-word.document.macroEnabled.12":"MsWord","application/vnd.openxmlformats-officedocument.wordprocessingml.template":"MsWord","application/vnd.ms-word.template.macroEnabled.12":"MsWord","application/vnd.ms-excel":"MsExcel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"MsExcel","application/vnd.ms-excel.sheet.macroEnabled.12":"MsExcel","application/vnd.openxmlformats-officedocument.spreadsheetml.template":"MsExcel","application/vnd.ms-excel.template.macroEnabled.12":"MsExcel","application/vnd.ms-excel.sheet.binary.macroEnabled.12":"MsExcel","application/vnd.ms-excel.addin.macroEnabled.12":"MsExcel","application/vnd.ms-powerpoint":"MsPP","application/vnd.openxmlformats-officedocument.presentationml.presentation":"MsPP","application/vnd.ms-powerpoint.presentation.macroEnabled.12":"MsPP","application/vnd.openxmlformats-officedocument.presentationml.slideshow":"MsPP","application/vnd.ms-powerpoint.slideshow.macroEnabled.12":"MsPP","application/vnd.openxmlformats-officedocument.presentationml.template":"MsPP","application/vnd.ms-powerpoint.template.macroEnabled.12":"MsPP","application/vnd.ms-powerpoint.addin.macroEnabled.12":"MsPP","application/vnd.openxmlformats-officedocument.presentationml.slide":"MsPP","application/vnd.ms-powerpoint.slide.macroEnabled.12":"MsPP","application/pdf":"PDF","application/xml":"XML","application/vnd.oasis.opendocument.text":"OO","application/vnd.oasis.opendocument.text-template":"OO","application/vnd.oasis.opendocument.text-web":"OO","application/vnd.oasis.opendocument.text-master":"OO","application/vnd.oasis.opendocument.graphics":"OO","application/vnd.oasis.opendocument.graphics-template":"OO","application/vnd.oasis.opendocument.presentation":"OO","application/vnd.oasis.opendocument.presentation-template":"OO","application/vnd.oasis.opendocument.spreadsheet":"OO","application/vnd.oasis.opendocument.spreadsheet-template":"OO","application/vnd.oasis.opendocument.chart":"OO","application/vnd.oasis.opendocument.formula":"OO","application/vnd.oasis.opendocument.database":"OO","application/vnd.oasis.opendocument.image":"OO","application/vnd.openofficeorg.extension":"OO","application/x-shockwave-flash":"AppFlash","application/flash-video":"Flash video","application/x-bittorrent":"Torrent","application/javascript":"JS","application/rtf":"RTF","application/rtfd":"RTF","application/x-font-ttf":"TTF","application/x-font-otf":"OTF","application/x-rpm":"RPM","application/x-web-config":"TextPlain","application/xhtml+xml":"HTML","application/docbook+xml":"DOCBOOK","application/x-awk":"AWK","application/x-gzip":"GZIP","application/x-bzip2":"BZIP","application/x-xz":"XZ","application/zip":"ZIP","application/x-zip":"ZIP","application/x-rar":"RAR","application/x-tar":"TAR","application/x-7z-compressed":"7z","application/x-jar":"JAR","text/plain":"TextPlain","text/x-php":"PHP","text/html":"HTML","text/javascript":"JS","text/css":"CSS","text/rtf":"RTF","text/rtfd":"RTF","text/x-c":"C","text/x-csrc":"C","text/x-chdr":"CHeader","text/x-c++":"CPP","text/x-c++src":"CPP","text/x-c++hdr":"CPPHeader","text/x-shellscript":"Shell","application/x-csh":"Shell","text/x-python":"Python","text/x-java":"Java","text/x-java-source":"Java","text/x-ruby":"Ruby","text/x-perl":"Perl","text/x-sql":"SQL","text/xml":"XML","text/x-comma-separated-values":"CSV","text/x-markdown":"Markdown","image/x-ms-bmp":"BMP","image/jpeg":"JPEG","image/gif":"GIF","image/png":"PNG","image/tiff":"TIFF","image/x-targa":"TGA","image/vnd.adobe.photoshop":"PSD","image/xbm":"XBITMAP","image/pxm":"PXM","audio/mpeg":"AudioMPEG","audio/midi":"AudioMIDI","audio/ogg":"AudioOGG","audio/mp4":"AudioMPEG4","audio/x-m4a":"AudioMPEG4","audio/wav":"AudioWAV","audio/x-mp3-playlist":"AudioPlaylist","video/x-dv":"VideoDV","video/mp4":"VideoMPEG4","video/mpeg":"VideoMPEG","video/x-msvideo":"VideoAVI","video/quicktime":"VideoMOV","video/x-ms-wmv":"VideoWM","video/x-flv":"VideoFlash","video/x-matroska":"VideoMKV","video/ogg":"VideoOGG"},mimeTypes:{},rules:{defaults:function(e){return!(!e||e.added&&!Array.isArray(e.added)||e.removed&&!Array.isArray(e.removed)||e.changed&&!Array.isArray(e.changed))},open:function(t){return t&&t.cwd&&t.files&&e.isPlainObject(t.cwd)&&Array.isArray(t.files)},tree:function(e){return e&&e.tree&&Array.isArray(e.tree)},parents:function(e){return e&&e.tree&&Array.isArray(e.tree)},tmb:function(t){return t&&t.images&&(e.isPlainObject(t.images)||Array.isArray(t.images))},upload:function(t){return t&&(e.isPlainObject(t.added)||Array.isArray(t.added))},search:function(e){return e&&e.files&&Array.isArray(e.files)}},commands:{},cmdsToAdd:"archive duplicate extract mkdir mkfile paste rm upload",parseUploadData:function(t){var i,n=this;if(!e.trim(t))return{error:["errResponse","errDataEmpty"]};try{i=JSON.parse(t)}catch(e){return{error:["errResponse","errDataNotJSON"]}}return i=n.normalize(i),n.validResponse("upload",i)?(i.removed=e.merge(i.removed||[],e.map(i.added||[],function(e){return n.file(e.hash)?e.hash:null})),i):{error:i.norError||["errResponse"]}},iframeCnt:0,uploads:{xhrUploading:!1,failSyncTm:null,chunkfailReq:{},checkExists:function(t,i,n,a){var o,s,r,l,c,d=e.Deferred(),u=[],h={},p=function(){for(var e=t.length;--e>-1;)t[e]._remove=!0},f=function(){d.resolve(u,h)};return n.api>=2.1&&"object"==typeof t[0]?(s=[],r=[],l=i!==n.cwd().hash?n.path(i,!0)+n.option("separator",i):"",c=function(e){var i=e==r.length-1,o={cssClass:"elfinder-confirm-upload",title:n.i18n("cmdupload"),text:["errExists",l+r[e].name,"confirmRepl"],all:!i,accept:{label:"btnYes",callback:function(t){i||t?f():c(++e)}},reject:{label:"btnNo",callback:function(n){var a;if(n)for(a=r.length;e<a--;)t[r[a].i]._remove=!0;else t[r[e].i]._remove=!0;i||n?f():c(++e)}},cancel:{label:"btnCancel",callback:function(){p(),f()}},buttons:[{label:"btnBackup",cssClass:"elfinder-confirm-btn-backup",callback:function(t){var n;if(t)for(n=r.length;e<n--;)u.push(r[n].name);else u.push(r[e].name);i||t?f():c(++e)}}]};a||o.buttons.push({label:"btnRename"+(i?"":"All"),cssClass:"elfinder-confirm-btn-rename",callback:function(){u=null,f()}}),n.iframeCnt>0&&delete o.reject,n.confirm(o)},n.file(i).read?(o=e.map(t,function(e,t){return!e.name||n.UA.iOS&&"image.jpg"===e.name?null:{i:t,name:e.name}}),n.request({data:{cmd:"ls",target:i,intersect:e.map(o,function(e){return e.name})},notify:{type:"preupload",cnt:1,hideCnt:!0},preventDefault:!0}).done(function(t){var a,l;t&&(t.error?p():n.options.overwriteUploadConfirm&&n.option("uploadOverwrite",i)&&t.list&&(Array.isArray(t.list)?s=t.list||[]:(a=[],s=e.map(t.list,function(e){return"string"==typeof e?e:(a=a.concat(e),!1)}),a.length&&(s=s.concat(a)),h=t.list),(r=e.grep(o,function(t){return-1!==e.inArray(t.name,s)})).length&&s.length&&i==n.cwd().hash&&(l=e.map(n.files(i),function(e){return e.name}),e.grep(s,function(t){return-1===e.inArray(t,l)}).length&&n.sync()))),r.length>0?c(0):f()}).fail(function(e){p(),f(),e&&n.error(e)})):f()):f(),d},checkFile:function(t,i,n){if(t.checked||"files"==t.type)return t.files;if("data"==t.type){var a,o,s=e.Deferred(),r=e.Deferred(),l=[],c=[],d=0,u=[],h=!1,p=function(e){var t,n=i.options.folderUploadExclude[i.OS]||null,a=e.length,o=function(){--d<1&&"pending"===r.state()&&r.resolve()},s=function(e){n&&e.name.match(n)||(c.push(t.fullPath||""),l.push(e)),o()},f=function(e){var t=[],i=function(){e.readEntries(function(e){if(h||!e.length){for(var n=0;n<t.length;n++){if(h){r.reject();break}p([t[n]])}o()}else t=t.concat((a=e,Array.prototype.slice.call(a||[],0))),i();var a},o)};i()};d++;for(var m=0;m<a;m++){if(h){r.reject();break}(t=e[m])&&(t.isFile?(d++,t.file(s,o)):t.isDirectory&&i.api>=2.1&&(d++,u.push(t.fullPath),f(t.createReader())))}return o(),r};return a=e.map(t.files.items,function(e){return e.getAsEntry?e.getAsEntry():e.webkitGetAsEntry()}),e.each(a,function(e,t){if(t.isDirectory)return o=!0,!1}),a.length>0?(i.uploads.checkExists(a,n,i,o).done(function(o,r){var d=[];i.options.overwriteUploadConfirm&&i.option("uploadOverwrite",n)&&(null===o&&(t.overwrite=0,o=[]),a=e.grep(a,function(t){var a,s,l,c;return t.isDirectory&&o.length&&-1!==(a=e.inArray(t.name,o))&&(o.splice(a,1),s=i.uniqueName(t.name+i.options.backupSuffix,null,""),e.each(r,function(e,i){if(t.name==i)return l=e,!1}),l||(l=i.fileByName(t.name,n).hash),i.lockfiles({files:[l]}),c=i.request({data:{cmd:"rename",target:l,name:s},notify:{type:"rename",cnt:1}}).fail(function(){t._remove=!0,i.sync()}).always(function(){i.unlockfiles({files:[l]})}),d.push(c)),!t._remove})),e.when.apply(e,d).done(function(){var e,t,n=+new Date;a.length>0?(t=i.escape(a[0].name),a.length>1&&(t+=" ... "+a.length+i.i18n("items")),e=setTimeout(function(){i.notify({type:"readdir",id:n,cnt:1,hideCnt:!0,msg:i.i18n("ntfreaddir")+" ("+t+")",cancel:function(){h=!0}})},i.options.notifyDelay),p(a).done(function(){e&&clearTimeout(e),i.notify({type:"readdir",id:n,cnt:-1}),h?s.reject():s.resolve([l,c,o,r,u])}).fail(function(){s.reject()})):s.reject()})}),s.promise()):s.reject()}var f=[],m=[],g=t.files[0];if("html"==t.type){var v,b=e("<html></html>").append(e.parseHTML(g.replace(/ src=/gi," _elfsrc=")));e("img[_elfsrc]",b).each(function(){var i,n,a=e(this),o=a.closest("a");o&&o.attr("href")&&o.attr("href").match(/\.(?:jpe?g|gif|bmp|png)/i)&&(n=o.attr("href")),(i=a.attr("_elfsrc"))&&(n?(-1==e.inArray(n,f)&&f.push(n),-1==e.inArray(i,m)&&m.push(i)):-1==e.inArray(i,f)&&f.push(i)),1===f.length&&f[0].match(/^data:image\/png/)&&(t.clipdata=!0)}),(v=e("a[href]",b)).each(function(){var t,i;(t=e(this).text())&&(i=function(e){var t=document.createElement("a");return t.href=e,t}(e(this).attr("href")),i.href&&i.href.match(/^(?:ht|f)tp/i)&&(1===v.length||!i.pathname.match(/(?:\.html?|\/[^\/.]*)$/i)||e.trim(t).match(/\.[a-z0-9-]{1,10}$/i))&&-1==e.inArray(i.href,f)&&-1==e.inArray(i.href,m)&&f.push(i.href))})}else{var y,w,x;for(y=/((?:ht|f)tps?:\/\/[-_.!~*\'()a-z0-9;/?:\@&=+\$,%#\*\[\]]+)/gi;w=y.exec(g);)x=w[1].replace(/&amp;/g,"&"),-1==e.inArray(x,f)&&f.push(x)}return f},xhr:function(t,i){var n=i||this,a=n.getUI(),o=new XMLHttpRequest,s=null,r=null,l=null,c=t.checked,d=t.isDataType||"data"==t.type,u=t.target||n.cwd().hash,h=t.dropEvt||null,p=t.extraData||null,f=-1!=n.option("uploadMaxConn",u),m=Math.min(5,Math.max(1,n.option("uploadMaxConn",u))),g=0,v=function(t){var i=e.Deferred();return t.promise?t.always(function(e){i.resolve(Array.isArray(e)&&e.length?d?e[0][0]:e[0]:{})}):i.resolve(t.length?d?t[0][0]:t[0]:{}),i},b=e.Deferred().fail(function(e){var t,a=n.parseError(e);"userabort"===a&&(t=!0,a=void 0),w&&(n.uploads.xhrUploading||t)?v(w).done(function(e){t||F(a,e),e._cid?n.uploads.chunkfailReq[e._cid]||(n.uploads.chunkfailReq[e._cid]=!0,setTimeout(function(){i.request({data:{cmd:"upload",target:u,chunk:e._chunk,cid:e._cid,upload:["chunkfail"],mimes:"chunkfail"},options:{type:"post",url:n.uploadURL},preventDefault:!0}).always(function(){delete n.uploads.chunkfailReq[e._chunk]})},1e3)):(n.uploads.failSyncTm&&clearTimeout(n.uploads.failSyncTm),n.uploads.failSyncTm=setTimeout(function(){n.sync(u)},1e3))}):F(a),!t&&n.sync(),n.uploads.xhrUploading=!1,w=null}).done(function(t){n.uploads.xhrUploading=!1,w=null,t&&(n.currentReqCmd="upload",t.warning&&F(t.warning),n.updateCache(t),t.removed&&t.removed.length&&n.remove(t),t.added&&t.added.length&&n.add(t),t.changed&&t.changed.length&&n.change(t),n.trigger("upload",t,!1),n.trigger("uploaddone"),t.toasts&&Array.isArray(t.toasts)&&e.each(t.toasts,function(){this.msg&&n.toast(this)}),t.sync&&n.sync(),t.debug&&(n.responseDebug(t),i.debug("backend-debug",t)))}).always(function(){n.abortXHR(o),a.off("uploadabort",E),e(window).off("unload",E),s&&clearTimeout(s),r&&clearTimeout(r),l&&clearTimeout(l),c&&!t.multiupload&&M()&&n.notify({type:"upload",cnt:-x,progress:0,size:0}),r&&S&&n.notify({type:"chunkmerge",cnt:-x}),q&&z.children(".elfinder-notify-chunkmerge").length&&n.notify({type:"chunkmerge",cnt:-1})}),y=new FormData,w=t.input?t.input.files:n.uploads.checkFile(t,n,u),x=t.checked&&d?w[0].length:w.length,k=!1,C=0,_=0,T=0,D=!1,z=n.ui.notify,A=!0,S=!1,I=!1,M=function(){return!D&&(L=z.children(".elfinder-notify-upload")).length&&(D=!0),D},E=function(e,t){I=!0,n.abortXHR(o,{quiet:!0,abort:!0}),b.reject(t),M()&&n.notify({type:"upload",cnt:-1*L.data("cnt"),progress:0,size:0})},O=function(e,t){L.children(".elfinder-notify-cancel")[e?"show":"hide"](),A=e},j=function(e){return e||(e=T),setTimeout(function(){D=!0,n.notify({type:"upload",cnt:x,progress:C-_,size:e,cancel:function(){a.trigger("uploadabort","userabort")}}),L=z.children(".elfinder-notify-upload"),_=C,t.multiupload?A&&O(!0):O(A&&C<e)},n.options.notifyDelay)},P=function(){D&&b.notifyWith(L,[{cnt:L.data("cnt"),progress:L.data("progress"),total:L.data("total")}])},F=function(e,t,i){e&&n.trigger("xhruploadfail",{error:e,file:t}),i?e&&(N<n.options.maxErrorDialogs&&(Array.isArray(e)?H=H.concat(e):H.push(e)),N++):e?n.error(e):(H.length&&(N>=n.options.maxErrorDialogs&&(H=H.concat("moreErrors",N-n.options.maxErrorDialogs)),n.error(H)),H=[],N=0)},H=[],N=0,U=t.renames||null,R=t.hashes||null,q=!1,L=e();if(a.one("uploadabort",E),e(window).one("unload."+i.namespace,E),!q&&(_=C),!d&&!x)return b.reject(["errUploadNoFiles"]);o.addEventListener("error",function(){0==o.status?I?b.reject():!d&&t.files&&e.grep(t.files,function(e){return!e.type&&e.size===(n.UA.Safari?1802:0)}).length?b.reject(["errAbort","errFolderUpload"]):t.input&&e.grep(t.input.files,function(e){return!e.type&&e.size===(n.UA.Safari?1802:0)}).length?b.reject(["errUploadNoFiles"]):g++<=30?(M()&&_&&n.notify({type:"upload",cnt:0,progress:0,size:_}),n.abortXHR(o,{quiet:!0}),_=C=0,setTimeout(function(){var e;I||(o.open("POST",n.uploadURL,!0),n.api>=2.1029&&(e=(+new Date).toString(16)+Math.floor(1e3*Math.random()).toString(16),"function"==typeof y.delete&&y.delete("reqid"),y.append("reqid",e),o._requestId=e),o.send(y))},1e4)):a.trigger("uploadabort",["errAbort","errTimeout"]):a.trigger("uploadabort","errConnect")},!1),o.addEventListener("load",function(e){var i,r,c=o.status,u=0,h="";if(n.setCustomHeaderByXhr(o),c>=400?h=c>500?"errResponse":["errResponse","errServerError"]:o.responseText||(h=["errResponse","errDataEmpty"]),h&&(a.trigger("uploadabort"),v(w||{}).done(function(e){return b.reject(e._cid?null:h)})),C=T,M()&&(u=C-_)&&(n.notify({type:"upload",cnt:0,progress:u,size:0}),P()),(i=n.parseUploadData(o.responseText))._chunkmerged){y=new FormData;var p=[{_chunkmerged:i._chunkmerged,_name:i._name,_mtime:i._mtime}];return q=!0,a.off("uploadabort",E),l=setTimeout(function(){n.notify({type:"chunkmerge",cnt:1})},n.options.notifyDelay),void(d?$(p,w[1]):$(p))}i._multiupload=!!t.multiupload,i.error?(r={cmd:"upload",err:i,xhr:o,rc:o.status},n.trigger("uploadfail",i),n.trigger("requestError",r),r._getEvent&&r._getEvent().isDefaultPrevented()&&(i.error=""),i._chunkfailure||i._multiupload?(I=!0,n.uploads.xhrUploading=!1,s&&clearTimeout(s),L.length?(n.notify({type:"upload",cnt:-x,progress:0,size:0}),b.reject(i)):b.reject()):b.reject(i)):b.resolve(i)},!1),o.upload.addEventListener("loadstart",function(e){!q&&e.lengthComputable&&(C=e.loaded,g&&(C=0),T=e.total,C||(C=parseInt(.05*T)),M()&&(n.notify({type:"upload",cnt:0,progress:C-_,size:t.multiupload?0:T}),_=C,P()))},!1),o.upload.addEventListener("progress",function(e){var i;e.lengthComputable&&!q&&o.readyState<2&&(C=e.loaded,!t.checked&&C>0&&!s&&(s=j(o._totalSize-C)),T||(T=e.total,C||(C=parseInt(.05*T))),i=C-_,M()&&i/e.total>=.05&&(n.notify({type:"upload",cnt:0,progress:i,size:0}),_=C,P()),!S&&C>=T&&!k&&(S=!0,r=setTimeout(function(){n.notify({type:"chunkmerge",cnt:x})},n.options.notifyDelay)),A&&!t.multiupload&&C>=T&&M()&&O(!1))},!1);var W,B,$=function(a,r){var l,g,v,w,C,_,T,D,z,S,E,P,N,q,L,W=0,B=1,$=[],Y=0,K=x,V=0,X=[],G=(new Date).getTime().toString().substr(-9),J=Math.min((i.uplMaxSize?i.uplMaxSize:2097152)-8190,i.options.uploadMaxChunkSize),Q=!f&&"",Z=function(a,o){var r,l,c,p=[],f=0;if(!I){for(;a.length&&p.length<o;)p.push(a.shift());if(f=p.length){l=f;for(var m=0;m<f&&!I;m++)r=d?p[m][0][0]._cid||null:p[m][0]._cid||null,c=!(!c&&!r),q[r]?N--:i.exec("upload",{type:t.type,isDataType:d,files:p[m],checked:!0,target:u,dropEvt:h,renames:U,hashes:R,multiupload:!0,overwrite:0===t.overwrite?0:void 0,clipdata:t.clipdata},void 0,u).fail(function(e){e&&"No such command"===e&&(I=!0,i.error(["errUpload","errPerm"])),r&&(q[r]=!0)}).always(function(t){t&&t.added&&(E=e.merge(E,t.added)),N<=++P&&(i.trigger("multiupload",{added:E}),s&&clearTimeout(s),M()&&n.notify({type:"upload",cnt:-x,progress:0,size:0})),a.length?Z(a,1):(--l<=1&&A&&O(!1),b.resolve())})}}(p.length<1||I)&&(I?(s&&clearTimeout(s),r&&(q[r]=!0),b.reject()):(b.resolve(),n.uploads.xhrUploading=!1))},ee=function(){n.uploads.xhrUploading?setTimeout(ee,100):(n.uploads.xhrUploading=!0,Z($,m))};if(!c&&(d||"files"==t.type)){for((l=i.option("uploadMaxSize",u))||(l=0),C=0;C<a.length;C++){try{g=(z=a[C]).size,!1===Q&&(Q="",n.api>=2.1&&("slice"in z?Q="slice":"mozSlice"in z?Q="mozSlice":"webkitSlice"in z&&(Q="webkitSlice")))}catch(e){x--,K--;continue}if(l&&g>l||!Q&&i.uplMaxSize&&g>i.uplMaxSize)F(["errUploadFile",z.name,"errUploadFileSize"],z,!0),x--,K--;else if(!z.type||n.uploadMimeCheck(z.type,u))if(Q&&g>J){for(_=0,T=J,D=-1,K=Math.floor((g-1)/J),v=z.lastModified?Math.round(z.lastModified/1e3):0,w=t.clipdata?i.date(i.nonameDateFormat)+".png":z.name,V+=g,X[G]=0;_<g;)(S=z[Q](_,T))._chunk=w+"."+ ++D+"_"+K+".part",S._cid=G,S._range=_+","+S.size+","+g,S._mtime=v,X[G]++,W&&Y++,void 0===$[Y]&&($[Y]=[],d&&($[Y][0]=[],$[Y][1]=[])),W=J,B=1,d?($[Y][0].push(S),$[Y][1].push(r[C])):$[Y].push(S),T=(_=T)+J;null==S?(F(["errUploadFile",z.name,"errUploadFileSize"],z,!0),x--,K--):(K+=D,W=0,B=1,Y++)}else(i.uplMaxSize&&W+g>i.uplMaxSize||B>i.uplMaxFile)&&(W=0,B=1,Y++),void 0===$[Y]&&($[Y]=[],d&&($[Y][0]=[],$[Y][1]=[])),d?($[Y][0].push(z),$[Y][1].push(r[C])):$[Y].push(z),W+=g,V+=g,B++;else F(["errUploadFile",z.name,"errUploadMime","("+z.type+")"],z,!0),x--,K--}if(H.length&&F(),0==$.length)return t.checked=!0,!1;if($.length>1)return s=j(V),E=[],P=0,N=$.length,q=[],ee(),!0;d?(a=$[0][0],r=$[0][1]):a=$[0]}return c||(i.UA.Safari&&t.files?o._totalSize=V:s=j(V)),c=!0,a.length||b.reject(["errUploadNoFiles"]),o.open("POST",n.uploadURL,!0),i.customHeaders&&e.each(i.customHeaders,function(e){o.setRequestHeader(e,this)}),i.xhrFields&&e.each(i.xhrFields,function(e){e in o&&(o[e]=this)}),n.api>=2.1029&&(L=(+new Date).toString(16)+Math.floor(1e3*Math.random()).toString(16),y.append("reqid",L),o._requestId=L),y.append("cmd","upload"),y.append(n.newAPI?"target":"current",u),U&&U.length&&(e.each(U,function(e,t){y.append("renames[]",t)}),y.append("suffix",i.options.backupSuffix)),R&&e.each(R,function(e,t){y.append("hashes["+e+"]",t)}),e.each(n.customData,function(e,t){y.append(e,t)}),e.each(n.options.onlyMimes,function(e,t){y.append("mimes[]",t)}),e.each(a,function(e,n){var a;n._chunkmerged?(y.append("chunk",n._chunkmerged),y.append("upload[]",n._name),y.append("mtime[]",n._mtime),t.clipdata&&y.append("overwrite",0),k=!0):(n._chunkfail?(y.append("upload[]","chunkfail"),y.append("mimes","chunkfail")):(t.clipdata?n._chunk||(t.overwrite=0,a=i.date(i.nonameDateFormat)+".png"):n.name&&(a=n.name,i.UA.iOS&&(a.match(/^image\.jpe?g$/i)?(t.overwrite=0,a=i.date(i.nonameDateFormat)+".jpg"):a.match(/^capturedvideo\.mov$/i)&&(t.overwrite=0,a=i.date(i.nonameDateFormat)+".mov")),a=(n.webkitRelativePath||n.relativePath||n._relativePath||"").replace(/[^\/]+$/,"")+a),a?y.append("upload[]",n,a):y.append("upload[]",n)),n._chunk?(y.append("chunk",n._chunk),y.append("cid",n._cid),y.append("range",n._range),y.append("mtime[]",n._mtime),k=!0):y.append("mtime[]",n.lastModified?Math.round(n.lastModified/1e3):0))}),d&&e.each(r,function(e,t){y.append("upload_path[]",t)}),0===t.overwrite&&y.append("overwrite",0),h&&y.append("dropWith",parseInt((h.altKey?"1":"0")+(h.ctrlKey?"1":"0")+(h.metaKey?"1":"0")+(h.shiftKey?"1":"0"),2)),p&&e.each(p,function(e,t){y.append(e,t)}),o.send(y),!0};if(d)c?$(w[0],w[1]):w.done(function(t){if(U=[],x=t[0].length){if(t[4]&&t[4].length)return void i.request({data:{cmd:"mkdir",target:u,dirs:t[4]},notify:{type:"mkdir",cnt:t[4].length},preventFail:!0}).fail(function(e){"errCmdParams"===(e=e||["errUnknown"])[0]?m=1:(m=0,b.reject(e))}).done(function(i){var n=!1;i.hashes||(i.hashes={}),t[1]=e.map(t[1],function(e,a){return t[0][a]._relativePath=e.replace(/^\//,""),""===(e=e.replace(/\/[^\/]*$/,""))?u:i.hashes[e]?i.hashes[e]:(n=!0,t[0][a]._remove=!0,null)}),n&&(t[0]=e.grep(t[0],function(e){return!e._remove}))}).always(function(e){m&&(U=t[2],R=t[3],$(t[0],t[1]))});t[1]=e.map(t[1],function(){return u}),U=t[2],R=t[3],$(t[0],t[1])}else b.reject(["errUploadNoFiles"])}).fail(function(){b.reject()});else if(w.length>0)if(t.clipdata||null!=U)$(w)||b.reject();else{var Y=[],K=[],V=i.options.folderUploadExclude[i.OS]||null;e.each(w,function(t,i){var n,a,o=i.webkitRelativePath||i.relativePath||"";if(!o)return!1;V&&i.name.match(V)?(i._remove=!0,o=void 0):(o="/"+o.replace(/\/[^\/]*$/,"").replace(/^\//,""))&&-1===e.inArray(o,Y)&&(Y.push(o),-1!==(n=o.substr(1).indexOf("/"))&&(a=o.substr(0,n+1))&&-1===e.inArray(a,Y)&&Y.unshift(a)),K.push(o)}),U=[],R={},Y.length?(W=e.map(Y,function(e){return-1===e.substr(1).indexOf("/")?{name:e.substr(1)}:null}),B=[],i.uploads.checkExists(W,u,i,!0).done(function(t,n){var a,o,s=[];i.options.overwriteUploadConfirm&&i.option("uploadOverwrite",u)&&(B=e.map(W,function(e){return e._remove?e.name:null}),W=e.grep(W,function(e){return!e._remove})),B.length&&e.each(K.concat(),function(t,i){0===e.inArray(i,B)&&(w[t]._remove=!0,K[t]=void 0)}),w=e.grep(w,function(e){return!e._remove}),K=e.grep(K,function(e){return void 0!==e}),W.length?(e.Deferred(),t.length?e.each(t,function(r,l){a=i.uniqueName(l+i.options.backupSuffix,null,""),e.each(n,function(e,i){if(t[0]==i)return o=e,!1}),o||(o=i.fileByName(t[0],u).hash),i.lockfiles({files:[o]}),s.push(i.request({data:{cmd:"rename",target:o,name:a},notify:{type:"rename",cnt:1}}).fail(function(e){b.reject(e),i.sync()}).always(function(){i.unlockfiles({files:[o]})}))}):s.push(null),e.when.apply(e,s).done(function(){i.request({data:{cmd:"mkdir",target:u,dirs:Y},notify:{type:"mkdir",cnt:Y.length},preventFail:!0}).fail(function(e){"errCmdParams"===(e=e||["errUnknown"])[0]?m=1:(m=0,b.reject(e))}).done(function(t){var i=!1;t.hashes||(t.hashes={}),K=e.map(K.concat(),function(e,n){return"/"===e?u:t.hashes[e]?t.hashes[e]:(i=!0,w[n]._remove=!0,null)}),i&&(w=e.grep(w,function(e){return!e._remove}))}).always(function(e){m&&(d=!0,$(w,K)||b.reject())})})):b.reject()})):i.uploads.checkExists(w,u,i).done(function(n,a){i.options.overwriteUploadConfirm&&i.option("uploadOverwrite",u)&&(R=a,null===n?t.overwrite=0:U=n,w=e.grep(w,function(e){return!e._remove})),(x=w.length)>0&&$(w)||b.reject()})}else b.reject();return b},iframe:function(t,i){var n,a,o,s,r=i||this,l=!!t.input&&t.input,c=!l&&r.uploads.checkFile(t,r),d=e.Deferred().fail(function(e){e&&r.error(e)}),u="iframe-"+i.namespace+ ++r.iframeCnt,h=e('<form action="'+r.uploadURL+'" method="post" enctype="multipart/form-data" encoding="multipart/form-data" target="'+u+'" style="display:none"><input type="hidden" name="cmd" value="upload" /></form>'),p=this.UA.IE,f=function(){s&&clearTimeout(s),o&&clearTimeout(o),a&&r.notify({type:"upload",cnt:-n}),setTimeout(function(){p&&e('<iframe src="javascript:false;"></iframe>').appendTo(h),h.remove(),m.remove()},100)},m=e('<iframe src="'+(p?"javascript:false;":"about:blank")+'" name="'+u+'" style="position:absolute;left:-1000px;top:-1000px" ></iframe>').on("load",function(){m.off("load").on("load",function(){f(),d.resolve()}),o=setTimeout(function(){a=!0,r.notify({type:"upload",cnt:n})},r.options.notifyDelay),r.options.iframeTimeout>0&&(s=setTimeout(function(){f(),d.reject(["errConnect","errTimeout"])},r.options.iframeTimeout)),h.submit()}),g=t.target||r.cwd().hash,v=[],b=[],y=[],w={};if(c&&c.length)e.each(c,function(e,t){h.append('<input type="hidden" name="upload[]" value="'+t+'"/>')}),n=1;else{if(!(l&&e(l).is(":file")&&e(l).val()))return d.reject();i.options.overwriteUploadConfirm&&i.option("uploadOverwrite",g)&&(v=l.files?l.files:[{name:e(l).val().replace(/^(?:.+[\\\/])?([^\\\/]+)$/,"$1")}],b.push(r.uploads.checkExists(v,g,r).done(function(i,a){w=a,null===i?t.overwrite=0:(y=i,(n=e.grep(v,function(e){return!e._remove}).length)!=v.length&&(n=0))}))),n=l.files?l.files.length:1,h.append(l)}return e.when.apply(e,b).done(function(){if(n<1)return d.reject();h.append('<input type="hidden" name="'+(r.newAPI?"target":"current")+'" value="'+g+'"/>').append('<input type="hidden" name="html" value="1"/>').append('<input type="hidden" name="node" value="'+r.id+'"/>').append(e(l).attr("name","upload[]")),y.length>0&&(e.each(y,function(e,t){h.append('<input type="hidden" name="renames[]" value="'+r.escape(t)+'"/>')}),h.append('<input type="hidden" name="suffix" value="'+i.options.backupSuffix+'"/>')),w&&e.each(y,function(e,t){h.append('<input type="hidden" name="['+e+']" value="'+r.escape(t)+'"/>')}),0===t.overwrite&&h.append('<input type="hidden" name="overwrite" value="0"/>'),e.each(r.options.onlyMimes||[],function(e,t){h.append('<input type="hidden" name="mimes[]" value="'+r.escape(t)+'"/>')}),e.each(r.customData,function(e,t){h.append('<input type="hidden" name="'+e+'" value="'+r.escape(t)+'"/>')}),h.appendTo("body"),m.appendTo("body")}),d}},one:function(e,t,i){var n=this,a=e.toLowerCase(),o=function(e,i){return n.toUnbindEvents[a]||(n.toUnbindEvents[a]=[]),n.toUnbindEvents[a].push({type:a,callback:o}),(t.done?t.done:t).apply(this,arguments)};return t.done&&(o={done:o}),this.bind(a,o,i)},localStorage:function(t,i){var n,a,o,s,r,l=window.localStorage,c="elfinder-"+(t||"")+this.id,d=window.location.pathname+"-elfinder-",u=this.id,h=[];if(void 0===t)return s=d.length,r=-1*u.length,e.each(l,function(e){e.substr(0,s)===d&&e.substr(r)===u&&h.push(e)}),e.each(h,function(e,t){l.removeItem(t)}),!0;if(t=d+t+u,null===i)return l.removeItem(t);if(void 0===i&&!(n=l.getItem(t))&&(a=l.getItem(c))&&(i=a,l.removeItem(c)),void 0!==i){"string"!==(o=typeof i)&&"number"!==o&&(i=JSON.stringify(i));try{l.setItem(t,i)}catch(e){try{l.clear(),l.setItem(t,i)}catch(e){this.debug("error",e.toString())}}n=l.getItem(t)}if(n&&("{"===n.substr(0,1)||"["===n.substr(0,1)))try{return JSON.parse(n)}catch(e){}return n},sessionStorage:function(e,t){var i,n,a;try{i=window.sessionStorage}catch(e){}if(i){if(null===t)return i.removeItem(e);if(void 0!==t){"string"!==(a=typeof t)&&"number"!==a&&(t=JSON.stringify(t));try{i.setItem(e,t)}catch(n){try{i.clear(),i.setItem(e,t)}catch(e){this.debug("error",e.toString())}}}if((n=i.getItem(e))&&("{"===n.substr(0,1)||"["===n.substr(0,1)))try{return JSON.parse(n)}catch(e){}return n}},cookie:function(t,i){var n,a,o,s,r,l;if(t="elfinder-"+t+this.id,void 0===i){if(this.cookieEnabled&&document.cookie&&""!=document.cookie)for(o=document.cookie.split(";"),t+="=",s=0;s<o.length;s++)if(o[s]=e.trim(o[s]),o[s].substring(0,t.length)==t){if("{"===(r=decodeURIComponent(o[s].substring(t.length))).substr(0,1)||"["===r.substr(0,1))try{return JSON.parse(r)}catch(e){}return r}return null}if(!this.cookieEnabled)return"";if(a=Object.assign({},this.options.cookie),null===i?(i="",a.expires=-1):"string"!==(l=typeof i)&&"number"!==l&&(i=JSON.stringify(i)),"number"==typeof a.expires&&((n=new Date).setTime(n.getTime()+864e5*a.expires),a.expires=n),document.cookie=t+"="+encodeURIComponent(i)+"; expires="+a.expires.toUTCString()+(a.path?"; path="+a.path:"")+(a.domain?"; domain="+a.domain:"")+(a.secure?"; secure":"")+(a.samesite?"; samesite="+a.samesite:""),i&&("{"===i.substr(0,1)||"["===i.substr(0,1)))try{return JSON.parse(i)}catch(e){}return i},startDir:function(){var e=window.location.hash;return e&&e.match(/^#elf_/)?e.replace(/^#elf_/,""):this.options.startPathHash?this.options.startPathHash:this.lastDir()},lastDir:function(e){return this.options.rememberLastDir?this.storage("lastdir",e):""},_node:e("<span></c.length;>"),escape:function(e){return this._node.text(e).html().replace(/"/g,"&quot;").replace(/'/g,"&#039;")},normalize:function(t){var i,n,a,o,s,r,l,c=this,d=function(){var e,t;return(t=c.options.fileFilter)&&("function"==typeof t?e=function(e){return t.call(c,e)}:t instanceof RegExp&&(e=function(e){return t.test(e.name)})),e||null}(),u=function(t){var i=function(e){var t=typeof e;return"object"===t&&Array.isArray(e)&&(t="array"),t};return e.each(c.optionProperties,function(e,n){void 0!==n&&t[e]&&i(t[e])!==i(n)&&(t[e]=n)}),t.disabled?(t.disabledFlip=c.arrayFlip(t.disabled,!0),e.each(c.options.disabledCmdsRels,function(i,n){var a,o;(t.disabledFlip[i]||(a=i.match(/^([^&]+)&([^=]+)=(.*)$/))&&t.disabledFlip[a[1]]&&t[a[2]]==a[3])&&(o=!0),o&&e.each(n,function(e,i){t.disabledFlip[i]||(t.disabledFlip[i]=!0,t.disabled.push(i))})})):t.disabledFlip={},t},h=function(t,s,r){var l,h,p,m,g,v,b=!s||t,y=!!s&&null;if(t&&t.hash&&t.name&&t.mime){if("application/x-empty"===t.mime&&(t.mime="text/plain"),(p=c.isRoot(t))&&!t.volumeid&&c.debug("warning","The volume root statuses requires `volumeid` property."),p||"directory"===t.mime){if(t.phash){if(t.phash===t.hash)return f=f.concat(['Parent folder of "$1" is itself.',t.name]),y;if(p&&t.volumeid&&0===t.phash.indexOf(t.volumeid))return f=f.concat(['Parent folder of "$1" is inner itself.',t.name]),y}t.volumeid&&(l=t.volumeid,p&&(t.phash&&(c.leafRoots[t.phash]?-1===e.inArray(t.hash,c.leafRoots[t.phash])&&c.leafRoots[t.phash].push(t.hash):c.leafRoots[t.phash]=[t.hash]),c.hasVolOptions=!0,c.volOptions[l]||(c.volOptions[l]={dispInlineRegex:c.options.dispInlineRegex}),h=c.volOptions[l],t.options&&Object.assign(h,t.options),t.disabled&&(h.disabled=t.disabled,h.disabledFlip=c.arrayFlip(t.disabled,!0)),t.tmbUrl&&(h.tmbUrl=t.tmbUrl),h.url&&"/"!==h.url.substr(-1)&&(h.url+="/"),(g=h).uiCmdMap&&(e.isPlainObject(g.uiCmdMap)&&Object.keys(g.uiCmdMap).length?(g.disabledFlip||(g.disabledFlip={}),v=g.disabledFlip,e.each(g.uiCmdMap,function(e,t){"hidden"!==t||v[e]||(g.disabled.push(e),g.disabledFlip[e]=!0)})):delete g.uiCmdMap),h.trashHash&&(!1===c.trashes[h.trashHash]?delete h.trashHash:c.trashes[h.trashHash]=t.hash),e.each(c.optionProperties,function(e){h[e]&&(t[e]=h[e])}),"cwd"!==r&&(c.roots[l]=t.hash),t.expires&&(c.volumeExpires[l]=t.expires)),o!==l&&(o=l,a=c.option("i18nFolderName",l))),p&&!t.i18&&(i="volume_"+t.name,n=c.i18n(!1,i),i!==n&&(t.i18=n)),a&&!t.i18&&(i="folder_"+t.name,n=c.i18n(!1,i),i!==n&&(t.i18=n)),p&&(m=c.storage("rootNames"))&&(m[t.hash]&&(t._name=t.name,t._i18=t.i18,t.name=m[t.hash]=m[t.hash],delete t.i18),c.storage("rootNames",m)),c.trashes[t.hash]&&(t.locked=!0)}else{if(d)try{if(!d(t))return y}catch(e){c.debug(e)}0==t.size&&(t.mime=c.getMimetype(t.name,t.mime))}return t.options&&(c.optionsByHashes[t.hash]=u(t.options)),delete t.options,b}return y},p=function(i,n){e.each(i,function(i,a){var o,s;c.leafRoots[a.hash]&&c.applyLeafRootStats(a),"change"!==n&&a.phash&&c.isRoot(a)&&(o=c.file(a.phash))&&(c.applyLeafRootStats(o),t.changed?(e.each(t.changed,function(e,i){if(i.hash===o.hash)return t.changed[e]=o,s=!0,!1}),s||t.changed.push(o)):t.changed=[o])})},f=[];if(t.customData&&(!c.prevCustomData||JSON.stringify(t.customData)!==JSON.stringify(c.prevCustomData))){c.prevCustomData=t.customData;try{s=JSON.parse(t.customData),e.isPlainObject(s)&&(c.prevCustomData=s,e.each(Object.keys(s),function(e,t){null===s[t]&&(delete s[t],delete c.optsCustomData[t])}),c.customData=Object.assign({},c.optsCustomData,s))}catch(e){}}return t.options&&u(t.options),t.cwd&&(t.cwd.volumeid&&t.options&&Object.keys(t.options).length&&c.isRoot(t.cwd)&&(c.hasVolOptions=!0,c.volOptions[t.cwd.volumeid]=t.options),t.cwd=h(t.cwd,!0,"cwd")),t.files&&(t.files=e.grep(t.files,h)),t.tree&&(t.tree=e.grep(t.tree,h)),t.added&&(t.added=e.grep(t.added,h)),t.changed&&(t.changed=e.grep(t.changed,h)),t.removed&&t.removed.length&&2===c.searchStatus.state&&(t.removed=t.removed.concat((r=t.removed,l=[],e.each(c.files(),function(t,i){e.each(c.parents(t),function(i,n){if(-1!==e.inArray(n,r)&&-1===e.inArray(t,r))return l.push(t),!1})}),l))),t.api&&(t.init=!0),Object.keys(c.leafRoots).length&&(t.files&&p(t.files),t.tree&&p(t.tree),t.added&&p(t.added),t.changed&&p(t.changed,"change")),t.cwd&&t.cwd.options&&t.options&&Object.assign(t.options,u(t.cwd.options)),t.options&&t.options.url&&"/"!==t.options.url.substr(-1)&&(t.options.url+="/"),f.length&&(t.norError=["errResponse"].concat(f)),t},setSort:function(e,t,i,n){this.storage("sortType",this.sortType=this.sortRules[e]?e:"name"),this.storage("sortOrder",this.sortOrder=/asc|desc/.test(t)?t:"asc"),this.storage("sortStickFolders",(this.sortStickFolders=!!i)?1:""),this.storage("sortAlsoTreeview",(this.sortAlsoTreeview=!!n)?1:""),this.trigger("sortchange")},_sortRules:{name:function(e,t){return u.prototype.naturalCompare(e.i18||e.name,t.i18||t.name)},size:function(e,t){var i=parseInt(e.size)||0,n=parseInt(t.size)||0;return i===n?0:i>n?1:-1},kind:function(e,t){return u.prototype.naturalCompare(e.mime,t.mime)},date:function(e,t){var i=e.ts||e.date||0,n=t.ts||t.date||0;return i===n?0:i>n?1:-1},perm:function(e,t){var i=function(e){return(e.write?2:0)+(e.read?1:0)},n=i(e),a=i(t);return n===a?0:n>a?1:-1},mode:function(e,t){var i=e.mode||e.perm||"",n=t.mode||t.perm||"";return u.prototype.naturalCompare(i,n)},owner:function(e,t){var i=e.owner||"",n=t.owner||"";return u.prototype.naturalCompare(i,n)},group:function(e,t){var i=e.group||"",n=t.group||"";return u.prototype.naturalCompare(i,n)}},sorters:{},naturalCompare:function(e,t){var i=u.prototype.naturalCompare;return void 0===i.loc&&(i.loc=navigator.userLanguage||navigator.browserLanguage||navigator.language||"en-US"),void 0===i.sort&&("11".localeCompare("2",i.loc,{numeric:!0})>0?window.Intl&&window.Intl.Collator?i.sort=new Intl.Collator(i.loc,{numeric:!0}).compare:i.sort=function(e,t){return e.localeCompare(t,i.loc,{numeric:!0})}:(i.sort=function(e,t){var n,a,o=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,s=/(^[ ]*|[ ]*$)/g,r=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,c=/^0/,d=/^[\x01\x21-\x2f\x3a-\x40\x5b-\x60\x7b-\x7e]/,u=function(e){return i.sort.insensitive&&(""+e).toLowerCase()||""+e},h=u(e).replace(s,"").replace(/^_/,"")||"",p=u(t).replace(s,"").replace(/^_/,"")||"",f=h.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=p.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),g=parseInt(h.match(l))||1!=f.length&&h.match(r)&&Date.parse(h),v=parseInt(p.match(l))||g&&p.match(r)&&Date.parse(p)||null,b=0;if(v){if(g<v)return-1;if(g>v)return 1}for(var y=0,w=Math.max(f.length,m.length);y<w;y++){if(n=!(f[y]||"").match(c)&&parseFloat(f[y])||f[y]||0,a=!(m[y]||"").match(c)&&parseFloat(m[y])||m[y]||0,isNaN(n)!==isNaN(a)){if(isNaN(n)&&("string"!=typeof n||!n.match(d)))return 1;if("string"!=typeof a||!a.match(d))return-1}if(0===parseInt(n,10)&&(n=0),0===parseInt(a,10)&&(a=0),typeof n!=typeof a&&(n+="",a+=""),i.sort.insensitive&&"string"==typeof n&&"string"==typeof a&&0!==(b=n.localeCompare(a,i.loc)))return b;if(n<a)return-1;if(n>a)return 1}return 0},i.sort.insensitive=!0)),i.sort(e,t)},compare:function(e,t){var i,n=this,a=n.sortType,o="asc"==n.sortOrder,s=n.sortStickFolders,r=n.sortRules,l=r[a],c="directory"==e.mime,d="directory"==t.mime;if(s){if(c&&!d)return-1;if(!c&&d)return 1}return i=o?l(e,t):l(t,e),"name"!==a&&0===i?i=o?r.name(e,t):r.name(t,e):i},sortFiles:function(e){return e.sort(this.compare)},notify:function(t){var i,n,a,o=this,s=t.type,r=t.id?"elfinder-notify-"+t.id:"",l=this.i18n(void 0!==t.msg?t.msg:this.messages["ntf"+s]?"ntf"+s:"ntfsmth"),c=this.arrayFlip(this.options.notifyDialog.hiddens||[]),d=this.ui.notify,u=d.closest(".ui-dialog"),h=d.children(".elfinder-notify-"+s+(r?"."+r:"")),p=h.children("div.elfinder-notify-cancel").children("button"),f='<div class="elfinder-notify elfinder-notify-{type}'+(r?" "+r:"")+'"><span class="elfinder-dialog-icon elfinder-dialog-icon-{type}"></span><span class="elfinder-notify-msg">{msg}</span> <span class="elfinder-notify-cnt"></span><div class="elfinder-notify-progressbar"><div class="elfinder-notify-progress"></div></div><div class="elfinder-notify-cancel"></div></div>',m=t.cnt+0,g=void 0!==t.size?parseInt(t.size):null,v=void 0!==t.progress&&t.progress>=0?t.progress:null,b=t.fakeinterval||200,y=t.cancel,w=function(){var t=h.find(".elfinder-notify-progress"),i=function(){h.remove(),d.children(u.data("minimized")?void 0:":visible").length||(u.data("minimized")?u.data("minimized").hide():d.elfinderdialog("close")),k()};h._esc&&e(document).off("keydown",h._esc),h.data("cur")<100?t.animate({width:"100%"},50,function(){requestAnimationFrame(function(){i()})}):i()},x=function(e){var t;h.length&&(t=h.data("cur")+1)<=98&&(h.find(".elfinder-notify-progress").width(t+"%"),h.data("cur",t),k(),setTimeout(function(){x(e*=1.05)},e))},k=function(){var t,i=0,n=0,a=d.children(".elfinder-notify");a.length?(a.each(function(){i++,n+=Math.min(e(this).data("cur"),100)}),t=i?Math.floor(n/(100*i)*100)+"%":0,o.ui.progressbar.width(t),u.data("minimized")&&(u.data("minimized").title(t),u.data("minimized").dialog().children(".ui-dialog-titlebar").children(".elfinder-ui-progressbar").width(t))):(o.ui.progressbar.width(0),u.data("minimized")&&u.data("minimized").hide())};return s?(h.length?void 0!==t.msg&&h.children("span.elfinder-notify-msg").html(l):(h=e(f.replace(/\{type\}/g,s).replace(/\{msg\}/g,l)),c[s]?h.hide():d.on("minimize",function(e){u.data("minimized")&&k()}),h.appendTo(d).data("cnt",0),null!=v?h.data({progress:0,total:0,cur:0}):(h.data({cur:0}),x(b)),y&&(p=e('<span class="elfinder-notify-button ui-icon ui-icon-close" title="'+this.i18n("btnCancel")+'"></span>').on("mouseenter mouseleave",function(t){e(this).toggleClass("ui-state-hover","mouseenter"===t.type)}),h.children("div.elfinder-notify-cancel").append(p)),d.trigger("resize")),(i=m+parseInt(h.data("cnt")))>0?(y&&p.length&&(e.isFunction(y)||"object"==typeof y&&y.promise)&&(h._esc=function(t){"keydown"==t.type&&t.keyCode!=e.ui.keyCode.ESCAPE||(t.preventDefault(),t.stopPropagation(),w(),y.promise?y.reject(0):y(t))},p.on("click",function(e){h._esc(e)}),e(document).on("keydown."+this.namespace,h._esc)),!t.hideCnt&&h.children(".elfinder-notify-cnt").text("("+i+")"),m>0&&d.is(":hidden")&&!c[s]&&(u.data("minimized")?u.data("minimized").show():d.elfinderdialog("open",this).height("auto")),h.data("cnt",i),null!=v&&(n=h.data("total"))>=0&&(a=h.data("progress"))>=0&&(n+=null!=g?g:m,a+=v,null==g&&m<0&&(a+=100*m),h.data({progress:a,total:n}),null!=g&&(a*=100,n=Math.max(1,n)),v=Math.min(parseInt(a/n),100),h.find(".elfinder-notify-progress").animate({width:(v<100?v:100)+"%"},20,function(){h.data("cur",v),k()}))):w(),this):this},confirm:function(t){var i,n,a=this,o=!1,s={cssClass:"elfinder-dialog-confirm",modal:!0,resizable:!1,title:this.i18n(t.title||"confirmReq"),buttons:{},close:function(){!o&&t.cancel.callback(),e(this).elfinderdialog("destroy")}},r=this.i18n("apllyAll");return t.cssClass&&(s.cssClass+=" "+t.cssClass),s.buttons[this.i18n(t.accept.label)]=function(){t.accept.callback(!(!i||!i.prop("checked"))),o=!0,e(this).elfinderdialog("close")},s.buttons[this.i18n(t.accept.label)]._cssClass="elfinder-confirm-accept",t.reject&&(s.buttons[this.i18n(t.reject.label)]=function(){t.reject.callback(!(!i||!i.prop("checked"))),o=!0,e(this).elfinderdialog("close")},s.buttons[this.i18n(t.reject.label)]._cssClass="elfinder-confirm-reject"),t.buttons&&t.buttons.length>0&&(n=1,e.each(t.buttons,function(t,r){s.buttons[a.i18n(r.label)]=function(){r.callback(!(!i||!i.prop("checked"))),o=!0,e(this).elfinderdialog("close")},s.buttons[a.i18n(r.label)]._cssClass="elfinder-confirm-extbtn"+n++,r.cssClass&&(s.buttons[a.i18n(r.label)]._cssClass+=" "+r.cssClass)})),s.buttons[this.i18n(t.cancel.label)]=function(){e(this).elfinderdialog("close")},s.buttons[this.i18n(t.cancel.label)]._cssClass="elfinder-confirm-cancel",t.all&&(s.create=function(){var t=e('<div class="elfinder-dialog-confirm-applyall"></div>');i=e('<input type="checkbox" />'),e(this).next().find(".ui-dialog-buttonset").prepend(t.append(e("<label>"+r+"</label>").prepend(i)))}),t.optionsCallback&&e.isFunction(t.optionsCallback)&&t.optionsCallback(s),this.dialog('<span class="elfinder-dialog-icon elfinder-dialog-icon-confirm"></span>'+this.i18n(t.text),s)},uniqueName:function(e,t,i){var n,a,o=0,s="";if(e=this.i18n(!1,e),t=t||this.cwd().hash,i=void 0===i?" ":i,(n=e.match(/^(.+)(\.[^.]+)$/))&&(s=n[2],e=n[1]),a=e+s,!this.fileByName(a,t))return a;for(;o<1e4;)if(a=e+i+ ++o+s,!this.fileByName(a,t))return a;return e+Math.random()+s},i18n:function(){var t,i,n,a,o,s=this,r=this.messages,l=[],c=[],d=function(e){var t;return 0===e.indexOf("#")&&(t=s.file(e.substr(1)))?t.name:e},u=0;for(arguments.length&&!1===arguments[0]&&(a=function(e){return e},u=1),t=u;t<arguments.length;t++)if(n=arguments[t],Array.isArray(n))for(i=0;i<n.length;i++)n[i]instanceof jQuery?l.push(n[i]):void 0!==n[i]&&l.push(d(""+n[i]));else n instanceof jQuery?l.push(n[i]):void 0!==n&&l.push(d(""+n));for(t=0;t<l.length;t++)-1===e.inArray(t,c)&&("string"==typeof(n=l[t])?(o=!(!r[n]||!n.match(/^err/)),n=(n=r[n]||(a?a(n):s.escape(n))).replace(/\$(\d+)/g,function(e,i){var n;return(i=t+parseInt(i))>0&&l[i]&&c.push(i),n=a?a(l[i]):s.escape(l[i]),o&&(n='<span class="elfinder-err-var elfinder-err-var'+i+'">'+n+"</span>"),n})):n=n.get(0).outerHTML,l[t]=n);return e.grep(l,function(t,i){return-1===e.inArray(i,c)}).join("<br>")},getIconStyle:function(t,i){var n=this,a="",o={},s=0;return t.icon&&(a='style="',e.each({background:"url('{url}') 0 0 no-repeat","background-size":"contain"},function(e,r){0===s++&&(r=r.replace("{url}",n.escape(t.icon))),i?o[e]=r:a+=e+":"+r+";"}),a+='"'),i?o:a},mime2class:function(e){var t="elfinder-cwd-icon-",i=e.toLowerCase(),n=this.textMimes[i];return i=i.split("/"),n?i[0]+=" "+t+"text":i[1]&&i[1].match(/\+xml$/)&&(i[0]+=" "+t+"xml"),t+i[0]+(i[1]?" "+t+i[1].replace(/(\.|\+)/g,"-"):"")},mime2kind:function(e){var t,i="object"==typeof e,n=i?e.mime:e;return i&&e.alias&&"symlink-broken"!=n?t="Alias":this.kinds[n]?t=!i||"directory"!==n||e.phash&&!e.isroot?this.kinds[n]:"Root":this.mimeTypes[n]&&(t=this.mimeTypes[n].toUpperCase(),this.messages["kind"+t]||(t=null)),t||(t=0===n.indexOf("text")?"Text":0===n.indexOf("image")?"Image":0===n.indexOf("audio")?"Audio":0===n.indexOf("video")?"Video":0===n.indexOf("application")?"App":n),this.messages["kind"+t]?this.i18n("kind"+t):n},mimeIsText:function(e){return!!(this.textMimes[e.toLowerCase()]||0===e.indexOf("text/")&&"rtf"!==e.substr(5,3)||e.match(/^application\/.+\+xml$/))},date:function(e,t){var i,n,a,o,s,r,l,c,d=this;return t||(t=new Date),s=t[d.getHours](),r=s>12?s-12:s,l=t[d.getMinutes](),c=t[d.getSeconds](),i=t[d.getDate](),n=t[d.getDay](),a=t[d.getMonth]()+1,o=t[d.getFullYear](),e.replace(/[a-z]/gi,function(e){switch(e){case"d":return i>9?i:"0"+i;case"j":return i;case"D":return d.i18n(d.i18.daysShort[n]);case"l":return d.i18n(d.i18.days[n]);case"m":return a>9?a:"0"+a;case"n":return a;case"M":return d.i18n(d.i18.monthsShort[a-1]);case"F":return d.i18n(d.i18.months[a-1]);case"Y":return o;case"y":return(""+o).substr(2);case"H":return s>9?s:"0"+s;case"G":return s;case"g":return r;case"h":return r>9?r:"0"+r;case"a":return s>=12?"pm":"am";case"A":return s>=12?"PM":"AM";case"i":return l>9?l:"0"+l;case"s":return c>9?c:"0"+c}return e})},formatDate:function(e,t){var i,n,a,o=this,s=t||e.ts;o.i18;return o.options.clientFormatDate&&s>0?(i=new Date(1e3*s),n=s>=this.yesterday?this.fancyFormat:this.dateFormat,a=o.date(n,i),s>=this.yesterday?a.replace("$1",this.i18n(s>=this.today?"Today":"Yesterday")):a):e.date?e.date.replace(/([a-z]+)\s/i,function(e,t){return o.i18n(t)+" "}):o.i18n("dateUnknown")},toLocaleString:function(e){var t=new Number(e);return t?t.toLocaleString?t.toLocaleString():String(e).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"):e},perms2class:function(e){var t="";return e.read||e.write?e.read?e.write||(t="elfinder-ro"):t="elfinder-wo":t="elfinder-na",e.type&&(t+=" elfinder-"+this.escape(e.type)),t},formatPermissions:function(e){var t=[];return e.read&&t.push(this.i18n("read")),e.write&&t.push(this.i18n("write")),t.length?t.join(" "+this.i18n("and")+" "):this.i18n("noaccess")},formatSize:function(e){var t=1,i="b";return"unknown"==e?this.i18n("unknown"):(e>1073741824?(t=1073741824,i="GB"):e>1048576?(t=1048576,i="MB"):e>1024&&(t=1024,i="KB"),((e/=t)>0?t>=1048576?e.toFixed(2):Math.round(e):0)+" "+i)},formatFileMode:function(t,i){var n,a,o,s,r,l,c,d;if(i||(i=this.options.fileModeStyle.toLowerCase()),(t=e.trim(t)).match(/[rwxs-]{9}$/i)){if(c=t=t.substr(-9),"string"==i)return c;for(d="",o=0,n=0;n<7;n+=3)s=0,(a=t.substr(n,3)).match(/[r]/i)&&(s+=4),a.match(/[w]/i)&&(s+=2),a.match(/[xs]/i)&&(a.match(/[xs]/)&&(s+=1),a.match(/[s]/i)&&(0==n?o+=4:3==n&&(o+=2))),d+=s.toString(8);o&&(d=o.toString(8)+d)}else{if(d=(t=parseInt(t,8))?t.toString(8):"",!t||"octal"==i)return d;for(o=0,(a=t.toString(8)).length>3&&(a=a.substr(-4),o=parseInt(a.substr(0,1),8),a=a.substr(1)),l=!(2&~o),r=!(4&~o),c="",n=0;n<3;n++)4&~parseInt(a.substr(n,1),8)?c+="-":c+="r",2&~parseInt(a.substr(n,1),8)?c+="-":c+="w",1&~parseInt(a.substr(n,1),8)?c+="-":c+=0==n&&r||1==n&&l?"s":"x"}return"both"==i?c+" ("+d+")":"string"==i?c:d},registRawStringDecoder:function(t){e.isFunction(t)&&(this.decodeRawString=this.options.rawStringDecoder=t)},uploadMimeCheck:function(t,i){i=i||this.cwd().hash;var n,a,o=!0,s=this.option("uploadMime",i),r=function(i){var n=!1;return"string"==typeof i&&"all"===i.toLowerCase()?n=!0:Array.isArray(i)&&i.length&&e.each(i,function(e,i){if("all"===(i=i.toLowerCase())||0===t.indexOf(i))return n=!0,!1}),n};return t&&e.isPlainObject(s)&&(t=t.toLowerCase(),n=r(s.allow),a=r(s.deny),"allow"===s.firstOrder?(o=!1,a||!0!==n||(o=!0)):(o=!0,!0!==a||n||(o=!1))),o},sequence:function(e){var t=e.length,i=function(t,n){return++n,e[n]?i(t.then(e[n]),n):t};return t>1?i(e[0](),0):e[0]()},reloadContents:function(t){var i,n=e.Deferred();try{i=e('<iframe width="1" height="1" scrolling="no" frameborder="no" style="position:absolute; top:-1px; left:-1px" crossorigin="use-credentials">').attr("src",t).one("load",function(){var i=e(this);try{this.contentDocument.location.reload(!0),i.one("load",function(){i.remove(),n.resolve()})}catch(e){i.attr("src","").attr("src",t).one("load",function(){i.remove(),n.resolve()})}}).appendTo("body")}catch(e){i&&i.remove(),n.reject()}return n},makeNetmountOptionOauth:function(t,i,n,a){var o,s="boolean"==typeof a?a:null,r=Object.assign({noOffline:!1,root:"root",pathI18n:"folderId",folders:!0},null===s?a||{}:{noOffline:s}),l=function(i,a,s){var d,u=this,h=Object.keys(e.isPlainObject(s)?s:{}).length;a.next().remove(),h&&(d=e('<select class="ui-corner-all elfinder-tabstop" style="max-width:200px;">').append(e(e.map(s,function(e,t){return'<option value="'+i.escape((t+"").trim())+'">'+i.escape(e)+"</option>"}).join(""))).on("change click",function(a){var s,d=e(this),h=d.val();u.inputs.path.val(h),!r.folders||"change"!==a.type&&d.data("current")===h||(d.next().remove(),d.data("current",h),h!=r.root&&(s=c(),o&&"pending"===o.state()&&i.abortXHR(o,{quiet:!0,abort:!0}),d.after(s),o=i.request({data:{cmd:"netmount",protocol:t,host:n,user:"init",path:h,pass:"folders"},preventDefault:!0}).done(function(e){l.call(u,i,d,e.folders)}).always(function(){i.abortXHR(o,{quiet:!0}),s.remove()}).xhr))}),a.after(e("<div></div>").append(d)).closest(".ui-dialog").trigger("tabstopsInit"),d.trigger("focus"))},c=function(){return e('<div class="elfinder-netmount-spinner"></div>').append('<span class="elfinder-spinner"></span>')};return{vars:{},name:i,inputs:{offline:e('<input type="checkbox"/>').on("change",function(){e(this).parents("table.elfinder-netmount-tb").find("select:first").trigger("change","reset")}),host:e('<span><span class="elfinder-spinner"></span></span><input type="hidden"/>'),path:e('<input type="text" value="'+r.root+'"/>'),user:e('<input type="hidden"/>'),pass:e('<input type="hidden"/>'),mnt2res:e('<input type="hidden"/>')},select:function(i,a,o){var s=this.inputs,l=s.offline,c=e(s.host[0]),d=o||null;this.vars.mbtn=s.host.closest(".ui-dialog").children(".ui-dialog-buttonpane:first").find("button.elfinder-btncnt-0"),c.data("inrequest")||!c.find("span.elfinder-spinner").length&&"reset"!==d&&("winfocus"!==d||c.siblings("span.elfinder-button-icon-reload").length)?(l.closest("tr")[r.noOffline||s.user.val()?"hide":"show"](),c.data("funcexpup")&&c.data("funcexpup")()):(1===l.parent().children().length&&(s.path.parent().prev().html(i.i18n(r.pathI18n)),l.attr("title",i.i18n("offlineAccess")),l.uniqueId().after(e("<label></label>").attr("for",l.attr("id")).html(" "+i.i18n("offlineAccess")))),c.data("inrequest",!0).empty().addClass("elfinder-spinner").parent().find("span.elfinder-button-icon").remove(),i.request({data:{cmd:"netmount",protocol:t,host:n,user:"init",options:{id:i.id,offline:l.prop("checked")?1:0,pass:s.host[1].value}},preventDefault:!0}).done(function(e){c.removeClass("elfinder-spinner").html(e.body.replace(/\{msg:([^}]+)\}/g,function(e,t){return i.i18n(t,n)}))}),r.noOffline&&l.closest("tr").hide()),this.vars.mbtn[e(s.host[1]).val()?"show":"hide"]()},done:function(i,a){var o,s=this.inputs,c=this.protocol,d=e(s.host[0]),u=e(s.host[1]),h="&nbsp;",p=this.vars,f=function(){p.oauthW&&!document.hasFocus()&&--p.chkCnt&&(c.trigger("change","winfocus"),p.tm=setTimeout(f,3e3))};if(r.noOffline&&s.offline.closest("tr").hide(),"makebtn"==a.mode)d.removeClass("elfinder-spinner").removeData("expires").removeData("funcexpup"),o=s.host.find("input").on("mouseenter mouseleave",function(){e(this).toggleClass("ui-state-hover")}),a.url&&o.on("click",function(){p.tm&&clearTimeout(p.tm),p.oauthW=window.open(a.url),(i.UA.iOS||i.UA.Mac)&&i.isCORS&&!p.chkdone&&(p.chkCnt=60,p.tm=setTimeout(f,5e3))}),u.val(""),s.path.val(r.root).next().remove(),s.user.val(""),s.pass.val(""),!r.noOffline&&s.offline.closest("tr").show(),p.mbtn.hide();else if("folders"==a.mode)a.folders&&l.call(this,i,s.path.nextAll(":last"),a.folders);else{if(p.oauthW&&(p.tm&&clearTimeout(p.tm),p.oauthW.close(),delete p.oauthW,p.chkdone=!0),a.expires&&(h="()",d.data("expires",a.expires)),d.html(n+h).removeClass("elfinder-spinner"),a.expires&&(d.data("funcexpup",function(){var e=Math.floor((d.data("expires")-+new Date/1e3)/60);e<3?d.parent().children(".elfinder-button-icon-reload").click():(d.text(d.text().replace(/\(.*\)/,"("+i.i18n(["minsLeft",e])+")")),setTimeout(function(){d.is(":visible")&&d.data("funcexpup")()},6e4))}),d.data("funcexpup")()),a.reset)return void c.trigger("change","reset");d.parent().append(e('<span class="elfinder-button-icon elfinder-button-icon-reload" title="'+i.i18n("reAuth")+'">').on("click",function(){u.val("reauth"),c.trigger("change","reset")})),u.val(t),p.mbtn.show(),a.folders&&l.call(this,i,s.path,a.folders),a.mnt2res&&s.mnt2res.val("1"),s.user.val("done"),s.pass.val("done"),s.offline.closest("tr").hide()}d.removeData("inrequest")},fail:function(t,i){e(this.inputs.host[0]).removeData("inrequest"),this.protocol.trigger("change","reset")},integrateInfo:r.integrate}},findCwdNodes:function(t,i){var n=this,a=(this.getUI("cwd"),this.cwd().hash),o=e();return i=i||{},e.each(t,function(e,t){if((t.phash===a||n.searchStatus.state>1)&&(o=o.add(n.cwdHash2Elm(t.hash)),i.firstOnly))return!1}),o},convAbsUrl:function(e){if(e.match(/^http/i))return e;if("//"===e.substr(0,2))return window.location.protocol+e;var t,i=window.location.protocol+"//"+window.location.host,n=/[^\/]+\/\.\.\//;for(t=(t="/"===e.substr(0,1)?i+e:i+window.location.pathname.replace(/\/[^\/]+$/,"/")+e).replace("/./","/");n.test(t);)t=t.replace(n,"");return t},isSameOrigin:function(e){var t;if(e=this.convAbsUrl(e),location.origin&&window.URL)try{return t=new URL(e),location.origin===t.origin}catch(e){}return(t=document.createElement("a")).href=e,location.protocol===t.protocol&&location.host===t.host&&location.port&&t.port},navHash2Id:function(e){return this.navPrefix+e},navId2Hash:function(e){return"string"==typeof e&&e.substr(this.navPrefix.length)},cwdHash2Id:function(e){return this.cwdPrefix+e},cwdId2Hash:function(e){return"string"==typeof e&&e.substr(this.cwdPrefix.length)},navHash2Elm:function(t){return e(document.getElementById(this.navHash2Id(t)))},cwdHash2Elm:function(t){return e(document.getElementById(this.cwdHash2Id(t)))},isInWindow:function(e,t){var i,n;return!!(i=e.get(0))&&(!(!t&&null===i.offsetParent)&&(n=i.getBoundingClientRect(),!!document.elementFromPoint(n.left,n.top)))},zIndexCalc:function(){var t=this,i=this.getUI(),n=i.css("z-index");n&&"auto"!==n&&"inherit"!==n?t.zIndex=n:i.parents().each(function(i,n){var a=e(n).css("z-index");if("auto"!==a&&"inherit"!==a&&(a=parseInt(a)))return t.zIndex=a,!1})},loadScript:function(t,i,n,a){var o,s,r={dataType:"script",cache:!0},l={},c={};return(n=n||{}).tryRequire&&this.hasRequire?require(t,i,n.error):(o=function(){var t,o,s;e.each(c,function(e,t){if("success"!==t&&"notmodified"!==t)return s=!0,!1}),s?n.error&&e.isFunction(n.error)&&n.error({loadResults:c}):e.isFunction(i)&&(a&&void 0===a.obj[a.name]?(t=a.timeout?a.timeout/10:1,o=setInterval(function(){(--t<0||void 0!==a.obj[a.name])&&(clearInterval(o),i())},10)):i())},"tag"===n.loadType?(e("head > script").each(function(){l[this.src]=this}),s=t.length,e.each(t,function(t,i){var a,r=!1;l[i]?(c[t]=l[i]._error||"success",--s<1&&o()):((a=document.createElement("script")).charset=n.charset||"UTF-8",e("head").append(a),a.onload=a.onreadystatechange=function(){r||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(r=!0,c[t]="success",--s<1&&o())},a.onerror=function(e){c[t]=a._error=e&&e.type?e.type:"error",--s<1&&o()},a.src=i)})):(n=e.isPlainObject(n)?Object.assign(r,n):r,s=0,function i(a,r){void 0!==a&&(c[s++]=r),t.length?e.ajax(Object.assign({},n,{url:t.shift(),success:i,error:i})):o()}())),this},loadCss:function(t,i){var n,a,o=this;return"string"==typeof t&&(t=[t]),i&&(i.className&&(n=i.className),i.dfd&&i.dfd.promise&&(a=[])),e.each(t,function(t,i){var s;i=o.convAbsUrl(i).replace(/^https?:/i,""),a&&(a[t]=e.Deferred()),e('head > link[href="'+o.escape(i)+'"]').length?a&&a[t].resolve():((s=document.createElement("link")).type="text/css",s.rel="stylesheet",s.href=i,n&&(s.className=n),a&&(s.onload=function(){a[t].resolve()},s.onerror=function(){a[t].reject()}),e("head").append(s))}),a&&e.when.apply(null,a).done(function(){i.dfd.resolve()}).fail(function(){i.dfd.reject()}),this},asyncJob:function(t,i,n){var a,o,s=e.Deferred(),r=!1,l=Object.assign({interval:0,numPerOnce:1},n||{}),c=[],d=[],u=[];return s._abort=function(e){o&&clearTimeout(o),d=[],r=!0,"pending"===s.state()&&s[e?"resolve":"reject"](c)},s.fail(function(){s._abort()}).always(function(){s._abort=function(){}}),"function"==typeof t&&Array.isArray(i)?(d=i.concat(),a=function(){var e,i,n;if(!r){for(i=(u=d.splice(0,l.numPerOnce)).length,e=0;e<i&&!r;e++)null!==(n=t(u[e]))&&c.push(n);r||(d.length?o=setTimeout(a,l.interval):s.resolve(c))}},d.length?o=setTimeout(a,0):s.resolve(c)):s.reject(),s},getSize:function(t){var i,n,a=this,o=[],s=t.length,r=e.Deferred().fail(function(){e.each(o,function(e,t){t&&(t.syncOnFail&&t.syncOnFail(!1),t.reject())})});return a.autoSync("stop"),(i=e.Deferred(),n=Object.keys(a.leafRoots).length,n>0?e.each(a.leafRoots,function(t){(function(t){var i=e.Deferred(),n=a.file(t),o=n?n.phash:t;return o&&!a.file(o)?a.request({data:{cmd:"parents",target:o},preventFail:!0}).done(function(){a.one("parentsdone",function(){i.resolve()})}).fail(function(){i.resolve()}):i.resolve(),i})(t).done(function(){--n<1&&i.resolve()})}):i.resolve(),i).done(function(){var i=[],n={},l=[],c=[],d={};e.each(t,function(){i.push.apply(i,function(t){var i=[];return"directory"===t.mime&&e.each(a.leafRoots,function(e,n){var o;if(e===t.hash)i.push.apply(i,n);else for(o=(a.file(e)||{}).phash;o;)o===t.hash&&i.push.apply(i,n),o=(a.file(o)||{}).phash}),i}(a.file(this)))}),t.push.apply(t,i),e.each(t,function(){var t=a.root(this),i=a.file(this);i&&(i.sizeInfo||"directory"!==i.mime)?c.push(e.Deferred().resolve(i.sizeInfo?i.sizeInfo:{size:i.size,dirCnt:0,fileCnt:1})):n[t]?n[t].push(this.toString()):n[t]=[this.toString()]}),e.each(n,function(){var e=l.length;1===this.length&&(d[e]=this[0]),l.push(a.request({data:{cmd:"size",targets:this},preventDefault:!0}))}),o.push.apply(o,l),l.push.apply(l,c),e.when.apply(e,l).fail(function(){r.reject()}).done(function(){var t,i,n=function(t,i){var n;(n=a.file(t))&&(n.sizeInfo={isCache:!0},e.each(["size","dirCnt","fileCnt"],function(){n.sizeInfo[this]=i[this]||0}),n.size=parseInt(n.sizeInfo.size),f.push(n))},o=0,l=0,c=0,u=arguments.length,h=[],p="",f=[];for(t=0;t<u;t++)(i=arguments[t]).isCache||(d[t]&&a.file(d[t])?n(d[t],i):i.sizes&&e.isPlainObject(i.sizes)&&e.each(i.sizes,function(e,t){n(e,t)})),o+=parseInt(i.size),!1!==l&&(void 0===i.fileCnt?l=!1:l+=parseInt(i.fileCnt||0)),!1!==c&&(void 0===i.dirCnt?c=!1:c+=parseInt(i.dirCnt||0));f.length&&a.change({changed:f}),!1!==c&&h.push(a.i18n("folders")+": "+(c-(s>1?0:1))),!1!==l&&h.push(a.i18n("files")+": "+l),h.length&&(p="<br>"+h.join(", ")),r.resolve({size:o,fileCnt:l,dirCnt:c,formated:(o>=0?a.formatSize(o):a.i18n("unknown"))+p})}),a.autoSync()}),r},wkObjUrl:null,getWorker:function(e){var t;try{this.wkObjUrl||(this.wkObjUrl=(window.URL||window.webkitURL).createObjectURL(new Blob([function(){self.onmessage=function(e){var t=e.data;try{if(self.data=t.data,t.scripts)for(var i=0;i<t.scripts.length;i++)importScripts(t.scripts[i]);self.postMessage(self.res)}catch(e){self.postMessage({error:e.toString()})}}}.toString().replace(/\s+/g," ").replace(/ *([^\w]) */g,"$1").replace(/^function\b.+?\{|\}$/g,"")],{type:"text/javascript"}))),t=new Worker(this.wkObjUrl,e)}catch(e){this.debug("error",e.toString())}return t},getWorkerUrl:function(e){return this.convAbsUrl(this.workerBaseUrl+e)},getTheme:function(t){var i,n,a=this,o=e.Deferred(),s=function(t,i){return i||(i=a.convAbsUrl(a.baseUrl)),Array.isArray(t)?e.map(t,function(e){return s(e,i)}):t.match(/^(?:http|\/\/)/i)?t:i+t.replace(/^(?:\.\/|\/)/,"")};return t&&(i=a.options.themes[t])?"string"==typeof i?(url=s(i),(n=url.match(/^(.+\/)[^/]+\.json$/i))?e.getJSON(url).done(function(e){(i=e).id=t,i.cssurls&&(i.cssurls=s(i.cssurls,n[1])),o.resolve(i)}).fail(function(){o.reject()}):o.resolve({id:t,name:t,cssurls:[url]})):e.isPlainObject(i)&&i.cssurls?(i.id=t,i.cssurls=s(i.cssurls),Array.isArray(i.cssurls)||(i.cssurls=[i.cssurls]),i.name||(i.name=t),o.resolve(i)):o.reject():o.reject(),o},changeTheme:function(t){var i=this;return t&&(!i.options.themes[t]||i.theme&&i.theme.id===t?"default"===t&&i.theme&&"default"!==i.theme.id&&(e("head>link.elfinder-theme-ext").remove(),i.theme=null,i.trigger&&i.trigger("themechange")):i.getTheme(t).done(function(t){t.cssurls&&(e("head>link.elfinder-theme-ext").remove(),i.loadCss(t.cssurls,{className:"elfinder-theme-ext",dfd:e.Deferred().done(function(){i.theme=t,i.trigger&&i.trigger("themechange")})}))})),this},applyLeafRootStats:function(t,i){var n=this,a=i?t:n.file(t.hash)||t,o=a.ts,s=!1;return!i&&t._realStats||(t._realStats={locked:t.locked||0,dirs:t.dirs||0,ts:t.ts}),t.locked=1,a.locked||(s=!0),t.dirs=1,a.dirs||(s=!0),e.each(n.leafRoots[t.hash],function(){var e=n.file(this);e&&e.ts&&(t.ts||0)<e.ts&&(t.ts=e.ts)}),o!==t.ts&&(s=!0),s},abortXHR:function(e,t){var i=t||{};e&&(i.quiet&&(e.quiet=!0),i.abort&&e._requestId&&this.request({data:{cmd:"abort",id:e._requestId},preventDefault:!0}),e.abort(),e=void 0)},setCustomHeaderByXhr:function(t){var i=this;t.getResponseHeader&&i.parrotHeaders&&i.parrotHeaders.length&&e.each(i.parrotHeaders,function(e,n){var a=t.getResponseHeader(n);a?(i.customHeaders[n]=a,i.sessionStorage("core-ph:"+n,a)):"string"==typeof a&&(delete i.customHeaders[n],i.sessionStorage("core-ph:"+n,null))})},hasParrotHeaders:function(){var e=!1,t=this.parrotHeaders;if(Object.keys(this.customHeaders).length)for(var i=0;i<t.length;i++)if(this.customHeaders[t[i]]){e=!0;break}return e},getRequestId:function(){return(+new Date).toString(16)+Math.floor(1e3*Math.random()).toString(16)},arrayFlip:function(t,i){var n,a={},o=e.isArray(t);for(n in t)(o||t.hasOwnProperty(n))&&(a[t[n]]=i||n);return a},splitFileExtention:function(e){var t;return(t=e.match(/^(.+?)?\.((?:tar\.(?:gz|bz|bz2|z|lzo))|cpio\.gz|ps\.gz|xcf\.(?:gz|bz2)|[a-z0-9]{1,10})$/i))?(void 0===t[1]&&(t[1]=""),[t[1],t[2]]):[e,""]},sliceArrayBuffer:function(e,t){for(var i=[],n=0;n*t<e.byteLength;)i.push(e.slice(n*t,(n+1)*t)),n++;return i},arrayBufferToBase64:function(e){if(!window.btoa)return"";var t=new Uint8Array(e),i=Array.prototype.slice.call(t).map(function(e){return String.fromCharCode(e)});return window.btoa(i.join(""))},log:function(e){return window.console&&window.console.log&&window.console.log(e),this},debug:function(t,i){var n,a,o=this,s=this.options.debug,r=this.options.toastBackendWarn;return"backend-error"===t?(!this.cwd().hash||s&&("all"===s||s["backend-error"]))&&(i=Array.isArray(i)?i:[i],this.error(i)):"backend-warning"===t?(a=!0,r&&(n=e.isPlainObject(r)?r:{},e.each(Array.isArray(i)?i:[i],function(e,t){o.toast(Object.assign({mode:"warning",msg:t},n))}))):"backend-debug"===t&&this.trigger("backenddebug",i),(a||s&&("all"===s||s[t]))&&window.console&&window.console.log&&window.console.log("elfinder debug: ["+t+"] ["+this.id+"]",i),this},responseDebug:function(e){var t,i=e.debug;i&&((t=this.options.debug)&&"all"===t||(t||(t=this.options.debug={}),t["backend-error"]=!0,t.warning=!0),i.mountErrors&&("string"==typeof i.mountErrors||Array.isArray(i.mountErrors)&&i.mountErrors.length)&&this.debug("backend-error",i.mountErrors),i.backendErrors&&("string"==typeof i.backendErrors||Array.isArray(i.backendErrors)&&i.backendErrors.length)&&this.debug("backend-warning",i.backendErrors))},time:function(e){window.console&&window.console.time&&window.console.time(e)},timeEnd:function(e){window.console&&window.console.timeEnd&&window.console.timeEnd(e)}},Object.keys||(Object.keys=(r=Object.prototype.hasOwnProperty,l=!{toString:null}.propertyIsEnumerable("toString"),d=(c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on non-object");var t=[];for(var i in e)r.call(e,i)&&t.push(i);if(l)for(var n=0;n<d;n++)r.call(e,c[n])&&t.push(c[n]);return t})),Array.isArray||(Array.isArray=function(e){return jQuery.isArray(e)}),Object.assign||(Object.assign=function(){return jQuery.extend.apply(null,arguments)}),String.prototype.repeat||(String.prototype.repeat=function(e){"use strict";if(null==this)throw new TypeError("can't convert "+this+" to object");var t=""+this;if((e=+e)!=e&&(e=0),e<0)throw new RangeError("repeat count must be non-negative");if(e==1/0)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),0==t.length||0==e)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var i="",n=0;n<e;n++)i+=t;return i}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),function(){try{return void Array.apply(null,{})}catch(e){}var e=Object.prototype.toString,t=Function.prototype.apply,i=Array.prototype.slice;Function.prototype.apply=function(n,a){return t.call(this,n,"[object Array]"===e.call(a)?a:i.call(a))}}(),Array.from||(Array.from=function(e){return 1===e.length?[e[0]]:Array.apply(null,e)}),window.cancelAnimationFrame||function(){for(var e=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,i){var n=(new Date).getTime(),a=Math.max(0,16-(n-e)),o=window.setTimeout(function(){t(n+a)},a);return e=n+a,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),u.prototype.version="2.1.61 (2.1-src Nightly: 1733024)",function(){if(e.ui&&e.ui.ddmanager){var t=e.ui.ddmanager.prepareOffsets;e.ui.ddmanager.prepareOffsets=function(i,n){var a=function(e){if(e.is(":hidden"))return!0;var t=e[0].getBoundingClientRect();return!document.elementFromPoint(t.left,t.top)&&!document.elementFromPoint(t.left+t.width,t.top+t.height)};if("mousedown"===n.type||i.options.elfRefresh){var o,s,r=e.ui.ddmanager.droppables[i.options.scope]||[],l=r.length;for(o=0;o<l;o++)(s=r[o]).options.autoDisable&&(!s.options.disabled||s.options.autoDisable>1)&&(s.options.disabled=a(s.element),s.options.autoDisable=s.options.disabled?2:1)}return t(i,n)}}}(),window.jQuery.ajaxTransport("+binary",function(e,t,i){var n;if(window.FormData&&(e.dataType&&"binary"==e.dataType||e.data&&(window.ArrayBuffer&&e.data instanceof ArrayBuffer||window.Blob&&e.data instanceof Blob)))return{send:function(t,i){var a,o=e.responseType||"blob",s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)s.setRequestHeader(a,t[a]);n=function(t){return function(){if(n)if(n=s.onload=s.onerror=s.onabort=s.ontimeout=null,"abort"===t)s.abort();else if("error"===t)i(s.status,s.statusText);else{var a={};a[e.dataType]=s.response,i(s.status,s.statusText,a,s.getAllResponseHeaders())}}},s.onload=n(),s.onabort=s.onerror=s.ontimeout=n("error"),n=n("abort");try{s.responseType=o,s.send(e.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),function(e){if(e.support.touch="ontouchend"in document,e.support.touch){var t,i,n,a=e.ui.mouse.prototype,o=a._mouseInit,s=a._mouseDestroy;a._touchStart=function(e){!t&&this._mouseCapture(e.originalEvent.changedTouches[0])&&(i=e.originalEvent.changedTouches[0].screenX.toFixed(0),n=e.originalEvent.changedTouches[0].screenY.toFixed(0),t=!0,this._touchMoved=!1,r(e,"mouseover"),r(e,"mousemove"),r(e,"mousedown"))},a._touchMove=function(e){if(t){var a=e.originalEvent.changedTouches[0].screenX.toFixed(0),o=e.originalEvent.changedTouches[0].screenY.toFixed(0);Math.abs(i-a)<=4&&Math.abs(n-o)<=4||(this._touchMoved=!0,r(e,"mousemove"))}},a._touchEnd=function(e){t&&(r(e,"mouseup"),r(e,"mouseout"),this._touchMoved||r(e,"click"),t=!1,this._touchMoved=!1)},a._mouseInit=function(){var t=this;t.element.hasClass("touch-punch")&&t.element.on({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),o.call(t)},a._mouseDestroy=function(){var t=this;t.element.hasClass("touch-punch")&&t.element.off({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),s.call(t)}}function r(t,i){if(!(t.originalEvent.touches.length>1)){e(t.currentTarget).hasClass("touch-punch-keep-default")||t.preventDefault();var n=t.originalEvent.changedTouches[0],a=document.createEvent("MouseEvents");a.initMouseEvent(i,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(a)}}}(jQuery),e.fn.elfinder=function(t,i){return"instance"===t?this.getElFinder():this.each(function(){var n,a="string"==typeof t?t:"",o="function"==typeof i?i:void 0,s=this.elfinder;if(s)switch(a){case"close":case"hide":s.hide();break;case"open":case"show":s.show();break;case"destroy":s.destroy();break;case"reload":case"restart":s&&(n=e.extend(!0,s.options,e.isPlainObject(i)?i:{}),o=s.bootCallback,s.reloadCallback&&e.isFunction(s.reloadCallback)?s.reloadCallback(n,o):(s.destroy(),new u(this,n,o)))}else e.isPlainObject(t)&&new u(this,t,o)})},e.fn.getElFinder=function(){var e;return this.each(function(){if(this.elfinder)return e=this.elfinder,!1}),e},e.fn.elfUiWidgetInstance=function(e){try{return this[e]("instance")}catch(i){var t=this.data("ui-"+e);return t&&"object"==typeof t&&t.widgetFullName==="ui-"+e?t:null}},e.fn.scrollRight||e.fn.extend({scrollRight:function(e){var t=this.get(0);return void 0===e?Math.max(0,t.scrollWidth-(t.scrollLeft+t.clientWidth)):this.scrollLeft(t.scrollWidth-t.clientWidth-e)}}),e.fn.scrollBottom||e.fn.extend({scrollBottom:function(e){var t=this.get(0);return void 0===e?Math.max(0,t.scrollHeight-(t.scrollTop+t.clientHeight)):this.scrollTop(t.scrollHeight-t.clientHeight-e)}}),u.prototype.mimeTypes={"application/x-executable":"exe","application/x-jar":"jar","application/x-gzip":"gz","application/x-bzip2":"tbz","application/x-rar":"rar","text/x-php":"php","text/javascript":"js","application/rtfd":"rtfd","text/x-python":"py","text/x-ruby":"rb","text/x-shellscript":"sh","text/x-perl":"pl","text/xml":"xml","text/x-csrc":"c","text/x-chdr":"h","text/x-c++src":"cpp","text/x-c++hdr":"hh","text/x-markdown":"md","text/x-yaml":"yml","image/x-ms-bmp":"bmp","image/x-targa":"tga","image/xbm":"xbm","image/pxm":"pxm","audio/wav":"wav","video/x-dv":"dv","video/x-ms-wmv":"wm","video/ogg":"ogm","video/MP2T":"m2ts","application/x-mpegURL":"m3u8","application/dash+xml":"mpd","application/andrew-inset":"ez","application/applixware":"aw","application/atom+xml":"atom","application/atomcat+xml":"atomcat","application/atomsvc+xml":"atomsvc","application/ccxml+xml":"ccxml","application/cdmi-capability":"cdmia","application/cdmi-container":"cdmic","application/cdmi-domain":"cdmid","application/cdmi-object":"cdmio","application/cdmi-queue":"cdmiq","application/cu-seeme":"cu","application/davmount+xml":"davmount","application/docbook+xml":"dbk","application/dssc+der":"dssc","application/dssc+xml":"xdssc","application/ecmascript":"ecma","application/emma+xml":"emma","application/epub+zip":"epub","application/exi":"exi","application/font-tdpfr":"pfr","application/gml+xml":"gml","application/gpx+xml":"gpx","application/gxf":"gxf","application/hyperstudio":"stk","application/inkml+xml":"ink","application/ipfix":"ipfix","application/java-serialized-object":"ser","application/java-vm":"class","application/json":"json","application/jsonml+json":"jsonml","application/lost+xml":"lostxml","application/mac-binhex40":"hqx","application/mac-compactpro":"cpt","application/mads+xml":"mads","application/marc":"mrc","application/marcxml+xml":"mrcx","application/mathematica":"ma","application/mathml+xml":"mathml","application/mbox":"mbox","application/mediaservercontrol+xml":"mscml","application/metalink+xml":"metalink","application/metalink4+xml":"meta4","application/mets+xml":"mets","application/mods+xml":"mods","application/mp21":"m21","application/mp4":"mp4s","application/msword":"doc","application/mxf":"mxf","application/octet-stream":"bin","application/oda":"oda","application/oebps-package+xml":"opf","application/ogg":"ogx","application/omdoc+xml":"omdoc","application/onenote":"onetoc","application/oxps":"oxps","application/patch-ops-error+xml":"xer","application/pdf":"pdf","application/pgp-encrypted":"pgp","application/pgp-signature":"asc","application/pics-rules":"prf","application/pkcs10":"p10","application/pkcs7-mime":"p7m","application/pkcs7-signature":"p7s","application/pkcs8":"p8","application/pkix-attr-cert":"ac","application/pkix-cert":"cer","application/pkix-crl":"crl","application/pkix-pkipath":"pkipath","application/pkixcmp":"pki","application/pls+xml":"pls","application/postscript":"ai","application/prs.cww":"cww","application/pskc+xml":"pskcxml","application/rdf+xml":"rdf","application/reginfo+xml":"rif","application/relax-ng-compact-syntax":"rnc","application/resource-lists+xml":"rl","application/resource-lists-diff+xml":"rld","application/rls-services+xml":"rs","application/rpki-ghostbusters":"gbr","application/rpki-manifest":"mft","application/rpki-roa":"roa","application/rsd+xml":"rsd","application/rss+xml":"rss","application/rtf":"rtf","application/sbml+xml":"sbml","application/scvp-cv-request":"scq","application/scvp-cv-response":"scs","application/scvp-vp-request":"spq","application/scvp-vp-response":"spp","application/sdp":"sdp","application/set-payment-initiation":"setpay","application/set-registration-initiation":"setreg","application/shf+xml":"shf","application/smil+xml":"smi","application/sparql-query":"rq","application/sparql-results+xml":"srx","application/srgs":"gram","application/srgs+xml":"grxml","application/sru+xml":"sru","application/ssdl+xml":"ssdl","application/ssml+xml":"ssml","application/tei+xml":"tei","application/thraud+xml":"tfi","application/timestamped-data":"tsd","application/vnd.3gpp.pic-bw-large":"plb","application/vnd.3gpp.pic-bw-small":"psb","application/vnd.3gpp.pic-bw-var":"pvb","application/vnd.3gpp2.tcap":"tcap","application/vnd.3m.post-it-notes":"pwn","application/vnd.accpac.simply.aso":"aso","application/vnd.accpac.simply.imp":"imp","application/vnd.acucobol":"acu","application/vnd.acucorp":"atc","application/vnd.adobe.air-application-installer-package+zip":"air","application/vnd.adobe.formscentral.fcdt":"fcdt","application/vnd.adobe.fxp":"fxp","application/vnd.adobe.xdp+xml":"xdp","application/vnd.adobe.xfdf":"xfdf","application/vnd.ahead.space":"ahead","application/vnd.airzip.filesecure.azf":"azf","application/vnd.airzip.filesecure.azs":"azs","application/vnd.amazon.ebook":"azw","application/vnd.americandynamics.acc":"acc","application/vnd.amiga.ami":"ami","application/vnd.android.package-archive":"apk","application/vnd.anser-web-certificate-issue-initiation":"cii","application/vnd.anser-web-funds-transfer-initiation":"fti","application/vnd.antix.game-component":"atx","application/vnd.apple.installer+xml":"mpkg","application/vnd.aristanetworks.swi":"swi","application/vnd.astraea-software.iota":"iota","application/vnd.audiograph":"aep","application/vnd.blueice.multipass":"mpm","application/vnd.bmi":"bmi","application/vnd.businessobjects":"rep","application/vnd.chemdraw+xml":"cdxml","application/vnd.chipnuts.karaoke-mmd":"mmd","application/vnd.cinderella":"cdy","application/vnd.claymore":"cla","application/vnd.cloanto.rp9":"rp9","application/vnd.clonk.c4group":"c4g","application/vnd.cluetrust.cartomobile-config":"c11amc","application/vnd.cluetrust.cartomobile-config-pkg":"c11amz","application/vnd.commonspace":"csp","application/vnd.contact.cmsg":"cdbcmsg","application/vnd.cosmocaller":"cmc","application/vnd.crick.clicker":"clkx","application/vnd.crick.clicker.keyboard":"clkk","application/vnd.crick.clicker.palette":"clkp","application/vnd.crick.clicker.template":"clkt","application/vnd.crick.clicker.wordbank":"clkw","application/vnd.criticaltools.wbs+xml":"wbs","application/vnd.ctc-posml":"pml","application/vnd.cups-ppd":"ppd","application/vnd.curl.car":"car","application/vnd.curl.pcurl":"pcurl","application/vnd.dart":"dart","application/vnd.data-vision.rdz":"rdz","application/vnd.dece.data":"uvf","application/vnd.dece.ttml+xml":"uvt","application/vnd.dece.unspecified":"uvx","application/vnd.dece.zip":"uvz","application/vnd.denovo.fcselayout-link":"fe_launch","application/vnd.dna":"dna","application/vnd.dolby.mlp":"mlp","application/vnd.dpgraph":"dpg","application/vnd.dreamfactory":"dfac","application/vnd.ds-keypoint":"kpxx","application/vnd.dvb.ait":"ait","application/vnd.dvb.service":"svc","application/vnd.dynageo":"geo","application/vnd.ecowin.chart":"mag","application/vnd.enliven":"nml","application/vnd.epson.esf":"esf","application/vnd.epson.msf":"msf","application/vnd.epson.quickanime":"qam","application/vnd.epson.salt":"slt","application/vnd.epson.ssf":"ssf","application/vnd.eszigno3+xml":"es3","application/vnd.ezpix-album":"ez2","application/vnd.ezpix-package":"ez3","application/vnd.fdf":"fdf","application/vnd.fdsn.mseed":"mseed","application/vnd.fdsn.seed":"seed","application/vnd.flographit":"gph","application/vnd.fluxtime.clip":"ftc","application/vnd.framemaker":"fm","application/vnd.frogans.fnc":"fnc","application/vnd.frogans.ltf":"ltf","application/vnd.fsc.weblaunch":"fsc","application/vnd.fujitsu.oasys":"oas","application/vnd.fujitsu.oasys2":"oa2","application/vnd.fujitsu.oasys3":"oa3","application/vnd.fujitsu.oasysgp":"fg5","application/vnd.fujitsu.oasysprs":"bh2","application/vnd.fujixerox.ddd":"ddd","application/vnd.fujixerox.docuworks":"xdw","application/vnd.fujixerox.docuworks.binder":"xbd","application/vnd.fuzzysheet":"fzs","application/vnd.genomatix.tuxedo":"txd","application/vnd.geogebra.file":"ggb","application/vnd.geogebra.tool":"ggt","application/vnd.geometry-explorer":"gex","application/vnd.geonext":"gxt","application/vnd.geoplan":"g2w","application/vnd.geospace":"g3w","application/vnd.gmx":"gmx","application/vnd.google-earth.kml+xml":"kml","application/vnd.google-earth.kmz":"kmz","application/vnd.grafeq":"gqf","application/vnd.groove-account":"gac","application/vnd.groove-help":"ghf","application/vnd.groove-identity-message":"gim","application/vnd.groove-injector":"grv","application/vnd.groove-tool-message":"gtm","application/vnd.groove-tool-template":"tpl","application/vnd.groove-vcard":"vcg","application/vnd.hal+xml":"hal","application/vnd.handheld-entertainment+xml":"zmm","application/vnd.hbci":"hbci","application/vnd.hhe.lesson-player":"les","application/vnd.hp-hpgl":"hpgl","application/vnd.hp-hpid":"hpid","application/vnd.hp-hps":"hps","application/vnd.hp-jlyt":"jlt","application/vnd.hp-pcl":"pcl","application/vnd.hp-pclxl":"pclxl","application/vnd.hydrostatix.sof-data":"sfd-hdstx","application/vnd.ibm.minipay":"mpy","application/vnd.ibm.modcap":"afp","application/vnd.ibm.rights-management":"irm","application/vnd.ibm.secure-container":"sc","application/vnd.iccprofile":"icc","application/vnd.igloader":"igl","application/vnd.immervision-ivp":"ivp","application/vnd.immervision-ivu":"ivu","application/vnd.insors.igm":"igm","application/vnd.intercon.formnet":"xpw","application/vnd.intergeo":"i2g","application/vnd.intu.qbo":"qbo","application/vnd.intu.qfx":"qfx","application/vnd.ipunplugged.rcprofile":"rcprofile","application/vnd.irepository.package+xml":"irp","application/vnd.is-xpr":"xpr","application/vnd.isac.fcs":"fcs","application/vnd.jam":"jam","application/vnd.jcp.javame.midlet-rms":"rms","application/vnd.jisp":"jisp","application/vnd.joost.joda-archive":"joda","application/vnd.kahootz":"ktz","application/vnd.kde.karbon":"karbon","application/vnd.kde.kchart":"chrt","application/vnd.kde.kformula":"kfo","application/vnd.kde.kivio":"flw","application/vnd.kde.kontour":"kon","application/vnd.kde.kpresenter":"kpr","application/vnd.kde.kspread":"ksp","application/vnd.kde.kword":"kwd","application/vnd.kenameaapp":"htke","application/vnd.kidspiration":"kia","application/vnd.kinar":"kne","application/vnd.koan":"skp","application/vnd.kodak-descriptor":"sse","application/vnd.las.las+xml":"lasxml","application/vnd.llamagraphics.life-balance.desktop":"lbd","application/vnd.llamagraphics.life-balance.exchange+xml":"lbe","application/vnd.lotus-1-2-3":123,"application/vnd.lotus-approach":"apr","application/vnd.lotus-freelance":"pre","application/vnd.lotus-notes":"nsf","application/vnd.lotus-organizer":"org","application/vnd.lotus-screencam":"scm","application/vnd.lotus-wordpro":"lwp","application/vnd.macports.portpkg":"portpkg","application/vnd.mcd":"mcd","application/vnd.medcalcdata":"mc1","application/vnd.mediastation.cdkey":"cdkey","application/vnd.mfer":"mwf","application/vnd.mfmp":"mfm","application/vnd.micrografx.flo":"flo","application/vnd.micrografx.igx":"igx","application/vnd.mif":"mif","application/vnd.mobius.daf":"daf","application/vnd.mobius.dis":"dis","application/vnd.mobius.mbk":"mbk","application/vnd.mobius.mqy":"mqy","application/vnd.mobius.msl":"msl","application/vnd.mobius.plc":"plc","application/vnd.mobius.txf":"txf","application/vnd.mophun.application":"mpn","application/vnd.mophun.certificate":"mpc","application/vnd.mozilla.xul+xml":"xul","application/vnd.ms-artgalry":"cil","application/vnd.ms-cab-compressed":"cab","application/vnd.ms-excel":"xls","application/vnd.ms-excel.addin.macroenabled.12":"xlam","application/vnd.ms-excel.sheet.binary.macroenabled.12":"xlsb","application/vnd.ms-excel.sheet.macroenabled.12":"xlsm","application/vnd.ms-excel.template.macroenabled.12":"xltm","application/vnd.ms-fontobject":"eot","application/vnd.ms-htmlhelp":"chm","application/vnd.ms-ims":"ims","application/vnd.ms-lrm":"lrm","application/vnd.ms-officetheme":"thmx","application/vnd.ms-pki.seccat":"cat","application/vnd.ms-pki.stl":"stl","application/vnd.ms-powerpoint":"ppt","application/vnd.ms-powerpoint.addin.macroenabled.12":"ppam","application/vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","application/vnd.ms-powerpoint.slide.macroenabled.12":"sldm","application/vnd.ms-powerpoint.slideshow.macroenabled.12":"ppsm","application/vnd.ms-powerpoint.template.macroenabled.12":"potm","application/vnd.ms-project":"mpp","application/vnd.ms-word.document.macroenabled.12":"docm","application/vnd.ms-word.template.macroenabled.12":"dotm","application/vnd.ms-works":"wps","application/vnd.ms-wpl":"wpl","application/vnd.ms-xpsdocument":"xps","application/vnd.mseq":"mseq","application/vnd.musician":"mus","application/vnd.muvee.style":"msty","application/vnd.mynfc":"taglet","application/vnd.neurolanguage.nlu":"nlu","application/vnd.nitf":"ntf","application/vnd.noblenet-directory":"nnd","application/vnd.noblenet-sealer":"nns","application/vnd.noblenet-web":"nnw","application/vnd.nokia.n-gage.data":"ngdat","application/vnd.nokia.n-gage.symbian.install":"n-gage","application/vnd.nokia.radio-preset":"rpst","application/vnd.nokia.radio-presets":"rpss","application/vnd.novadigm.edm":"edm","application/vnd.novadigm.edx":"edx","application/vnd.novadigm.ext":"ext","application/vnd.oasis.opendocument.chart":"odc","application/vnd.oasis.opendocument.chart-template":"otc","application/vnd.oasis.opendocument.database":"odb","application/vnd.oasis.opendocument.formula":"odf","application/vnd.oasis.opendocument.formula-template":"odft","application/vnd.oasis.opendocument.graphics":"odg","application/vnd.oasis.opendocument.graphics-template":"otg","application/vnd.oasis.opendocument.image":"odi","application/vnd.oasis.opendocument.image-template":"oti","application/vnd.oasis.opendocument.presentation":"odp","application/vnd.oasis.opendocument.presentation-template":"otp","application/vnd.oasis.opendocument.spreadsheet":"ods","application/vnd.oasis.opendocument.spreadsheet-template":"ots","application/vnd.oasis.opendocument.text":"odt","application/vnd.oasis.opendocument.text-master":"odm","application/vnd.oasis.opendocument.text-template":"ott","application/vnd.oasis.opendocument.text-web":"oth","application/vnd.olpc-sugar":"xo","application/vnd.oma.dd2+xml":"dd2","application/vnd.openofficeorg.extension":"oxt","application/vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","application/vnd.openxmlformats-officedocument.presentationml.slide":"sldx","application/vnd.openxmlformats-officedocument.presentationml.slideshow":"ppsx","application/vnd.openxmlformats-officedocument.presentationml.template":"potx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","application/vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","application/vnd.osgeo.mapguide.package":"mgp","application/vnd.osgi.dp":"dp","application/vnd.osgi.subsystem":"esa","application/vnd.palm":"pdb","application/vnd.pawaafile":"paw","application/vnd.pg.format":"str","application/vnd.pg.osasli":"ei6","application/vnd.picsel":"efif","application/vnd.pmi.widget":"wg","application/vnd.pocketlearn":"plf","application/vnd.powerbuilder6":"pbd","application/vnd.previewsystems.box":"box","application/vnd.proteus.magazine":"mgz","application/vnd.publishare-delta-tree":"qps","application/vnd.pvi.ptid1":"ptid","application/vnd.quark.quarkxpress":"qxd","application/vnd.realvnc.bed":"bed","application/vnd.recordare.musicxml":"mxl","application/vnd.recordare.musicxml+xml":"musicxml","application/vnd.rig.cryptonote":"cryptonote","application/vnd.rim.cod":"cod","application/vnd.rn-realmedia":"rm","application/vnd.rn-realmedia-vbr":"rmvb","application/vnd.route66.link66+xml":"link66","application/vnd.sailingtracker.track":"st","application/vnd.seemail":"see","application/vnd.sema":"sema","application/vnd.semd":"semd","application/vnd.semf":"semf","application/vnd.shana.informed.formdata":"ifm","application/vnd.shana.informed.formtemplate":"itp","application/vnd.shana.informed.interchange":"iif","application/vnd.shana.informed.package":"ipk","application/vnd.simtech-mindmapper":"twd","application/vnd.smaf":"mmf","application/vnd.smart.teacher":"teacher","application/vnd.solent.sdkm+xml":"sdkm","application/vnd.spotfire.dxp":"dxp","application/vnd.spotfire.sfs":"sfs","application/vnd.stardivision.calc":"sdc","application/vnd.stardivision.draw":"sda","application/vnd.stardivision.impress":"sdd","application/vnd.stardivision.math":"smf","application/vnd.stardivision.writer":"sdw","application/vnd.stardivision.writer-global":"sgl","application/vnd.stepmania.package":"smzip","application/vnd.stepmania.stepchart":"sm","application/vnd.sun.xml.calc":"sxc","application/vnd.sun.xml.calc.template":"stc","application/vnd.sun.xml.draw":"sxd","application/vnd.sun.xml.draw.template":"std","application/vnd.sun.xml.impress":"sxi","application/vnd.sun.xml.impress.template":"sti","application/vnd.sun.xml.math":"sxm","application/vnd.sun.xml.writer":"sxw","application/vnd.sun.xml.writer.global":"sxg","application/vnd.sun.xml.writer.template":"stw","application/vnd.sus-calendar":"sus","application/vnd.svd":"svd","application/vnd.symbian.install":"sis","application/vnd.syncml+xml":"xsm","application/vnd.syncml.dm+wbxml":"bdm","application/vnd.syncml.dm+xml":"xdm","application/vnd.tao.intent-module-archive":"tao","application/vnd.tcpdump.pcap":"pcap","application/vnd.tmobile-livetv":"tmo","application/vnd.trid.tpt":"tpt","application/vnd.triscape.mxs":"mxs","application/vnd.trueapp":"tra","application/vnd.ufdl":"ufd","application/vnd.uiq.theme":"utz","application/vnd.umajin":"umj","application/vnd.unity":"unityweb","application/vnd.uoml+xml":"uoml","application/vnd.vcx":"vcx","application/vnd.visio":"vsd","application/vnd.visionary":"vis","application/vnd.vsf":"vsf","application/vnd.wap.wbxml":"wbxml","application/vnd.wap.wmlc":"wmlc","application/vnd.wap.wmlscriptc":"wmlsc","application/vnd.webturbo":"wtb","application/vnd.wolfram.player":"nbp","application/vnd.wordperfect":"wpd","application/vnd.wqd":"wqd","application/vnd.wt.stf":"stf","application/vnd.xara":"xar","application/vnd.xfdl":"xfdl","application/vnd.yamaha.hv-dic":"hvd","application/vnd.yamaha.hv-script":"hvs","application/vnd.yamaha.hv-voice":"hvp","application/vnd.yamaha.openscoreformat":"osf","application/vnd.yamaha.openscoreformat.osfpvg+xml":"osfpvg","application/vnd.yamaha.smaf-audio":"saf","application/vnd.yamaha.smaf-phrase":"spf","application/vnd.yellowriver-custom-menu":"cmp","application/vnd.zul":"zir","application/vnd.zzazz.deck+xml":"zaz","application/voicexml+xml":"vxml","application/widget":"wgt","application/winhlp":"hlp","application/wsdl+xml":"wsdl","application/wspolicy+xml":"wspolicy","application/x-7z-compressed":"7z","application/x-abiword":"abw","application/x-ace-compressed":"ace","application/x-apple-diskimage":"dmg","application/x-authorware-bin":"aab","application/x-authorware-map":"aam","application/x-authorware-seg":"aas","application/x-bcpio":"bcpio","application/x-bittorrent":"torrent","application/x-blorb":"blb","application/x-bzip":"bz","application/x-cbr":"cbr","application/x-cdlink":"vcd","application/x-cfs-compressed":"cfs","application/x-chat":"chat","application/x-chess-pgn":"pgn","application/x-conference":"nsc","application/x-cpio":"cpio","application/x-csh":"csh","application/x-debian-package":"deb","application/x-dgc-compressed":"dgc","application/x-director":"dir","application/x-doom":"wad","application/x-dtbncx+xml":"ncx","application/x-dtbook+xml":"dtb","application/x-dtbresource+xml":"res","application/x-dvi":"dvi","application/x-envoy":"evy","application/x-eva":"eva","application/x-font-bdf":"bdf","application/x-font-ghostscript":"gsf","application/x-font-linux-psf":"psf","application/x-font-pcf":"pcf","application/x-font-snf":"snf","application/x-font-type1":"pfa","application/x-freearc":"arc","application/x-futuresplash":"spl","application/x-gca-compressed":"gca","application/x-glulx":"ulx","application/x-gnumeric":"gnumeric","application/x-gramps-xml":"gramps","application/x-gtar":"gtar","application/x-hdf":"hdf","application/x-install-instructions":"install","application/x-iso9660-image":"iso","application/x-java-jnlp-file":"jnlp","application/x-latex":"latex","application/x-lzh-compressed":"lzh","application/x-mie":"mie","application/x-mobipocket-ebook":"prc","application/x-ms-application":"application","application/x-ms-shortcut":"lnk","application/x-ms-wmd":"wmd","application/x-ms-wmz":"wmz","application/x-ms-xbap":"xbap","application/x-msaccess":"mdb","application/x-msbinder":"obd","application/x-mscardfile":"crd","application/x-msclip":"clp","application/x-msdownload":"dll","application/x-msmediaview":"mvb","application/x-msmetafile":"wmf","application/x-msmoney":"mny","application/x-mspublisher":"pub","application/x-msschedule":"scd","application/x-msterminal":"trm","application/x-mswrite":"wri","application/x-netcdf":"nc","application/x-nzb":"nzb","application/x-pkcs12":"p12","application/x-pkcs7-certificates":"p7b","application/x-pkcs7-certreqresp":"p7r","application/x-research-info-systems":"ris","application/x-shar":"shar","application/x-shockwave-flash":"swf","application/x-silverlight-app":"xap","application/x-sql":"sql","application/x-stuffit":"sit","application/x-stuffitx":"sitx","application/x-subrip":"srt","application/x-sv4cpio":"sv4cpio","application/x-sv4crc":"sv4crc","application/x-t3vm-image":"t3","application/x-tads":"gam","application/x-tar":"tar","application/x-tcl":"tcl","application/x-tex":"tex","application/x-tex-tfm":"tfm","application/x-texinfo":"texinfo","application/x-tgif":"obj","application/x-ustar":"ustar","application/x-wais-source":"src","application/x-x509-ca-cert":"der","application/x-xfig":"fig","application/x-xliff+xml":"xlf","application/x-xpinstall":"xpi","application/x-xz":"xz","application/x-zmachine":"z1","application/xaml+xml":"xaml","application/xcap-diff+xml":"xdf","application/xenc+xml":"xenc","application/xhtml+xml":"xhtml","application/xml":"xsl","application/xml-dtd":"dtd","application/xop+xml":"xop","application/xproc+xml":"xpl","application/xslt+xml":"xslt","application/xspf+xml":"xspf","application/xv+xml":"mxml","application/yang":"yang","application/yin+xml":"yin","application/zip":"zip","audio/adpcm":"adp","audio/basic":"au","audio/midi":"mid","audio/mp4":"m4a","audio/mpeg":"mpga","audio/ogg":"oga","audio/s3m":"s3m","audio/silk":"sil","audio/vnd.dece.audio":"uva","audio/vnd.digital-winds":"eol","audio/vnd.dra":"dra","audio/vnd.dts":"dts","audio/vnd.dts.hd":"dtshd","audio/vnd.lucent.voice":"lvp","audio/vnd.ms-playready.media.pya":"pya","audio/vnd.nuera.ecelp4800":"ecelp4800","audio/vnd.nuera.ecelp7470":"ecelp7470","audio/vnd.nuera.ecelp9600":"ecelp9600","audio/vnd.rip":"rip","audio/webm":"weba","audio/x-aac":"aac","audio/x-aiff":"aif","audio/x-caf":"caf","audio/x-flac":"flac","audio/x-matroska":"mka","audio/x-mpegurl":"m3u","audio/x-ms-wax":"wax","audio/x-ms-wma":"wma","audio/x-pn-realaudio":"ram","audio/x-pn-realaudio-plugin":"rmp","audio/xm":"xm","chemical/x-cdx":"cdx","chemical/x-cif":"cif","chemical/x-cmdf":"cmdf","chemical/x-cml":"cml","chemical/x-csml":"csml","chemical/x-xyz":"xyz","font/collection":"ttc","font/otf":"otf","font/ttf":"ttf","font/woff":"woff","font/woff2":"woff2","image/cgm":"cgm","image/g3fax":"g3","image/gif":"gif","image/ief":"ief","image/jpeg":"jpeg","image/ktx":"ktx","image/png":"png","image/prs.btif":"btif","image/sgi":"sgi","image/svg+xml":"svg","image/tiff":"tiff","image/vnd.adobe.photoshop":"psd","image/vnd.dece.graphic":"uvi","image/vnd.djvu":"djvu","image/vnd.dvb.subtitle":"sub","image/vnd.dwg":"dwg","image/vnd.dxf":"dxf","image/vnd.fastbidsheet":"fbs","image/vnd.fpx":"fpx","image/vnd.fst":"fst","image/vnd.fujixerox.edmics-mmr":"mmr","image/vnd.fujixerox.edmics-rlc":"rlc","image/vnd.ms-modi":"mdi","image/vnd.ms-photo":"wdp","image/vnd.net-fpx":"npx","image/vnd.wap.wbmp":"wbmp","image/vnd.xiff":"xif","image/webp":"webp","image/x-3ds":"3ds","image/x-cmu-raster":"ras","image/x-cmx":"cmx","image/x-freehand":"fh","image/x-icon":"ico","image/x-mrsid-image":"sid","image/x-pcx":"pcx","image/x-pict":"pic","image/x-portable-anymap":"pnm","image/x-portable-bitmap":"pbm","image/x-portable-graymap":"pgm","image/x-portable-pixmap":"ppm","image/x-rgb":"rgb","image/x-xpixmap":"xpm","image/x-xwindowdump":"xwd","message/rfc822":"eml","model/iges":"igs","model/mesh":"msh","model/vnd.collada+xml":"dae","model/vnd.dwf":"dwf","model/vnd.gdl":"gdl","model/vnd.gtw":"gtw","model/vnd.vtu":"vtu","model/vrml":"wrl","model/x3d+binary":"x3db","model/x3d+vrml":"x3dv","model/x3d+xml":"x3d","text/cache-manifest":"appcache","text/calendar":"ics","text/css":"css","text/csv":"csv","text/html":"html","text/n3":"n3","text/plain":"txt","text/prs.lines.tag":"dsc","text/richtext":"rtx","text/sgml":"sgml","text/tab-separated-values":"tsv","text/troff":"t","text/turtle":"ttl","text/uri-list":"uri","text/vcard":"vcard","text/vnd.curl":"curl","text/vnd.curl.dcurl":"dcurl","text/vnd.curl.mcurl":"mcurl","text/vnd.curl.scurl":"scurl","text/vnd.fly":"fly","text/vnd.fmi.flexstor":"flx","text/vnd.graphviz":"gv","text/vnd.in3d.3dml":"3dml","text/vnd.in3d.spot":"spot","text/vnd.sun.j2me.app-descriptor":"jad","text/vnd.wap.wml":"wml","text/vnd.wap.wmlscript":"wmls","text/x-asm":"s","text/x-c":"cc","text/x-fortran":"f","text/x-java-source":"java","text/x-nfo":"nfo","text/x-opml":"opml","text/x-pascal":"p","text/x-setext":"etx","text/x-sfv":"sfv","text/x-uuencode":"uu","text/x-vcalendar":"vcs","text/x-vcard":"vcf","video/3gpp":"3gp","video/3gpp2":"3g2","video/h261":"h261","video/h263":"h263","video/h264":"h264","video/jpeg":"jpgv","video/jpm":"jpm","video/mj2":"mj2","video/mp4":"mp4","video/mpeg":"mpeg","video/quicktime":"qt","video/vnd.dece.hd":"uvh","video/vnd.dece.mobile":"uvm","video/vnd.dece.pd":"uvp","video/vnd.dece.sd":"uvs","video/vnd.dece.video":"uvv","video/vnd.dvb.file":"dvb","video/vnd.fvt":"fvt","video/vnd.mpegurl":"mxu","video/vnd.ms-playready.media.pyv":"pyv","video/vnd.uvvu.mp4":"uvu","video/vnd.vivo":"viv","video/webm":"webm","video/x-f4v":"f4v","video/x-fli":"fli","video/x-flv":"flv","video/x-m4v":"m4v","video/x-matroska":"mkv","video/x-mng":"mng","video/x-ms-asf":"asf","video/x-ms-vob":"vob","video/x-ms-wmx":"wmx","video/x-ms-wvx":"wvx","video/x-msvideo":"avi","video/x-sgi-movie":"movie","video/x-smv":"smv","x-conference/x-cooltalk":"ice","text/x-sql":"sql","image/x-pixlr-data":"pxd","image/x-adobe-dng":"dng","image/x-sketch":"sketch","image/x-xcf":"xcf","audio/amr":"amr","image/vnd-ms.dds":"dds","application/plt":"plt","application/sat":"sat","application/step":"step","text/x-httpd-cgi":"cgi","text/x-asap":"asp","text/x-jsp":"jsp"},u.prototype._options={cdns:{ace:"https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.14",codemirror:"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2",ckeditor:"https://cdnjs.cloudflare.com/ajax/libs/ckeditor/4.17.2",ckeditor5:"https://cdn.ckeditor.com/ckeditor5/33.0.0",tinymce:"https://cdnjs.cloudflare.com/ajax/libs/tinymce/6.0.0",simplemde:"https://cdnjs.cloudflare.com/ajax/libs/simplemde/1.11.2",fabric:"https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.2.0",fabric16:"https://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.6.7",tui:"https://uicdn.toast.com",hls:"https://cdnjs.cloudflare.com/ajax/libs/hls.js/1.1.5/hls.min.js",dash:"https://cdnjs.cloudflare.com/ajax/libs/dashjs/4.3.0/dash.all.min.js",flv:"https://cdnjs.cloudflare.com/ajax/libs/flv.js/1.6.2/flv.min.js",videojs:"https://cdnjs.cloudflare.com/ajax/libs/video.js/7.18.1",prettify:"https://cdn.jsdelivr.net/gh/google/code-prettify@f1c3473acd1e8ea8c8c1a60c56e89f5cdd06f915/loader/run_prettify.js",psd:"https://cdnjs.cloudflare.com/ajax/libs/psd.js/3.4.0/psd.min.js",rar:"https://cdn.jsdelivr.net/gh/nao-pon/rar.js@6cef13ec66dd67992fc7f3ea22f132d770ebaf8b/rar.min.js",zlibUnzip:"https://cdn.jsdelivr.net/gh/imaya/zlib.js@0.3.1/bin/unzip.min.js",zlibGunzip:"https://cdn.jsdelivr.net/gh/imaya/zlib.js@0.3.1/bin/gunzip.min.js",bzip2:"https://cdn.jsdelivr.net/gh/nao-pon/bzip2.js@0.8.0/bzip2.js",marked:"https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.2/marked.min.js",sparkmd5:"https://cdnjs.cloudflare.com/ajax/libs/spark-md5/3.0.0/spark-md5.min.js",jssha:"https://cdnjs.cloudflare.com/ajax/libs/jsSHA/3.2.0/sha.min.js",amr:"https://cdn.jsdelivr.net/gh/yxl/opencore-amr-js@dcf3d2b5f384a1d9ded2a54e4c137a81747b222b/js/amrnb.js",tiff:"https://cdn.jsdelivr.net/gh/seikichi/tiff.js@545ede3ee46b5a5bc5f06d65954e775aa2a64017/tiff.min.js"},url:"",requestType:"get",cors:null,parrotHeaders:[],requestMaxConn:3,transport:{},urlUpload:"",dragUploadAllow:"auto",overwriteUploadConfirm:!0,uploadMaxChunkSize:10485760,folderUploadExclude:{win:/^(?:desktop\.ini|thumbs\.db)$/i,mac:/^\.ds_store$/i},iframeTimeout:0,customData:{},handlers:{},customHeaders:{},xhrFields:{},lang:"en",baseUrl:"/assets/backend/elfinder/",i18nBaseUrl:"",workerBaseUrl:"",cssAutoLoad:!0,themes:{},theme:null,maxErrorDialogs:5,cssClass:"",commands:["*"],commandsOptions:{getfile:{onlyURL:!1,multiple:!1,folders:!1,oncomplete:"",onerror:"",getPath:!0,getImgSize:!1},open:{method:"post",into:"window",selectAction:"open"},opennew:{url:"",useOriginQuery:!0},upload:{ui:"button"},download:{maxRequests:10,minFilesZipdl:2},quicklook:{autoplay:!0,width:450,height:300,mediaControlsList:"",pdfToolbar:!0,textInitialLines:100,prettifyMaxLines:300,contain:!1,docked:0,dockHeight:"auto",dockAutoplay:!1,googleMapsApiKey:"",googleMapsOpts:{maps:{},kml:{suppressInfoWindows:!1,preserveViewport:!1}},viewerjs:{url:"",mimes:["application/pdf","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation"],pdfNative:!0},sharecadMimes:[],googleDocsMimes:[],officeOnlineMimes:[],getDimThreshold:"200K",unzipMaxSize:"50M",mimeRegexNotEmptyCheck:/^application\/vnd\.google-apps\./},edit:{dialogWidth:void 0,dialogHeight:void 0,mimes:[],mkfileHideMimes:[],makeTextMimes:["text/plain","text/css","text/html"],useStoredEditor:!1,editorMaximized:!1,editors:[],encodings:["Big5","Big5-HKSCS","Cp437","Cp737","Cp775","Cp850","Cp852","Cp855","Cp857","Cp858","Cp862","Cp866","Cp874","EUC-CN","EUC-JP","EUC-KR","GB18030","ISO-2022-CN","ISO-2022-JP","ISO-2022-KR","ISO-8859-1","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-13","ISO-8859-15","KOI8-R","KOI8-U","Shift-JIS","Windows-1250","Windows-1251","Windows-1252","Windows-1253","Windows-1254","Windows-1257"],extraOptions:{uploadOpts:{},tuiImgEditOpts:{iconsPath:void 0,theme:{}},pixo:{apikey:""},managerUrl:null,ckeditor:{},ckeditor5:{mode:"decoupled-document"},tinymce:{},onlineConvert:{maxSize:100,showLink:!0}}},fullscreen:{mode:"screen"},search:{incsearch:{enable:!0,minlen:1,wait:500},searchTypes:{SearchMime:{name:"btnMime",title:"searchMime",incsearch:"mime"}}},info:{nullUrlDirLinkSelf:!0,hideItems:[],showHashMaxsize:104857600,showHashAlgorisms:["md5","sha256"],showHashOpts:{shake128len:256,shake256len:512},custom:{}},mkdir:{intoNewFolderToolbtn:!1},resize:{grid8px:"disable",presetSize:[[320,240],[400,400],[640,480],[800,600]],getDimThreshold:204800,dimSubImgSize:307200},rm:{quickTrash:!0,infoCheckWait:10,toTrashMaxItems:1e3},paste:{moveConfirm:!1},help:{view:["about","shortcuts","help","integrations","debug"],helpSource:""},preference:{width:600,height:400,categories:null,prefs:null,langs:null,selectActions:["open","edit/download","resize/edit/download","download","quicklook"]}},disabledCmdsRels:{get:["edit"],rm:["cut","empty"],"file&url=":["download","zipdl"]},bootCallback:null,getFileCallback:null,defaultView:"icons",startPathHash:"",sound:!0,ui:["toolbar","places","tree","path","stat"],uiOptions:{toolbar:[["home","back","forward","up","reload"],["netmount"],["mkdir","mkfile","upload"],["open","download","getfile"],["undo","redo"],["copy","cut","paste","rm","empty","hide"],["duplicate","rename","edit","resize","chmod"],["selectall","selectnone","selectinvert"],["quicklook","info"],["extract","archive"],["search"],["view","sort"],["preference","help"],["fullscreen"]],toolbarExtra:{displayTextLabel:!1,labelExcludeUA:["Mobile"],autoHideUA:["Mobile"],defaultHides:["home","reload"],showPreferenceButton:"none",preferenceInContextmenu:!0},tree:{attrTitle:!0,openRootOnLoad:!0,openCwdOnOpen:!0,syncTree:!0,subTreeMax:100,subdirsMaxConn:2,subdirsAtOnce:5,durations:{slideUpDown:"fast",autoScroll:"fast"}},navbar:{minWidth:150,maxWidth:500,autoHideUA:[]},navdock:{disabled:!1,initMaxHeight:"50%",maxHeight:"90%"},cwd:{oldSchool:!1,showSelectCheckboxUA:["Touch"],metakeyDragout:!0,listView:{columns:["perm","date","size","kind"],columnsCustomName:{},fixedHeader:!0},iconsView:{size:0,sizeMax:3,sizeNames:{0:"viewSmall",1:"viewMedium",2:"viewLarge",3:"viewExtraLarge"}}},path:{toWorkzoneWithoutNavbar:!0},dialog:{focusOnMouseOver:!0},toast:{animate:{showMethod:"fadeIn",showDuration:300,showEasing:"swing",timeOut:3e3,hideMethod:"fadeOut",hideDuration:1500,hideEasing:"swing"}}},dispInlineRegex:"^(?:(?:image|video|audio)|application/(?:x-mpegURL|dash+xml)|(?:text/plain|application/pdf)$)",onlyMimes:[],sortRules:{},sortType:"name",sortOrder:"asc",sortStickFolders:!0,sortAlsoTreeview:!1,clientFormatDate:!0,UTCDate:!1,dateFormat:"",fancyDateFormat:"",fileModeStyle:"both",width:"auto",height:400,noResizeBySelf:!1,heightBase:null,resizable:!0,notifyDelay:500,notifyDialog:{position:{},width:null,canClose:!1,hiddens:["open"]},dialogContained:!1,allowShortcuts:!0,rememberLastDir:!0,reloadClearHistory:!1,useBrowserHistory:!0,showFiles:50,showThreshold:50,validName:!1,fileFilter:!1,backupSuffix:"~",sync:0,syncStart:!0,loadTmbs:5,cookie:{expires:30,domain:"",path:"/",secure:!1,samesite:"lax"},contextmenu:{navbar:["open","opennew","download","|","upload","mkdir","|","copy","cut","paste","duplicate","|","rm","empty","hide","|","rename","|","archive","|","places","info","chmod","netunmount"],cwd:["undo","redo","|","back","up","reload","|","upload","mkdir","mkfile","paste","|","empty","hide","|","view","sort","selectall","colwidth","|","places","info","chmod","netunmount","|","fullscreen","|","preference"],files:["getfile","|","open","opennew","download","opendir","quicklook","|","upload","mkdir","|","copy","cut","paste","duplicate","|","rm","empty","hide","|","rename","edit","resize","|","archive","extract","|","selectall","selectinvert","|","places","info","chmod","netunmount"]},enableAlways:!1,enableByMouseOver:!0,windowCloseConfirm:["hasNotifyDialog","editingFile"],rawStringDecoder:"object"==typeof Encoding&&e.isFunction(Encoding.convert)?function(e){return Encoding.convert(e,{to:"UNICODE",type:"string"})}:null,debug:["error","warning","event-destroy"],toastBackendWarn:!0},u.prototype._options.commandsOptions.netmount={ftp:{name:"FTP",inputs:{host:e('<input type="text"/>'),port:e('<input type="number" placeholder="21" class="elfinder-input-optional"/>'),path:e('<input type="text" value="/"/>'),user:e('<input type="text"/>'),pass:e('<input type="password" autocomplete="new-password"/>'),FTPS:e('<input type="checkbox" value="1" title="File Transfer Protocol over SSL/TLS"/>'),encoding:e('<input type="text" placeholder="Optional" class="elfinder-input-optional"/>'),locale:e('<input type="text" placeholder="Optional" class="elfinder-input-optional"/>')}},dropbox2:u.prototype.makeNetmountOptionOauth("dropbox2","Dropbox","Dropbox",{noOffline:!0,root:"/",pathI18n:"path",integrate:{title:"Dropbox.com",link:"https://www.dropbox.com"}}),googledrive:u.prototype.makeNetmountOptionOauth("googledrive","Google Drive","Google",{integrate:{title:"Google Drive",link:"https://www.google.com/drive/"}}),onedrive:u.prototype.makeNetmountOptionOauth("onedrive","One Drive","OneDrive",{integrate:{title:"Microsoft OneDrive",link:"https://onedrive.live.com"}}),box:u.prototype.makeNetmountOptionOauth("box","Box","Box",{noOffline:!0,integrate:{title:"Box.com",link:"https://www.box.com"}})},u.prototype.history=function(t){var i,n=this,a=!0,o=[],s=function(){o=[t.cwd().hash],i=0,a=!0},r=t.options.useBrowserHistory&&window.history&&window.history.pushState?window.history:null,l=function(r){return r&&n.canForward()||!r&&n.canBack()?(a=!1,t.exec("open",o[r?++i:--i]).fail(s)):e.Deferred().reject()},c=function(e){!r||r.state&&r.state.thash===e||r.pushState({thash:e},null,location.pathname+location.search+(e?"#elf_"+e:""))};this.canBack=function(){return i>0},this.canForward=function(){return i<o.length-1},this.back=l,this.forward=function(){return l(!0)},t.bind("init",function(){r&&!r.state&&c(t.startDir())}).open(function(){var e=o.length,n=t.cwd().hash;a&&(i>=0&&e>i+1&&o.splice(i+1),o[o.length-1]!=n&&o.push(n),i=o.length-1),a=!0,c(n)}).reload(t.options.reloadClearHistory&&s)},u.prototype.command=function(t){this.fm=t,this.name="",this.dialogClass="",this.className="",this.title="",this.linkedCmds=[],this.state=-1,this.alwaysEnabled=!1,this.noChangeDirOnRemovedCwd=!1,this._disabled=!1,this.disableOnSearch=!1,this.updateOnSelect=!0,this.syncTitleOnChange=!1,this.keepContextmenu=!1,this._handlers={enable:function(){this.update(void 0,this.value)},disable:function(){this.update(-1,this.value)},"open reload load sync":function(){this._disabled=!(this.alwaysEnabled||this.fm.isCommandEnabled(this.name)),this.update(void 0,this.value),this.change()}},this.handlers={},this.shortcuts=[],this.options={ui:"button"},this.listeners=[],this.setup=function(t,i){var n,a,o,s=this,r=this.fm,l=function(t){var i=t.callback||function(e){r.exec(s.name,void 0,{_userAction:!0,_currentType:"shortcut"})};t.callback=function(t){var n,a={};s.enabled()&&(r.searchStatus.state<2?n=r.isCommandEnabled(s.name):(e.each(r.selected(),function(t,i){r.optionsByHashes[i]?a[i]=!0:e.each(r.volOptions,function(e){if(!a[e]&&0===i.indexOf(e))return a[e]=!0,!1})}),e.each(a,function(e){if(!(n=r.isCommandEnabled(s.name,e)))return!1})),n&&(s.event=t,i.call(s),delete s.event))}};for(this.name=t,this.title=r.messages["cmd"+t]?r.i18n("cmd"+t):this.extendsCmd&&r.messages["cmd"+this.extendsCmd]?r.i18n("cmd"+this.extendsCmd):t,this.options=Object.assign({},this.options,i),this.listeners=[],this.dialogClass="elfinder-dialog-"+t,i.shortcuts&&("function"==typeof i.shortcuts?o=i.shortcuts(this.fm,this.shortcuts):Array.isArray(i.shortcuts)&&(o=i.shortcuts),this.shortcuts=o||[]),this.updateOnSelect&&(this._handlers.select=function(){this.update(void 0,this.value)}),e.each(Object.assign({},s._handlers,s.handlers),function(t,i){r.bind(t,e.proxy(i,s))}),n=0;n<this.shortcuts.length;n++)l(a=this.shortcuts[n]),!a.description&&(a.description=this.title),r.shortcut(a);this.disableOnSearch&&r.bind("search searchend",function(){s._disabled="search"===this.type||!(this.alwaysEnabled||r.isCommandEnabled(t)),s.update(void 0,s.value)}),this.init()},this.init=function(){},this.exec=function(t,i){return e.Deferred().reject()},this.getUndo=function(e,t){return!1},this.disabled=function(){return this.state<0},this.enabled=function(){return this.state>-1},this.active=function(){return this.state>0},this.getstate=function(){return-1},this.update=function(e,t){var i=this.state,n=this.value;this._disabled&&0===this.fm.searchStatus?this.state=-1:this.state=void 0!==e?e:this.getstate(),this.value=t,i==this.state&&n==this.value||this.change()},this.change=function(e){var t,i;if("function"==typeof e)this.listeners.push(e);else for(i=0;i<this.listeners.length;i++){t=this.listeners[i];try{t(this.state,this.value)}catch(e){this.fm.debug("error",e)}}return this},this.hashes=function(i){return i?e.grep(Array.isArray(i)?i:[i],function(e){return!!t.file(e)}):t.selected()},this.files=function(t){var i=this.fm;return t?e.map(Array.isArray(t)?t:[t],function(e){return i.file(e)||null}):i.selectedFiles()},this.fmDialog=function(e,t){return t.cssClass?t.cssClass+=" "+this.dialogClass:t.cssClass=this.dialogClass,this.fm.dialog(e,t)}},u.prototype.resources={class:{hover:"ui-state-hover",active:"ui-state-active",disabled:"ui-state-disabled",draggable:"ui-draggable",droppable:"ui-droppable",adroppable:"elfinder-droppable-active",cwdfile:"elfinder-cwd-file",cwd:"elfinder-cwd",tree:"elfinder-tree",treeroot:"elfinder-navbar-root",navdir:"elfinder-navbar-dir",navdirwrap:"elfinder-navbar-dir-wrapper",navarrow:"elfinder-navbar-arrow",navsubtree:"elfinder-navbar-subtree",navcollapse:"elfinder-navbar-collapsed",navexpand:"elfinder-navbar-expanded",treedir:"elfinder-tree-dir",placedir:"elfinder-place-dir",searchbtn:"elfinder-button-search",editing:"elfinder-to-editing",preventback:"elfinder-prevent-back",tabstab:"ui-state-default ui-tabs-tab ui-corner-top ui-tab",tabsactive:"ui-tabs-active ui-state-active"},tpl:{perms:'<span class="elfinder-perms"></span>',lock:'<span class="elfinder-lock"></span>',symlink:'<span class="elfinder-symlink"></span>',navicon:'<span class="elfinder-nav-icon"></span>',navspinner:'<span class="elfinder-spinner elfinder-navbar-spinner"></span>',navdir:'<div class="elfinder-navbar-wrapper{root}"><span id="{id}" class="ui-corner-all elfinder-navbar-dir {cssclass}"{title}><span class="elfinder-navbar-arrow"></span><span class="elfinder-navbar-icon" {style}></span>{symlink}{permissions}{name}</span><div class="elfinder-navbar-subtree" style="display:none"></div></div>',placedir:'<div class="elfinder-navbar-wrapper"><span id="{id}" class="ui-corner-all elfinder-navbar-dir {cssclass}"{title}><span class="elfinder-navbar-arrow"></span><span class="elfinder-navbar-icon" {style}></span>{symlink}{permissions}{name}</span><div class="elfinder-navbar-subtree" style="display:none"></div></div>'},mimes:{text:["application/dash+xml","application/docbook+xml","application/javascript","application/json","application/plt","application/sat","application/sql","application/step","application/vnd.hp-hpgl","application/x-awk","application/x-config","application/x-csh","application/x-empty","application/x-mpegurl","application/x-perl","application/x-php","application/x-web-config","application/xhtml+xml","application/xml","audio/x-mp3-playlist","image/cgm","image/svg+xml","image/vnd.dxf","model/iges"]},mixin:{make:function(){var t,i,n,a,o,s,r,l,c,d,u=this,h=this.fm,p=this.name,f=this.requestCmd||p,m=h.getUI("workzone"),g=this.origin&&"navbar"===this.origin?"tree":"cwd",v="tree"===g,b=v?"navHash2Elm":"cwdHash2Elm",y=!v&&"list"!=h.storage("view"),w=h.selected(),x=this.move||!1,k=m.hasClass("elfinder-cwd-wrapper-empty"),C=function(){requestAnimationFrame(function(){P&&P.trigger("blur")})},_=function(){E.is(":hidden")||E.elfinderoverlay("hide").off("click close",j),i&&(n.removeClass("ui-front").css("position","").off("unselect."+h.namespace,C),y?i&&i.css("max-height",""):v||n.css("width","").parent("td").css("overflow",""))},T=e.Deferred().fail(function(e){s&&o.attr("class",s),k&&m.addClass("elfinder-cwd-wrapper-empty"),w&&(x&&h.trigger("unlockfiles",{files:w}),h.clipboard([]),h.trigger("selectfiles",{files:w})),e&&h.error(e)}).always(function(){_(),O(),h.enable().unbind("open",N).trigger("resMixinMake")}),D="tmp_"+parseInt(1e5*Math.random()),z=this.data&&this.data.target?this.data.target:v?h.file(w[0]).hash:h.cwd().hash,A=new Date,S={hash:D,phash:z,name:h.uniqueName(this.prefix,z),mime:this.mime,read:!0,write:!0,date:"Today "+A.getHours()+":"+A.getMinutes(),move:x},I=(h.getUI(g).trigger("create."+h.namespace,S),this.data||{}),M=h[b](D),E=h.getUI("overlay"),O=function(){M&&M.length&&(P.off(),M.hide(),h.unselectfiles({files:[D]}).unbind("resize",H),requestAnimationFrame(function(){v?M.closest(".elfinder-navbar-wrapper").remove():M.remove()}))},j=function(e){E.is(":hidden")||n.css("z-index",""),U||(O(),T.reject(),e&&(e.stopPropagation(),e.preventDefault()))},P=e(y?"<textarea></textarea>":'<input type="text"/>').on("keyup text",function(){y?(this.style.height="1px",this.style.height=this.scrollHeight+"px"):t&&(this.style.width=t+"px",this.scrollWidth>t&&(this.style.width=this.scrollWidth+10+"px"))}).on("keydown",function(t){t.stopImmediatePropagation(),t.keyCode==e.ui.keyCode.ESCAPE?T.reject():t.keyCode==e.ui.keyCode.ENTER&&(t.preventDefault(),P.trigger("blur"))}).on("mousedown click dblclick",function(e){e.stopPropagation(),"dblclick"===e.type&&e.preventDefault()}).on("blur",function(){var t,i=e.trim(P.val()),o=P.parent(),s=!0;if(E.is(":hidden")||n.css("z-index",""),""===i)return j();if(!U&&o.length){if(h.options.validName&&h.options.validName.test)try{s=h.options.validName.test(i)}catch(e){s=!1}if(!i||"."===i||".."===i||!s)return U=!0,h.error("directory"===S.mime?"errInvDirname":"errInvName",{modal:!0,close:function(){setTimeout(F,120)}}),!1;if(h.fileByName(i,z))return U=!0,h.error(["errExists",i],{modal:!0,close:function(){setTimeout(F,120)}}),!1;t=w&&x?h.exec("cut",w):null,e.when(t).done(function(){var t={},n={};_(),P.hide().before(e("<span>").text(i)),h.lockfiles({files:[D]}),h.request({data:Object.assign({cmd:f,name:i,target:z},I||{}),notify:{type:f,cnt:1},preventFail:!0,syncOnFail:!0,navigate:{toast:t}}).fail(function(t){h.unlockfiles({files:[D]}),U=!0,P.show().prev().remove(),h.error(t,{modal:!0,close:function(){Array.isArray(t)&&-1!==e.inArray("errUploadMime",t)?T.notify("errUploadMime").reject():setTimeout(F,120)}})}).done(function(i){if(i&&i.added&&i.added[0]){var o,s=i.added[0],r=s.hash,l=(h[b](r),{directory:{cmd:"open",msg:"cmdopendir"},text:{cmd:"edit",msg:"cmdedit"},default:{cmd:"open",msg:"cmdopen"}});w&&x&&h.one(f+"done",function(){h.exec("paste",r)}),x||(h.mimeIsText(s.mime)&&!h.mimesCanMakeEmpty[s.mime]&&h.mimeTypes[s.mime]&&(h.trigger("canMakeEmptyFile",{mimes:[s.mime],unshift:!0}),(o={})[s.mime]=h.mimeTypes[s.mime],h.storage("mkfileTextMimes",Object.assign(o,h.storage("mkfileTextMimes")||{}))),Object.assign(n,a||l[s.mime]||l[s.mime.split("/")[0]]||l[h.mimesCanMakeEmpty[s.mime]||-1!==e.inArray(s.mime,h.resources.mimes.text)?"text":"none"]||l.default),Object.assign(t,n.cmd?{incwd:{msg:h.i18n(["complete",h.i18n("cmd"+p)]),action:n},inbuffer:{msg:h.i18n(["complete",h.i18n("cmd"+p)]),action:n}}:{inbuffer:{msg:h.i18n(["complete",h.i18n("cmd"+p)])}}))}T.resolve(i)})}).fail(function(){T.reject()})}}).on("dragenter dragleave dragover drop",function(e){e.stopPropagation()}),F=function(){var e=h.splitFileExtention(P.val())[0];U||!h.UA.Mobile||h.UA.iOS||(E.on("click close",j).elfinderoverlay("show"),n.css("z-index",E.css("z-index")+1)),U=!1,!h.enabled()&&h.enable(),P.trigger("focus").trigger("select"),P[0].setSelectionRange&&P[0].setSelectionRange(0,e.length)},H=function(){M.trigger("scrolltoview",{blink:!1})},N=function(){T&&"pending"===T.state()&&T.reject()},U=!1;return h.isCommandEnabled(f,z)&&M.length?(e.isPlainObject(u.nextAction)&&(a=Object.assign({},u.nextAction)),v?(o=h[b](z),r=h.res("class","navcollapse"),l=h.res("class","navexpand"),c=h.res("class","navarrow"),d=h.res("class","navsubtree"),M.closest("."+d).show(),o.hasClass(r)||(s=o.attr("class"),o.addClass(r+" "+l+" elfinder-subtree-loaded")),o.is("."+r+":not(."+l+")")&&o.children("."+c).trigger("click").data("dfrd").done(function(){P.val()===S.name&&P.val(h.uniqueName(u.prefix,z)).trigger("select").trigger("focus")}),i=M.contents().filter(function(){return 3==this.nodeType&&e(this).parent().attr("id")===h.navHash2Id(S.hash)}),n=i.parent(),i.replaceWith(P.val(S.name))):(k&&m.removeClass("elfinder-cwd-wrapper-empty"),i=M.find(".elfinder-cwd-filename"),n=i.parent(),y?i.css("max-height","none"):(t=n.width(),n.width(t-15).parent("td").css("overflow","visible")),i.empty().append(P.val(S.name))),n.addClass("ui-front").css("position","relative").on("unselect."+h.namespace,C),h.bind("resize",H).one("open",N),P.trigger("keyup"),F(),T):T.reject()}},blink:function(e,t){var i,n={slowonce:function(){e.hide().delay(250).fadeIn(750).delay(500).fadeOut(3500)},lookme:function(){e.show().fadeOut(500).fadeIn(750)}};i=n[t=t||"slowonce"]||n.lookme,e.stop(!0,!0),i()}},e.fn.dialogelfinder=function(t,i){var n,a,o="elfinderPosition",s="elfinderDestroyOnClose";if(e.isPlainObject(t))this.not(".elfinder").each(function(){t.handlers=t.handlers||{};var n,a=e(this),r=(e(document),e('<div class="ui-widget-header dialogelfinder-drag ui-corner-top">'+(t.title||"Files")+"</div>")),l=(e('<a href="#" class="dialogelfinder-drag-close ui-corner-all"><span class="ui-icon ui-icon-closethick"> </span></a>').appendTo(r).on("click",function(e){e.preventDefault(),a.dialogelfinder("close")}),t.handlers.init);t.handlers.init=function(e,t){a.prepend(r),l&&l(e,t)},(n=a.addClass("elfinder dialogelfinder touch-punch").css("position","absolute").hide().appendTo("body").draggable({handle:".dialogelfinder-drag",containment:"window",stop:function(){a.trigger("resize"),n.trigger("resize")}}).elfinder(t,i).elfinder("instance")).reloadCallback=function(e,t){n.destroy(),e.handlers.init=l,a.dialogelfinder(e,t).dialogelfinder("open")},a.width(parseInt(a.width())||840).data(s,!!t.destroyOnClose).find(".elfinder-toolbar").removeClass("ui-corner-top"),t.position&&a.data(o,t.position),!1!==t.autoOpen&&e(this).dialogelfinder("open")});else if("open"===t)a=(n=e(this)).data(o)||{top:parseInt(e(document).scrollTop()+(e(window).height()<n.height()?2:(e(window).height()-n.height())/2)),left:parseInt(e(document).scrollLeft()+(e(window).width()<n.width()?2:(e(window).width()-n.width())/2))},n.is(":hidden")&&(n.addClass("ui-front").css(a).show().trigger("resize"),setTimeout(function(){n.trigger("resize").trigger("mousedown")},200));else if("close"===t)(n=e(this).removeClass("ui-front")).is(":visible")&&(n.data(s)?n.elfinder("destroy").remove():n.elfinder("close"));else if("instance"===t)return e(this).getElFinder();return this},"function"==typeof u&&u.prototype.i18&&(u.prototype.i18.en={translator:"Troex Nevelin &lt;troex@fury.scancode.ru&gt;, Naoki Sawada &lt;hypweb+elfinder@gmail.com&gt;",language:"English",direction:"ltr",dateFormat:"M d, Y h:i A",fancyDateFormat:"$1 h:i A",nonameDateFormat:"ymd-His",messages:{error:"Error",errUnknown:"Unknown error.",errUnknownCmd:"Unknown command.",errJqui:"Invalid jQuery UI configuration. Selectable, draggable and droppable components must be included.",errNode:"elFinder requires DOM Element to be created.",errURL:"Invalid elFinder configuration! URL option is not set.",errAccess:"Access denied.",errConnect:"Unable to connect to backend.",errAbort:"Connection aborted.",errTimeout:"Connection timeout.",errNotFound:"Backend not found.",errResponse:"Invalid backend response.",errConf:"Invalid backend configuration.",errJSON:"PHP JSON module not installed.",errNoVolumes:"Readable volumes not available.",errCmdParams:'Invalid parameters for command "$1".',errDataNotJSON:"Data is not JSON.",errDataEmpty:"Data is empty.",errCmdReq:"Backend request requires command name.",errOpen:'Unable to open "$1".',errNotFolder:"Object is not a folder.",errNotFile:"Object is not a file.",errRead:'Unable to read "$1".',errWrite:'Unable to write into "$1".',errPerm:"Permission denied.",errLocked:'"$1" is locked and can not be renamed, moved or removed.',errExists:'Item named "$1" already exists.',errInvName:"Invalid file name.",errInvDirname:"Invalid folder name.",errFolderNotFound:"Folder not found.",errFileNotFound:"File not found.",errTrgFolderNotFound:'Target folder "$1" not found.',errPopup:"Browser prevented opening popup window. To open file enable it in browser options.",errMkdir:'Unable to create folder "$1".',errMkfile:'Unable to create file "$1".',errRename:'Unable to rename "$1".',errCopyFrom:'Copying files from volume "$1" not allowed.',errCopyTo:'Copying files to volume "$1" not allowed.',errMkOutLink:"Unable to create a link to outside the volume root.",errUpload:"Upload error.",errUploadFile:'Unable to upload "$1".',errUploadNoFiles:"No files found for upload.",errUploadTotalSize:"Data exceeds the maximum allowed size.",errUploadFileSize:"File exceeds maximum allowed size.",errUploadMime:"File type not allowed.",errUploadTransfer:'"$1" transfer error.',errUploadTemp:"Unable to make temporary file for upload.",errNotReplace:'Object "$1" already exists at this location and can not be replaced by object with another type.',errReplace:'Unable to replace "$1".',errSave:'Unable to save "$1".',errCopy:'Unable to copy "$1".',errMove:'Unable to move "$1".',errCopyInItself:'Unable to copy "$1" into itself.',errRm:'Unable to remove "$1".',errTrash:"Unable into trash.",errRmSrc:"Unable remove source file(s).",errExtract:'Unable to extract files from "$1".',errArchive:"Unable to create archive.",errArcType:"Unsupported archive type.",errNoArchive:"File is not archive or has unsupported archive type.",errCmdNoSupport:"Backend does not support this command.",errReplByChild:'The folder "$1" can\'t be replaced by an item it contains.',errArcSymlinks:"For security reason denied to unpack archives contains symlinks or files with not allowed names.",errArcMaxSize:"Archive files exceeds maximum allowed size.",errResize:'Unable to resize "$1".',errResizeDegree:"Invalid rotate degree.",errResizeRotate:"Unable to rotate image.",errResizeSize:"Invalid image size.",errResizeNoChange:"Image size not changed.",errUsupportType:"Unsupported file type.",errNotUTF8Content:'File "$1" is not in UTF-8 and cannot be edited.',errNetMount:'Unable to mount "$1".',errNetMountNoDriver:"Unsupported protocol.",errNetMountFailed:"Mount failed.",errNetMountHostReq:"Host required.",errSessionExpires:"Your session has expired due to inactivity.",errCreatingTempDir:'Unable to create temporary directory: "$1"',errFtpDownloadFile:'Unable to download file from FTP: "$1"',errFtpUploadFile:'Unable to upload file to FTP: "$1"',errFtpMkdir:'Unable to create remote directory on FTP: "$1"',errArchiveExec:'Error while archiving files: "$1"',errExtractExec:'Error while extracting files: "$1"',errNetUnMount:"Unable to unmount.",errConvUTF8:"Not convertible to UTF-8",errFolderUpload:"Try the modern browser, If you'd like to upload the folder.",errSearchTimeout:'Timed out while searching "$1". Search result is partial.',errReauthRequire:"Re-authorization is required.",errMaxTargets:"Max number of selectable items is $1.",errRestore:"Unable to restore from the trash. Can't identify the restore destination.",errEditorNotFound:"Editor not found to this file type.",errServerError:"Error occurred on the server side.",errEmpty:'Unable to empty folder "$1".',moreErrors:"There are $1 more errors.",errMaxMkdirs:"You can create up to $1 folders at one time.",cmdarchive:"Create archive",cmdback:"Back",cmdcopy:"Copy",cmdcut:"Cut",cmddownload:"Download",cmdduplicate:"Duplicate",cmdedit:"Edit file",cmdextract:"Extract files from archive",cmdforward:"Forward",cmdgetfile:"Select files",cmdhelp:"Abouts",cmdhome:"Root",cmdinfo:"Get info",cmdmkdir:"New folder",cmdmkdirin:"Into New Folder",cmdmkfile:"New file",cmdopen:"Open",cmdpaste:"Paste",cmdquicklook:"Preview",cmdreload:"Reload",cmdrename:"Rename",cmdrm:"Delete",cmdtrash:"Into trash",cmdrestore:"Restore",cmdsearch:"Find files",cmdup:"Go to parent folder",cmdupload:"Upload files",cmdview:"View",cmdresize:"Resize & Rotate",cmdsort:"Sort",cmdnetmount:"Mount network volume",cmdnetunmount:"Unmount",cmdplaces:"To Places",cmdchmod:"Change mode",cmdopendir:"Open a folder",cmdcolwidth:"Reset column width",cmdfullscreen:"Full Screen",cmdmove:"Move",cmdempty:"Empty the folder",cmdundo:"Undo",cmdredo:"Redo",cmdpreference:"Preferences",cmdselectall:"Select all",cmdselectnone:"Select none",cmdselectinvert:"Invert selection",cmdopennew:"Open in new window",cmdhide:"Hide (Preference)",btnClose:"Close",btnSave:"Save",btnRm:"Remove",btnApply:"Apply",btnCancel:"Cancel",btnNo:"No",btnYes:"Yes",btnMount:"Mount",btnApprove:"Goto $1 & approve",btnUnmount:"Unmount",btnConv:"Convert",btnCwd:"Here",btnVolume:"Volume",btnAll:"All",btnMime:"MIME Type",btnFileName:"Filename",btnSaveClose:"Save & Close",btnBackup:"Backup",btnRename:"Rename",btnRenameAll:"Rename(All)",btnPrevious:"Prev ($1/$2)",btnNext:"Next ($1/$2)",btnSaveAs:"Save As",ntfopen:"Open folder",ntffile:"Open file",ntfreload:"Reload folder content",ntfmkdir:"Creating folder",ntfmkfile:"Creating files",ntfrm:"Delete items",ntfcopy:"Copy items",ntfmove:"Move items",ntfprepare:"Checking existing items",ntfrename:"Rename files",ntfupload:"Uploading files",ntfdownload:"Downloading files",ntfsave:"Save files",ntfarchive:"Creating archive",ntfextract:"Extracting files from archive",ntfsearch:"Searching files",ntfresize:"Resizing images",ntfsmth:"Doing something",ntfloadimg:"Loading image",ntfnetmount:"Mounting network volume",ntfnetunmount:"Unmounting network volume",ntfdim:"Acquiring image dimension",ntfreaddir:"Reading folder infomation",ntfurl:"Getting URL of link",ntfchmod:"Changing file mode",ntfpreupload:"Verifying upload file name",ntfzipdl:"Creating a file for download",ntfparents:"Getting path infomation",ntfchunkmerge:"Processing the uploaded file",ntftrash:"Doing throw in the trash",ntfrestore:"Doing restore from the trash",ntfchkdir:"Checking destination folder",ntfundo:"Undoing previous operation",ntfredo:"Redoing previous undone",ntfchkcontent:"Checking contents",volume_Trash:"Trash",dateUnknown:"unknown",Today:"Today",Yesterday:"Yesterday",msJan:"Jan",msFeb:"Feb",msMar:"Mar",msApr:"Apr",msMay:"May",msJun:"Jun",msJul:"Jul",msAug:"Aug",msSep:"Sep",msOct:"Oct",msNov:"Nov",msDec:"Dec",January:"January",February:"February",March:"March",April:"April",May:"May",June:"June",July:"July",August:"August",September:"September",October:"October",November:"November",December:"December",Sunday:"Sunday",Monday:"Monday",Tuesday:"Tuesday",Wednesday:"Wednesday",Thursday:"Thursday",Friday:"Friday",Saturday:"Saturday",Sun:"Sun",Mon:"Mon",Tue:"Tue",Wed:"Wed",Thu:"Thu",Fri:"Fri",Sat:"Sat",sortname:"by name",sortkind:"by kind",sortsize:"by size",sortdate:"by date",sortFoldersFirst:"Folders first",sortperm:"by permission",sortmode:"by mode",sortowner:"by owner",sortgroup:"by group",sortAlsoTreeview:"Also Treeview","untitled file.txt":"NewFile.txt","untitled folder":"NewFolder",Archive:"NewArchive","untitled file":"NewFile.$1",extentionfile:"$1: File",extentiontype:"$1: $2",confirmReq:"Confirmation required",confirmRm:"Are you sure you want to permanently remove items?<br/>This cannot be undone!",confirmRepl:"Replace old file with new one? (If it contains folders, it will be merged. To backup and replace, select Backup.)",confirmRest:"Replace existing item with the item in trash?",confirmConvUTF8:"Not in UTF-8<br/>Convert to UTF-8?<br/>Contents become UTF-8 by saving after conversion.",confirmNonUTF8:"Character encoding of this file couldn't be detected. It need to temporarily convert to UTF-8 for editting.<br/>Please select character encoding of this file.",confirmNotSave:"It has been modified.<br/>Losing work if you do not save changes.",confirmTrash:"Are you sure you want to move items to trash bin?",confirmMove:'Are you sure you want to move items to "$1"?',apllyAll:"Apply to all",name:"Name",size:"Size",perms:"Permissions",modify:"Modified",kind:"Kind",read:"read",write:"write",noaccess:"no access",and:"and",unknown:"unknown",selectall:"Select all items",selectfiles:"Select item(s)",selectffile:"Select first item",selectlfile:"Select last item",viewlist:"List view",viewicons:"Icons view",viewSmall:"Small icons",viewMedium:"Medium icons",viewLarge:"Large icons",viewExtraLarge:"Extra large icons",places:"Places",calc:"Calculate",path:"Path",aliasfor:"Alias for",locked:"Locked",dim:"Dimensions",files:"Files",folders:"Folders",items:"Items",yes:"yes",no:"no",link:"Link",searcresult:"Search results",selected:"selected items",about:"About",shortcuts:"Shortcuts",help:"Help",webfm:"File manager",ver:"Version",protocolver:"protocol version",homepage:"Project home",docs:"Documentation",github:"Fork us on GitHub",twitter:"Follow us on Twitter",facebook:"Join us on Facebook",team:"Team",chiefdev:"chief developer",developer:"developer",contributor:"contributor",maintainer:"maintainer",translator:"translator",icons:"Icons",dontforget:"and don't forget to take your towel",shortcutsof:"Shortcuts disabled",dropFiles:"Drop files here",or:"or",selectForUpload:"Select files",moveFiles:"Move items",copyFiles:"Copy items",restoreFiles:"Restore items",rmFromPlaces:"Remove from places",aspectRatio:"Aspect ratio",scale:"Scale",width:"Width",height:"Height",resize:"Resize",crop:"Crop",rotate:"Rotate","rotate-cw":"Rotate 90 degrees CW","rotate-ccw":"Rotate 90 degrees CCW",degree:"Â°",netMountDialogTitle:"Mount network volume",protocol:"Protocol",host:"Host",port:"Port",user:"User",pass:"Password",confirmUnmount:"Are you sure to unmount $1?",dropFilesBrowser:"Drop or Paste files from browser",dropPasteFiles:"Drop files, Paste URLs or images(clipboard) here",encoding:"Encoding",locale:"Locale",searchTarget:"Target: $1",searchMime:"Search by input MIME Type",owner:"Owner",group:"Group",other:"Other",execute:"Execute",perm:"Permission",mode:"Mode",emptyFolder:"Folder is empty",emptyFolderDrop:"Folder is empty\\A Drop to add items",emptyFolderLTap:"Folder is empty\\A Long tap to add items",quality:"Quality",autoSync:"Auto sync",moveUp:"Move up",getLink:"Get URL link",selectedItems:"Selected items ($1)",folderId:"Folder ID",offlineAccess:"Allow offline access",reAuth:"To re-authenticate",nowLoading:"Now loading...",openMulti:"Open multiple files",openMultiConfirm:"You are trying to open the $1 files. Are you sure you want to open in browser?",emptySearch:"Search results is empty in search target.",editingFile:"It is editing a file.",hasSelected:"You have selected $1 items.",hasClipboard:"You have $1 items in the clipboard.",incSearchOnly:"Incremental search is only from the current view.",reinstate:"Reinstate",complete:"$1 complete",contextmenu:"Context menu",pageTurning:"Page turning",volumeRoots:"Volume roots",reset:"Reset",bgcolor:"Background color",colorPicker:"Color picker","8pxgrid":"8px Grid",enabled:"Enabled",disabled:"Disabled",emptyIncSearch:"Search results is empty in current view.\\A Press [Enter] to expand search target.",emptyLetSearch:"First letter search results is empty in current view.",textLabel:"Text label",minsLeft:"$1 mins left",openAsEncoding:"Reopen with selected encoding",saveAsEncoding:"Save with the selected encoding",selectFolder:"Select folder",firstLetterSearch:"First letter search",presets:"Presets",tooManyToTrash:"It's too many items so it can't into trash.",TextArea:"TextArea",folderToEmpty:'Empty the folder "$1".',filderIsEmpty:'There are no items in a folder "$1".',preference:"Preference",language:"Language",clearBrowserData:"Initialize the settings saved in this browser",toolbarPref:"Toolbar settings",charsLeft:"... $1 chars left.",linesLeft:"... $1 lines left.",sum:"Sum",roughFileSize:"Rough file size",autoFocusDialog:"Focus on the element of dialog with mouseover",select:"Select",selectAction:"Action when select file",useStoredEditor:"Open with the editor used last time",selectinvert:"Invert selection",renameMultiple:"Are you sure you want to rename $1 selected items like $2?<br/>This cannot be undone!",batchRename:"Batch rename",plusNumber:"+ Number",asPrefix:"Add prefix",asSuffix:"Add suffix",changeExtention:"Change extention",columnPref:"Columns settings (List view)",reflectOnImmediate:"All changes will reflect immediately to the archive.",reflectOnUnmount:"Any changes will not reflect until un-mount this volume.",unmountChildren:"The following volume(s) mounted on this volume also unmounted. Are you sure to unmount it?",selectionInfo:"Selection Info",hashChecker:"Algorithms to show the file hash",infoItems:"Info Items (Selection Info Panel)",pressAgainToExit:"Press again to exit.",toolbar:"Toolbar",workspace:"Work Space",dialog:"Dialog",all:"All",iconSize:"Icon Size (Icons view)",editorMaximized:"Open the maximized editor window",editorConvNoApi:"Because conversion by API is not currently available, please convert on the website.",editorConvNeedUpload:"After conversion, you must be upload with the item URL or a downloaded file to save the converted file.",convertOn:"Convert on the site of $1",integrations:"Integrations",integrationWith:"This elFinder has the following external services integrated. Please check the terms of use, privacy policy, etc. before using it.",showHidden:"Show hidden items",hideHidden:"Hide hidden items",toggleHidden:"Show/Hide hidden items",makefileTypes:'File types to enable with "New file"',typeOfTextfile:"Type of the Text file",add:"Add",theme:"Theme",default:"Default",description:"Description",website:"Website",author:"Author",email:"Email",license:"License",exportToSave:"This item can't be saved. To avoid losing the edits you need to export to your PC.",dblclickToSelect:"Double click on the file to select it.",useFullscreen:"Use fullscreen mode",kindUnknown:"Unknown",kindRoot:"Volume Root",kindFolder:"Folder",kindSelects:"Selections",kindAlias:"Alias",kindAliasBroken:"Broken alias",kindApp:"Application",kindPostscript:"Postscript document",kindMsOffice:"Microsoft Office document",kindMsWord:"Microsoft Word document",kindMsExcel:"Microsoft Excel document",kindMsPP:"Microsoft Powerpoint presentation",kindOO:"Open Office document",kindAppFlash:"Flash application",kindPDF:"Portable Document Format (PDF)",kindTorrent:"Bittorrent file",kind7z:"7z archive",kindTAR:"TAR archive",kindGZIP:"GZIP archive",kindBZIP:"BZIP archive",kindXZ:"XZ archive",kindZIP:"ZIP archive",kindRAR:"RAR archive",kindJAR:"Java JAR file",kindTTF:"True Type font",kindOTF:"Open Type font",kindRPM:"RPM package",kindText:"Text document",kindTextPlain:"Plain text",kindPHP:"PHP source",kindCSS:"Cascading style sheet",kindHTML:"HTML document",kindJS:"Javascript source",kindRTF:"Rich Text Format",kindC:"C source",kindCHeader:"C header source",kindCPP:"C++ source",kindCPPHeader:"C++ header source",kindShell:"Unix shell script",kindPython:"Python source",kindJava:"Java source",kindRuby:"Ruby source",kindPerl:"Perl script",kindSQL:"SQL source",kindXML:"XML document",kindAWK:"AWK source",kindCSV:"Comma separated values",kindDOCBOOK:"Docbook XML document",kindMarkdown:"Markdown text",kindImage:"Image",kindBMP:"BMP image",kindJPEG:"JPEG image",kindGIF:"GIF Image",kindPNG:"PNG Image",kindTIFF:"TIFF image",kindTGA:"TGA image",kindPSD:"Adobe Photoshop image",kindXBITMAP:"X bitmap image",kindPXM:"Pixelmator image",kindAudio:"Audio media",kindAudioMPEG:"MPEG audio",kindAudioMPEG4:"MPEG-4 audio",kindAudioMIDI:"MIDI audio",kindAudioOGG:"Ogg Vorbis audio",kindAudioWAV:"WAV audio",AudioPlaylist:"MP3 playlist",kindVideo:"Video media",kindVideoDV:"DV movie",kindVideoMPEG:"MPEG movie",kindVideoMPEG4:"MPEG-4 movie",kindVideoAVI:"AVI movie",kindVideoMOV:"Quick Time movie",kindVideoWM:"Windows Media movie",kindVideoFlash:"Flash movie",kindVideoMKV:"Matroska movie",kindVideoOGG:"Ogg movie"}}),e.fn.elfinderbutton=function(t){return this.each(function(){var i,n,a="class",o=t.fm,s=o.res(a,"disabled"),r=o.res(a,"active"),l=o.res(a,"hover"),c="elfinder-button-menu-item",d=e('<span class="elfinder-button-text">'+t.title+"</span>"),u=t.className?t.className:t.name,h=e(this).addClass("ui-state-default elfinder-button").attr("title",t.title).append('<span class="elfinder-button-icon elfinder-button-icon-'+u+'"></span>',d).on("mouseenter mouseleave",function(e){!h.hasClass(s)&&h["mouseleave"==e.type?"removeClass":"addClass"](l)}).on("click",function(e){h.hasClass(s)||(i&&t.variants.length>=1?(i.is(":hidden")&&o.getUI().click(),e.stopPropagation(),i.css(f()).slideToggle({duration:100,done:function(e){o[i.is(":visible")?"toFront":"toHide"](i)}})):o.exec(t.name,m(),{_userAction:!0,_currentType:"toolbar",_currentNode:h}))}),p=function(){o.toHide(i)},f=function(){var e=o.getUI(),t=e.offset(),i=h.offset();return{top:i.top-t.top,left:i.left-t.left,maxHeight:e.height()-40}},m=function(){var e=o.selected();return e.length||(e=o.cwd()?[o.cwd().hash]:void 0),e};d.hide(),t.button=h,Array.isArray(t.variants)&&(h.addClass("elfinder-menubutton"),i=e('<div class="ui-front ui-widget ui-widget-content elfinder-button-menu elfinder-button-'+u+'-menu ui-corner-all"></div>').hide().appendTo(o.getUI()).on("mouseenter mouseleave","."+c,function(){e(this).toggleClass(l)}).on("click","."+c,function(n){var a=e(this).data("value");n.preventDefault(),n.stopPropagation(),h.removeClass(l),o.toHide(i),void 0===a&&(a={}),"object"==typeof a&&(a._userAction=!0),o.exec(t.name,m(),a)}).on("close",p),o.bind("disable select",p).getUI().on("click",p),t.change(function(){i.html(""),e.each(t.variants,function(n,a){i.append(e('<div class="'+c+'">'+a[1]+"</div>").data("value",a[0]).addClass(a[0]==t.value?"elfinder-button-menu-item-selected":""))})})),t.change(function(){var e;n&&cancelAnimationFrame(n),n=requestAnimationFrame(function(){t.disabled()?h.removeClass(r+" "+l).addClass(s):(h.removeClass(s),h[t.active()?"addClass":"removeClass"](r)),t.syncTitleOnChange&&(e=t.className?t.className:t.name,u!==e&&(h.children(".elfinder-button-icon").removeClass("elfinder-button-icon-"+u).addClass("elfinder-button-icon-"+e),i&&i.removeClass("elfinder-button-"+u+"-menu").addClass("elfinder-button-"+e+"-menu"),u=e),d.html(t.title),h.attr("title",t.title))})}).change()})},e.fn.elfindercontextmenu=function(t){return this.each(function(){e(this);var i,n,a,o,s,r,l,c="elfinder-contextmenu-item",d="elfinder-contextsubmenu-item",u="elfinder-contextmenu-extra-icon",h=t.res("class","hover"),p={distance:8,start:function(){f.data("drag",!0).data("touching")&&f.find("."+h).removeClass(h)},stop:function(){f.data("draged",!0).removeData("drag")}},f=e(this).addClass("touch-punch ui-helper-reset ui-front ui-widget ui-state-default ui-corner-all elfinder-contextmenu elfinder-contextmenu-"+t.direction).hide().on("touchstart",function(e){f.data("touching",!0).children().removeClass(h)}).on("touchend",function(e){f.removeData("touching")}).on("mouseenter mouseleave","."+c,function(t){e(this).toggleClass(h,!("mouseenter"!==t.type&&(f.data("draged")||!f.data("submenuKeep")))),f.data("draged")&&f.data("submenuKeep")&&f.find(".elfinder-contextmenu-sub:visible").parent().addClass(h)}).on("mouseenter mouseleave","."+u,function(t){e(this).parent().toggleClass(h,"mouseleave"===t.type)}).on("mouseenter mouseleave","."+c+",."+d,function(t){var i,n=function(t,i){e.each(i?s:a,function(e,n){if(t[0]===n)return(i?s:a)._cur=e,i?r=t:o=t,!1})};if(t.originalEvent){var l=e(this),c=function(){o&&!o.children("div.elfinder-contextmenu-sub:visible").length&&o.removeClass(h)};"mouseenter"===t.type?l.hasClass(d)?(r&&r.removeClass(h),o&&(s=o.find("div."+d)),n(l,!0)):(c(),n(l)):l.hasClass(d)?(r=null,s=null):(c(),i=o,setTimeout(function(){i===o&&(o=null)},250))}}).on("contextmenu",function(){return!1}).on("mouseup",function(){setTimeout(function(){f.removeData("draged")},100)}).draggable(p),m="ltr"===t.direction,g=m?"left":"right",v=Object.assign({},t.options.contextmenu),b='<div class="'+c+'{className}"><span class="elfinder-button-icon {icon} elfinder-contextmenu-icon"{style}></span><span>{label}</span></div>',y=function(i,n,a,o){var s,r,l="",c="",d="";return o&&(o.className&&(l=" "+o.className),o.iconClass&&(d=o.iconClass,n=""),o.iconImg&&(r=(s=o.iconImg.split(/ +/))[1]&&s[2]?t.escape(s[1]+"px "+s[2]+"px"):"",c=" style=\"background:url('"+t.escape(s[0])+"') "+(r||"0 0")+" no-repeat;"+(r?"":"posbackground-size:contain;")+'"')),e(b.replace("{icon}",n?"elfinder-button-icon-"+n:d||"").replace("{label}",i).replace("{style}",c).replace("{className}",l)).on("click",function(e){e.stopPropagation(),e.preventDefault(),a()})},w=function(i){var n=i.keyCode,l=e.ui.keyCode.ESCAPE,c=e.ui.keyCode.ENTER,u=e.ui.keyCode.LEFT,p=e.ui.keyCode.RIGHT,f=e.ui.keyCode.UP,m=e.ui.keyCode.DOWN,g="ltr"===t.direction?p:u,v=g===p?u:p;-1!==e.inArray(n,[l,c,u,p,f,m])&&(i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation(),n==l||n===v?o&&s&&r?(r.trigger("mouseleave").trigger("submenuclose"),o.addClass(h),s=null,r=null):n==l&&k():n==f||n==m?s?(r&&r.trigger("mouseleave"),n==m&&(!r||s.length<=++s._cur)?s._cur=0:n==f&&(!r||--s._cur<0)&&(s._cur=s.length-1),r=s.eq(s._cur).trigger("mouseenter")):(s=null,o&&o.trigger("mouseleave"),n==m&&(!o||a.length<=++a._cur)?a._cur=0:n==f&&(!o||--a._cur<0)&&(a._cur=a.length-1),o=a.eq(a._cur).addClass(h)):!o||n!=c&&n!==g||(o.hasClass("elfinder-contextmenu-group")?r?n==c&&r.click():(o.trigger("mouseenter"),(s=o.find("div."+d))._cur=0,r=s.first().addClass(h)):n==c&&o.click()))},x=function(a,c,d){var u,h,p=f.outerWidth(),m=f.outerHeight(),v=i.attr("style"),b=i.offset(),y=i.width(),C=i.height(),_=t.UA.Mobile?40:2,T=t.UA.Mobile?20:2;a-=b?b.left:0,c-=b?b.top:0,d=Object.assign(d||{},{top:Math.max(0,c+T+m<C?c+T:c-(c+m-C)),left:Math.max(0,a<p+_||a+_+p<y?a+_:a-_-p),opacity:"1"});l=!0,t.autoSync("stop"),i.width(y),f.stop().removeAttr("style").css(d),t.toFront(f),f.show(),i.attr("style",v),d[g]=parseInt(f.width()),f.find(".elfinder-contextmenu-sub").css(d),t.UA.iOS&&e("div.elfinder div.overflow-scrolling-touch").css("-webkit-overflow-scrolling","auto"),o=null,s=null,r=null,e(document).on("keydown."+t.namespace,w),(u=e._data(document).events)&&u.keydown&&u.keydown.unshift(u.keydown.pop()),t.UA.Mobile&&(h="touchstart.contextmenuAutoToggle",f.data("hideTm")&&clearTimeout(f.data("hideTm")),f.is(":visible")&&f.on("touchstart",function(e){e.originalEvent.touches.length>1||(f.stop(),t.toFront(f),f.data("hideTm")&&clearTimeout(f.data("hideTm")))}).data("hideTm",setTimeout(function(){f.is(":visible")&&(n.find(".elfinder-cwd-file").off(h),n.find(".elfinder-cwd-file.ui-selected").one(h,function(t){if(!(t.originalEvent.touches.length>1)){var i=e(t.target);if(f.first().length&&!i.is("input:checkbox")&&!i.hasClass("elfinder-cwd-select"))return t.stopPropagation(),x(t.originalEvent.touches[0].pageX,t.originalEvent.touches[0].pageY),n.data("longtap",!0),void i.one("touchend",function(){setTimeout(function(){n.removeData("longtap")},80)});n.find(".elfinder-cwd-file").off(h)}}).one("unselect."+t.namespace,function(){n.find(".elfinder-cwd-file").off(h)}),f.fadeOut({duration:300,fail:function(){f.css("opacity","1").show()},done:function(){t.toHide(f)}}))},4500))),requestAnimationFrame(function(){t.getUI().one("click."+t.namespace,k)})},k=function(){if(t.getUI().off("click."+t.namespace,k),e(document).off("keydown."+t.namespace,w),C=_=null,f.is(":visible")||f.children().length){t.toHide(f.removeAttr("style").empty().removeData("submenuKeep"));try{f.draggable("instance")||f.draggable(p)}catch(e){f.hasClass("ui-draggable")||f.draggable(p)}f.data("prevNode")&&(f.data("prevNode").after(f),f.removeData("prevNode")),t.trigger("closecontextmenu"),t.UA.iOS&&e("div.elfinder div.overflow-scrolling-touch").css("-webkit-overflow-scrolling","touch")}l&&t.searchStatus.state<1&&!t.searchStatus.ininc&&t.autoSync(),l=!1},C=null,_=null;t.one("load",function(){i=t.getUI(),n=t.getUI("cwd"),t.bind("contextmenu",function(o){var s,r,l,p,g,b,w,T,D,z,A=o.data,S={};A.type&&"files"!==A.type&&n.trigger("unselectall"),k(),A.type&&A.targets?(t.trigger("contextmenucreate",A),l=A.type,p=A.targets,w=!1,T=!1,D=[],z="cwd"===l,C=l,_=p,(b=t.option("uiCmdMap",z?void 0:p[0]))||(b={}),z||(D=t.getDisabledCmds(p)),(g=t.selected().length)>1&&f.append('<div class="ui-corner-top ui-widget-header elfinder-contextmenu-header"><span>'+t.i18n("selectedItems",""+g)+"</span></div>"),a=e(),e.each(v[l]||[],function(n,o){var s,r,g,v,x,C;if("|"!==o){if(b[o]?(r=b[o],g=!0):r=o,!(s=t.getCommand(r))||z||t.searchStatus.state&&s.disableOnSearch||(s.__disabled=s._disabled,s._disabled=!(s.alwaysEnabled||t._commands[r]&&!(-1!==e.inArray(o,D)||g&&D[r])),e.each(s.linkedCmds,function(e,i){var n;(n=t.getCommand(i))&&(n.__disabled=n._disabled,n._disabled=!(n.alwaysEnabled||t._commands[i]&&!D[i]))})),s&&!s._disabled&&-1!=s.getstate(p)){if(s.variants){if(!s.variants.length)return;v=y(s.title,s.className?s.className:s.name,function(){},s.contextmenuOpts),x=e('<div class="ui-front ui-corner-all elfinder-contextmenu-sub"></div>').hide().css("max-height",t.getUI().height()-30).appendTo(v.append('<span class="elfinder-contextmenu-arrow"></span>')),C=function(e){if(e){var n=i.attr("style");i.width(i.width()),x.css({top:"-1000px",left:"auto",right:"auto"});var a,o,s=v.offset(),r=s.left,l=s.top,c=v.outerWidth(),d=x.outerWidth(!0),u=x.outerHeight(!0),h=i.offset(),p=h.left+i.width(),g=h.top+i.height(),b=m,y=c;m?(o=r+c+d-p)>10&&(r>d-5?(y-=5,b=!1):t.UA.Mobile||(y=c-o)):(o=d-r)>0&&(r+c+d-15<p?(y-=5,b=!0):t.UA.Mobile||(y=c-o)),a=(o=l+5+u-g)>0&&l<g?5-o:o>0?30-u:5,f.find(".elfinder-contextmenu-sub:visible").hide(),x.css({top:a,left:b?y:"auto",right:b?"auto":y,overflowY:"auto"}).show(),i.attr("style",n)}else x.hide()},v.addClass("elfinder-contextmenu-group").on("mouseleave",".elfinder-contextmenu-sub",function(e){f.data("draged")||f.removeData("submenuKeep")}).on("submenuclose",".elfinder-contextmenu-sub",function(e){C(!1)}).on("click","."+d,function(i){var n,a;i.stopPropagation(),f.data("draged")||(a=e(this),s.keepContextmenu?(a.removeClass(h),v.addClass(h)):f.hide(),void 0===(n=a.data("exec"))&&(n={}),"object"==typeof n&&(n._userAction=!0,n._currentType=l,n._currentNode=a),!s.keepContextmenu&&k(),t.exec(s.name,p,n))}).on("touchend",function(e){f.data("drag")||(C(!0),f.data("submenuKeep",!0))}).on("mouseenter mouseleave",function(t){f.data("touching")||(v.data("timer")&&(clearTimeout(v.data("timer")),v.removeData("timer")),e(t.target).closest(".elfinder-contextmenu-sub",f).length||("mouseleave"===t.type?f.data("submenuKeep")||v.data("timer",setTimeout(function(){v.removeData("timer"),C(!1)},250)):v.data("timer",setTimeout(function(){v.removeData("timer"),C(!0)},a.find("div.elfinder-contextmenu-sub:visible").length?250:0))))}),e.each(s.variants,function(t,i){var n,a,o,s="|"===i?'<div class="elfinder-contextmenu-separator"></div>':e('<div class="'+c+" "+d+'"><span>'+i[1]+"</span></div>").data("exec",i[0]);void 0!==i[2]&&(n=e("<span></span>").addClass("elfinder-button-icon elfinder-contextmenu-icon"),/\//.test(i[2])?n.css((o=(a=i[2].split(/ +/))[1]&&a[2]?a[1]+"px "+a[2]+"px":"",{backgroundImage:'url("'+a[0]+'")',backgroundRepeat:"no-repeat",backgroundPosition:o||"",backgroundSize:o?"":"contain"})):n.addClass("elfinder-button-icon-"+i[2]),s.prepend(n).addClass(d+"-icon")),x.append(s)})}else v=y(s.title,s.className?s.className:s.name,function(){f.data("draged")||(!s.keepContextmenu&&k(),t.exec(s.name,p,{_userAction:!0,_currentType:l,_currentNode:v}))},s.contextmenuOpts),s.extra&&s.extra.node?(e('<span class="elfinder-button-icon elfinder-button-icon-'+(s.extra.icon||"")+" "+u+'"></span>').append(s.extra.node).appendTo(v),e(s.extra.node).trigger("ready",{targets:p})):v.remove("."+u);s.extendsCmd&&v.children("span.elfinder-button-icon").addClass("elfinder-button-icon-"+s.extendsCmd),T&&f.append('<div class="elfinder-contextmenu-separator"></div>'),f.append(v),w=!0,T=!1}s&&void 0!==s.__disabled&&(s._disabled=s.__disabled,delete s.__disabled,e.each(s.linkedCmds,function(e,i){var n;(n=t.getCommand(i))&&(n._disabled=n.__disabled,delete n.__disabled)}))}else w&&(T=!0)}),a=f.children("div."+c),t.trigger("contextmenucreatedone",A)):A.raw&&(r=A.raw,C="raw",e.each(r,function(e,t){var i;"|"===t?f.append('<div class="elfinder-contextmenu-separator"></div>'):t.label&&"function"==typeof t.callback&&(i=y(t.label,t.icon,function(){f.data("draged")||(!t.remain&&k(),t.callback())},t.options||null),f.append(i))}),a=f.children("div."+c)),f.children().length&&((s=A.prevNode||null)&&(f.data("prevNode",f.prev()),s.after(f)),A.fitHeight&&(S={maxHeight:Math.min(t.getUI().height(),e(window).height()),overflowY:"auto"},f.draggable("destroy").removeClass("ui-draggable")),x(A.x,A.y,S),A.opened&&"function"==typeof A.opened&&A.opened.call(f))}).one("destroy",function(){f.remove()}).bind("disable",k).bind("select",function(e){"files"===C&&(!e.data||e.data.selected.toString()!==_.toString())&&k()})}).shortcut({pattern:"mac"===t.OS?"ctrl+m":"contextmenu shift+f10",description:"contextmenu",callback:function(i){i.stopPropagation(),i.preventDefault(),e(document).one("contextmenu."+t.namespace,function(e){e.preventDefault(),e.stopPropagation()});var n,a,o,s,r=t.selected();r.length?(n="files",a=r,s=t.cwdHash2Elm(r[0])):(n="cwd",a=[t.cwd().hash],o=t.getUI("workzone").offset()),s&&s.length||(s=t.getUI("workzone")),(o=s.offset()).top+=s.height()/2,o.left+=s.width()/2,t.trigger("contextmenu",{type:n,targets:a,x:o.left,y:o.top})}})})},e.fn.elfindercwd=function(t,i){return this.not(".elfinder-cwd").each(function(){var n,a,o,s,r,l,c,d=t.UA.Mobile,u="list"==t.viewType,h="select."+t.namespace,p="unselect."+t.namespace,f="disable."+t.namespace,m="enable."+t.namespace,g="class",v=t.res(g,"cwdfile"),b="."+v,y="ui-selected",w=t.res(g,"disabled"),x=t.res(g,"draggable"),k=t.res(g,"droppable"),C=t.res(g,"hover"),_=t.res(g,"active"),T=t.res(g,"adroppable"),D=v+"-tmp",z="elfinder-cwd-selectchk",A=t.options.loadTmbs>0?t.options.loadTmbs:5,S="",I={},M=[],E=[],O=void 0,j=[],P="",F=function(){return'<tr id="{id}" class="'+v+' {permsclass} {dirclass}" title="{tooltip}"{css}><td class="elfinder-col-name"><div class="elfinder-cwd-file-wrapper"><span class="elfinder-cwd-icon {mime}"{style}></span>{marker}<span class="elfinder-cwd-filename">{name}</span></div>'+H+"</td>"+function(){for(var e="",t=0;t<j.length;t++)e+='<td class="elfinder-col-'+j[t]+'">{'+j[t]+"}</td>";return e}()+"</tr>"},H=e.map(i.showSelectCheckboxUA,function(e){return!(!t.UA[e]&&!e.match(/^all$/i))||null}).length?'<div class="elfinder-cwd-select"><input type="checkbox" class="'+z+'"></div>':"",N=!1,U=null,R={icon:'<div id="{id}" class="'+v+' {permsclass} {dirclass} ui-corner-all" title="{tooltip}"><div class="elfinder-cwd-file-wrapper ui-corner-all"><div class="elfinder-cwd-icon {mime} ui-corner-all" unselectable="on"{style}></div>{marker}</div><div class="elfinder-cwd-filename" title="{nametitle}">{name}</div>'+H+"</div>",row:""},q=t.res("tpl","perms"),L=t.res("tpl","lock"),W=t.res("tpl","symlink"),B={id:function(e){return t.cwdHash2Id(e.hash)},name:function(e){var i=t.escape(e.i18||e.name);return!u&&(i=i.replace(/([_.])/g,"&#8203;$1")),i},nametitle:function(e){return t.escape(e.i18||e.name)},permsclass:function(e){return t.perms2class(e)},perm:function(e){return t.formatPermissions(e)},dirclass:function(e){var n="directory"==e.mime?"directory":"";return e.isroot&&(n+=" isroot"),e.csscls&&(n+=" "+t.escape(e.csscls)),i.getClass&&(n+=" "+i.getClass(e)),n},style:function(e){return e.icon?t.getIconStyle(e):""},mime:function(e){var i=t.mime2class(e.mime);return e.icon&&(i+=" elfinder-cwd-bgurl"),i},size:function(e){return"directory"!==e.mime||e.size?t.formatSize(e.size):"-"},date:function(e){return t.formatDate(e)},kind:function(e){return t.mime2kind(e)},mode:function(e){return e.perm?t.formatFileMode(e.perm):""},modestr:function(e){return e.perm?t.formatFileMode(e.perm,"string"):""},modeoct:function(e){return e.perm?t.formatFileMode(e.perm,"octal"):""},modeboth:function(e){return e.perm?t.formatFileMode(e.perm,"both"):""},marker:function(e){return(e.alias||"symlink-broken"==e.mime?W:"")+(e.read&&e.write?"":q)+(e.locked?L:"")},tooltip:function(e){var i=t.formatDate(e)+(e.size>0?" ("+t.formatSize(e.size)+")":""),n="";return n=S&&e.path?t.escape(e.path.replace(/\/[^\/]*$/,"")):e.tooltip?t.escape(e.tooltip).replace(/\r/g,"&#13;"):"",u&&(n+=(n?"&#13;":"")+t.escape(e.i18||e.name)),n?n+"&#13;"+i:i}},$={},Y=function(i){return i.mime&&"directory"!==i.mime&&!$[i.mime]&&function(i,n){var o,s,r;if(i&&!$[i]&&(void 0===a&&(e("#elfinderAddBadgeStyle"+t.namespace).length&&e("#elfinderAddBadgeStyle"+t.namespace).remove(),a=e('<style id="addBadgeStyle'+t.namespace+'"></style>').insertBefore(e("head").children(":first")).get(0).sheet||null),a)){if(r=(i=i.toLowerCase()).split("/"),s=t.escape(t.mimeTypes[i]||(n.replace(/.bac?k$/i,"").match(/\.([^.]+)$/)||["",""])[1])){o=".elfinder-cwd-icon-"+r[0].replace(/(\.|\+)/g,"-"),void 0!==r[1]&&(o+=".elfinder-cwd-icon-"+r[1].replace(/(\.|\+)/g,"-"));try{a.insertRule(o+':before{content:"'+s.toLowerCase()+'"}',0)}catch(e){}}$[i]=!0}}(i.mime,i.name),R[u?"row":"icon"].replace(/\{([a-z0-9_]+)\}/g,function(e,n){return B[n]?B[n](i,t):i[n]?i[n]:""})},K=e(),V=!1,X={},G=function(e){t.cwdHash2Elm(e).trigger(h)},J=!1,Q=function(){t.cwd().hash;H&&Oe.find("input").prop("checked",!0),t.lazy(function(){var i;t.maxTargets&&(O||E).length>t.maxTargets?(Z({notrigger:!0}),i=(i=e.map(O||E,function(e){return t.file(e)||null})).slice(0,t.maxTargets),X={},e.each(i,function(e,i){X[i.hash]=!0,t.cwdHash2Elm(i.hash).trigger(h)}),t.toast({mode:"warning",msg:t.i18n(["errMaxTargets",t.maxTargets])})):(Ie.find("[id]:not(."+y+"):not(.elfinder-cwd-parent)").trigger(h),X=t.arrayFlip(O||E,!0)),te(),H&&Oe.data("pending",!1)},0,{repaint:!0})},Z=function(e){var t=e||{};H&&Oe.find("input").prop("checked",!1),Object.keys(X).length&&(V=!1,X={},Ie.find("[id]."+y).trigger(p),H&&Ie.find("input:checkbox."+z).prop("checked",!1)),!t.notrigger&&te(),H&&Oe.data("pending",!1),Ie.removeClass("elfinder-cwd-allselected")},ee=void 0,te=function(){var e=Object.keys(X),i={selected:e,origin:"cwd"};ue&&(e.length>1||e[0]!==t.cwdId2Hash(ue.attr("id")))&&ue.hasClass(y)&&ue.trigger(p),J=e.length&&e.length===(O||E).length&&(!t.maxTargets||e.length<=t.maxTargets),H&&(Oe.find("input").prop("checked",J),Ie[J?"addClass":"removeClass"]("elfinder-cwd-allselected")),J?i.selectall=!0:e.length||(i.unselectall=!0),t.trigger("select",i)},ie=function(e,i){if(e.length){var n=e.position().top,a=e.outerHeight(!0),o=Me.scrollTop(),s=Me.get(0).clientHeight,r=fe?fe.outerHeight(!0):0;n+r+a>o+s?Me.scrollTop(parseInt(n+r+a-s)):n<o&&Me.scrollTop(n),u&&Me.scrollLeft(0),i&&t.resources.blink(e,"lookme")}},ne=[],ae={},oe=function(e){for(var t=ne.length;t--;)if(ne[t].hash==e)return t;return-1},se="elfscrstop",re=!1,le={disabled:!0,filter:"[id]:first",stop:te,delay:250,appendTo:"body",autoRefresh:!1,selected:function(t,i){e(i.selected).trigger(h)},unselected:function(t,i){e(i.unselected).trigger(p)}},ce={},de=function(a,o){if(ae.renderd){var s=(u?Ie.find("tbody:first"):Ie).children("[id]"+(i.oldSchool?":not(.elfinder-cwd-parent)":"")+":first");if(s.length){var r,l,c,d,h,p,f,m,g=Ie.data("selectable"),y=(c=Me.offset(),d=Me.width(),h=e(window),p=s.width()/2,f=Math.min(c.left-h.scrollLeft()+("ltr"===t.direction?p:d-p),c.left+d-10),m=c.top-h.scrollTop()+10+(u?n:0),{left:Math.max(0,Math.round(f)),top:Math.max(0,Math.round(m))}),w=a?s:e(document.elementFromPoint(y.left,y.top)),x={},k={},C=Math.ceil((ae.hpi?Math.ceil(Fe.data("rectangle").height/ae.hpi*1.5):he)/5),_=function(){var e,i,n;for(n=0;n<5&&((e=w.attr("id"))&&(ae.getTmbs=[],i=t.cwdId2Hash(e),ce[i]=e,ae.attachTmbs[i]&&(k[i]=ae.attachTmbs[i]),g&&(x[e]=!0)),(w=w.next()).length);n++);},T=function(){var e;Ie.data("selectable")&&(Object.assign(x,X),(e=Object.keys(x)).length&&(le.filter="#"+e.join(", #"),Ie.selectable("enable").selectable("option",{filter:le.filter}).selectable("refresh"))),Object.keys(k).length&&(ae.getTmbs=[],we(k))},D=function(){w.hasClass(v)||(w=w.closest(b))};if(ce={},g&&Ie.selectable("option","disabled"),w.length&&(w.hasClass(v)||w.closest(b).length||((l=t.getUI().find(".ui-dialog:visible,.ui-widget:visible")).length?(l.hide(),w=e(document.elementFromPoint(y.left,y.top)),l.show()):l=null),D(),w.length||(l&&l.hide(),w=e(document.elementFromPoint(y.left,y.top+5)),l&&l.show(),D())),w.length){if(w.attr("id"))if(a){for(var z=0;z<C&&(_(),w.length);z++);T()}else ae.repaintJob&&"pending"===ae.repaintJob.state()&&ae.repaintJob.reject(),r=new Array(C),ae.repaintJob=t.asyncJob(function(){_(),w.length||(T(),ae.repaintJob&&"pending"===ae.repaintJob.state()&&ae.repaintJob.reject())},r).done(T)}else a&&ae.renderd&&(o=o||0)<10&&requestAnimationFrame(function(){de(a,++o)})}}},ue=null,he=t.options.showFiles,pe=function(){if(!(ae.rendering||ae.renderd&&!ne.length)){var n,a,o=u?Ie.children("table").children("tbody"):Ie,s=!!e.htmlPrefilter,r=e(s?document.createDocumentFragment():"<div></div>"),l=function(i){var n,a,l,c=i||null,p=[],f=!1,m={},g="self"===t.option("tmbUrl"),v=!ae.renderd;n=ne.splice(0,he+(c||0)/(ae.hpi||1)),ae.renderd+=n.length,ne.length||(Ee.hide(),Me.off(se,pe)),a=[],p=e.map(n,function(e){return e.hash&&e.name?("directory"==e.mime&&(f=!0),(e.tmb&&(1!=e.tmb||e.size>0)||g&&0===e.mime.indexOf("image/"))&&(m[e.hash]=e.tmb||"self"),I[e.hash]&&a.push(e.hash),Y(e)):null}),r.empty().append(p.join("")),f&&!d&&ye(r),l=[],Object.keys(X).length&&r.find("[id]:not(."+y+"):not(.elfinder-cwd-parent)").each(function(){X[t.cwdId2Hash(this.id)]&&l.push(e(this))}),o.append(s?r:r.children()),l.length&&(e.each(l,function(e,t){t.trigger(h)}),te()),a.length&&t.trigger("lockfiles",{files:a}),!ae.hpi&&_e(o,n.length),u&&(Ie.find("thead").show(),ge({fitWidth:!U})),Object.keys(m).length&&Object.assign(ae.attachTmbs,m),v&&(d||Ie.data("selectable")||Ie.selectable(le).data("selectable",!0)),!re&&Me.trigger(se)};ae.renderd||(ae.rendering=!0,Me.scrollTop(0),n=t.cwd().phash,l(),i.oldSchool&&(n&&!S?function(){var i=t.cwd().phash,n=t.file(i)||null,a=function(n){n&&(ue=e(Y(e.extend(!0,{},n,{name:"..",i18:"..",mime:"directory"}))).addClass("elfinder-cwd-parent").on("dblclick",function(){t.trigger("select",{selected:[i]}).exec("open",i)}),(u?ue.children("td:first"):ue).children(".elfinder-cwd-select").remove(),t.cwdHash2Elm(i).length?t.cwdHash2Elm(i).replaceWith(ue):(u?Ie.find("tbody"):Ie).prepend(ue),t.draggingUiHelper&&t.draggingUiHelper.data("refreshPositions",1))};n?a(n):(a({hash:i,read:!0,write:!0}),t.getUI("tree").length?t.one("parents",function(){a(t.file(i)||null),Me.trigger(se)}):t.request({data:{cmd:"parents",target:t.cwd().hash},preventFail:!0}).done(function(e){a(t.file(i)||null),Me.trigger(se)}))}():ue=e()),u&&(U&&ve(),ge({fitWidth:!0})),ae.itemH=(u?o.find("tr:first"):o.find("[id]:first")).outerHeight(!0),t.trigger("cwdrender"),ae.rendering=!1,de(!0)),!ae.rendering&&ne.length?(a=Me.height()+Me.scrollTop()+t.options.showThreshold+ae.row-ae.renderd*ae.hpi)>0?(ae.rendering=!0,t.lazy(function(){l(a),ae.rendering=!1})):!t.enabled()&&Pe():Pe()}},fe=null,me=t.UA.CSS.positionSticky&&t.UA.CSS.widthMaxContent,ge=function(a){if(n=0,i.listView.fixedHeader){var o,s,r,l,c,d,u,h,p,f,m,g,v,b=function(){var e,i;i="ltr"===t.direction?"left":"right",e=-1*("ltr"===t.direction?Me.scrollLeft():r.outerWidth(!0)-Me.width()-Me.scrollLeft()),s.css(i)!==e&&s.css(i,e)},y=a||{};if((h=(c=Ie.find("tbody")).children("tr:first")).length&&h.is(":visible")){if(r=c.parent(),fe?u=(l=e("#"+t.namespace+"-cwd-thead")).children("tr:first"):(v=!0,c.addClass("elfinder-cwd-fixheader"),d=(u=(l=Ie.find("thead").attr("id",t.namespace+"-cwd-thead")).children("tr:first")).outerHeight(!0),Ie.css("margin-top",d-parseInt(r.css("padding-top"))),me?(fe=e('<div class="elfinder-table-header-sticky"></div>').addClass(Ie.attr("class")).append(e("<table></table>").append(l)),Ie.after(fe),Me.on("resize.fixheader",function(e){e.stopPropagation(),ge({fitWidth:!0})})):(s=e("<div></div>").addClass(Ie.attr("class")).append(e("<table></table>").append(l)),fe=e("<div></div>").addClass(Me.attr("class")+" elfinder-cwd-fixheader").removeClass("ui-droppable native-droppable").css(Me.position()).css({height:d,width:Ie.outerWidth()}).append(s),"rtl"===t.direction&&fe.css("left",Me.data("width")-Me.width()+"px"),b(),Me.after(fe).on("scroll.fixheader resize.fixheader",function(e){b(),"resize"===e.type&&(e.stopPropagation(),fe.css(Me.position()),Me.data("width",Me.css("overflow","hidden").width()),Me.css("overflow","auto"),ge())}))),v||y.fitWidth||Math.abs(h.outerWidth()-u.outerWidth())>2){o=j.length+1;for(var w=0;w<o&&(p=u.children("td:eq("+w+")"),f=h.children("td:eq("+w+")"),m=p.width(),g=f.width(),void 0===p.data("delta")&&p.data("delta",p.outerWidth()-m-(f.outerWidth()-g)),g-=p.data("delta"),v||y.fitWidth||m!==g);w++)p.css("width",g+"px")}me||(fe.data("widthTimer")&&cancelAnimationFrame(fe.data("widthTimer")),fe.data("widthTimer",requestAnimationFrame(function(){fe&&(fe.css("width",He.width()+"px"),"rtl"===t.direction&&fe.css("left",Me.data("width")-Me.width()+"px"))}))),n=l.height()}}},ve=function(){if(u&&U){var t="elfinder-cwd-colwidth",i=Ie.find("tr[id]:first");i.hasClass(t)||(Ie.find("tr."+t).removeClass(t).find("td").css("width",""),i.addClass(t),Ie.find("table:first").css("table-layout","fixed"),e.each(e.merge(["name"],j),function(e,t){var n=U[t]||i.find("td.elfinder-col-"+t).width();i.find("td.elfinder-col-"+t).width(n)}))}},be=Object.assign({},t.droppable,{over:function(i,n){var a,o,s,r=e(this),l=n.helper,c=t._commands.copy&&(i.shiftKey||i.ctrlKey||i.metaKey);i.stopPropagation(),l.data("dropover",l.data("dropover")+1),r.data("dropover",!0),l.removeClass("elfinder-drag-helper-move elfinder-drag-helper-plus"),l.data("namespace")===t.namespace&&t.insideWorkzone(i.pageX,i.pageY)?(r.hasClass(t.res(g,"cwdfile"))?(a=t.cwdId2Hash(r.attr("id")),r.data("dropover",a)):(a=t.cwd().hash,t.cwd().write&&r.data("dropover",a)),s=t.file(l.data("files")[0]).phash===a,r.data("dropover")===a?e.each(l.data("files"),function(e,t){if(t===a||s&&!c&&!l.hasClass("elfinder-drag-helper-plus"))return r.removeClass(T),!1}):r.removeClass(T),l.data("locked")||s?o="elfinder-drag-helper-plus":(o="elfinder-drag-helper-move",c&&(o+=" elfinder-drag-helper-plus")),r.hasClass(T)&&l.addClass(o),requestAnimationFrame(function(){r.hasClass(T)&&l.addClass(o)})):r.removeClass(T)},out:function(t,i){var n=i.helper;t.stopPropagation(),n.removeClass("elfinder-drag-helper-move elfinder-drag-helper-plus").data("dropover",Math.max(n.data("dropover")-1,0)),e(this).removeData("dropover").removeClass(T)},deactivate:function(){e(this).removeData("dropover").removeClass(T)},drop:function(e,i){Z({notrigger:!0}),t.droppable.drop.call(this,e,i)}}),ye=function(i){var n=(i=i||(u?Ie.find("tbody"):Ie)).children(".directory:not(."+k+",.elfinder-na,.elfinder-ro)");t.isCommandEnabled("paste")&&n.droppable(be),t.isCommandEnabled("upload")&&n.addClass("native-droppable"),i.children(".isroot").each(function(i,n){var a=e(n),o=t.cwdId2Hash(n.id);t.isCommandEnabled("paste",o)?a.hasClass(k+",elfinder-na,elfinder-ro")||a.droppable(be):a.hasClass(k)&&a.droppable("destroy"),t.isCommandEnabled("upload",o)?a.hasClass("native-droppable,elfinder-na,elfinder-ro")||a.addClass("native-droppable"):a.hasClass("native-droppable")&&a.removeClass("native-droppable")})},we=function(i,n){e.isPlainObject(i)&&Object.keys(i).length&&(Object.assign(ae.attachTmbs,i),e.each(i,function(i,a){var o,s,r=t.cwdHash2Elm(i);r.length&&("1"!=a?((o=t.file(i)).tmb!==a&&(o.tmb=a),s=t.tmb(o),n?r.find(".elfinder-cwd-icon").addClass(s.className).css("background-image","url('"+s.url+"')"):function(t,i){e("<img/>").on("load",function(){t.find(".elfinder-cwd-icon").addClass(i.className).css("background-image","url('"+i.url+"')")}).attr("src",i.url)}(r,s),delete ae.attachTmbs[i]):n?xe([i]):ae.tmbLoading[i]||ae.getTmbs.push(i))}),n||!ae.getTmbs.length||Object.keys(ae.tmbLoading).length||xe())},xe=function(i){var n=[],a=!1;t.oldAPI?t.request({data:{cmd:"tmb",current:t.cwd().hash},preventFail:!0}).done(function(e){e.images&&Object.keys(e.images).length&&we(e.images),e.tmb&&xe()}):(i?(a=!0,n=i.splice(0,A)):n=ae.getTmbs.splice(0,A),n.length&&(a||ce[n[0]]||ce[n[n.length-1]])&&(e.each(n,function(e,t){ae.tmbLoading[t]=!0}),t.request({data:{cmd:"tmb",targets:n},preventFail:!0}).done(function(t){var o,s=[];t.images&&((o=Object.keys(t.images).length)?(o<n.length&&e.each(n,function(e,i){t.images[i]||s.push(i)}),we(t.images,a)):s=n,s.length&&e.each(s,function(e,t){delete ae.attachTmbs[t]})),a&&i.length&&xe(i)}).always(function(){ae.tmbLoading={},!a&&ae.getTmbs.length&&xe()})))},ke=function(i,n){var a,o,s,r,l,c,h=u?Ie.find("tbody"):Ie,p=i.length,f={},m=function(e){for(var i,n=Ie.find("[id]:first");n.length;){if(i=t.file(t.cwdId2Hash(n.attr("id"))),!n.hasClass("elfinder-cwd-parent")&&i&&t.compare(e,i)<0)return n;n=n.next("[id]")}},g=function(e){var i,n=ne.length;for(i=0;i<n;i++)if(t.compare(e,ne[i])<0)return i;return n||-1},v=!!e.htmlPrefilter,b=e(v?document.createDocumentFragment():"<div></div>");if(p>he)Se(),X=t.arrayFlip(e.map(i,function(e){return e.hash}),!0),te();else{for(p&&Fe.removeClass("elfinder-cwd-wrapper-empty"),c="self"===t.option("tmbUrl");p--;)o=(a=i[p]).hash,t.cwdHash2Elm(o).length||((s=m(a))&&!s.length&&(s=null),!s&&(l=g(a))>=0?ne.splice(l,0,a):(b.empty().append(Y(a)),"directory"===a.mime&&!d&&ye(b),r=v?b:b.children(),s?s.before(r):h.append(r),++ae.renderd),t.cwdHash2Elm(o).length&&(a.tmb&&(1!=a.tmb||a.size>0)||c&&0===a.mime.indexOf("image/"))&&(f[o]=a.tmb||"self"));u&&(ve(),ge({fitWidth:!U})),_e(h),Object.keys(f).length&&(Object.assign(ae.attachTmbs,f),ne.length<1&&xe())}},Ce=function(i){var n,a,o,s,r=i.length,l=t.searchStatus.state>1,c=t.getCommand(t.currentReqCmd)||{};if(!t.cwd().hash&&!c.noChangeDirOnRemovedCwd)return e.each(M.reverse(),function(e,i){if(t.file(i))return s=!0,t.one(t.currentReqCmd+"done",function(){!t.cwd().hash&&t.exec("open",i)}),!1}),void(!s&&!t.cwd().hash&&t.exec("open",t.roots[Object.keys(t.roots)[0]]));for(;r--;){if(n=i[r],(a=t.cwdHash2Elm(n)).length)try{a.remove(),--ae.renderd}catch(e){t.debug("error",e)}else-1!==(o=oe(n))&&ne.splice(o,1);X[n]&&delete X[n],l&&-1!==(o=e.inArray(n,E))&&E.splice(o,1)}l&&t.trigger("cwdhasheschange",E),u&&(ve(),ge({fitWidth:!U}))},_e=function(e,i){var n,a=e||(u?Ie.find("tbody"):Ie),o=Re[t.viewType],s=1;ne.length>0&&(ae.hpi?u||(s=Math.floor(a.width()/o.width)):(!function(e){var t;e.height||(t=(u?Ie.find("tbody"):Ie).find(u?"tr:first":"[id]:first"),e.height=t.outerHeight(!0),u||(e.width=t.outerWidth(!0)))}(o),u?ae.row=ae.hpi=o.height:(s=Math.floor(a.width()/o.width),ae.row=o.height,ae.hpi=ae.row/s)),n=Math.ceil((ne.length+(i||0))/s),u&&fe&&++n,Ee.css({top:ae.row*n+"px"}).show())},Te=function(e){e.preventDefault(),void 0===Ie.data("longtap")?t.trigger("contextmenu",{type:"cwd",targets:[t.cwd().hash],x:e.pageX,y:e.pageY}):e.stopPropagation()},De=function(e){e.originalEvent.touches.length>1||(!1!==Ie.data("longtap")&&(Me.data("touching",{x:e.originalEvent.touches[0].pageX,y:e.originalEvent.touches[0].pageY}),Ie.data("tmlongtap",setTimeout(function(){Ie.data("longtap",!0),t.trigger("contextmenu",{type:"cwd",targets:[t.cwd().hash],x:Me.data("touching").x,y:Me.data("touching").y})},500))),Ie.data("longtap",null))},ze=function(e){"touchmove"===e.type?(!Me.data("touching")||Math.abs(Me.data("touching").x-e.originalEvent.touches[0].pageX)+Math.abs(Me.data("touching").y-e.originalEvent.touches[0].pageY)>4)&&Me.data("touching",null):setTimeout(function(){Ie.removeData("longtap")},80),clearTimeout(Ie.data("tmlongtap"))},Ae=function(e){Ie.data("longtap")&&(e.preventDefault(),e.stopPropagation())},Se=function(){t.lazy(function(){var i;Fe.append(Oe).removeClass("elfinder-cwd-wrapper-empty elfinder-search-result elfinder-incsearch-result elfinder-letsearch-result"),(t.searchStatus.state>1||t.searchStatus.ininc)&&Fe.addClass("elfinder-search-result"+(t.searchStatus.ininc?" elfinder-"+("/"===S.substr(0,1)?"let":"inc")+"search-result":"")),ae.attachThumbJob&&ae.attachThumbJob._abort(),Ie.data("selectable")&&Ie.selectable("disable").selectable("destroy").removeData("selectable"),t.trigger("cwdinit"),K=e();try{Ie.empty()}catch(e){Ie.html("")}fe&&(Me.off("scroll.fixheader resize.fixheader"),fe.remove(),fe=null),Ie.removeClass("elfinder-cwd-view-icons elfinder-cwd-view-list").addClass("elfinder-cwd-view-"+(u?"list":"icons")).attr("style","").css("height","auto"),Ee.hide(),Me[u?"addClass":"removeClass"]("elfinder-cwd-wrapper-list")._padding=parseInt(Me.css("padding-top"))+parseInt(Me.css("padding-bottom")),t.UA.iOS&&Me.removeClass("overflow-scrolling-touch").addClass("overflow-scrolling-touch"),u&&(Ie.html("<table><thead></thead><tbody></tbody></table>"),i=e('<tr class="ui-state-default"><td class="elfinder-cwd-view-th-name">'+t.getColumnName("name")+"</td>"+function(){for(var e="",i="",n=0;n<j.length;n++)e=t.getColumnName(j[n]),i+='<td class="elfinder-cwd-view-th-'+j[n]+' sortable-item">'+e+"</td>";return i}()+"</tr>"),Ie.find("thead").hide().append(i).find("td:first").append(Oe),e.fn.sortable&&i.addClass("touch-punch touch-punch-keep-default").sortable({axis:"x",distance:8,items:"> .sortable-item",start:function(t,i){e(i.item[0]).data("dragging",!0),i.placeholder.width(i.helper.removeClass("ui-state-hover").width()).removeClass("ui-state-active").addClass("ui-state-hover").css("visibility","visible")},update:function(i,n){var a,o,s=e(n.item[0]).attr("class").split(" ")[0].replace("elfinder-cwd-view-th-","");j=e.map(e(this).children(),function(t){var i=e(t).attr("class").split(" ")[0].replace("elfinder-cwd-view-th-","");return o||(s===i?o=!0:a=i),"name"===i?null:i}),R.row=F(),t.storage("cwdCols",j),a=".elfinder-col-"+a+":first",s=".elfinder-col-"+s+":first",t.lazy(function(){Ie.find("tbody tr").each(function(){var t=e(this);t.children(a).after(t.children(s))})})},stop:function(t,i){setTimeout(function(){e(i.item[0]).removeData("dragging")},100)}}),i.find("td").addClass("touch-punch").resizable({handles:"ltr"===t.direction?"e":"w",start:function(t,i){var n=Ie.find("td.elfinder-col-"+i.element.attr("class").split(" ")[0].replace("elfinder-cwd-view-th-","")+":first");i.element.data("dragging",!0).data("resizeTarget",n).data("targetWidth",n.width()),N=!0,"fixed"!==Ie.find("table").css("table-layout")&&(Ie.find("tbody tr:first td").each(function(){e(this).width(e(this).width())}),Ie.find("table").css("table-layout","fixed"))},resize:function(e,t){t.element.data("resizeTarget").width(t.element.data("targetWidth")-(t.originalSize.width-t.size.width))},stop:function(i,n){N=!1,ge({fitWidth:!0}),U={},Ie.find("tbody tr:first td").each(function(){var t=e(this).attr("class").split(" ")[0].replace("elfinder-col-","");U[t]=e(this).width()}),t.storage("cwdColWidth",U),setTimeout(function(){n.element.removeData("dragging")},100)}}).find(".ui-resizable-handle").addClass("ui-icon ui-icon-grip-dotted-vertical")),ne=e.map(O||E,function(e){return t.file(e)||null}),ne=t.sortFiles(ne),O?O=e.map(ne,function(e){return e.hash}):E=e.map(ne,function(e){return e.hash}),ae={renderd:0,attachTmbs:{},getTmbs:[],tmbLoading:{},lazyOpts:{tm:0}},Fe[ne.length<1?"addClass":"removeClass"]("elfinder-cwd-wrapper-empty"),Me.off(se,pe).on(se,pe).trigger(se),t.cwd().write?(Me[t.isCommandEnabled("upload")?"addClass":"removeClass"]("native-droppable"),Me.droppable(t.isCommandEnabled("paste")?"enable":"disable")):Me.removeClass("native-droppable").droppable("disable").removeClass("ui-state-disabled")})},Ie=e(this).addClass("ui-helper-clearfix elfinder-cwd").attr("unselectable","on").on("click."+t.namespace,b,function(i){var n,a,o,s,r,l=this.id?e(this):e(this).parents("[id]:first"),c=e(i.target);if(H&&(c.is("input:checkbox."+z)||c.hasClass("elfinder-cwd-select")))return i.stopPropagation(),i.preventDefault(),l.trigger(l.hasClass(y)?p:h),te(),void requestAnimationFrame(function(){c.prop("checked",l.hasClass(y))});if(Ie.data("longtap")||c.hasClass("elfinder-cwd-nonselect"))i.stopPropagation();else{if(P||(P=l.attr("id"),setTimeout(function(){P=""},500)),i.shiftKey&&(n=l.prevAll(ee||"."+y+":first"),a=l.nextAll(ee||"."+y+":first"),o=n.length,s=a.length),i.shiftKey&&(o||s))r=(r=o?l.prevUntil("#"+n.attr("id")):l.nextUntil("#"+a.attr("id"))).add(l),o||(r=e(r.get().reverse())),r.trigger(h);else if(i.ctrlKey||i.metaKey)l.trigger(l.hasClass(y)?p:h);else{if(Me.data("touching")&&l.hasClass(y))return Me.data("touching",null),void t.dblclick({file:t.cwdId2Hash(this.id)});Z({notrigger:!0}),l.trigger(h)}te()}}).on("dblclick."+t.namespace,b,function(i){if(P){var n=t.cwdId2Hash(P);i.stopPropagation(),this.id!==P&&(e(this).trigger(p),e("#"+P).trigger(h),te()),t.dblclick({file:n})}}).on("touchstart."+t.namespace,b,function(i){if(!(i.originalEvent.touches.length>1)){var n=this.id?e(this):e(this).parents("[id]:first"),a=e(i.target),o=i.target.nodeName;if("INPUT"===o&&"text"===i.target.type||"TEXTAREA"===o||a.hasClass("elfinder-cwd-nonselect"))i.stopPropagation();else{if(n.find("input:text,textarea").length)return i.stopPropagation(),void i.preventDefault();Me.data("touching",{x:i.originalEvent.touches[0].pageX,y:i.originalEvent.touches[0].pageY}),H&&(a.is("input:checkbox."+z)||a.hasClass("elfinder-cwd-select"))||(n.prevAll("."+y+":first").length+n.nextAll("."+y+":first").length,Ie.data("longtap",null),(Object.keys(X).length||u&&"TD"!==i.target.nodeName||!u&&this!==i.target)&&(Ie.data("longtap",!1),n.addClass(C),n.data("tmlongtap",setTimeout(function(){Ie.data("longtap",!0),n.trigger(h),te(),t.trigger("contextmenu",{type:"files",targets:t.selected(),x:i.originalEvent.touches[0].pageX,y:i.originalEvent.touches[0].pageY})},500))))}}}).on("touchmove."+t.namespace+" touchend."+t.namespace,b,function(i){var n,a=e(i.target);H&&(a.is("input:checkbox."+z)||a.hasClass("elfinder-cwd-select"))||("INPUT"!=i.target.nodeName&&"TEXTAREA"!=i.target.nodeName?(n=this.id?e(this):e(this).parents("[id]:first"),clearTimeout(n.data("tmlongtap")),"touchmove"===i.type?(Me.data("touching",null),n.removeClass(C)):(Me.data("touching")&&!Ie.data("longtap")&&n.hasClass(y)&&(i.preventDefault(),Me.data("touching",null),t.dblclick({file:t.cwdId2Hash(this.id)})),setTimeout(function(){Ie.removeData("longtap")},80))):i.stopPropagation())}).on("mouseenter."+t.namespace,b,function(n){if(!re){var a=e(this),o=null;if(!(d||a.data("dragRegisted")||a.hasClass(D)||a.hasClass(x)||a.hasClass(w))){if(a.data("dragRegisted",!0),!t.isCommandEnabled("copy",t.searchStatus.state>1||a.hasClass("isroot")?t.cwdId2Hash(a.attr("id")):void 0)&&!t.isCommandEnabled("cut",t.searchStatus.state>1||a.hasClass("isroot")?t.cwdId2Hash(a.attr("id")):void 0))return;a.on("mousedown",function(n){var o=i.metakeyDragout&&!t.UA.IE&&(n.shiftKey||n.altKey),s=!1;o&&Ie.data("selectable")&&(Ie.selectable("disable").selectable("destroy").removeData("selectable"),requestAnimationFrame(function(){Ie.selectable(le).selectable("option",{disabled:!1}).selectable("refresh").data("selectable",!0)})),a.removeClass("ui-state-disabled"),o?a.draggable("option","disabled",!0).attr("draggable","true"):(a.hasClass(y)||(s=u?e(n.target).closest("span,tr").is("tr"):e(n.target).hasClass("elfinder-cwd-file")),s?a.draggable("option","disabled",!0).removeClass("ui-state-disabled"):a.draggable("option","disabled",!1).removeAttr("draggable").draggable("option","cursorAt",{left:50-parseInt(e(n.currentTarget).css("margin-left")),top:47}))}).on("dragstart",function(i){var n=i.dataTransfer||i.originalEvent.dataTransfer||null;if(o=null,n&&!t.UA.IE){var a,s=this.id?e(this):e(this).parents("[id]:first"),r=e("<span>"),l="",c=null,d=null,u=[],p=function(i){var n,a=i.mime,o=t.tmb(i);return n='<div class="elfinder-cwd-icon elfinder-cwd-icon-drag '+t.mime2class(a)+' ui-corner-all"></div>',o&&(n=e(n).addClass(o.className).css("background-image","url('"+o.url+"')").get(0).outerHTML),n},f=[];if(s.trigger(h),te(),e.each(X,function(i){var n=t.file(i),a=n.url;if(n&&"directory"!==n.mime){if(a){if("1"==a)return f.push(i),!0}else a=t.url(n.hash);a&&(a=t.convAbsUrl(a),u.push(i),e("<a>").attr("href",a).text(a).appendTo(r),l+=a+"\n",c||(c=n.mime+":"+n.name+":"+a),d||(d=a+"\n"+n.name))}}),f.length)return e.each(f,function(e,i){var n=t.file(i);n.url="",t.request({data:{cmd:"url",target:i},notify:{type:"url",cnt:1},preventDefault:!0}).always(function(e){n.url=e.url?e.url:"1"})}),!1;if(!l)return!1;n.setDragImage&&(o=e('<div class="elfinder-drag-helper html5-native"></div>').append(p(t.file(u[0]))).appendTo(e(document.body)),(a=u.length)>1&&o.append(p(t.file(u[a-1]))+'<span class="elfinder-drag-num">'+a+"</span>"),n.setDragImage(o.get(0),50,47)),n.effectAllowed="copyLink",n.setData("DownloadURL",c),n.setData("text/x-moz-url",d),n.setData("text/uri-list",l),n.setData("text/plain",l),n.setData("text/html",r.html()),n.setData("elfinderfrom",window.location.href+t.cwd().hash),n.setData("elfinderfrom:"+n.getData("elfinderfrom"),"")}}).on("dragend",function(e){Z({notrigger:!0}),o&&o.remove()}).draggable(t.draggable)}}}).on(h,b,function(i){var n=e(this),a=t.cwdId2Hash(n.attr("id"));V||n.hasClass(w)||(ee="#"+this.id,n.addClass(y).children().addClass(C).find("input:checkbox."+z).prop("checked",!0),X[a]||(X[a]=!0),K=Ie.find("[id]."+y+":last").next())}).on(p,b,function(i){var n=e(this),a=t.cwdId2Hash(n.attr("id"));V||(n.removeClass(y).children().removeClass(C).find("input:checkbox."+z).prop("checked",!1),Ie.hasClass("elfinder-cwd-allselected")&&(H&&Oe.children("input").prop("checked",!1),Ie.removeClass("elfinder-cwd-allselected")),X[a]&&delete X[a])}).on(f,b,function(){var t=e(this).removeClass(C+" "+y).addClass(w),i=t.children(),n=u?t:i.find("div.elfinder-cwd-file-wrapper,div.elfinder-cwd-filename");i.removeClass(C+" "+y),t.hasClass(k)&&t.droppable("disable"),n.hasClass(x)&&n.draggable("disable")}).on(m,b,function(){var t=e(this).removeClass(w),i=u?t:t.children("div.elfinder-cwd-file-wrapper,div.elfinder-cwd-filename");t.hasClass(k)&&t.droppable("enable"),i.hasClass(x)&&i.draggable("enable")}).on("scrolltoview",b,function(t,i){ie(e(this),!i||void 0===i.blink||i.blink)}).on("mouseenter."+t.namespace+" mouseleave."+t.namespace,b,function(i){"mouseenter"===i.type&&(re||t.UA.Mobile)||(t.trigger("hover",{hash:t.cwdId2Hash(e(this).attr("id")),type:i.type}),e(this).toggleClass(C,"mouseenter"==i.type))}).on("mouseenter."+t.namespace+" mouseleave."+t.namespace,".elfinder-cwd-file-wrapper,.elfinder-cwd-filename",function(t){"mouseenter"===t.type&&re||e(this).closest(b).children(".elfinder-cwd-file-wrapper,.elfinder-cwd-filename").toggleClass(_,"mouseenter"==t.type)}).on("contextmenu."+t.namespace,function(i){var n=e(i.target).closest(b);(n.get(0)!==i.target||X[t.cwdId2Hash(n.get(0).id)])&&(n.find("input:text,textarea").length?i.stopPropagation():n.length&&("TD"!=i.target.nodeName||X[t.cwdId2Hash(n.get(0).id)])&&(i.stopPropagation(),i.preventDefault(),n.hasClass(w)||Me.data("touching")||(n.hasClass(y)||(Z({notrigger:!0}),n.trigger(h),te()),t.trigger("contextmenu",{type:"files",targets:t.selected(),x:i.pageX,y:i.pageY}))))}).on("click."+t.namespace,function(e){e.target!==this||Ie.data("longtap")||!e.shiftKey&&!e.ctrlKey&&!e.metaKey&&Z()}).on("create."+t.namespace,function(i,n){var a=u?Ie.find("tbody"):Ie,o=a.find(".elfinder-cwd-parent"),s=n.move||!1,r=e(Y(n)).addClass(D),l=t.selected();l.length?s&&t.trigger("lockfiles",{files:l}):Z(),o.length?o.after(r):a.prepend(r),ve(),Me.scrollTop(0).scrollLeft(0)}).on("unselectall",Z).on("selectfile",function(e,i){t.cwdHash2Elm(i).trigger(h),te()}).on("colwidth",function(){u&&(Ie.find("table").css("table-layout","").find("td").css("width",""),ge({fitWidth:!0}),t.storage("cwdColWidth",U=null))}).on("iconpref",function(e,t){Ie.removeClass(function(e,t){return(t.match(/\belfinder-cwd-size\S+/g)||[]).join(" ")}),r=t&&parseInt(t.size)||0,u||(r>0&&Ie.addClass("elfinder-cwd-size"+r),ae.renderd&&requestAnimationFrame(function(){Re.icons={},ae.hpi=null,_e(Ie,ae.renderd),de()}))}).on("onwheel"in document?"wheel":"mousewheel",function(e){var n,a;!u&&(e.ctrlKey&&!e.metaKey||!e.ctrlKey&&e.metaKey)&&(e.stopPropagation(),e.preventDefault(),void 0!==(n=Ie.data("wheelTm"))?(clearTimeout(n),Ie.data("wheelTm",setTimeout(function(){Ie.removeData("wheelTm")},200))):(Ie.data("wheelTm",!1),a=r||0,(e.originalEvent.deltaY?e.originalEvent.deltaY:-e.originalEvent.wheelDelta)>0?r>0&&(a=r-1):r<i.iconsView.sizeMax&&(a=r+1),a!==r&&(t.storage("iconsize",a),Ie.trigger("iconpref",{size:a}))))}),Me=e('<div class="elfinder-cwd-wrapper"></div>').droppable(Object.assign({},be,{autoDisable:!1})).on("contextmenu."+t.namespace,Te).on("touchstart."+t.namespace,De).on("touchmove."+t.namespace+" touchend."+t.namespace,ze).on("click."+t.namespace,Ae).on("scroll."+t.namespace,function(){re||(Ie.data("selectable")&&Ie.selectable("disable"),Me.trigger("elfscrstart")),re=!0,ae.scrtm&&cancelAnimationFrame(ae.scrtm),ae.scrtm&&Math.abs((ae.scrolltop||0)-(ae.scrolltop=this.scrollTop||e(this).scrollTop()))<5&&(ae.scrtm=0,Me.trigger(se)),ae.scrtm=requestAnimationFrame(function(){ae.scrtm=0,Me.trigger(se)})}).on(se,function(){re=!1,de()}),Ee=e("<div>&nbsp;</div>").css({position:"absolute",width:"1px",height:"1px"}).hide(),Oe=H?e('<div class="elfinder-cwd-selectall"><input type="checkbox"/></div>').attr("title",t.i18n("selectall")).on("click",function(t){if(t.stopPropagation(),t.preventDefault(),e(this).data("pending"))return!1;Oe.data("pending",!0),Ie.hasClass("elfinder-cwd-allselected")?(Oe.find("input").prop("checked",!1),requestAnimationFrame(function(){Z()})):Q()}):e(),je=null,Pe=function(t){var i=function(){if(void 0!==ae.renderd){var t=0;Me.siblings("div.elfinder-panel:visible").each(function(){t+=e(this).outerHeight(!0)}),Me.height(Fe.height()-t-Me._padding)}};t&&i(),je&&cancelAnimationFrame(je),je=requestAnimationFrame(function(){var e;!t&&i(),Ie.css("height","auto"),e=Me[0].clientHeight-parseInt(Me.css("padding-top"))-parseInt(Me.css("padding-bottom"))-parseInt(Ie.css("margin-top")),Ie.outerHeight(!0)<e&&Ie.height(e)}),u&&!N&&(t?Me.trigger("resize.fixheader"):ge()),de()},Fe=e(this).parent().on("resize",Pe).children(".elfinder-workzone").append(Me.append(this).append(Ee)),He=e('<div class="elfinder-cwd-message-board"></div>').insertAfter(Ie),Ne=e('<div class="elfinder-cwd-expires" ></div>'),Ue=function(){var e,i,n;o&&clearTimeout(o),l&&t.volumeExpires[l]&&(n=(i=t.volumeExpires[l]-+new Date/1e3)%60+.1,e=Math.floor(i/60),Ne.html(t.i18n(["minsLeft",e])).show(),e&&(o=setTimeout(Ue,1e3*n)))},Re={icons:{},list:{}};t.UA.ltIE10||He.append(e('<div class="elfinder-cwd-trash" ></div>').html(t.i18n("volume_Trash"))).append(Ne),B=Object.assign(B,i.replacement||{});try{U=t.storage("cwdColWidth")?t.storage("cwdColWidth"):null}catch(e){U=null}t.bind("columnpref",function(n){var a=n.data||{};(j=t.storage("cwdCols"))?(j=e.grep(j,function(e){return-1!==i.listView.columns.indexOf(e)}),i.listView.columns.length>j.length&&e.each(i.listView.columns,function(e,t){-1===j.indexOf(t)&&j.push(t)})):j=i.listView.columns;var o=t.storage("columnhides")||null;o&&Object.keys(o).length&&(j=e.grep(j,function(e){return!o[e]})),R.row=F(),u&&a.repaint&&Se()}).trigger("columnpref"),d&&e("body").on("touchstart touchmove touchend",function(e){}),H&&Ie.addClass("elfinder-has-checkbox"),e(window).on("scroll."+t.namespace,function(){c&&cancelAnimationFrame(c),c=requestAnimationFrame(function(){Me.trigger(se)})}),e(document).on("keydown."+t.namespace,function(i){i.keyCode==e.ui.keyCode.ESCAPE&&(t.getUI().find(".ui-widget:visible").length||Z())}),t.one("init",function(){var n,a,o,r,l=document.createElement("style"),c=0;document.head&&(document.head.appendChild(l),(n=l.sheet).insertRule('.elfinder-cwd-wrapper-empty .elfinder-cwd:not(.elfinder-table-header-sticky):after{ content:"'+t.i18n("emptyFolder")+'" }',c++),n.insertRule('.elfinder-cwd-wrapper-empty .native-droppable .elfinder-cwd:not(.elfinder-table-header-sticky):after{ content:"'+t.i18n("emptyFolder"+(d?"LTap":"Drop"))+'" }',c++),n.insertRule('.elfinder-cwd-wrapper-empty .ui-droppable-disabled .elfinder-cwd:not(.elfinder-table-header-sticky):after{ content:"'+t.i18n("emptyFolder")+'" }',c++),n.insertRule('.elfinder-cwd-wrapper-empty.elfinder-search-result .elfinder-cwd:not(.elfinder-table-header-sticky):after{ content:"'+t.i18n("emptySearch")+'" }',c++),n.insertRule('.elfinder-cwd-wrapper-empty.elfinder-search-result.elfinder-incsearch-result .elfinder-cwd:not(.elfinder-table-header-sticky):after{ content:"'+t.i18n("emptyIncSearch")+'" }',c++),n.insertRule('.elfinder-cwd-wrapper-empty.elfinder-search-result.elfinder-letsearch-result .elfinder-cwd:not(.elfinder-table-header-sticky):after{ content:"'+t.i18n("emptyLetSearch")+'" }',c++)),(r=t.storage("iconsize")||i.iconsView.size||0)&&(r=Math.min(r,i.iconsView.sizeMax),Ie.trigger("iconpref",{size:r})),d||(t.one("open",function(){n&&t.zIndex&&n.insertRule(".ui-selectable-helper{z-index:"+t.zIndex+";}",c++)}),o=e('<div style="position:absolute"></div>'),(a=t.getUI()).on("resize",function(e,t){var i;e.preventDefault(),e.stopPropagation(),t&&t.fullscreen&&(i=a.offset(),"on"===t.fullscreen?(o.css({top:-1*i.top,left:-1*i.left}).appendTo(a),le.appendTo=o):(o.detach(),le.appendTo="body"),Ie.data("selectable")&&Ie.selectable("option",{appendTo:le.appendTo}))})),s=t.getUI("tree").length}).bind("enable",function(){Pe()}).bind("request.open",function(){ae.getTmbs=[]}).one("open",function(){t.maxTargets&&(A=Math.min(t.maxTargets,A))}).bind("open add remove searchend",function(){var i,n=t.cwd().hash,a=this.type;if(("open"===a||"searchend"===a||t.searchStatus.state<2)&&(E=e.map(t.files(n),function(e){return e.hash}),t.trigger("cwdhasheschange",E)),"open"===a){var o=n&&(!t.file(n)||s)?s?(i=e.Deferred(),t.one("treesync",function(e){e.data.always(function(){i.resolve()})}),i):t.request({data:{cmd:"parents",target:t.cwd().hash},preventFail:!0}):null,r=t.cwd();r.volumeid!==l&&(Ne.empty().hide(),l&&Me.removeClass("elfinder-cwd-wrapper-"+l),l=r.volumeid,Ue(),Me.addClass("elfinder-cwd-wrapper-"+l)),e.when(o).done(function(){var i;M=t.parents(r.hash),Me[(i=!1,e.each(M,function(e,n){if(t.trashes[n])return i=!0,!1}),i?"addClass":"removeClass")]("elfinder-cwd-wrapper-trash")}),O=void 0,Z({notrigger:!0}),Se()}}).bind("search",function(i){E=e.map(i.data.files,function(e){return e.hash}),t.trigger("cwdhasheschange",E),O=void 0,t.searchStatus.ininc=!1,Se(),t.autoSync("stop")}).bind("searchend",function(e){(S||O)&&(S="",O?t.trigger("incsearchend",e.data):e.data&&e.data.noupdate||Se()),t.autoSync()}).bind("searchstart",function(e){Z(),S=e.data.query}).bind("incsearchstart",function(i){var n=i.data.query||"",a=i.data.type||"SearchName",o=t.options.commandsOptions.search.searchTypes||{};(o[a]&&o[a].incsearch||"SearchName"===a)&&(X={},t.lazy(function(){var i,s,r="";if(S=n,n){if("/"===n.substr(0,1)&&(n=n.substr(1),r="^"),i=new RegExp(r+n.replace(/([\\*\;\.\?\[\]\{\}\(\)\^\$\-\|])/g,"\\$1"),"i"),"SearchName"===a)O=e.grep(E,function(e){var n=t.file(e);return!(!n||!(n.name.match(i)||n.i18&&n.i18.match(i)))});else if("string"==typeof(s=o[a].incsearch))O=e.grep(E,function(e){var n=t.file(e);return!!(n&&n[s]&&(n[s]+"").match(i))});else if("function"==typeof s)try{O=e.grep(s({val:n,regex:i},E,t),function(e){return!!t.file(e)})}catch(e){O=[]}t.trigger("incsearch",{hashes:O,query:n}).searchStatus.ininc=!0,Se(),t.autoSync("stop")}else t.trigger("incsearchend")}))}).bind("incsearchend",function(e){S="",t.searchStatus.ininc=!1,O=void 0,e.data&&e.data.noupdate||Se(),t.autoSync()}).bind("sortchange",function(){var e=Me.scrollLeft(),i=Ie.hasClass("elfinder-cwd-allselected");Se(),t.one("cwdrender",function(){Me.scrollLeft(e),i&&(X=t.arrayFlip(O||E,!0)),(i||Object.keys(X).length)&&te()})}).bind("viewchange",function(){var e="list"!=t.viewType,i=Ie.hasClass("elfinder-cwd-allselected");e!=u&&(u=e,t.viewType=u?"list":"icons",r&&t.one("cwdinit",function(){Ie.trigger("iconpref",{size:r})}),Se(),Pe(),i&&(Ie.addClass("elfinder-cwd-allselected"),Oe.find("input").prop("checked",!0)),Object.keys(X).length&&te())}).bind("wzresize",function(){var e,i=u?Ie.find("tbody"):Ie;Pe(!0),ae.hpi&&_e(i,i.find("[id]").length),e=Ie.offset(),Fe.data("rectangle",Object.assign({width:Fe.width(),height:Fe.height(),cwdEdge:"ltr"===t.direction?e.left:e.left+Ie.width()},Fe.offset())),ae.itemH=(u?i.find("tr:first"):i.find("[id]:first")).outerHeight(!0)}).bind("changeclipboard",function(t){I={},t.data&&t.data.clipboard&&t.data.clipboard.length&&e.each(t.data.clipboard,function(e,t){t.cut&&(I[t.hash]=!0)})}).bind("resMixinMake",function(){ve()}).bind("tmbreload",function(t){var i={},n=t.data&&t.data.files?t.data.files:null;e.each(n,function(e,t){t.tmb&&"1"!=t.tmb&&(i[t.hash]=t.tmb)}),Object.keys(i).length&&we(i,!0)}).add(function(i){var n=S?new RegExp(S.replace(/([\\*\;\.\?\[\]\{\}\(\)\^\$\-\|])/g,"\\$1"),"i"):null,a=t.searchStatus.mime,o=t.searchStatus.state>1,s=o&&t.searchStatus.target?t.searchStatus.target:t.cwd().hash,r=t.path(s),l=e.grep(i.data.added||[],function(i){return!!function(i){var l,c;return!(l=i.phash===s)&&o&&(c=i.path||t.path(i.hash),!(l=r&&0===c.indexOf(r))&&t.searchStatus.mixed&&(l=!!e.grep(t.searchStatus.mixed,function(e){return 0===i.hash.indexOf(e)}).length)),l&&o&&(l=a?0===i.mime.indexOf(a):!!(i.name.match(n)||i.i18&&i.i18.match(n))),l}(i)});ke(l),2===t.searchStatus.state&&(e.each(l,function(t,i){-1===e.inArray(i.hash,E)&&E.push(i.hash)}),t.trigger("cwdhasheschange",E)),u&&Pe(),Me.trigger(se)}).change(function(i){var n,a=t.cwd().hash,o=t.selected();S?e.each(i.data.changed||[],function(i,a){t.cwdHash2Elm(a.hash).length&&(Ce([a.hash]),ke([a]),-1!==e.inArray(a.hash,o)&&G(a.hash),n=!0)}):e.each(e.grep(i.data.changed||[],function(e){return e.phash==a}),function(i,a){t.cwdHash2Elm(a.hash).length&&(Ce([a.hash]),ke([a]),-1!==e.inArray(a.hash,o)&&G(a.hash),n=!0)}),n&&(t.trigger("cwdhasheschange",E),u&&Pe(),Me.trigger(se)),te()}).remove(function(e){var t=u?Ie.find("tbody"):Ie;Ce(e.data.removed||[]),te(),ne.length<1&&t.children(b+(i.oldSchool?":not(.elfinder-cwd-parent)":"")).length<1?(Fe.addClass("elfinder-cwd-wrapper-empty"),H&&Oe.find("input").prop("checked",!1),Ee.hide(),Me.off(se,pe),Pe()):(_e(t),Me.trigger(se))}).dragstart(function(t){var i=e(t.data.target),n=t.data.originalEvent;i.hasClass(v)&&(i.hasClass(y)||(!(n.ctrlKey||n.metaKey||n.shiftKey)&&Z({notrigger:!0}),i.trigger(h),te())),Ie.removeClass(w).data("selectable")&&Ie.selectable("disable"),V=!0}).dragstop(function(){Ie.data("selectable")&&Ie.selectable("enable"),V=!1}).bind("lockfiles unlockfiles selectfiles unselectfiles",function(i){var n,a,o,s={lockfiles:f,unlockfiles:m,selectfiles:h,unselectfiles:p}[i.type],r=i.data.files||[],l=r.length,c=i.data.helper||e();if(l>0&&(n=t.parents(r[0])),s!==h&&s!==p||(o=s===h,e.each(r,function(e,t){var i=Ie.hasClass("elfinder-cwd-allselected");X[t]?(i&&(H&&Oe.children("input").prop("checked",!1),Ie.removeClass("elfinder-cwd-allselected"),i=!1),!o&&delete X[t]):o&&(X[t]=!0)})),!c.data("locked")){for(;l--;)try{t.cwdHash2Elm(r[l]).trigger(s)}catch(i){}!i.data.inselect&&te()}Me.data("dropover")&&-1!==n.indexOf(Me.data("dropover"))&&(a="lockfiles"!==i.type,c.toggleClass("elfinder-drag-helper-plus",a),Me.toggleClass(T,a))}).bind("mkdir mkfile duplicate upload rename archive extract paste multiupload",function(i){if("upload"!=i.type||!i.data._multiupload){var n=t.cwd().hash;Z({notrigger:!0}),e.each((i.data.added||[]).concat(i.data.changed||[]),function(e,t){t&&t.phash==n&&G(t.hash)}),te()}}).shortcut({pattern:"ctrl+a",description:"selectall",callback:Q}).shortcut({pattern:"ctrl+shift+i",description:"selectinvert",callback:function(){var i={};J?Z():Object.keys(X).length?(e.each(O||E,function(e,n){var a=t.cwdHash2Elm(n);X[n]?a.length&&a.trigger(p):(i[n]=!0,a.length&&a.trigger(h))}),X=i,te()):Q()}}).shortcut({pattern:"left right up down shift+left shift+right shift+up shift+down",description:"selectfiles",type:"keydown",callback:function(t){!function(t,i){var n,a,o,s,r,l=e.ui.keyCode,c=t==l.LEFT||t==l.UP,d=Ie.find("[id]."+y);function f(e,t){return e[t+"All"]("[id]:not(."+w+"):not(.elfinder-cwd-parent):first")}if(d.length)if((o=f(n=d.filter(c?":first":":last"),c?"prev":"next")).length)if(u||t==l.LEFT||t==l.RIGHT)a=o;else if(s=n.position().top,r=n.position().left,a=n,c){do{a=a.prev("[id]")}while(a.length&&!(a.position().top<s&&a.position().left<=r));a.hasClass(w)&&(a=f(a,"next"))}else{do{a=a.next("[id]")}while(a.length&&!(a.position().top>s&&a.position().left>=r));a.hasClass(w)&&(a=f(a,"prev")),a.length||(o=Ie.find("[id]:not(."+w+"):last")).position().top>s&&(a=o)}else a=n;else a=K.length?c?K.prev():K:Ie.find("[id]:not(."+w+"):not(.elfinder-cwd-parent):"+(c?"last":"first"));a&&a.length&&!a.hasClass("elfinder-cwd-parent")&&(n&&i?a=n.add(n[c?"prevUntil":"nextUntil"]("#"+a.attr("id"))).add(a):d.trigger(p),a.trigger(h),ie(a.filter(c?":first":":last")),te())}(t.keyCode,t.shiftKey)}}).shortcut({pattern:"home",description:"selectffile",callback:function(e){Z({notrigger:!0}),ie(Ie.find("[id]:first").trigger(h)),te()}}).shortcut({pattern:"end",description:"selectlfile",callback:function(e){Z({notrigger:!0}),ie(Ie.find("[id]:last").trigger(h)),te()}}).shortcut({pattern:"page_up",description:"pageTurning",callback:function(e){ae.itemH&&Me.scrollTop(Math.round(Me.scrollTop()-Math.floor((Me.height()+(u?-1*ae.itemH:16))/ae.itemH)*ae.itemH))}}).shortcut({pattern:"page_down",description:"pageTurning",callback:function(e){ae.itemH&&Me.scrollTop(Math.round(Me.scrollTop()+Math.floor((Me.height()+(u?-1*ae.itemH:16))/ae.itemH)*ae.itemH))}})}),this},e.fn.elfinderdialog=function(t,i){var n,a,o,s,r,l=-1!=window.navigator.platform.indexOf("Win"),c={},d={enabled:!1,width:!1,height:!1,defaultSize:null},u=function(t){var n,a;d.enabled&&(a=i.options.dialogContained?s:e(window),n={maxWidth:d.width?a.width()-c.width:null,maxHeight:d.height?a.height()-c.height:null},Object.assign(r,n),t.css(n).trigger("resize"),t.data("hasResizable")&&(t.resizable("option","maxWidth")<n.maxWidth||t.resizable("option","maxHeight")<n.maxHeight)&&t.resizable("option",n))},h=function(e){var t=e.data;a&&cancelAnimationFrame(a),a=requestAnimationFrame(function(){d.enabled&&u(t)})},p=function(){var e=s.children(".elfinder-dialog."+i.res("class","editing")+":visible");i[e.length?"disable":"enable"]()};return i&&i.ui?s=i.getUI():(s=this.closest(".elfinder"),i||(i=s.elfinder("instance"))),"string"==typeof t?((o=this.closest(".ui-dialog")).length&&("open"===t?"none"===o.css("display")&&(o.trigger("posinit").show().trigger("open").hide(),o.fadeIn(120,function(){i.trigger("dialogopened",{dialog:o})})):"close"===t||"destroy"===t?(o.stop(!0),(o.is(":visible")||s.is(":hidden"))&&(o.trigger("close"),i.trigger("dialogclosed",{dialog:o})),"destroy"===t?(o.remove(),i.trigger("dialogremoved",{dialog:o})):o.data("minimized")&&o.data("minimized").close()):"toTop"===t?(o.trigger("totop"),i.trigger("dialogtotoped",{dialog:o})):"posInit"===t?(o.trigger("posinit"),i.trigger("dialogposinited",{dialog:o})):"tabstopsInit"===t?(o.trigger("tabstopsInit"),i.trigger("dialogtabstopsinited",{dialog:o})):"checkEditing"===t&&p()),this):((t=Object.assign({},e.fn.elfinderdialog.defaults,t)).allowMinimize&&"auto"===t.allowMinimize&&(t.allowMinimize=!!this.find("textarea,input").length),t.openMaximized=t.allowMinimize&&t.openMaximized,t.headerBtnPos&&"auto"===t.headerBtnPos&&(t.headerBtnPos=l?"right":"left"),t.headerBtnOrder&&"auto"===t.headerBtnOrder&&(t.headerBtnOrder=l?"close:maximize:minimize":"close:minimize:maximize"),t.modal&&t.allowMinimize&&(t.allowMinimize=!1),i.options.dialogContained?d.width=d.height=d.enabled=!0:(d.width="window"===t.maxWidth,d.height="window"===t.maxHeight,(d.width||d.height)&&(d.enabled=!0)),n=i.arrayFlip(t.propagationEvents,!0),this.filter(":not(.ui-dialog-content)").each(function(){var a,o,f=e(this).addClass("ui-dialog-content ui-widget-content"),m="elfinder-dialog-active",g="elfinder-dialog",v="elfinder-dialog-notify",b="ui-state-hover",y="elfinder-tabstop",w="elfinder-focus",x="elfinder-dialog-modal",k=parseInt(1e6*Math.random()),C=e('<div class="ui-dialog-titlebar ui-widget-header ui-corner-top ui-helper-clearfix"><span class="elfinder-dialog-title">'+t.title+"</span></div>"),_=e('<div class="ui-dialog-buttonset"></div>'),T=e('<div class=" ui-helper-clearfix ui-dialog-buttonpane ui-widget-content"></div>').append(_),D=0,z=0,A=e(),S=e('<div style="width:100%;height:100%;position:absolute;top:0px;left:0px;"></div>').hide(),I=function(){(A=j.find("."+y)).length&&(A.attr("tabindex","-1"),A.filter("."+w).length||_.children("."+y+":"+(l?"first":"last")).addClass(w))},M=function(t){var i=A.filter(":visible:enabled"),n=t?null:i.filter("."+w+":first");return n&&n.length||(n=i.first()),t&&e.each(i,function(e,a){if(a===t&&i[e+1])return n=i.eq(e+1),!1}),n},E=function(t){var i=A.filter(":visible:enabled"),n=i.last();return e.each(i,function(e,a){if(a===t&&i[e-1])return n=i.eq(e-1),!1}),n},O={close:function(){C.prepend(e('<span class="ui-widget-header ui-dialog-titlebar-close ui-corner-all elfinder-titlebar-button"><span class="ui-icon ui-icon-closethick"></span></span>').on("mousedown touchstart",function(e){e.preventDefault(),e.stopPropagation(),f.elfinderdialog("close")}))},maximize:function(){t.allowMaximize&&(j.on("resize",function(e,t){var i,n;if(e.preventDefault(),e.stopPropagation(),t&&t.maximize){if(n=C.find(".elfinder-titlebar-full"),i="on"===t.maximize,n.children("span.ui-icon").toggleClass("ui-icon-plusthick",!i).toggleClass("ui-icon-arrowreturnthick-1-s",i),i){try{j.hasClass("ui-draggable")&&j.draggable("disable"),j.hasClass("ui-resizable")&&j.resizable("disable")}catch(e){}f.css("width","100%").css("height",j.height()-j.children(".ui-dialog-titlebar").outerHeight(!0)-T.outerHeight(!0))}else{f.attr("style",n.data("style")),n.removeData("style"),P();try{j.hasClass("ui-draggable")&&j.draggable("enable"),j.hasClass("ui-resizable")&&j.resizable("enable")}catch(e){}}j.trigger("resize",{init:!0})}}),C.prepend(e('<span class="ui-widget-header ui-corner-all elfinder-titlebar-button elfinder-titlebar-full"><span class="ui-icon ui-icon-plusthick"></span></span>').on("mousedown touchstart",function(n){var a=e(this);n.preventDefault(),n.stopPropagation(),j.hasClass("elfinder-maximized")||void 0!==a.data("style")||(f.height(f.height()),a.data("style",f.attr("style")||"")),i.toggleMaximize(j),"function"==typeof t.maximize&&t.maximize.call(f[0])})))},minimize:function(){var n,a,o;t.allowMinimize&&(n=e('<span class="ui-widget-header ui-corner-all elfinder-titlebar-button elfinder-titlebar-minimize"><span class="ui-icon ui-icon-minusthick"></span></span>').on("mousedown touchstart",function(n){var s=e(this),r=i.getUI("bottomtray"),l={width:70,height:24},c=e("<div></div>").css(l).addClass(j.get(0).className+" elfinder-dialog-minimized"),d=function(){a.remove(),j.removeData("minimized").show(),f.elfinderdialog("close")},u={};n.preventDefault(),n.stopPropagation(),j.data("minimized")?(j.removeData("minimized").before(a.css(Object.assign({position:"absolute"},a.offset()))),i.toFront(a),a.animate(Object.assign({width:j.width(),height:j.height()},o),function(){j.show(),i.toFront(j),a.remove(),P(),p(),j.trigger("resize",{init:!0}),"function"==typeof t.minimize&&t.minimize.call(f[0])})):(o=j.data("minimized",{dialog:function(){return a},show:function(){a.show()},hide:function(){a.hide()},close:d,title:function(e){a.children(".ui-dialog-titlebar").children(".elfinder-dialog-title").text(e)}}).position(),a=j.clone().on("mousedown",function(){s.trigger("mousedown")}).removeClass("ui-draggable ui-resizable elfinder-frontmost"),r.append(c),Object.assign(u,c.offset(),l),c.remove(),a.height(j.height()).children(".ui-dialog-content:first").empty(),i.toHide(j.before(a)),a.children(".ui-dialog-content:first,.ui-dialog-buttonpane,.ui-resizable-handle").remove(),a.find(".elfinder-titlebar-minimize,.elfinder-titlebar-full").remove(),a.find(".ui-dialog-titlebar-close").on("mousedown",function(e){e.stopPropagation(),e.preventDefault(),d()}),a.animate(u,function(){a.attr("style","").css({maxWidth:j.width()}).addClass("elfinder-dialog-minimized").appendTo(r),p(),"function"==typeof t.minimize&&t.minimize.call(f[0])}))}),C.on("dblclick",function(t){e(this).children(".elfinder-titlebar-minimize").trigger("mousedown")}).prepend(n),j.on("togleminimize",function(){n.trigger("mousedown")}))}},j=e('<div class="ui-front ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable std42-dialog touch-punch '+g+" "+t.cssClass+'"></div>').hide().append(f).appendTo(s).draggable({containment:i.options.dialogContained?s:null,handle:".ui-dialog-titlebar",start:function(){S.show()},drag:function(e,t){var n=t.offset.top,a=t.offset.left;n<0&&(t.position.top=t.position.top-n),a<0&&(t.position.left=t.position.left-a),i.options.dialogContained&&(t.position.top<0&&(t.position.top=0),t.position.left<0&&(t.position.left=0))},stop:function(e,i){S.hide(),j.css({height:t.height}),f.data("draged",!0)}}).css({width:t.width,height:t.height,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight}).on("touchstart touchmove touchend click dblclick mouseup mouseenter mouseleave mouseout mouseover mousemove",function(e){!n[e.type]&&e.stopPropagation()}).on("mousedown",function(t){!n[t.type]&&t.stopPropagation(),requestAnimationFrame(function(){j.is(":visible")&&!j.hasClass("elfinder-frontmost")&&((o=e(":focus")).length||(o=void 0),j.trigger("totop"))})}).on("open",function(){j.data("margin-y",f.outerHeight(!0)-f.height()),d.enabled&&(t.height&&"auto"!==t.height&&j.trigger("resize",{init:!0}),d.defaultSize||(d.defaultSize={width:f.width(),height:f.height()}),u(j),j.trigger("resize").trigger("posinit"),s.on("resize."+i.namespace,j,h)),j.hasClass(v)||s.children("."+g+":visible:not(."+v+")").each(function(){var t=e(this),i=parseInt(t.css("top")),n=parseInt(t.css("left")),a=parseInt(j.css("top")),o=parseInt(j.css("left")),s=Math.abs(i-a)<10,r=Math.abs(n-o)<10;t[0]!=j[0]&&(s||r)&&j.css({top:s?i+10:a,left:r?n+10:o})}),j.data("modal")&&(j.addClass(x),i.getUI("overlay").elfinderoverlay("show")),j.trigger("totop"),t.openMaximized&&i.toggleMaximize(j),i.trigger("dialogopen",{dialog:j}),"function"==typeof t.open&&e.proxy(t.open,f[0])(),t.closeOnEscape&&e(document).on("keydown."+k,function(t){t.keyCode==e.ui.keyCode.ESCAPE&&j.hasClass("elfinder-frontmost")&&f.elfinderdialog("close")}),j.hasClass(i.res("class","editing"))&&p()}).on("close",function(n){var a;t.beforeclose&&"function"==typeof t.beforeclose?(a=t.beforeclose())&&a.promise||(a=a?e.Deferred().resolve():e.Deferred().reject()):a=e.Deferred().resolve(),a.done(function(){d.enabled&&s.off("resize."+i.namespace,h),t.closeOnEscape&&e(document).off("keyup."+k),t.allowMaximize&&i.toggleMaximize(j,!1),i.toHide(j),j.data("modal")&&i.getUI("overlay").elfinderoverlay("hide"),"function"==typeof t.close&&e.proxy(t.close,f[0])(),t.destroyOnClose&&j.parent().length&&j.hide().remove(),s.children("."+g+":visible"),j.hasClass(i.res("class","editing"))&&p()})}).on("totop frontmost",function(){var e=i.storage("autoFocusDialog");j.data("focusOnMouseOver",e?e>0:i.options.uiOptions.dialog.focusOnMouseOver),j.data("minimized")&&C.children(".elfinder-titlebar-minimize").trigger("mousedown"),!j.data("modal")&&i.getUI("overlay").is(":visible")?i.getUI("overlay").before(j):i.toFront(j),s.children("."+g+":not(."+x+")").removeClass(m),j.addClass(m),!i.UA.Mobile&&(o||M()).trigger("focus"),o=void 0}).on("posinit",function(){var n,a,o,l,c,d,u,h=t.position;if(!j.hasClass("elfinder-maximized")){if(!h&&!j.data("resizing")){if(u=s.hasClass("elfinder-fullscreen")||i.options.enableAlways,j.css(u?{maxWidth:"100%",maxHeight:"100%",overflow:"auto"}:r),i.UA.Mobile&&!u&&j.data("rotated")===i.UA.Rotated)return;j.data("rotated",i.UA.Rotated),c=e(window),n=s.offset(),(l={width:j.outerWidth(!0),height:j.outerHeight(!0)}).right=n.left+l.width,l.bottom=n.top+l.height,(d={scrLeft:c.scrollLeft(),scrTop:c.scrollTop(),width:c.width(),height:c.height()}).right=d.scrLeft+d.width,d.bottom=d.scrTop+d.height,i.options.dialogContained||u?(a=0,o=0):(a=-1*n.top+d.scrTop,o=-1*n.left+d.scrLeft),h={top:l.height>=d.height?a:Math.max(a,parseInt((s.height()-l.height)/2-42)),left:l.width>=d.width?o:Math.max(o,parseInt((s.width()-l.width)/2))},l.right+h.left>d.right&&(h.left=Math.max(o,d.right-l.right)),l.bottom+h.top>d.bottom&&(h.top=Math.max(a,d.bottom-l.bottom))}t.absolute&&(h.position="absolute"),h&&j.css(h)}}).on("resize",function(i,n){var a,o,s,r,l=0,c=n&&n.init;n&&(n.minimize||n.maxmize)||j.data("minimized")||(i.stopPropagation(),i.preventDefault(),j.children(".ui-widget-header,.ui-dialog-buttonpane").each(function(){l+=e(this).outerHeight(!0)}),(r="auto"===t.height)&&f.css({"max-height":"",height:"auto"}),c||!d.enabled||i.originalEvent||j.hasClass("elfinder-maximized")?a=j.height()-l-j.data("margin-y"):(a=j.height(),o=j.css("min-height")||a,s=j.css("max-height")||a,o=o.match(/%/)?Math.floor(parseInt(o)/100*j.parent().height()):parseInt(o),s=s.match(/%/)?Math.floor(parseInt(s)/100*j.parent().height()):parseInt(s),a=Math.min(r?j.height():d.defaultSize.height,Math.max(s,o)-l-j.data("margin-y"))),f.css(r?"max-height":"height",a),c||(P(),o=a<(o=f.height())?o+l+j.data("margin-y"):t.minHeight,j.css("min-height",o),j.data("hasResizable")&&j.resizable("option",{minHeight:o}),"function"==typeof t.resize&&e.proxy(t.resize,f[0])(i,n)))}).on("tabstopsInit",I).on("focus","."+y,function(){e(this).addClass(b).parent("label").addClass(b),this.id&&e(this).parent().find("label[for="+this.id+"]").addClass(b)}).on("click","select."+y,function(){var t=e(this);t.data("keepFocus")?t.removeData("keepFocus"):t.data("keepFocus",!0)}).on("blur","."+y,function(){e(this).removeClass(b).removeData("keepFocus").parent("label").removeClass(b),this.id&&e(this).parent().find("label[for="+this.id+"]").removeClass(b)}).on("mouseenter mouseleave","."+y+",label",function(i){var n,a=e(this);("LABEL"!==this.nodeName||a.children("."+y).length||(n=a.attr("for"))&&e("#"+n).hasClass(y))&&(t.btnHoverFocus&&j.data("focusOnMouseOver")?"mouseenter"!==i.type||e(":focus").data("keepFocus")||a.trigger("focus"):a.toggleClass(b,"mouseenter"==i.type))}).on("keydown","."+y,function(t){var i,n,a=e(this);if(a.is(":focus")){if(i=t.keyCode===e.ui.keyCode.ESCAPE,t.keyCode===e.ui.keyCode.ENTER?(t.preventDefault(),a.trigger("click")):t.keyCode===e.ui.keyCode.TAB&&t.shiftKey||t.keyCode===e.ui.keyCode.LEFT||t.keyCode==e.ui.keyCode.UP?n="prev":t.keyCode!==e.ui.keyCode.TAB&&t.keyCode!=e.ui.keyCode.RIGHT&&t.keyCode!=e.ui.keyCode.DOWN||(n="next"),n&&(a.is("textarea")&&!t.ctrlKey&&!t.metaKey||a.is("select,span.ui-slider-handle")&&t.keyCode!==e.ui.keyCode.TAB||a.is("input:not(:checkbox,:radio)")&&!t.ctrlKey&&!t.metaKey&&t.keyCode===e.ui.keyCode["prev"===n?"LEFT":"RIGHT"]))return void t.stopPropagation();i?a.is("input:not(:checkbox,:radio),textarea")&&""!==a.val()&&(a.val(""),t.stopPropagation()):t.stopPropagation(),n&&(t.preventDefault(),("prev"===n?E:M)(this).trigger("focus"))}}).data({modal:t.modal}),P=function(){var e,t=i.getUI();t.hasClass("elfinder-fullscreen")&&(e=j.position(),j.css("top",Math.max(Math.min(Math.max(e.top,0),t.height()-100),0)),j.css("left",Math.max(Math.min(Math.max(e.left,0),t.width()-200),0)))};j.prepend(C),e.each(t.headerBtnOrder.split(":").reverse(),function(e,t){O[t]&&O[t]()}),l&&C.children(".elfinder-titlebar-button").addClass("elfinder-titlebar-button-right"),e.each(t.buttons,function(t,i){var n=e('<button type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only elfinder-btncnt-'+z+++" "+y+'"><span class="ui-button-text">'+t+"</span></button>").on("click",e.proxy(i,f[0]));i._cssClass&&n.addClass(i._cssClass),l?_.append(n):_.prepend(n)}),_.children().length&&(j.append(T),j.show(),T.find("button").each(function(t,i){D+=e(i).outerWidth(!0)}),j.hide(),D+=20,j.width()<D&&j.width(D)),j.append(S),d.enabled&&(c.width=j.outerWidth(!0)-j.width()+(j.outerWidth()-j.width())/2,c.height=j.outerHeight(!0)-j.height()+(j.outerHeight()-j.height())/2),i.options.dialogContained&&(a={maxWidth:s.width()-c.width,maxHeight:s.height()-c.height},t.maxWidth=t.maxWidth?Math.min(a.maxWidth,t.maxWidth):a.maxWidth,t.maxHeight=t.maxHeight?Math.min(a.maxHeight,t.maxHeight):a.maxHeight,j.css(a)),r={maxWidth:j.css("max-width"),maxHeight:j.css("max-height"),overflow:j.css("overflow")},t.resizable&&j.resizable({minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,start:function(){S.show(),!0!==j.data("resizing")&&j.data("resizing")&&clearTimeout(j.data("resizing")),j.data("resizing",!0)},stop:function(e,t){S.hide(),j.data("resizing",setTimeout(function(){j.data("resizing",!1)},200)),d.enabled&&(d.defaultSize={width:f.width(),height:f.height()})}}).data("hasResizable",!0),t.optimizeNumber&&j.find("input[type=number]").each(function(){e(this).attr("inputmode","numeric"),e(this).attr("pattern","[0-9]*")}),I(),"function"==typeof t.create&&e.proxy(t.create,this)(),t.autoOpen&&(t.open?requestAnimationFrame(function(){f.elfinderdialog("open")}):f.elfinderdialog("open")),t.resize&&i.bind("themechange",function(){setTimeout(function(){j.data("margin-y",f.outerHeight(!0)-f.height()),j.trigger("resize",{init:!0})},300)})}),this)},e.fn.elfinderdialog.defaults={cssClass:"",title:"",modal:!1,resizable:!0,autoOpen:!0,closeOnEscape:!0,destroyOnClose:!1,buttons:{},btnHoverFocus:!0,position:null,absolute:!1,width:320,height:"auto",minWidth:200,minHeight:70,maxWidth:null,maxHeight:null,allowMinimize:"auto",allowMaximize:!1,openMaximized:!1,headerBtnPos:"auto",headerBtnOrder:"auto",optimizeNumber:!0,propagationEvents:["mousemove","mouseup"]},e.fn.elfinderfullscreenbutton=function(t){return this.each(function(){var i,n=e(this).elfinderbutton(t).children(".elfinder-button-icon");t.change(function(){i&&cancelAnimationFrame(i),i=requestAnimationFrame(function(){var e=t.value;n.addClass("elfinder-button-icon-fullscreen").toggleClass("elfinder-button-icon-unfullscreen",e),t.className=e?"unfullscreen":""})})})},e.fn.elfindernavbar=function(t,i){return this.not(".elfinder-navbar").each(function(){var n,a,o,s,r,l,c,d=e(this).hide().addClass("ui-state-default elfinder-navbar"),u=d.css("overflow","hidden").parent().children(".elfinder-workzone").append(d),h="ltr"==t.direction,p=function(){var e=t.getUI("cwd"),i=t.getUI("workzone"),n=i.data("rectangle"),a=e.offset();i.data("rectangle",Object.assign(n,{cwdEdge:"ltr"===t.direction?a.left:a.left+e.width()}))},f=function(){d.css("overflow","hidden"),n=Math.round(d.outerHeight()-d.height()),a=Math.round(c.outerWidth()-c.innerWidth()),d.css("overflow","auto")};t.one("init",function(){c=t.getUI("navdock");var e=function(){f(),t.bind("wzresize",function(){var e=0;c.width(d.outerWidth()-a),c.children().length>1&&(e=c.outerHeight(!0)),d.height(u.height()-e-n)}).trigger("wzresize")};t.cssloaded?e():t.one("cssloaded",e)}).one("opendone",function(){o&&o.trigger("resize"),d.css("overflow","auto")}).bind("themechange",f),t.UA.Touch&&(void 0===(r=t.storage("autoHide")||{}).navbar&&(r.navbar=i.autoHideUA&&i.autoHideUA.length>0&&e.grep(i.autoHideUA,function(e){return!!t.UA[e]}).length,t.storage("autoHide",r)),r.navbar&&t.one("init",function(){d.children().length&&t.uiAutoHide.push(function(){d.stop(!0,!0).trigger("navhide",{duration:"slow",init:!0})})}),t.bind("load",function(){d.children().length&&"none"!==(s=e('<div class="elfinder-navbar-swipe-handle"></div>').hide().appendTo(u)).css("pointer-events")&&(s.remove(),s=null)}),d.on("navshow navhide",function(e,i){var n="navshow"===e.type?"show":"hide",a=i&&i.duration?i.duration:"fast",o=i&&i.handleW?i.handleW:Math.max(50,t.getUI().width()/10);d.stop(!0,!0)[n]({duration:a,step:function(){t.trigger("wzresize")},complete:function(){s&&("show"===n?s.stop(!0,!0).hide():(s.width(o||""),t.resources.blink(s,"slowonce"))),t.trigger("navbar"+n),i.init&&t.trigger("uiautohide"),p()}}),r.navbar="show"!==n,t.storage("autoHide",Object.assign(t.storage("autoHide"),{navbar:r.navbar}))}).on("touchstart",function(i){e(this)["scroll"+("ltr"===t.direction?"Right":"Left")]()>5&&(i.originalEvent._preventSwipeX=!0)})),t.UA.Mobile||(o=d.resizable({handles:h?"e":"w",minWidth:i.minWidth||150,maxWidth:i.maxWidth||500,resize:function(){t.trigger("wzresize")},stop:function(e,i){t.storage("navbarWidth",i.size.width),p()}}).on("resize scroll",function(i){var n=e(this),a=n.data("posinit");i.preventDefault(),i.stopPropagation(),h||"resize"!==i.type||d.css("left",0),a&&cancelAnimationFrame(a),n.data("posinit",requestAnimationFrame(function(){var e=t.UA.Opera&&d.scrollLeft()?20:2;o.css("top",0).css({top:parseInt(d.scrollTop())+"px",left:h?"auto":-1*parseInt(d.scrollRight()-e),right:h?-1*parseInt(d.scrollLeft()-e):"auto"}),"resize"===i.type&&t.getUI("cwd").trigger("resize")}))}).children(".ui-resizable-handle").addClass("ui-front")),(l=t.storage("navbarWidth"))?d.width(l):t.UA.Mobile&&t.one(t.cssloaded?"init":"cssloaded",function(){var i=function(){l=d.parent().width()/2,d.data("defWidth")>l?d.width(l):d.width(d.data("defWidth")),d.data("width",d.width()),t.trigger("wzresize")};d.data("defWidth",d.width()),e(window).on("resize."+t.namespace,i),i()})}),this},e.fn.elfindernavdock=function(t,i){return this.not(".elfinder-navdock").each(function(){var n,a,o=e(this).hide().addClass("ui-state-default elfinder-navdock touch-punch"),s=(o.parent().children(".elfinder-workzone").append(o),function(i,n){var a,s=i-(n||o.height()),r=Object.keys(l).length,c=r?s/r:0;s&&(a=o.css("overflow"),o.css("overflow","hidden"),o.height(i),e.each(l,function(e,i){i.height(i.height()+c).trigger("resize."+t.namespace)}),t.trigger("wzresize"),o.css("overflow",a))}),r=e('<div class="ui-front ui-resizable-handle ui-resizable-n"></div>').appendTo(o),l={},c=(parseInt(i.initMaxHeight)||50)/100,d=(parseInt(i.maxHeight)||90)/100;o.data("addNode",function(e,i){var u,h,p=t.getUI("workzone").height(),f=p*c;return i=Object.assign({first:!1,sizeSync:!0,init:!1},i),e.attr("id")||e.attr("id",t.namespace+"-navdock-"+ +new Date),i.sizeSync&&(l[e.attr("id")]=e),u=o.height()+e.outerHeight(!0),i.first?r.after(e):o.append(e),a=!0,o.resizable("enable").height(u).show(),t.trigger("wzresize"),i.init&&(h=t.storage("navdockHeight"),n=u=h||(u>f?f:u)),s(Math.min(u,p*d)),o}).data("removeNode",function(i,n){var s=e("#"+i);return delete l[i],o.height(o.height()-e("#"+i).outerHeight(!0)),n?"detach"===n?s=s.detach():n.append(s):s.remove(),o.children().length<=1&&(a=!1,o.resizable("disable").height(0).hide()),t.trigger("wzresize"),s}),i.disabled||t.one("init",function(){var e;t.getUI("navbar").children().not(".ui-resizable-handle").length&&(o.data("dockEnabled",!0),o.resizable({maxHeight:t.getUI("workzone").height()*d,handles:{n:r},start:function(i,n){e=o.css("overflow"),o.css("overflow","hidden"),t.trigger("navdockresizestart",{event:i,ui:n},!0)},resize:function(e,i){o.css("top",""),t.trigger("wzresize",{inNavdockResize:!0})},stop:function(i,a){t.trigger("navdockresizestop",{event:i,ui:a},!0),o.css("top",""),n=a.size.height,t.storage("navdockHeight",n),s(n,a.originalSize.height),o.css("overflow",e)}}),t.bind("wzresize",function(e){var i,a;o.is(":visible")&&(i=t.getUI("workzone").height()*d,e.data&&e.data.inNavdockResize||(a=o.height(),i<n?Math.abs(a-i)>1&&s(i):Math.abs(a-n)>1&&s(n)),o.resizable("option","maxHeight",i))}).bind("themechange",function(){var e=Math.round(o.height());requestAnimationFrame(function(){var t=Math.round(o.height()),i=e-t;0!==i&&s(o.height(),t-i)})})),t.bind("navbarshow navbarhide",function(e){o[a&&"navbarshow"===e.type?"show":"hide"]()})})}),this},e.fn.elfinderoverlay=function(t){var i,n,a,o,s=this.parent().elfinder("instance");return this.filter(":not(.elfinder-overlay)").each(function(){t=Object.assign({},t),e(this).addClass("ui-front ui-widget-overlay elfinder-overlay").hide().on("mousedown",function(e){e.preventDefault(),e.stopPropagation()}).data({cnt:0,show:"function"==typeof t.show?t.show:function(){},hide:"function"==typeof t.hide?t.hide:function(){}})}),"show"==t&&(n=(i=this.eq(0)).data("cnt")+1,a=i.data("show"),s.toFront(i),i.data("cnt",n),i.is(":hidden")&&(i.show(),a())),"hide"==t&&(n=(i=this.eq(0)).data("cnt")-1,o=i.data("hide"),i.data("cnt",n),n<=0&&(i.hide(),o())),this},e.fn.elfinderpanel=function(t){return this.each(function(){var i=e(this).addClass("elfinder-panel ui-state-default ui-corner-all"),n="margin-"+("ltr"==t.direction?"left":"right");t.one("load",function(e){var a=t.getUI("navbar");i.css(n,parseInt(a.outerWidth(!0))),a.on("resize",function(e){e.preventDefault(),e.stopPropagation(),i.is(":visible")&&i.css(n,parseInt(a.outerWidth(!0)))})})})},e.fn.elfinderpath=function(t,i){return this.each(function(){var n,a,o="",s="",r=[],l="statusbar",c=t.res("class","hover"),d="path"+(u.prototype.uniqueid?u.prototype.uniqueid:"")+"-",h=e('<div class="ui-widget-header ui-helper-clearfix elfinder-workzone-path"></div>'),p=e(this).addClass("elfinder-path").html("&nbsp;").on("mousedown","span.elfinder-path-dir",function(i){var n=e(this).attr("id").substr(d.length);i.preventDefault(),n!=t.cwd().hash&&(e(this).addClass(c),o?t.exec("search",o,{target:n,mime:r.join(" ")}):t.trigger("select",{selected:[n]}).exec("open",n))}).prependTo(t.getUI("statusbar").show()),f=e('<div class="elfinder-path-roots"></div>').on("click",function(i){i.stopPropagation(),i.preventDefault();var n=e.map(t.roots,function(e){return t.file(e)}),a=[];e.each(n,function(e,i){i.phash||t.root(t.cwd().hash,!0)===i.hash||a.push({label:t.escape(i.i18||i.name),icon:"home",callback:function(){t.exec("open",i.hash)},options:{iconClass:i.csscls||"",iconImg:i.icon||""}})}),t.trigger("contextmenu",{raw:a,x:i.pageX,y:i.pageY})}).append('<span class="elfinder-button-icon elfinder-button-icon-menu" ></span>').appendTo(h),m=function(i){var n=[],a=[];return e.each(t.parents(i),function(e,o){var s=i===o?"elfinder-path-dir elfinder-path-cwd":"elfinder-path-dir",r=t.file(o),l=t.escape(r.i18||r.name);a.push(l),n.push('<span id="'+d+o+'" class="'+s+'" title="'+a.join(t.option("separator"))+'">'+l+"</span>")}),n.join('<span class="elfinder-path-other">'+t.option("separator")+"</span>")},g=function(){var i;p.children("span.elfinder-path-dir").attr("style",""),i="ltr"===t.direction?e("#"+d+t.cwd().hash).prevAll("span.elfinder-path-dir:first"):e(),p.scrollLeft(i.length?i.position().left:0)},v=function(){if(!t.UA.CSS.flex){var i,n,a=p.children("span.elfinder-path-dir"),o=a.length;"workzone"===l||o<2?a.attr("style",""):(p.width(p.css("max-width")),a.css({maxWidth:100/o+"%",display:"inline-block"}),i=p.width()-9,p.children("span.elfinder-path-other").each(function(){i-=e(this).width()}),n=[],a.each(function(t){var a=e(this).width();i-=a,a<this.scrollWidth&&n.push(t)}),p.width(""),n.length?(i>0&&(i/=n.length,e.each(n,function(t,n){var o=e(a[n]);o.css("max-width",o.width()+i)})),a.last().attr("style","")):a.attr("style",""))}};t.one("init",function(){n=t.getUI("tree").length,a=t.getUI("stat").length,!n&&i.toWorkzoneWithoutNavbar&&(h.append(p).insertBefore(t.getUI("workzone")),l="workzone",t.bind("open",g).one("opendone",function(){t.getUI().trigger("resize")}))}).bind("open searchend parents",function(){o="",s="",r=[],p.html(m(t.cwd().hash)),Object.keys(t.roots).length>1?(p.css("margin",""),f.show()):(p.css("margin",0),f.hide()),!a&&v()}).bind("searchstart",function(e){e.data&&(o=e.data.query||"",s=e.data.target||"",r=e.data.mimes||[])}).bind("search",function(e){var i="";i=s?m(s):t.i18n("btnAll"),p.html('<span class="elfinder-path-other">'+t.i18n("searcresult")+": </span>"+i),v()}).bind("navbarshow navbarhide",function(){var e=t.getUI("workzone");"navbarshow"===this.type?(t.unbind("open",g),p.prependTo(t.getUI("statusbar")),h.detach(),l="statusbar"):(h.append(p).insertBefore(e),l="workzone",g(),t.bind("open",g)),t.trigger("uiresize")}).bind("resize uistatchange",v)})},e.fn.elfinderplaces=function(t,i){return this.each(function(){var n={},a="class",o=t.res(a,"navdir"),s=t.res(a,"navcollapse"),r=t.res(a,"navexpand"),l=t.res(a,"hover"),c=t.res(a,"treeroot"),d=t.res(a,"adroppable"),u=t.res("tpl","placedir"),h=t.res("tpl","perms"),p=e(t.res("tpl","navspinner")),f=i.suffix?i.suffix:"",m="places"+f,g=null,v=function(e){return e.substr(6)},b=function(e){return"place-"+e},y=function(t){return e(document.getElementById(b(t)))},w=function(){var i=[],a={};(i=e.map(S.children().find("[id]"),function(e){return v(e.id)})).length?e.each(i.reverse(),function(e,t){a[t]=n[t]}):a=null,t.storage(m,a)},x=function(){var a,o;m="places"+(i.suffix?i.suffix:""),n={},"string"==typeof(a=t.storage(m))?(a=e.grep(a.split(","),function(e){return!!e}),e.each(a,function(e,t){var i=t.split("#");n[i[0]]=i[1]?i[1]:i[0]})):e.isPlainObject(a)&&(n=a),t.trigger("placesload",{dirs:n,storageKey:m},!0),(o=Object.keys(n)).length&&(A.prepend(p),t.request({data:{cmd:"info",targets:o},preventDefault:!0}).done(function(i){var a={};i.files&&i.files.length&&t.cache(i.files),e.each(i.files,function(e,t){var i=t.hash;a[i]=t}),e.each(n,function(e,t){C(a[e]||Object.assign({notfound:!0},t))}),t.storage("placesState")>0&&A.trigger("click")}).always(function(){p.remove()}))},k=function(i,n){return e(u.replace(/\{id\}/,b(i?i.hash:n)).replace(/\{name\}/,t.escape(i?i.i18||i.name:n)).replace(/\{cssclass\}/,i?t.perms2class(i)+(i.notfound?" elfinder-na":"")+(i.csscls?" "+i.csscls:""):"").replace(/\{permissions\}/,!i||i.read&&i.write&&!i.notfound?"":h).replace(/\{title\}/,i?' title="'+t.escape(t.path(i.hash,!0)||i.i18||i.name)+'"':"").replace(/\{symlink\}/,"").replace(/\{style\}/,i&&i.icon?t.getIconStyle(i):""))},C=function(e){var i,a;return"directory"===e.mime&&(a=e.hash,t.files().hasOwnProperty(a)||t.trigger("tree",{tree:[e]}),i=k(e,a),n[a]=e,S.prepend(i),A.addClass(s),D.toggle(S.children().length>1),!0)},_=function(e){var t,i,a=null;return n[e]&&(delete n[e],(t=y(e)).length&&(a=t.text(),t.parent().remove(),i=S.children().length,D.toggle(i>1),i||(A.removeClass(s),I.removeClass(r),S.slideToggle(!1)))),a},T=function(e,t){var i=e.hash,a=y(t||i),o=k(e,i);return a.length>0&&(a.parent().replaceWith(o),n[i]=e,!0)},D=e('<span class="elfinder-button-icon elfinder-button-icon-sort elfinder-places-root-icon" title="'+t.i18n("cmdsort")+'"></span>').hide().on("click",function(i){i.stopPropagation(),S.empty(),e.each(n,function(i,n){var a=t.file(i)||n,s=k(a,i),r=null;if(a||s.hide(),S.children().length&&(e.each(S.children(),function(){var t=e(this);if((a.i18||a.name).localeCompare(t.children("."+o).text())<0)return r=!s.insertBefore(t)}),null!==r))return!0;!y(i).length&&S.append(s)}),w()}),z=k({hash:"root-"+t.namespace,name:t.i18n(i.name,"places"),read:!0,write:!0}),A=z.children("."+o).addClass(c).on("click",function(e){e.stopPropagation(),A.hasClass(s)&&(I.toggleClass(r),S.slideToggle(),t.storage("placesState",I.hasClass(r)?1:0))}).append(D),S=z.children("."+t.res(a,"navsubtree")),I=e(this).addClass(t.res(a,"tree")+" elfinder-places ui-corner-all").hide().append(z).appendTo(t.getUI("navbar")).on("mouseenter mouseleave","."+o,function(t){e(this).toggleClass("ui-state-hover","mouseenter"==t.type)}).on("click","."+o,function(i){var n=e(this);n.data("longtap")?i.stopPropagation():!n.hasClass("elfinder-na")&&t.exec("open",n.attr("id").substr(6))}).on("contextmenu","."+o+":not(."+c+")",function(i){var n=e(this),a=n.attr("id").substr(6);i.preventDefault(),t.trigger("contextmenu",{raw:[{label:t.i18n("moveUp"),icon:"up",remain:!0,callback:function(){!function(e){var i=y(e),n=i.parent(),a=n.prev("div"),o="ui-state-hover",s=t.getUI("contextmenu");g&&clearTimeout(g),a.length&&(s.find(":first").data("placesHash",e),i.addClass(o),n.insertBefore(a),a=n.prev("div"),g=setTimeout(function(){i.removeClass(o),s.find(":first").data("placesHash")===e&&s.hide().empty()},1500)),a.length||(i.removeClass(o),s.hide().empty())}(a),w()}},"|",{label:t.i18n("rmFromPlaces"),icon:"rm",callback:function(){_(a),w()}}],x:i.pageX,y:i.pageY}),n.addClass("ui-state-hover"),t.getUI("contextmenu").children().on("mouseenter",function(){n.addClass("ui-state-hover")}),t.bind("closecontextmenu",function(){n.removeClass("ui-state-hover")})}).droppable({tolerance:"pointer",accept:".elfinder-cwd-file-wrapper,.elfinder-tree-dir,.elfinder-cwd-file",hoverClass:t.res("class","adroppable"),classes:{"ui-droppable-hover":t.res("class","adroppable")},over:function(i,a){var o=a.helper,s=e.grep(o.data("files"),function(e){return"directory"===t.file(e).mime&&!n[e]});i.stopPropagation(),o.data("dropover",o.data("dropover")+1),t.insideWorkzone(i.pageX,i.pageY)&&(s.length>0?(o.addClass("elfinder-drag-helper-plus"),t.trigger("unlockfiles",{files:o.data("files"),helper:o})):e(this).removeClass(d))},out:function(t,i){var n=i.helper;t.stopPropagation(),n.removeClass("elfinder-drag-helper-move elfinder-drag-helper-plus").data("dropover",Math.max(n.data("dropover")-1,0)),e(this).removeData("dropover").removeClass(d)},drop:function(i,a){var o=a.helper,s=!0;e.each(o.data("files"),function(e,i){var a=t.file(i);a&&"directory"==a.mime&&!n[a.hash]?C(a):s=!1}),w(),s&&o.hide()}}).on("touchstart","."+o+":not(."+c+")",function(i){if(!(i.originalEvent.touches.length>1))var n=e(this).attr("id").substr(6),a=e(this).addClass(l).data("longtap",null).data("tmlongtap",setTimeout(function(){a.data("longtap",!0),t.trigger("contextmenu",{raw:[{label:t.i18n("rmFromPlaces"),icon:"rm",callback:function(){_(n),w()}}],x:i.originalEvent.touches[0].pageX,y:i.originalEvent.touches[0].pageY})},500))}).on("touchmove touchend","."+o+":not(."+c+")",function(t){clearTimeout(e(this).data("tmlongtap")),"touchmove"==t.type&&e(this).removeClass(l)});e.fn.sortable&&S.addClass("touch-punch").sortable({appendTo:t.getUI(),revert:!1,helper:function(i){var n=e(i.target).parent();return n.children().removeClass("ui-state-hover"),e('<div class="ui-widget elfinder-place-drag elfinder-'+t.direction+'"></div>').append(e('<div class="elfinder-navbar"></div>').show().append(n.clone()))},stop:function(t,i){var n=e(i.item[0]),a=I.offset().top,o=I.offset().left,s=I.width(),r=I.height(),l=t.pageX,c=t.pageY;l>o&&l<o+s&&c>a&&c<c+r||(_(v(n.children(":first").attr("id"))),w())},update:function(e,t){w()}}),e(this).on("regist",function(t,i){var a=!1;e.each(i,function(e,t){t&&"directory"==t.mime&&!n[t.hash]&&C(t)&&(a=!0)}),a&&w()}),t.one("load",function(){t.oldAPI||(I.show().parent().show(),x(),t.change(function(t){var i=!1;e.each(t.data.changed,function(e,t){n[t.hash]&&("directory"!==t.mime?_(t.hash)&&(i=!0):T(t)&&(i=!0))}),i&&w()}).bind("rename",function(t){var i=!1;t.data.removed&&e.each(t.data.removed,function(e,n){t.data.added[e]&&T(t.data.added[e],n)&&(i=!0)}),i&&w()}).bind("rm paste",function(t){var i=[],n=!1;t.data.removed&&e.each(t.data.removed,function(e,t){var n=_(t);n&&i.push(n)}),i.length&&(n=!0),t.data.added&&i.length&&e.each(t.data.added,function(t,n){1!==e.inArray(n.name,i)&&"directory"==n.mime&&C(n)}),n&&w()}).bind("sync netmount",function(){var a,o=this,l=i.suffix?i.suffix:"";if("sync"===o.type&&f!==l)return f=l,S.empty(),A.removeClass(s),I.removeClass(r),S.slideToggle(!1),void x();(a=Object.keys(n)).length&&(A.prepend(p),t.request({data:{cmd:"info",targets:a},preventDefault:!0}).done(function(i){var a={},s=!1,r=t.cwd().hash;e.each(i.files||[],function(e,i){var n=i.hash;a[n]=i,t.files().hasOwnProperty(i.hash)||t.updateCache({tree:[i]})}),e.each(n,function(e,t){Boolean(t.notfound)===Boolean(a[e])?t.phash===r&&"netmount"!==o.type||a[e]&&"directory"!==a[e].mime?_(e)&&(s=!0):T(a[e]||Object.assign({notfound:!0},t))&&(s=!0):a[e]&&a[e].phash!=r&&T(a[e])}),s&&w()}).always(function(){p.remove()}))}))})})},e.fn.elfindersearchbutton=function(t){return this.each(function(){var i,n,a,o,s=!1,r=t.fm,l=(r.res("class","disabled"),t.options.incsearch||{enable:!1}),c=t.options.searchTypes,d=function(e){return r.namespace+r.escape(e)},u=r.getUI("toolbar"),h=r.res("class","searchbtn"),p=e(this).hide().addClass("ui-widget-content elfinder-button "+h).on("click",function(e){e.stopPropagation()}),f=function(){v.data("inctm")&&clearTimeout(v.data("inctm"));var i=e.trim(v.val()),a=!e("#"+d("SearchFromAll")).prop("checked"),o=e("#"+d("SearchMime")).prop("checked"),l="";a&&(a=e("#"+d("SearchFromVol")).prop("checked")?r.root(r.cwd().hash):r.cwd().hash),o&&(o=i,i="."),n&&(l=n.children("input:checked").val()),i?(v.trigger("focus"),t.exec(i,a,o,l).done(function(){s=!0}).fail(function(){m()})):r.trigger("searchend")},m=function(){v.data("inctm")&&clearTimeout(v.data("inctm")),v.val("").trigger("blur"),(s||g)&&(s=!1,g="",r.lazy(function(){r.trigger("searchend")}))},g="",v=e('<input type="text" size="42"/>').on("focus",function(){var e,t;!p.hasClass("ui-state-active")&&r.getUI().click(),o=!0,g="",p.addClass("ui-state-active"),r.trigger("uiresize"),i&&i.css((e=r.getUI(),t=e.offset(),{top:p.offset().top-t.top,maxHeight:e.height()-40})).slideDown(function(){p.addClass("ui-state-active"),r.toFront(i)})}).on("blur",function(){o=!1,i?i.data("infocus")?i.data("infocus",!1):i.slideUp(function(){p.removeClass("ui-state-active"),r.trigger("uiresize"),r.toHide(i)}):p.removeClass("ui-state-active")}).appendTo(p).on("keypress",function(e){e.stopPropagation()}).on("keydown",function(t){t.stopPropagation(),t.keyCode===e.ui.keyCode.ENTER?f():t.keyCode===e.ui.keyCode.ESCAPE&&(t.preventDefault(),m())});l.enable&&(l.minlen=l.minlen||2,l.wait=l.wait||500,v.attr("title",r.i18n("incSearchOnly")).on("compositionstart",function(){v.data("composing",!0)}).on("compositionend",function(){v.removeData("composing"),v.trigger("input")}).on("input",function(){v.data("composing")||(v.data("inctm")&&clearTimeout(v.data("inctm")),v.data("inctm",setTimeout(function(){var e=v.val();(0===e.length||e.length>=l.minlen)&&(g!==e&&r.trigger("incsearchstart",{query:e,type:n?n.children("input:checked").val():"searchName"}),g=e,""===e&&r.searchStatus.state>1&&r.searchStatus.query&&v.val(r.searchStatus.query).trigger("select"))},l.wait)))}),r.UA.ltIE8&&v.on("keydown",function(e){229===e.keyCode&&(v.data("imetm")&&clearTimeout(v.data("imetm")),v.data("composing",!0),v.data("imetm",setTimeout(function(){v.removeData("composing")},100)))}).on("keyup",function(t){v.data("imetm")&&clearTimeout(v.data("imetm")),v.data("composing")?t.keyCode===e.ui.keyCode.ENTER&&v.trigger("compositionend"):v.trigger("input")})),e('<span class="ui-icon ui-icon-search" title="'+t.title+'"></span>').appendTo(p).on("mousedown",function(e){e.stopPropagation(),e.preventDefault(),p.hasClass("ui-state-active")?f():v.trigger("focus")}),e('<span class="ui-icon ui-icon-close"></span>').appendTo(p).on("mousedown",function(e){e.stopPropagation(),e.preventDefault(),""!==v.val()||p.hasClass("ui-state-active")?m():v.trigger("focus")}),r.bind("toolbarload",function(){var e=p.parent();if(e.length&&(u.prepend(p.show()),e.remove(),r.UA.ltIE7)){var t=p.children("ltr"==r.direction?".ui-icon-close":".ui-icon-search");t.css({right:"",left:parseInt(p.width())-t.outerWidth(!0)})}}),r.one("init",function(){r.getUI("cwd").on("touchstart click",function(){o&&v.trigger("blur")})}).one("open",function(){(i=r.api<2.1?null:e('<div class="ui-front ui-widget ui-widget-content elfinder-button-menu elfinder-button-search-menu ui-corner-all"></div>').append(e('<div class="buttonset"></div>').append(e('<input id="'+d("SearchFromCwd")+'" name="serchfrom" type="radio" checked="checked"/><label for="'+d("SearchFromCwd")+'">'+r.i18n("btnCwd")+"</label>"),e('<input id="'+d("SearchFromVol")+'" name="serchfrom" type="radio"/><label for="'+d("SearchFromVol")+'">'+r.i18n("btnVolume")+"</label>"),e('<input id="'+d("SearchFromAll")+'" name="serchfrom" type="radio"/><label for="'+d("SearchFromAll")+'">'+r.i18n("btnAll")+"</label>")),e('<div class="buttonset elfinder-search-type"></div>').append(e('<input id="'+d("SearchName")+'" name="serchcol" type="radio" checked="checked" value="SearchName"/><label for="'+d("SearchName")+'">'+r.i18n("btnFileName")+"</label>"))).hide().appendTo(r.getUI()))&&(c&&(n=i.find(".elfinder-search-type"),e.each(t.options.searchTypes,function(t,i){n.append(e('<input id="'+d(t)+'" name="serchcol" type="radio" value="'+r.escape(t)+'"/><label for="'+d(t)+'">'+r.i18n(i.name)+"</label>"))})),i.find("div.buttonset").buttonset(),e("#"+d("SearchFromAll")).next("label").attr("title",r.i18n("searchTarget",r.i18n("btnAll"))),c&&e.each(c,function(t,i){i.title&&e("#"+d(t)).next("label").attr("title",r.i18n(i.title))}),i.on("mousedown","div.buttonset",function(e){e.stopPropagation(),i.data("infocus",!0)}).on("click","input",function(t){t.stopPropagation(),e.trim(v.val())?f():v.trigger("focus")}).on("close",function(){v.trigger("blur")}))}).bind("searchend",function(){v.val("")}).bind("open parents",function(){var t=[],i=r.file(r.root(r.cwd().hash));i&&(e.each(r.parents(r.cwd().hash),function(e,i){t.push(r.file(i).name)}),e("#"+d("SearchFromCwd")).next("label").attr("title",r.i18n("searchTarget",t.join(r.option("separator")))),e("#"+d("SearchFromVol")).next("label").attr("title",r.i18n("searchTarget",i.name)))}).bind("open",function(){g&&m()}).bind("cwdinit",function(){a=!1}).bind("cwdrender",function(){a=!0}).bind("keydownEsc",function(){g&&"/"===g.substr(0,1)&&(g="",v.val(""),r.trigger("searchend"))}).shortcut({pattern:"ctrl+f f3",description:t.title,callback:function(){v.trigger("select").trigger("focus")}}).shortcut({pattern:"a b c d e f g h i j k l m n o p q r s t u v w x y z dig0 dig1 dig2 dig3 dig4 dig5 dig6 dig7 dig8 dig9 num0 num1 num2 num3 num4 num5 num6 num7 num8 num9",description:r.i18n("firstLetterSearch"),callback:function(t){if(a){var i,n=t.originalEvent.keyCode,o=function(){var t=r.selected(),i=e.ui.keyCode[!t.length||r.cwdHash2Elm(t[0]).next("[id]").length?"RIGHT":"HOME"];e(document).trigger(e.Event("keydown",{keyCode:i,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1}))};n>=96&&n<=105&&(n-=48),i="/"+String.fromCharCode(n),g!==i?(v.val(i),g=i,r.trigger("incsearchstart",{query:i}).one("cwdrender",o)):o()}}})})},e.fn.elfindersortbutton=function(t){return this.each(function(){var i,n=t.fm,a=t.name,o="class",s=n.res(o,"disabled"),r=n.res(o,"hover"),l="elfinder-button-menu-item",c=l+"-selected",d=c+"-asc",u=c+"-desc",h=e('<span class="elfinder-button-text">'+t.title+"</span>"),p=e(this).addClass("ui-state-default elfinder-button elfinder-menubutton elfiner-button-"+a).attr("title",t.title).append('<span class="elfinder-button-icon elfinder-button-icon-'+a+'"></span>',h).on("mouseenter mouseleave",function(e){!p.hasClass(s)&&p.toggleClass(r,"mouseenter"===e.type)}).on("click",function(e){p.hasClass(s)||(e.stopPropagation(),m.is(":hidden")&&n.getUI().click(),m.css(v()).slideToggle({duration:100,done:function(e){n[m.is(":visible")?"toFront":"toHide"](m)}}))}),f=function(){n.toHide(m)},m=e('<div class="ui-front ui-widget ui-widget-content elfinder-button-menu elfinder-button-sort-menu ui-corner-all"></div>').hide().appendTo(n.getUI()).on("mouseenter mouseleave","."+l,function(t){e(this).toggleClass(r,"mouseenter"===t.type)}).on("click",function(e){e.preventDefault(),e.stopPropagation()}).on("close",f),g=function(){m.children("[rel]").removeClass(c+" "+d+" "+u).filter('[rel="'+n.sortType+'"]').addClass(c+" "+("asc"==n.sortOrder?d:u)),m.children(".elfinder-sort-stick").toggleClass(c,n.sortStickFolders),m.children(".elfinder-sort-tree").toggleClass(c,n.sortAlsoTreeview)},v=function(){var e=n.getUI().offset(),t=p.offset();return{top:t.top-e.top,left:t.left-e.left}};h.hide(),e.each(n.sortRules,function(t,i){m.append(e('<div class="'+l+'" rel="'+t+'"><span class="ui-icon ui-icon-arrowthick-1-n"></span><span class="ui-icon ui-icon-arrowthick-1-s"></span>'+n.i18n("sort"+t)+"</div>").data("type",t))}),m.children().on("click",function(i){t.exec([],e(this).removeClass(r).attr("rel"))}),e('<div class="'+l+" "+l+'-separated elfinder-sort-ext elfinder-sort-stick"><span class="ui-icon ui-icon-check"></span>'+n.i18n("sortFoldersFirst")+"</div>").appendTo(m).on("click",function(){t.exec([],"stick")}),n.one("init",function(){n.ui.tree&&null!==n.options.sortAlsoTreeview&&e('<div class="'+l+" "+l+'-separated elfinder-sort-ext elfinder-sort-tree"><span class="ui-icon ui-icon-check"></span>'+n.i18n("sortAlsoTreeview")+"</div>").appendTo(m).on("click",function(){t.exec([],"tree")})}).bind("disable select",f).bind("sortchange",g).getUI().on("click",f),m.children().length>1?t.change(function(){i&&cancelAnimationFrame(i),i=requestAnimationFrame(function(){p.toggleClass(s,t.disabled()),g()})}).change():p.addClass(s)})},e.fn.elfinderstat=function(t){return this.each(function(){var i=e(this).addClass("elfinder-stat-size"),n=e('<div class="elfinder-stat-selected"></div>').on("click","a",function(i){var n=e(this).data("hash");i.preventDefault(),t.exec("opendir",[n])}),a=t.i18n("items"),o=t.i18n("selected"),s=t.i18n("size"),r=function(e){i.find("span.elfinder-stat-incsearch").html(e?e.hashes.length+" / ":""),i.attr("title",i.text()),t.trigger("uistatchange")},l=function(i){var a,r,l=0,c=0,d=[];1===i.length?(r=i[0],l=r.size,2===t.searchStatus.state&&(a=t.escape(r.path?r.path.replace(/\/[^\/]*$/,""):".."),d.push('<a href="#elf_'+r.phash+'" data-hash="'+r.hash+'" title="'+a+'">'+a+"</a>")),d.push(t.escape(r.i18||r.name)),n.html(d.join("/")+(l>0?", "+t.formatSize(l):""))):i.length?(e.each(i,function(e,t){c++,l+=parseInt(t.size)||0}),n.html(c?o+": "+c+", "+s+": "+t.formatSize(l):"&nbsp;")):n.html(""),n.attr("title",n.text()),t.trigger("uistatchange")};t.getUI("statusbar").prepend(i).append(n).show(),t.UA.Mobile&&e.fn.tooltip&&t.getUI("statusbar").tooltip({classes:{"ui-tooltip":"elfinder-ui-tooltip ui-widget-shadow"},tooltipClass:"elfinder-ui-tooltip ui-widget-shadow",track:!0}),t.bind("cwdhasheschange",function(n){var o,s,r,l,c,d;o=e.map(n.data,function(e){return t.file(e)}),s=0,r=0,l=t.cwd(),c=!0,d=!0,(l.sizeInfo||l.size)&&(r=l.size,c=!1),e.each(o,function(e,t){s++,c&&(r+=parseInt(t.size)||0,!0!==d||"directory"!==t.mime||t.sizeInfo||(d=!1))}),i.html(a+': <span class="elfinder-stat-incsearch"></span>'+s+',&nbsp;<span class="elfinder-stat-size'+(d?" elfinder-stat-size-recursive":"")+'">'+t.i18n(d?"sum":"size")+": "+t.formatSize(r)+"</span>").attr("title",i.text()),t.trigger("uistatchange")}).change(function(n){var a=n.data.changed||[],o=t.cwd().hash;e.each(a,function(){if(this.hash===o)return this.size&&(i.children(".elfinder-stat-size").addClass("elfinder-stat-size-recursive").html(t.i18n("sum")+": "+t.formatSize(this.size)),i.attr("title",i.text())),!1})}).select(function(){l(t.selectedFiles())}).bind("open",function(){l([])}).bind("incsearch",function(e){r(e.data)}).bind("incsearchend",function(){r()})})},e.fn.elfindertoast=function(t,i){var n=Object.assign({mode:"success",msg:"",showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1500,hideEasing:"swing",onHidden:void 0,timeOut:3e3,extNode:void 0,button:void 0,width:void 0},e.isPlainObject(i.options.uiOptions.toast.defaults)?i.options.uiOptions.toast.defaults:{});return this.each(function(){t=Object.assign({},n,t||{});var a,o=e(this),s=function(e){o.stop(),i.toFront(o),o[t.showMethod]({duration:t.showDuration,easing:t.showEasing,complete:function(){t.onShown&&t.onShown(),!e&&t.timeOut&&(a=setTimeout(r,t.timeOut))}})},r=function(){o[t.hideMethod]({duration:t.hideDuration,easing:t.hideEasing,complete:function(){t.onHidden&&t.onHidden(),o.remove()}})};o.on("click",function(e){e.stopPropagation(),e.preventDefault(),a&&clearTimeout(a),t.onHidden&&t.onHidden(),o.stop().remove()}).on("mouseenter mouseleave",function(e){t.timeOut&&(a&&clearTimeout(a),a=null,"mouseenter"===e.type?s(!0):a=setTimeout(r,t.timeOut))}).hide().addClass("toast-"+t.mode).append(e('<div class="elfinder-toast-msg"></div>').html(t.msg.replace(/%([a-zA-Z0-9]+)%/g,function(e,t){return i.i18n(t)}))),t.extNode&&o.append(t.extNode),t.button&&o.append(e('<button class="ui-button ui-widget ui-state-default ui-corner-all elfinder-tabstop"></button>').append(e('<span class="ui-button-text"></span>').text(i.i18n(t.button.text))).on("mouseenter mouseleave",function(t){e(this).toggleClass("ui-state-hover","mouseenter"==t.type)}).on("click",t.button.click||function(){})),t.width&&o.css("max-width",t.width),s()})},e.fn.elfindertoolbar=function(t,i){return this.not(".elfinder-toolbar").each(function(){var n,a,o,s,r,l,c,d,u,h=t._commands,p=e(this).addClass("ui-helper-clearfix ui-widget-header elfinder-toolbar"),f={displayTextLabel:!1,labelExcludeUA:["Mobile"],autoHideUA:["Mobile"],showPreferenceButton:"none"},m=function(i){var l,c;for(e.each(g,function(e,t){t.detach()}),p.empty(),n=v.length;n--;)if(v[n]){for(s=e('<div class="ui-widget-content ui-corner-all elfinder-buttonset"></div>'),a=v[n].length;a--;)l=v[n][a],i&&i[l]||!(o=h[l])||(r="elfinder"+o.options.ui,!g[l]&&e.fn[r]&&(g[l]=e("<div></div>")[r](o)),g[l]&&(g[l].children(".elfinder-button-text")[d?"show":"hide"](),s.prepend(g[l])));s.children().length&&p.prepend(s),s.children(":gt(0)").before('<span class="ui-widget-content elfinder-toolbar-button-separator"></span>')}(c=h.preference)&&("always"===f.showPreferenceButton||!p.children().length&&"auto"===f.showPreferenceButton)&&(s=e('<div class="ui-widget-content ui-corner-all elfinder-buttonset"></div>'),l="preference",r="elfinder"+o.options.ui,g[l]=e("<div></div>")[r](c),g[l].children(".elfinder-button-text")[d?"show":"hide"](),s.prepend(g[l]),p.append(s)),!p.data("swipeClose")&&p.children().length?p.show():p.hide(),w=p[0].clientHeight,t.trigger("toolbarload").trigger("uiresize")},g={},v=function(t){return e.grep(t,function(t){return!e.isPlainObject(t)||(f=Object.assign(f,t),!1)})}(i||[]),b=null,y="",w=0,x=[];f.showPreferenceButton=f.showPreferenceButton.toLowerCase(),"none"!==f.displayTextLabel&&(d=null===(d=t.storage("toolbarTextLabel"))?f.displayTextLabel&&(!f.labelExcludeUA||!f.labelExcludeUA.length||!e.grep(f.labelExcludeUA,function(e){return!!t.UA[e]}).length):1==d,x.push({label:t.i18n("textLabel"),icon:"text",callback:function(){d=!d,p.css("height","").find(".elfinder-button-text")[d?"show":"hide"](),t.trigger("uiresize").storage("toolbarTextLabel",d?"1":"0")}})),f.preferenceInContextmenu&&h.preference&&x.push({label:t.i18n("toolbarPref"),icon:"preference",callback:function(){t.exec("preference",void 0,{tab:"toolbar"})}}),x.length&&p.on("contextmenu",function(e){e.stopPropagation(),e.preventDefault(),t.trigger("contextmenu",{raw:x,x:e.pageX,y:e.pageY})}).on("touchstart",function(e){e.originalEvent.touches.length>1||(p.data("tmlongtap")&&clearTimeout(p.data("tmlongtap")),p.removeData("longtap").data("longtap",{x:e.originalEvent.touches[0].pageX,y:e.originalEvent.touches[0].pageY}).data("tmlongtap",setTimeout(function(){p.removeData("longtapTm").trigger({type:"contextmenu",pageX:p.data("longtap").x,pageY:p.data("longtap").y}).data("longtap",{longtap:!0})},500)))}).on("touchmove touchend",function(e){p.data("tmlongtap")&&(("touchend"===e.type||Math.abs(p.data("longtap").x-e.originalEvent.touches[0].pageX)+Math.abs(p.data("longtap").y-e.originalEvent.touches[0].pageY)>4)&&clearTimeout(p.data("tmlongtap")),p.removeData("longtapTm"))}).on("click",function(e){p.data("longtap")&&p.data("longtap").longtap&&(e.stopImmediatePropagation(),e.preventDefault())}).on("touchend click",".elfinder-button",function(e){p.data("longtap")&&p.data("longtap").longtap&&(e.stopImmediatePropagation(),e.preventDefault())}),p.prev().length&&p.parent().prepend(this),m(),t.bind("open sync select toolbarpref",function(){var i,n,a,o=Object.assign({},t.option("disabledFlip")),s=t.storage("toolbarhides");if(!s&&Array.isArray(f.defaultHides)&&(s={},e.each(f.defaultHides,function(){s[this]=!0}),t.storage("toolbarhides",s)),"select"===this.type){if(t.searchStatus.state<2)return;(n=t.selected()).length&&(o=t.getDisabledCmds(n,!0))}e.each(s,function(e){o[e]||(o[e]=!0)}),Object.keys(t.commandMap).length&&e.each(t.commandMap,function(e,t){"hidden"===t&&(o[e]=!0)}),a=Object.keys(o),b&&b.toString()===a.sort().toString()||(m(a.length?o:null),i=!0),b=a.sort(),(i||y!==JSON.stringify(t.commandMap))&&(y=JSON.stringify(t.commandMap),i||e.each(e("div.elfinder-button"),function(){var t=e(this).data("origin");t&&e(this).after(t).detach()}),Object.keys(t.commandMap).length&&e.each(t.commandMap,function(i,n){var a,o=t._commands[n],s=o?"elfinder"+o.options.ui:null;s&&e.fn[s]&&(a=g[i])&&(!g[n]&&e.fn[s]&&(g[n]=e("<div></div>")[s](o),g[n]&&(g[n].children(".elfinder-button-text")[d?"show":"hide"](),o.extendsCmd&&g[n].children("span.elfinder-button-icon").addClass("elfinder-button-icon-"+o.extendsCmd))),g[n]&&(a.after(g[n]),g[n].data("origin",a.detach())))}))}).bind("resize",function(e){u&&cancelAnimationFrame(u),u=requestAnimationFrame(function(){var e=p[0].clientHeight;w!==e&&(w=e,t.trigger("uiresize"))})}),t.UA.Touch&&(void 0===(c=t.storage("autoHide")||{}).toolbar&&(c.toolbar=f.autoHideUA&&f.autoHideUA.length>0&&e.grep(f.autoHideUA,function(e){return!!t.UA[e]}).length,t.storage("autoHide",c)),c.toolbar&&t.one("init",function(){t.uiAutoHide.push(function(){p.stop(!0,!0).trigger("toggle",{duration:500,init:!0})})}),t.bind("load",function(){"none"!==(l=e('<div class="elfinder-toolbar-swipe-handle"></div>').hide().appendTo(t.getUI())).css("pointer-events")&&(l.remove(),l=null)}),p.on("toggle",function(e,i){var n=t.getUI("workzone"),a=p.is(":hidden"),o=n.height(),s=p.height(),r=p.outerHeight(!0)-s,d=Object.assign({step:function(e){n.height(o+(a?-1*(e+r):s-e)),t.trigger("resize")},always:function(){requestAnimationFrame(function(){p.css("height",""),t.trigger("uiresize"),l&&(a?l.stop(!0,!0).hide():(l.height(i.handleH?i.handleH:""),t.resources.blink(l,"slowonce"))),a&&p.scrollTop("0px"),i.init&&t.trigger("uiautohide")})}},i);p.data("swipeClose",!a).stop(!0,!0).animate({height:"toggle"},d),c.toolbar=!a,t.storage("autoHide",Object.assign(t.storage("autoHide"),{toolbar:c.toolbar}))}).on("touchstart",function(e){p.scrollBottom()>5&&(e.originalEvent._preventSwipeY=!0)}))}),this},e.fn.elfindertree=function(t,i){var n=t.res("class","tree");return this.not("."+n).each(function(){var a,o,s,r,l="class",c=t.UA.Mobile,d=t.res(l,"treeroot"),u=i.openRootOnLoad,h=i.openCwdOnOpen,p=h||i.syncTree,f=t.res(l,"navsubtree"),m=t.res(l,"treedir"),g="span."+m,v=t.res(l,"navcollapse"),b=t.res(l,"navexpand"),y="elfinder-subtree-loaded",w="elfinder-subtree-chksubdir",x=t.res(l,"navarrow"),k=t.res(l,"active"),C=t.res(l,"adroppable"),_=t.res(l,"hover"),T=t.res(l,"disabled"),D=t.res(l,"draggable"),z=t.res(l,"droppable"),A="elfinder-navbar-wrapper-root",S="elfinder-navbar-wrapper-pastable",I="elfinder-navbar-wrapper-uploadable",M=function(e){var t=re.offset().left;return t<=e&&e<=t+re.width()},E={},O=[],j=function(i){var n=[];if(e.each(i,function(e,i){E[i]&&n.push(t.navId2Hash(i)),delete E[i]}),n.length)return t.request({data:{cmd:"subdirs",targets:n,preventDefault:!0}}).done(function(i){i&&i.subdirs&&e.each(i.subdirs,function(e,i){var n=t.navHash2Elm(e);n.removeClass(w),n[i?"addClass":"removeClass"](v)})})},P=null,F=function(){var i=Object.keys(E);i.length&&(P&&P._abort(),a&&clearTimeout(a),O=[],P=t.asyncJob(function(i){return t.isInWindow(e("#"+i))?i:null},i,{numPerOnce:200}).done(function(e){e.length&&(O=e,N())}))},H=0,N=function(){var e,n=i.subdirsMaxConn-H,o=t.maxTargets?Math.min(t.maxTargets,i.subdirsAtOnce):i.subdirsAtOnce;if(a&&cancelAnimationFrame(a),O.length)if(n>0)for(e=0;e<n;e++)O.length&&(H++,j(O.splice(0,o)).always(function(){H--,N()}));else a=requestAnimationFrame(function(){O.length&&N()})},U=t.droppable.drop,R=e.extend(!0,{},t.droppable,{over:function(i,n){var a,o,s=e(this),r=n.helper,l=_+" "+C;if(i.stopPropagation(),r.data("dropover",r.data("dropover")+1),s.data("dropover",!0),n.helper.data("namespace")!==t.namespace||!t.insideWorkzone(i.pageX,i.pageY))return s.removeClass(l),void r.removeClass("elfinder-drag-helper-move elfinder-drag-helper-plus");M(i.clientX)?(r.removeClass("elfinder-drag-helper-move elfinder-drag-helper-plus"),s.addClass(_),s.is("."+v+":not(."+b+")")&&s.data("expandTimer",setTimeout(function(){s.is("."+v+"."+_)&&s.children("."+x).trigger("click")},500)),s.is(".elfinder-ro,.elfinder-na")?s.removeClass(C):(a=t.navId2Hash(s.attr("id")),s.data("dropover",a),e.each(n.helper.data("files"),function(e,i){if(i===a||t.file(i).phash===a&&!n.helper.hasClass("elfinder-drag-helper-plus"))return s.removeClass(l),!1}),r.data("locked")?o="elfinder-drag-helper-plus":(o="elfinder-drag-helper-move",t._commands.copy&&(i.shiftKey||i.ctrlKey||i.metaKey)&&(o+=" elfinder-drag-helper-plus")),s.hasClass(C)&&r.addClass(o),requestAnimationFrame(function(){s.hasClass(C)&&r.addClass(o)}))):s.removeClass(l)},out:function(t,i){var n=e(this),a=i.helper;t.stopPropagation(),M(t.clientX)&&a.removeClass("elfinder-drag-helper-move elfinder-drag-helper-plus"),a.data("dropover",Math.max(a.data("dropover")-1,0)),n.data("expandTimer")&&clearTimeout(n.data("expandTimer")),n.removeData("dropover").removeClass(_+" "+C)},deactivate:function(){e(this).removeData("dropover").removeClass(_+" "+C)},drop:function(e,t){M(e.clientX)&&U.call(this,e,t)}}),q=e(t.res("tpl","navspinner")),L=t.res("tpl","navdir"),W=t.res("tpl","perms"),B=(t.res("tpl","lock"),t.res("tpl","symlink")),$={},Y={id:function(e){return t.navHash2Id(e.hash)},name:function(e){return t.escape(e.i18||e.name)},cssclass:function(e){var n=(e.phash&&!e.isroot?"":d)+" "+m+" "+t.perms2class(e);return e.dirs&&!e.link&&(n+=" "+v)&&-1==e.dirs&&(n+=" "+w),i.getClass&&(n+=" "+i.getClass(e)),e.csscls&&(n+=" "+t.escape(e.csscls)),n},title:function(e){return i.attrTitle?' title="'+t.escape(t.path(e.hash,!0)||e.i18||e.name)+'"':""},root:function(t){var i="";return!t.phash||t.isroot?(i+=" "+A,!t.disabled||t.disabled.length<1?i+=" "+S+" "+I:(-1===e.inArray("paste",t.disabled)&&(i+=" "+S),-1===e.inArray("upload",t.disabled)&&(i+=" "+I)),i):""},permissions:function(e){return e.read&&e.write?"":W},symlink:function(e){return e.alias?B:""},style:function(e){return e.icon?t.getIconStyle(e):""}},K=function(e){return L.replace(/(?:\{([a-z]+)\})/gi,function(t,i){var n=Y[i]?Y[i](e):e[i]||"";return"id"===i&&-1==e.dirs&&(E[n]=n),n})},V=function(i,n){return e.map(i||[],function(e){return"directory"!==e.mime||n&&!t.navHash2Elm(e.hash).length?null:e})},X=function(e){return e?t.navHash2Elm(e).next("."+f):oe},G=function(e,i){for(var n,a=e.children(":first");a.length;){if(t.file(t.navId2Hash(a.children("[id]").attr("id"))),(n=t.file(t.navId2Hash(a.children("[id]").attr("id"))))&&Q(i,n)<0)return a;a=a.next()}return e.children("button.elfinder-navbar-pager-next")},J=function(n){for(var a,o,s,r,l,d,u,h=n.length,p=[],f=h,m=e(),g={},v=t.cwd(),b=function(n,a,o,s){var r={},l=0,d=t.newAPI?Math.min(1e4,Math.max(10,i.subTreeMax)):1e4,u=function(){r={},e.each(a,function(e,t){r[t.hash]=e})},h=function(t,i){var o,s;(t.stopPropagation(),i.select)?m(p(i.select)):i.change?"prepare"===(s=i.change)?e.each(a,function(e,t){t.node&&n.append(t.node.hide())}):"done"===s&&e.each(a,function(e,t){t.node&&t.node.detach().show()}):(i.removed&&i.removed.length&&(a=e.grep(a,function(e){return-1===i.removed.indexOf(e.hash)||(!o&&(o=!0),!1)})),i.added&&i.added.length&&(a=a.concat(e.grep(i.added,function(e){return void 0===r[e.hash]&&(!o&&(o=!0),!0)}))),o&&(a.sort(Q),u(),m(l)))},p=function(e){if(void 0!==r[e])return Math.floor(r[e]/d)*d},f=t.navId2Hash(n.prev("[id]").attr("id")),m=function(i,o){var s,r,b,y,w,x,k,C=[],_={};delete $[f],l=i,n.off("update."+t.namespace,h),a.length>d&&(n.on("update."+t.namespace,h),void 0===i&&(u(),void 0===(i=p(v.hash))&&(i=0)),b=a.slice(i,i+d),$[f]=n,y=i?Math.max(-1,i-d):-1,w=i+d>=a.length?0:i+d,s=Math.ceil(a.length/d),r=Math.ceil(i/d)),e.each(b||a,function(e,t){C.push(K(t)),t.node&&(_[t.hash]=t.node)}),x=y>-1?e('<button class="elfinder-navbar-pager elfinder-navbar-pager-prev"></button>').text(t.i18n("btnPrevious",r,s)).button({icons:{primary:"ui-icon-caret-1-n"}}).on("click",function(e){e.preventDefault(),e.stopPropagation(),m(y,"up")}):e(),k=w?e('<button class="elfinder-navbar-pager elfinder-navbar-pager-next"></button>').text(t.i18n("btnNext",r+2,s)).button({icons:{primary:"ui-icon-caret-1-s"}}).on("click",function(e){e.preventDefault(),e.stopPropagation(),m(w,"down")}):e(),g(),n.empty()[b?"addClass":"removeClass"]("elfinder-navbar-hasmore").append(x,C.join(""),k),e.each(_,function(e,i){t.navHash2Elm(e).parent().replaceWith(i)}),o&&Z(t.navHash2Id(b["up"===o?b.length-1:0].hash)),!c&&t.lazy(function(){ne(null,n)})},g=function(){e.each(n.children(".elfinder-navbar-wrapper"),function(i,n){var o,s,l=e(n),c=l.children("[id]:first");c.hasClass(y)&&(o=t.navId2Hash(c.attr("id")))&&void 0!==(s=r[o])&&(a[s].node=l.detach())})};m()},w={},x=[],k={};f--;)g[(a=n[f]).hash]||t.navHash2Elm(a.hash).length||(g[a.hash]=!0,(o=X(a.phash)).length?(void 0===k[u=a.phash||"treeroot"]&&(k[u]=o.children(":last")),r=!k[u].length,a.phash&&(r||o.hasClass("elfinder-navbar-hasmore")||(s=G(o,a)).length)?r?(w[a.phash]||(w[a.phash]=[]),w[a.phash].push(a)):s?(d=K(a),s.before(d),!c&&(m=m.add(d))):x.push(a):(d=K(a),r?o.prepend(d):k[u].after(d),a.phash&&!a.isroot||(l=t.navHash2Elm(a.hash).parent()),!c&&ne(null,l))):p.push(a));Object.keys(w).length&&e.each(w,function(e,t){var i=X(e);t.sort(Q),b(i,t)}),x.length&&o.trigger("update."+t.namespace,{added:x}),p.length&&p.length<h?J(p):!c&&m.length&&t.lazy(function(){ne(m)})},Q=function(e,i){if(t.sortAlsoTreeview){var n,a="asc"==t.sortOrder,o=t.sortType,s=t.sortRules;return n=a?s[t.sortType](e,i):s[t.sortType](i,e),"name"!==o&&0===n?n=a?s.name(e,i):s.name(i,e):n}return t.sortRules.name(e,i)},Z=function(n){var a,s,r,l,c,d,u=e.Deferred();return o&&clearTimeout(o),o=setTimeout(function(){(a=e(document.getElementById(n||t.navHash2Id(t.cwd().hash)))).length?((h?a:a.parent()).parents(".elfinder-navbar-wrapper").children("."+y).addClass(b).next("."+f).show(),s=oe.parent().stop(!1,!0),r=s.offset().top,l=s.height(),c=r+l-a.outerHeight(),(d=a.offset().top)<r||d>c?s.animate({scrollTop:s.scrollTop()+d-r-l/3},{duration:i.durations.autoScroll,complete:function(){u.resolve()}}):u.resolve()):u.reject()},100),u},ee=function(e){var i,n,a,o=e||t.cwd(),s=o.hash?[o.hash]:[];for(n=t.root(o.hash),a=t.file(n);a&&(i=a.phash)&&(s.unshift(i),n=t.root(i),a=t.file(n),!t.navHash2Elm(a.hash).hasClass(y)););return s},te=function(e){var i=e||t.cwd(),n=i.hash,a=t.navHash2Elm(n);if(!a.length){for(;i&&i.phash;)$[i.phash]&&!t.navHash2Elm(i.hash).length&&$[i.phash].trigger("update."+t.namespace,{select:i.hash}),i=t.file(i.phash);a=t.navHash2Elm(n)}return a},ie=function(i,n){var a,o,r,l,c,d,h,f,w=t.cwd(),C=w.hash,_=void 0===n?p:n,T=function(n,o){var s,r=function(){u&&a&&(X(a.hash).show().prev(g).addClass(b),u=!1),_?Z().done(F):F()};n&&e.each(n,function(e,i){i&&J(i),te(t.file(e)),i&&ae(i,y)}),i&&(t.api<2.1&&i.push(w),J(i)),(s=te()).hasClass(k)||(oe.find(g+"."+k).removeClass(k),s.addClass(k)),s.parents(".elfinder-navbar-wrapper").children("."+m).addClass(y),n?t.lazy(r).done(function(){o.resolve()}):(r(),o.resolve())},D=function(e){a&&(o.remove(),a.addClass(v+(e?"":" "+y)))},z=e.Deferred();return t.navHash2Elm(C).length?T(void 0,z):(s=!0,(h=e.Deferred(),f=ee(r),(l=e.map(f,function(e){var i,n,a=t.file(e),o=!!a&&t.isRoot(a),s=t.navHash2Elm(e),r=function(e,i){var n,a,o=i||1;return(a=!!(n=t.file(e))&&n.phash)&&o>1?r(a,--o):a},l=function(){var n=r(e);for(i=n;n&&!t.navHash2Elm(n).hasClass(y);)i=n,n=r(n);return n||(i=void 0,n=t.root(e)),n}();return s.hasClass(y)||!o&&a&&t.navHash2Elm(a.phash).hasClass(y)?null:(o||l===r(e)||l===r(e,2)?(i=void 0,n="tree",o||(e=r(e))):n="parents",c||(c="tree"===n?e:l),function(e,i,n){var a={cmd:e,target:i};return n&&(a.until=n),t.request({data:a,preventFail:!0})}(n,e,i))})).length?(te(t.file(c)),d=t.navHash2Id(c),_&&Z(d),a=e("#"+d),o=e(t.res("tpl","navspinner")).insertBefore(a.children("."+x)),a.removeClass(v),e.when.apply(e,l).done(function(){var e,t,i,n={};if((t=arguments.length)>0)for(i=0;i<t;i++)e=arguments[i].tree||[],n[f[i]]=Object.assign([],V(e));h.resolve(n)}).fail(function(){h.reject()}),h):h.resolve()).done(function(e){T(e,z),D()}).fail(function(){D(!0),z.reject()}).always(function(){s=!1})),t.trigger("treesync",z),z},ne=function(i,n){i||(n&&!n.closest("div."+A).hasClass(I)||(n||oe.find("div."+I)).find(g+":not(.elfinder-ro,.elfinder-na)").addClass("native-droppable"),i=!n||n.closest("div."+A).hasClass(S)?(n||oe.find("div."+S)).find(g+":not(."+z+")"):e(),n&&n.children("div."+A).each(function(){ne(null,e(this))})),i.length&&t.asyncJob(function(t){e(t).droppable(R)},e.makeArray(i),{interval:20,numPerOnce:100})},ae=function(i,n){var a=n==y?"."+v+":not(."+y+")":":not(."+v+")";e.each(i,function(i,o){t.navHash2Elm(o.phash).filter(a).filter(function(){return e.grep(e(this).next("."+f).children(),function(t){return!e(t).children().hasClass(d)}).length>0}).addClass(n)})},oe=e(this).addClass(n).on("mouseenter mouseleave",g,function(n){var a="mouseenter"===n.type;if(!a||!se){var o,s,r=e(this);r.hasClass(C+" "+T)||(c||!a||r.data("dragRegisted")||r.hasClass(d+" "+D+" elfinder-na elfinder-wo")||(r.data("dragRegisted",!0),t.isCommandEnabled("copy",o=t.navId2Hash(r.attr("id")))&&r.draggable(t.draggable)),r.toggleClass(_,a)),a&&i.attrTitle&&((s=t.file(o||t.navId2Hash(r.attr("id")))).isroot||r.attr("title")!==(s.i18||s.name)||r.attr("title",t.path(o,!0)))}}).on("dragenter",g,function(t){if(t.originalEvent.dataTransfer){var i=e(this);i.addClass(_),i.is("."+v+":not(."+b+")")&&i.data("expandTimer",setTimeout(function(){i.is("."+v+"."+_)&&i.children("."+x).trigger("click")},500))}}).on("dragleave",g,function(t){if(t.originalEvent.dataTransfer){var i=e(this);i.data("expandTimer")&&clearTimeout(i.data("expandTimer")),i.removeClass(_)}}).on("click",g,function(i){var n=e(this),a=t.navId2Hash(n.attr("id"));t.file(a);if(n.data("longtap"))return n.removeData("longtap"),void i.stopPropagation();n.hasClass(k)||(oe.find(g+"."+k).removeClass(k),n.addClass(k)),a==t.cwd().hash||n.hasClass(T)?(n.hasClass(v)&&n.children("."+x).trigger("click"),t.select({selected:[a],origin:"navbar"})):t.exec("open",a).done(function(){t.one("opendone",function(){t.select({selected:[a],origin:"navbar"})})})}).on("touchstart",g,function(i){if(!(i.originalEvent.touches.length>1)){var n,a=i.originalEvent;"INPUT"!==i.target.nodeName?n=e(this).addClass(_).removeData("longtap").data("tmlongtap",setTimeout(function(e){n.data("longtap",!0),t.trigger("contextmenu",{type:"navbar",targets:[t.navId2Hash(n.attr("id"))],x:a.touches[0].pageX,y:a.touches[0].pageY})},500)):i.stopPropagation()}}).on("touchmove touchend",g,function(t){"INPUT"!==t.target.nodeName?(clearTimeout(e(this).data("tmlongtap")),e(this).removeData("tmlongtap"),"touchmove"==t.type&&e(this).removeClass(_)):t.stopPropagation()}).on("click",g+"."+v+" ."+x,function(n){var a=e(this),o=a.parent(g),s=o.next("."+f),r=e.Deferred();n.stopPropagation(),o.hasClass(y)?(o.toggleClass(b),t.lazy(function(){(o.hasClass(b)?s.children().length+s.find("div.elfinder-navbar-subtree[style*=block]").children().length:s.find("div:visible").length)>30?(s.toggle(),t.draggingUiHelper&&t.draggingUiHelper.data("refreshPositions",1),F()):s.stop(!0,!0)[o.hasClass(b)?"slideDown":"slideUp"](i.durations.slideUpDown,function(){t.draggingUiHelper&&t.draggingUiHelper.data("refreshPositions",1),F()})}).always(function(){r.resolve()})):(q.insertBefore(a),o.removeClass(v),t.request({cmd:"tree",target:t.navId2Hash(o.attr("id"))}).done(function(e){J(Object.assign([],V(e.tree))),s.children().length&&(o.addClass(v+" "+b),s.children().length>30?(s.show(),t.draggingUiHelper&&t.draggingUiHelper.data("refreshPositions",1),F()):s.stop(!0,!0).slideDown(i.durations.slideUpDown,function(){t.draggingUiHelper&&t.draggingUiHelper.data("refreshPositions",1),F()}))}).always(function(e){q.remove(),o.addClass(y),t.one("treedone",function(){r.resolve()})})),a.data("dfrd",r)}).on("contextmenu",g,function(i){i.stopPropagation();var n=e(this);n.find("input:text").length||(i.preventDefault(),n.data("tmlongtap")||t.trigger("contextmenu",{type:"navbar",targets:[t.navId2Hash(e(this).attr("id"))],x:i.pageX,y:i.pageY}),n.addClass("ui-state-hover"),t.getUI("contextmenu").children().on("mouseenter",function(){n.addClass("ui-state-hover")}),t.bind("closecontextmenu",function(){n.removeClass("ui-state-hover")}))}).on("scrolltoview",g,function(i,n){var a=e(this);Z(a.attr("id")).done(function(){n&&"undefined"!==n.blink&&!n.blink||t.resources.blink(a,"lookme")})}).on("create."+t.namespace,function(i,n){var a=X(n.phash),o=n.move||!1,s=e(K(n)).addClass("elfinder-navbar-wrapper-tmp"),r=t.selected();o&&r.length&&t.trigger("lockfiles",{files:r}),a.prepend(s)}),se=!1,re=t.getUI("navbar").append(oe).show().on("scroll",function(){se=!0,r&&cancelAnimationFrame(r),r=requestAnimationFrame(function(){se=!1,F()})}),le=t.sortAlsoTreeview;t.open(function(e){var i=e.data,n=V(i.files),a=t.getUI("contextmenu");i.init&&oe.empty(),t.UA.iOS&&re.removeClass("overflow-scrolling-touch").addClass("overflow-scrolling-touch"),n.length?t.lazy(function(){a.data("cmdMaps")||a.data("cmdMaps",{}),J(n),ae(n,y),ie(n)}):ie()}).add(function(e){var t=V(e.data.added);t.length&&(J(t),ae(t,v))}).change(function(i){if(!s){var n,a,o,r,l,d,u,h,p,m,v,w,x=V(i.data.changed,!0),k=x.length,C=k;e();for(e.each($,function(e,i){i.trigger("update."+t.namespace,{change:"prepare"})});C--;)if(a=(n=x[C]).phash,(o=t.navHash2Elm(n.hash)).length){if(v=o.parent(),a){if(l=o.closest("."+f),d=X(a),u=o.parent().next(),h=G(d,n),!d.length)continue;d[0]===l[0]&&u.get(0)===h.get(0)||(h.length?h.before(v):d.append(v))}p=o.hasClass(b),m=o.hasClass(y),r=e(K(n)),o.replaceWith(r.children(g)),!c&&ne(null,v),n.dirs&&(p||m)&&(o=t.navHash2Elm(n.hash))&&o.next("."+f).children().length&&(p&&o.addClass(b),m&&o.addClass(y)),w|=-1==n.dirs}w&&F(),e.each($,function(e,i){i.trigger("update."+t.namespace,{change:"done"})}),k&&ie(void 0,!1)}}).remove(function(i){var n,a,o,s=i.data.removed,r=s.length;for(e.each($,function(e,i){i.trigger("update."+t.namespace,{removed:s}),i.trigger("update."+t.namespace,{change:"prepare"})});r--;)(n=t.navHash2Elm(s[r])).length&&(o=!0,a=n.closest("."+f),n.parent().detach(),a.children().length||a.hide().prev(g).removeClass(v+" "+b+" "+y));o&&t.getUI("navbar").children(".ui-resizable-handle").trigger("resize"),e.each($,function(e,i){i.trigger("update."+t.namespace,{change:"done"})})}).bind("lockfiles unlockfiles",function(i){var n="lockfiles"==i.type,a=!!i.data.helper&&i.data.helper.data("locked"),o=n&&!a?"disable":"enable",s=e.grep(i.data.files||[],function(e){var i=t.file(e);return!(!i||"directory"!=i.mime)});e.each(s,function(e,i){var s=t.navHash2Elm(i);s.length&&!a&&(s.hasClass(D)&&s.draggable(o),s.hasClass(z)&&s.droppable(o),s[n?"addClass":"removeClass"](T))})}).bind("sortchange",function(){if(t.sortAlsoTreeview||le!==t.sortAlsoTreeview){var i,n=[],a={},o={},s="",r=!1;t.lazy(function(){i=V(t.files()),le=t.sortAlsoTreeview,oe.empty(),J(e.map(t.roots,function(e){var i=t.file(e);return i&&!i.phash?i:null})),Object.keys($).length?((n=ee()).length>1?(e.each(n,function(e,i){var n=t.file(t.root(i)).volumeid;0===e&&(s=n),o[n]=i,a[i]=[]}),e.each(i,function(e,t){if(!t.volumeid)return r=!0,!1;a[o[t.volumeid]||o[s]].push(t)})):r=!0,r?e.each(n,function(e,n){J(i),te(t.file(n)),ae(i,y)}):e.each(a,function(e,i){J(i),te(t.file(e)),ae(i,y)})):(J(i),te(),ae(i,y)),ie()},100)}})}),this},e.fn.elfinderuploadbutton=function(t){return this.each(function(){var i,n=t.fm,a=e(this).elfinderbutton(t).off("click"),o=e("<form></form>").appendTo(a),s=e('<input type="file" multiple="true" title="'+t.fm.i18n("selectForUpload")+'"/>').on("change",function(){var t=e(this);t.val()&&(n.exec("upload",{input:t.remove()[0]},void 0,n.cwd().hash),s.clone(!0).appendTo(o))}).on("dragover",function(e){e.originalEvent.dataTransfer.dropEffect="copy"});o.append(s.clone(!0)),t.change(function(){i&&cancelAnimationFrame(i),i=requestAnimationFrame(function(){var e=t.disabled();o.is("visible")?!e&&o.hide():e&&o.show()})}).change()})},e.fn.elfinderviewbutton=function(t){return this.each(function(){var i,n=e(this).elfinderbutton(t),a=n.children(".elfinder-button-icon"),o=n.children(".elfinder-button-text");t.change(function(){i&&cancelAnimationFrame(i),i=requestAnimationFrame(function(){var e="icons"==t.value;a.toggleClass("elfinder-button-icon-view-list",e),t.className=e?"view-list":"",t.title=t.fm.i18n(e?"viewlist":"viewicons"),n.attr("title",t.title),o.html(t.title)})})})},e.fn.elfinderworkzone=function(t){var i="elfinder-workzone";return this.not("."+i).each(function(){var n,a=e(this).addClass(i),o=Math.round(a.height()),s=a.parent(),r=function(){n=a.outerHeight(!0)-a.height()},l=function(r){var l=s.height()-n,c=s.attr("style"),d=Math.round(a.height());r&&(r.preventDefault(),r.stopPropagation()),s.css("overflow","hidden").children(":visible:not(."+i+")").each(function(){var t=e(this);"absolute"!=t.css("position")&&"fixed"!=t.css("position")&&(l-=t.outerHeight(!0))}),s.attr("style",c||""),l=Math.max(0,Math.round(l)),o===l&&d===l||(o=Math.round(a.height()),a.height(l),t.trigger("wzresize"))};r(),s.on("resize."+t.namespace,l),t.one("cssloaded",function(){n=a.outerHeight(!0)-a.height(),l()}).bind("uiresize",l).bind("themechange",r)}),this},u.prototype.commands.archive=function(){var t,i=this,n=i.fm,a=[];this.variants=[],this.disableOnSearch=!1,this.nextAction={},n.bind("open reload",function(){i.variants=[],e.each(a=n.option("archivers").create||[],function(e,t){i.variants.push([t,n.mime2kind(t)])}),i.change()}),this.getstate=function(i){var o,s,r,l=this.files(i),c=l.length,d=c&&!n.isRoot(l[0])&&(n.file(l[0].phash)||{}).write;return d&&n.searchStatus.state>1&&(d=c===(s=l,r=!0,e.grep(s,function(e){return r=!(!r||!e.read||0!==e.hash.indexOf(o))})).length)&&(o=n.cwd().volumeid),d&&!this._disabled&&a.length&&(c||t&&"pending"==t.state())?0:-1},this.exec=function(o,s){var r,l=this.files(o),c=l.length,d=s||a[0],u=n.file(l[0].phash)||null,h=["errArchive","errPerm","errCreatingTempDir","errFtpDownloadFile","errFtpUploadFile","errFtpMkdir","errArchiveExec","errExtractExec","errRm"];if(t=e.Deferred().fail(function(e){e&&n.error(e)}),!c||!a.length||-1===e.inArray(d,a))return t.reject();if(!u.write)return t.reject(h);for(r=0;r<c;r++)if(!l[r].read)return t.reject(h);return i.mime=d,i.prefix=(c>1?"Archive":l[0].name)+(n.option("archivers").createext?"."+n.option("archivers").createext[d]:""),i.data={targets:i.hashes(o),type:d},n.cwd().hash!==u.hash?n.exec("open",u.hash).done(function(){n.one("cwdrender",function(){n.selectfiles({files:o}),t=e.proxy(n.res("mixin","make"),i)()})}):(n.selectfiles({files:o}),t=e.proxy(n.res("mixin","make"),i)()),t}},(u.prototype.commands.back=function(){this.alwaysEnabled=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:"ctrl+left backspace"}],this.getstate=function(){return this.fm.history.canBack()?0:-1},this.exec=function(){return this.fm.history.back()}}).prototype={forceLoad:!0},u.prototype.commands.chmod=function(){this.updateOnSelect=!1;var t=this.fm,i={0:"owner",1:"group",2:"other"},n={read:t.i18n("read"),write:t.i18n("write"),execute:t.i18n("execute"),perm:t.i18n("perm"),kind:t.i18n("kind"),files:t.i18n("files")},a=function(e){return!isNaN(parseInt(e,8))&&parseInt(e,8)<=511||e.match(/^([r-][w-][x-]){3}$/i)};this.tpl={main:'<div class="ui-helper-clearfix elfinder-info-title"><span class="elfinder-cwd-icon {class} ui-corner-all"></span>{title}</div>{dataTable}',itemTitle:'<strong>{name}</strong><span id="elfinder-info-kind">{kind}</span>',groupTitle:"<strong>{items}: {num}</strong>",dataTable:'<table id="{id}-table-perm"><tr><td>{0}</td><td>{1}</td><td>{2}</td></tr></table><div class="">'+n.perm+': <input class="elfinder-tabstop elfinder-focus" id="{id}-perm" type="text" size="4" maxlength="3" value="{value}"></div>',fieldset:'<fieldset id="{id}-fieldset-{level}"><legend>{f_title}{name}</legend><input type="checkbox" value="4" class="elfinder-tabstop" id="{id}-read-{level}-perm"{checked-r}> <label for="{id}-read-{level}-perm">'+n.read+'</label><br><input type="checkbox" value="6" class="elfinder-tabstop" id="{id}-write-{level}-perm"{checked-w}> <label for="{id}-write-{level}-perm">'+n.write+'</label><br><input type="checkbox" value="5" class="elfinder-tabstop" id="{id}-execute-{level}-perm"{checked-x}> <label for="{id}-execute-{level}-perm">'+n.execute+"</label><br>"},this.shortcuts=[{}],this.getstate=function(e){var t=this.fm;return 0==(e=e||t.selected()).length&&(e=[t.cwd().hash]),this.checkstate(this.files(e))?0:-1},this.checkstate=function(t){var i,n=t.length;return!(!n||n!==(i=!0,e.grep(t,function(e){return i=!(!(i&&e.isowner&&e.perm&&a(e.perm))||1!=n&&"directory"==e.mime)})).length)},this.exec=function(t){var o=this.hashes(t),s=this.files(o);s.length||(o=[this.fm.cwd().hash],s=this.files(o));var r,l,c=this.fm,d=e.Deferred().always(function(){c.enable()}),u=this.tpl,h=s.length,p=s[0],f=c.namespace+"-perm-"+p.hash,m=u.main,g=' checked="checked"',v=function(){var t,i=e.trim(e("#"+f+"-perm").val());if(!a(i))return!1;k.elfinderdialog("close"),t={cmd:"chmod",targets:o,mode:i},c.request({data:t,notify:{type:"chmod",cnt:h}}).fail(function(e){d.reject(e)}).done(function(i){i.changed&&i.changed.length&&(i.undo={cmd:"chmod",callback:function(){var t=[];return e.each(C,function(e,i){t.push(c.request({data:{cmd:"chmod",targets:i,mode:e},notify:{type:"undo",cnt:i.length}}))}),e.when.apply(null,t)}},i.redo={cmd:"chmod",callback:function(){return c.request({data:t,notify:{type:"redo",cnt:o.length}})}}),d.resolve(i)})},b=function(){for(var t,n="",a=0;a<3;a++)t=0,e("#"+f+"-read-"+i[a]+"-perm").is(":checked")&&(t|=4),e("#"+f+"-write-"+i[a]+"-perm").is(":checked")&&(t|=2),e("#"+f+"-execute-"+i[a]+"-perm").is(":checked")&&(t|=1),n+=t.toString(8);e("#"+f+"-perm").val(n)},y=function(e){return e?":"+e:""},w=function(e){if(isNaN(parseInt(e,8))){for(var t=e.split(""),i=[],n=0,a=t.length;n<a;n++)0===n||3===n||6===n?t[n].match(/[r]/i)?i.push(1):t[n].match(/[-]/)&&i.push(0):1===n||4===n||7===n?t[n].match(/[w]/i)?i.push(1):t[n].match(/[-]/)&&i.push(0):t[n].match(/[x]/i)?i.push(1):t[n].match(/[-]/)&&i.push(0);i.splice(3,0,","),i.splice(7,0,",");for(var o=i.join("").split(","),s=[],r=0,l=o.length;r<l;r++){var c=parseInt(o[r],2).toString(8);s.push(c)}e=s.join("")}else e=parseInt(e,8).toString(8);return e},x={title:this.title,width:"auto",buttons:function(){var e={};return e[c.i18n("btnApply")]=v,e[c.i18n("btnCancel")]=function(){k.elfinderdialog("close")},e}(),close:function(){e(this).elfinderdialog("destroy")}},k=c.getUI().find("#"+f),C={},_="";return k.length?(k.elfinderdialog("toTop"),e.Deferred().resolve()):(m=m.replace("{class}",h>1?"elfinder-cwd-icon-group":c.mime2class(p.mime)),h>1?r=u.groupTitle.replace("{items}",c.i18n("items")).replace("{num}",h):(r=u.itemTitle.replace("{name}",p.name).replace("{kind}",c.mime2kind(p)),_=c.tmb(p)),l=function(e,t){for(var a,o,s="",r=u.dataTable,l=0;l<3;l++)s+=(a=parseInt(e.slice(l,l+1),8)).toString(8),o=u.fieldset.replace("{f_title}",c.i18n(i[l])).replace("{name}",y(t[i[l]])).replace(/\{level\}/g,i[l]),r=r.replace("{"+l+"}",o).replace("{checked-r}",4&~a?"":g).replace("{checked-w}",2&~a?"":g).replace("{checked-x}",1&~a?"":g);return r=r.replace("{value}",s).replace("{valueCaption}",n.perm)}(function(e){for(var t,i,n,a="777",o="",s=e.length,r=0;r<s;r++){t=w(e[r].perm),C[t]||(C[t]=[]),C[t].push(e[r].hash),o="";for(var l=0;l<3;l++)i=parseInt(t.slice(l,l+1),8),n=parseInt(a.slice(l,l+1),8),4&~i&&!(4&~n)&&(n-=4),2&~i&&!(2&~n)&&(n-=2),1&~i&&!(1&~n)&&(n-=1),o+=n.toString(8);a=o}return a}(s),1==s.length?s[0]:{}),m=m.replace("{title}",r).replace("{dataTable}",l).replace(/{id}/g,f),(k=this.fmDialog(m,x)).attr("id",f),_&&e("<img/>").on("load",function(){k.find(".elfinder-cwd-icon").addClass(_.className).css("background-image","url('"+_.url+"')")}).attr("src",_.url),e("#"+f+"-table-perm :checkbox").on("click",function(){b()}),e("#"+f+"-perm").on("keydown",function(t){if(t.keyCode==e.ui.keyCode.ENTER)return t.stopPropagation(),void v()}).on("focus",function(t){e(this).trigger("select")}).on("keyup",function(t){3==e(this).val().length&&(e(this).trigger("select"),function(t){for(var n,a=0;a<3;a++)n=parseInt(t.slice(a,a+1),8),e("#"+f+"-read-"+i[a]+"-perm").prop("checked",!1),e("#"+f+"-write-"+i[a]+"-perm").prop("checked",!1),e("#"+f+"-execute-"+i[a]+"-perm").prop("checked",!1),4&~n||e("#"+f+"-read-"+i[a]+"-perm").prop("checked",!0),2&~n||e("#"+f+"-write-"+i[a]+"-perm").prop("checked",!0),1&~n||e("#"+f+"-execute-"+i[a]+"-perm").prop("checked",!0);b()}(e(this).val()))}),d)}},u.prototype.commands.colwidth=function(){this.alwaysEnabled=!0,this.updateOnSelect=!1,this.getstate=function(){return"fixed"===this.fm.getUI("cwd").find("table").css("table-layout")?0:-1},this.exec=function(){return this.fm.getUI("cwd").trigger("colwidth"),e.Deferred().resolve()}},u.prototype.commands.copy=function(){this.shortcuts=[{pattern:"ctrl+c ctrl+insert"}],this.getstate=function(t){var i,n,a=this.files(t),o=a.length;return o&&(i=a,n=!0,e.grep(i,function(e){return n=!(!n||!e.read)})).length==o?0:-1},this.exec=function(t){var i=this.fm,n=e.Deferred().fail(function(e){i.error(e)});return e.each(this.files(t),function(e,t){if(!t.read)return!n.reject(["errCopy",t.name,"errPerm"])}),"rejected"==n.state()?n:n.resolve(i.clipboard(this.hashes(t)))}},u.prototype.commands.cut=function(){var t=this.fm;this.shortcuts=[{pattern:"ctrl+x shift+insert"}],this.getstate=function(i){var n,a,o=this.files(i),s=o.length;return s&&(n=o,a=!0,e.grep(n,function(e){return a=!(!a||!e.read||e.locked||t.isRoot(e))})).length==s?0:-1},this.exec=function(i){var n=e.Deferred().fail(function(e){t.error(e)});return e.each(this.files(i),function(e,i){return!i.read||i.locked||t.isRoot(i)?!n.reject(["errCopy",i.name,"errPerm"]):i.locked?!n.reject(["errLocked",i.name]):void 0}),"rejected"==n.state()?n:n.resolve(t.clipboard(this.hashes(i),!0))}},u.prototype.commands.zipdl=function(){},u.prototype.commands.download=function(){var t=this,i=this.fm,n=null,a=!1,o=!1,s=!1,r=window.location.pathname||"/",l=function(s,r){var l,c;if(null!==n&&(i.searchStatus.state>1?o=i.searchStatus.mixed:i.leafRoots[i.cwd().hash]&&(l=i.cwd().volumeid,e.each(s,function(e,t){if(0!==t.indexOf(l))return o=!0,!1})),a=i.isCommandEnabled("zipdl",s[0])),o){if(c=n?"zipdl":"download",!(s=e.grep(s,function(e){var t=i.file(e),a=!(!t||!n&&"directory"===t.mime||!i.isCommandEnabled(c,e));return t&&r&&!a&&i.cwdHash2Elm(t.hash).trigger("unselect"),a})).length)return[]}else if(!i.isCommandEnabled("download",s[0]))return[];return e.grep(t.files(s),function(e){var t=!(!e.read||!a&&"directory"==e.mime);return r&&!t&&i.cwdHash2Elm(e.hash).trigger("unselect"),t})};this.linkedCmds=["zipdl"],this.shortcuts=[{pattern:"shift+enter"}],this.getstate=function(e){var t=this.hashes(e),n=t.length,o=this.options.maxRequests||10;return n<1?-1:(n=l(t).length)&&(a||n<=o&&(!i.UA.IE&&!i.UA.Mobile||1==n))?0:-1},i.bind("contextmenu",function(i){var n,a,o,s=t.fm,r=null,l=function(t){var i=t.url||s.url(t.hash);return{icon:"link",node:e("<a></a>").attr({href:i,target:"_blank",title:s.i18n("link")}).text(t.name).on("mousedown click touchstart touchmove touchend contextmenu",function(e){e.stopPropagation()}).on("dragstart",function(i){var n,a,o,l,c=i.dataTransfer||i.originalEvent.dataTransfer||null;if(r=null,c){c.effectAllowed="copyLink",c.setDragImage&&(r=e('<div class="elfinder-drag-helper html5-native">').append((n=t,o=n.mime,l=s.tmb(n),a='<div class="elfinder-cwd-icon '+s.mime2class(o)+' ui-corner-all"></div>',l&&(a=e(a).addClass(l.className).css("background-image","url('"+l.url+"')").get(0).outerHTML),a)).appendTo(e(document.body)),c.setDragImage(r.get(0),50,47)),s.UA.IE||(c.setData("elfinderfrom",window.location.href+t.phash),c.setData("elfinderfrom:"+c.getData("elfinderfrom"),""))}}).on("dragend",function(e){r&&r.remove()})}};(t.extra=null,i.data)&&(1===(n=i.data.targets||[]).length&&(a=s.file(n[0]))&&"directory"!==a.mime&&("1"!=a.url?t.extra=l(a):(t.extra={icon:"link",node:e("<a></a>").attr({href:"#",title:s.i18n("getLink"),draggable:"false"}).text(a.name).on("click touchstart",function(e){if(!("touchstart"===e.type&&e.originalEvent.touches.length>1)){var t=o.parent();e.stopPropagation(),e.preventDefault(),t.removeClass("ui-state-disabled").addClass("elfinder-button-icon-spinner"),s.request({data:{cmd:"url",target:a.hash},preventDefault:!0}).always(function(e){(t.removeClass("elfinder-button-icon-spinner"),e.url)?(s.file(a.hash).url=e.url,o.replaceWith(l(a).node)):t.addClass("ui-state-disabled")})}})},(o=t.extra.node).ready(function(){requestAnimationFrame(function(){o.parent().addClass("ui-state-disabled").css("pointer-events","auto")})}))))}).one("open",function(){i.api>=2.1012&&(n=i.getCommand("zipdl")),s=i.cookieEnabled&&i.api>2.1038&&!i.isCORS}),this.exec=function(i){var n,c,d,u,h,p,f,m,g,v=this.hashes(i),b=this.fm,y=(b.options.url,l(v,!0)),w=e.Deferred(),x="",k={},C=!1,_=function(e){var t;"function"==typeof MouseEvent?t=new MouseEvent("click"):(t=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),b.pauseUnloadCheck(!0),e.dispatchEvent(t)},T=function(e){var t="elfdl"+e;2===document.cookie.split(t+"=").length?(p&&clearTimeout(p),document.cookie=t+"=; path="+r+"; max-age=0",D()):setTimeout(function(){T(e)},200)},D=function(){b.ui.notify.children(".elfinder-notify-download").length&&b.notify({type:"download",cnt:-1})},z=[];if(!y.length)return w.reject();if(h=e.grep(y,function(e){return"directory"!==e.mime}).length,d=e("<a>").hide().appendTo("body"),u="string"==typeof d.get(0).download,a&&(h!==y.length||h>=(this.options.minFilesZipdl||1)))return d.remove(),C=!u&&b.UA.Mobile,o?(k={},e.each(y,function(e,t){var i=t.hash.split("_",2);k[i[0]]?k[i[0]].push(t.hash):k[i[0]]=[t.hash]}),!C&&b.UA.Mobile&&Object.keys(k).length>1&&(C=!0)):k=[e.map(y,function(e){return e.hash})],w=b.sequence(e.map(k,function(i){return function(i){return function(){var n,a,o,s=e.Deferred(),r=b.file(b.root(i[0])),l=1===i.length,d=r?r.i18||r.name:null;return l?(n=b.file(i[0]))&&(a=n.i18||n.name):(e.each(i,function(){var e=b.file(this);if(!e||o&&o!==e.phash)return o=null,!1;o=e.phash}),o&&(n=b.file(o))&&(a=(n.i18||n.name)+"-"+i.length)),a&&(d=a),d&&(d=" ("+d+")"),b.request({data:{cmd:"zipdl",targets:i},notify:{type:"zipdl",cnt:1,hideCnt:!0,msg:b.i18n("ntfzipdl")+d},cancel:!0,eachCancel:!0,preventDefault:!0}).done(function(n){var o,r,l,d,h,p,f={},m="dlw"+ +new Date,g=function(i){l=e("<a></a>").attr("href",i).attr("download",b.escape(a)).on("click",function(){s.resolve(),r&&r.elfinderdialog("destroy")}),C?(l.attr("target","_blank").append('<span class="elfinder-button-icon elfinder-button-icon-download"></span>'+b.escape(a)),f[b.i18n("btnCancel")]=function(){r.elfinderdialog("destroy")},r=t.fmDialog(l,{title:b.i18n("link"),buttons:f,width:"200px",destroyOnClose:!0,close:function(){"resolved"!==s.state()&&s.resolve()}})):(_(l.hide().appendTo("body").get(0)),l.remove())};n.error?(b.error(n.error),s.resolve()):n.zipdl&&(o=n.zipdl,a?(p=b.splitFileExtention(o.name||""),a+=p[1]?"."+p[1]:".zip"):a=o.name,u||C?(c=b.options.url+(-1===b.options.url.indexOf("?")?"?":"&")+"cmd=zipdl&download=1",e.each([i[0],o.file,a,o.mime],function(e,t){c+="&targets%5B%5D="+encodeURIComponent(t)}),e.each(b.customData,function(e,t){c+="&"+encodeURIComponent(e)+"="+encodeURIComponent(t)}),c+="&"+encodeURIComponent(a),b.hasParrotHeaders()?b.getBinaryByUrl({url:c},function(e){e instanceof Blob?(c=(window.URL||window.webkitURL).createObjectURL(e),g(c)):b.error(["errUploadTransfer",b.i18n("kindZIP")])}):g(c)):(d=e('<form action="'+b.options.url+'" method="post" target="'+m+'" style="display:none"></form>').append('<input type="hidden" name="cmd" value="zipdl"/>').append('<input type="hidden" name="download" value="1"/>'),e.each([i[0],o.file,a,o.mime],function(e,t){d.append('<input type="hidden" name="targets[]" value="'+b.escape(t)+'"/>')}),e.each(b.customData,function(e,t){d.append('<input type="hidden" name="'+e+'" value="'+b.escape(t)+'"/>')}),d.attr("target",m).appendTo("body"),h=e('<iframe style="display:none" name="'+m+'">').appendTo("body").ready(function(){d.submit().remove(),s.resolve(),setTimeout(function(){h.remove()},2e4)})))}).fail(function(e){e&&b.error(e),s.resolve()}),s.promise()}}(i)})).always(function(){b.trigger("download",{files:y})}),w;for(z=[],m=e.Deferred().done(function(t){for(n=0;n<t.length;n++)c=t[n],s&&c.substr(0,b.options.url.length)===b.options.url&&(f=b.getRequestId(),z.push(f),c+="&cpath="+r+"&reqid="+f,p=setTimeout(function(){b.notify({type:"download",cnt:1,cancel:b.UA.IE||b.UA.Edge?void 0:function(){z.length&&e.each(z,function(){b.request({data:{cmd:"abort",id:this},preventDefault:!0})}),z=[]}})},b.notifyDelay),T(f)),u?_(d.attr("href",c).attr("download",b.escape(y[n].name)).get(0)):b.UA.Mobile?setTimeout(function(){window.open(c)||(b.error("errPopup"),p&&cleaerTimeout(p),D())},100):x+='<iframe class="downloader" id="downloader-'+y[n].hash+'" style="display:none" src="'+c+'"></iframe>';d.remove(),e(x).appendTo("body").ready(function(){setTimeout(function(){e(x).each(function(){e("#"+e(this).attr("id")).remove()})},2e4+1e4*n)}),b.trigger("download",{files:y}),w.resolve()}),h=y.length,g=[],n=0;n<y.length;n++)b.openUrl(y[n].hash,!0,function(e){e&&g.push(e),--h<1&&m.resolve(g)});return w}},u.prototype.commands.duplicate=function(){var t=this.fm;this.getstate=function(i){var n,a,o=this.files(i),s=o.length;return s&&t.cwd().write&&(n=o,a=!0,e.grep(n,function(e){return a=!(!a||!e.read||e.phash!==t.cwd().hash||t.isRoot(e))})).length==s?0:-1},this.exec=function(t){var i=this.fm,n=this.files(t),a=n.length,o=e.Deferred().fail(function(e){e&&i.error(e)});return a?(e.each(n,function(e,t){if(!t.read||!i.file(t.phash).write)return!o.reject(["errCopy",t.name,"errPerm"])}),"rejected"==o.state()?o:i.request({data:{cmd:"duplicate",targets:this.hashes(t)},notify:{type:"copy",cnt:a},navigate:{toast:{inbuffer:{msg:i.i18n(["complete",i.i18n("cmdduplicate")])}}}})):o.reject()}},u.prototype.commands.edit=function(){var t,i=this,n=this.fm,a=n.res("class","editing"),o=[],s=[],r=!1,l=function(t){var a,o=e('<select class="ui-corner-all"></select>');return t&&e.each(t,function(e,t){a=n.escape(t.value),o.append('<option value="'+a+'">'+(t.caption?n.escape(t.caption):a)+"</option>")}),e.each(i.options.encodings,function(e,t){o.append('<option value="'+t+'">'+t+"</option>")}),o},c=function(){if(i.options.dialogHeight){var t,a,o=n.options.dialogContained?n.getUI():e(window);return a="string"==typeof i.options.dialogHeight&&(t=i.options.dialogHeight.match(/(\d+)%/))?parseInt(o.height()*(t[1]/100)):parseInt(i.options.dialogHeight||o.height()),Math.min(a,o.height())}},d=function(t){var a,l,c,d=t.length;return d>1&&(a=t[0].mime,l=t[0].name.replace(/^.*(\.[^.]+)$/,"$1")),e.grep(t,function(t){var u;return!c&&"directory"!==t.mime&&((u=t.read&&(r||n.mimeIsText(t.mime)||-1!==e.inArray(t.mime,1===d?o:s))&&(!i.onlyMimes.length||-1!==e.inArray(t.mime,i.onlyMimes))&&(1===d||t.mime===a&&t.name.substr(-1*l.length)===l)&&!!n.uploadMimeCheck(t.mime,t.phash)&&m(t,d)&&Object.keys(p).length)||(c=!0),u)})},u=function(e){var t,i=n.file(e);n.request({cmd:"info",targets:[e],preventDefault:!0}).done(function(e){var a;e&&e.files&&e.files.length&&(t=e.files[0],i.ts==t.ts&&i.size==t.size||(a={changed:[t]},n.updateCache(a),n.change(a)))})},h=function(t,o,s){var r,d,p,f=t.hash,m=(n.options,e.Deferred()),g="edit-"+n.namespace+"-"+t.hash,v=n.getUI().find("#"+g),y=o||0,w=!1;if(v.length)return v.elfinderdialog("toTop"),m.resolve();if(!(t.read&&(t.write||s.info&&s.info.converter)))return d=["errOpen",t.name,"errPerm"],m.reject(d);if(s&&s.info){if("function"==typeof s.info.edit)return(p=s.info.edit.call(n,t,s)).promise?p.done(function(){m.resolve()}).fail(function(e){m.reject(e)}):p?m.resolve():m.reject(),m;w=s.info.preventGet||s.info.noContent,s.info.urlAsContent||w?(r=e.Deferred(),s.info.urlAsContent?n.url(f,{async:!0,onetime:!0,temporary:!0}).done(function(e){r.resolve({content:e})}):r.resolve({})):(y&&(t.encoding=y,n.cache(t,"change")),r=n.request({data:{cmd:"get",target:f,conv:y,_t:t.ts},options:{type:"get",cache:!0},notify:{type:"file",cnt:1},preventDefault:!0})),r.done(function(o){var r,d,p;o.doconv?n.confirm({title:i.title,text:"unknown"===o.doconv?"confirmNonUTF8":"confirmConvUTF8",accept:{label:"btnConv",callback:function(){m=h(t,r.val(),s)}},cancel:{label:"btnCancel",callback:function(){m.reject()}},optionsCallback:function(t){t.create=function(){var t=e('<div class="elfinder-dialog-confirm-encoding"></div>'),i={value:o.doconv};"unknown"===o.doconv&&(i.caption="-"),r=l([i]),e(this).next().find(".ui-dialog-buttonset").prepend(t.append(e("<label>"+n.i18n("encoding")+" </label>").append(r)))}}}):(!w&&n.mimeIsText(t.mime)&&(d=new RegExp("^(data:"+t.mime.replace(/([.+])/g,"\\$1")+";base64,)","i"),s.info.dataScheme?window.btoa&&!o.content.match(d)&&(o.content="data:"+t.mime+";base64,"+btoa(o.content)):window.atob&&(p=o.content.match(d))&&(o.content=atob(o.content.substr(p[1].length)))),function(t,o,s,r,d,p){var f,m,g,v,y,w,x,k,C,_=e.Deferred(),T=!1,D=function(){return!!T||(n.toast({mode:"warning",msg:n.i18n("nowLoading")}),!1)},z=function(){p&&Array.isArray(p)&&e.each(p,function(){this.msg&&n.toast(this)})},A=function(){var t,i,a,o=v?v.val():void 0,s=e.Deferred().fail(function(e){g.show().find("button.elfinder-btncnt-0,button.elfinder-btncnt-1").hide()});return D()?(f.editor&&(f.editor.save(f[0],f.editor.instance),(t=f.editor.confObj).info&&(t.info.schemeContent||t.info.arrayBufferContent)&&(o="scheme")),i=P(),F(i),i.promise?(a=setTimeout(function(){n.notify({type:"chkcontent",cnt:1,hideCnt:!0,cancel:function(){i.reject()}})},100),i.always(function(){a&&clearTimeout(a),n.notify({type:"chkcontent",cnt:-1})}).done(function(e){_.notifyWith(f,[o,f.data("hash"),m,s])}).fail(function(e){s.reject(e)})):_.notifyWith(f,[o,f.data("hash"),m,s]),s):s.resolve()},S=function(){D()&&A().fail(function(e){e&&n.error(e)})},I=function(){f.elfinderdialog("close")},M=function(){D()&&(g.hide(),A().done(function(){T=!1,g.show(),I()}).fail(function(e){g.show(),e&&n.error(e)}))},E=function(){if(D()){var t=m,s=o.phash,r=function(e){u.addClass(a).fadeIn(function(){e&&n.error(e)}),m=t,n.disable()},l=function(){i.mime=U.mime||o.mime,i.prefix=(U.name||o.name).replace(/ \d+(\.[^.]+)?$/,"$1"),i.requestCmd="mkfile",i.nextAction={},i.data={target:s},e.proxy(n.res("mixin","make"),i)().done(function(e){var t;e.added&&e.added.length?(t=f.data("hash"),f.data("hash",e.added[0].hash),A().done(function(){T=!1,g.show(),I(),u.fadeIn()}).fail(function(){n.exec("rm",[e.added[0].hash],{forceRm:!0,quiet:!0}),f.data("hash",t),g.find("button.elfinder-btncnt-2").hide(),r()})):r()}).progress(function(e){e&&"errUploadMime"===e&&f.trigger("saveAsFail")}).fail(r).always(function(){delete i.mime,delete i.prefix,delete i.nextAction,delete i.data}),n.trigger("unselectfiles",{files:[o.hash]})},c=null,d=null,u=n.getUI().children("."+i.dialogClass+":visible");g.is(":hidden")&&(u=u.add(g)),u.removeClass(a).fadeOut(),n.enable(),n.searchStatus.state<2&&s!==n.cwd().hash?c=n.exec("open",[s],{thash:s}):n.file(s)||(d=n.request({cmd:"info",targets:[s]})),e.when([c,d]).done(function(){d?n.one("infodone",function(){n.file(s)?l():r("errFolderNotFound")}):c?n.one("cwdrender",l):l()}).fail(r)}},O=function(){var t,i,a=e.Deferred();return T?(f.editor&&f.editor.save(f[0],f.editor.instance),(t=P())&&t.promise?(i=setTimeout(function(){n.notify({type:"chkcontent",cnt:1,hideCnt:!0,cancel:function(){t.reject()}})},100),t.always(function(){i&&clearTimeout(i),n.notify({type:"chkcontent",cnt:-1})}).done(function(e){a.resolve(m!==e)}).fail(function(e){a.resolve(e||void 0!==m)})):a.resolve(m!==t),a):a.resolve(!1)},j={title:n.escape(o.name),width:(C=n.options.dialogContained?n.getUI():e(window),k="string"==typeof i.options.dialogWidth&&(x=i.options.dialogWidth.match(/(\d+)%/))?parseInt(C.width()*(x[1]/100)):parseInt(i.options.dialogWidth||650),Math.min(k,C.width())),height:c(),buttons:{},cssClass:a,maxWidth:"window",maxHeight:"window",allowMinimize:!0,allowMaximize:!0,openMaximized:b()||d&&d.info&&d.info.openMaximized,btnHoverFocus:!1,closeOnEscape:!1,propagationEvents:["mousemove","mouseup","click"],minimize:function(){var e;f.editor&&g.closest(".ui-dialog").is(":hidden")&&(e=f.editor.confObj).info&&e.info.syncInterval&&u(o.hash)},close:function(){var e=function(){var e;_.resolve(),f.editor&&(f.editor.close(f[0],f.editor.instance),(e=f.editor.confObj).info&&e.info.syncInterval&&u(o.hash)),f.elfinderdialog("destroy")},t=void 0!==U.name,a=t?{label:"btnSaveAs",callback:function(){requestAnimationFrame(E)}}:{label:"btnSaveClose",callback:function(){A().done(function(){e()})}};O().done(function(o){var s=["confirmNotSave"];o?("string"==typeof o&&s.unshift(o),n.confirm({title:i.title,text:s,accept:a,cancel:{label:"btnClose",callback:e},buttons:t?null:[{label:"btnSaveAs",callback:function(){requestAnimationFrame(E)}}]})):e()})},open:function(){var e,i,a;if(f.initEditArea.call(f,t,o,s,n),f.editor){if((e=f.editor.load(f[0])||null)&&e.done)e.always(function(){T=!0}).done(function(e){f.editor.instance=e,f.editor.focus(f[0],f.editor.instance),F(P()),requestAnimationFrame(function(){g.trigger("resize")})}).fail(function(e){e&&n.error(e),f.elfinderdialog("destroy")}).always(z);else{if(T=!0,e&&("string"==typeof e||Array.isArray(e)))return n.error(e),void f.elfinderdialog("destroy");f.editor.instance=e,f.editor.focus(f[0],f.editor.instance),F(P()),requestAnimationFrame(function(){g.trigger("resize")}),z()}(i=f.editor.confObj).info&&i.info.syncInterval&&(a=parseInt(i.info.syncInterval))&&setTimeout(function(){H(a)},a)}else T=!0,F(P())},resize:function(e,t){f.editor&&f.editor.resize(f[0],f.editor.instance,e,t||{})}},P=function(){var t=f.getContent.call(f,f[0]);return void 0!==t&&!1!==t&&null!==t||(t=e.Deferred().reject()),t},F=function(e){e&&e.promise?e.done(function(e){m=e}):m=e},H=function(e){g.is(":visible")&&(u(o.hash),setTimeout(function(){H(e)},e))},N=function(){v&&O().done(function(e){e?v.attr("title",n.i18n("saveAsEncoding")).addClass("elfinder-edit-changed"):v.attr("title",n.i18n("openAsEncoding")).removeClass("elfinder-edit-changed")})},U={};if(d&&(d.html&&(f=e(d.html)),y={init:d.init||null,load:d.load,getContent:d.getContent||null,save:d.save,beforeclose:"function"==typeof d.beforeclose?d.beforeclose:void 0,close:"function"==typeof d.close?d.close:function(){},focus:"function"==typeof d.focus?d.focus:function(){},resize:"function"==typeof d.resize?d.resize:function(){},instance:null,doSave:S,doCancel:I,doClose:M,file:o,fm:n,confObj:d,trigger:function(e,t){n.trigger("editEditor"+e,Object.assign({},d.info||{},t))}}),!f){if(!n.mimeIsText(o.mime))return _.reject("errEditorNotFound");f=e('<textarea class="elfinder-file-edit" rows="20" id="'+t+'-ta"></textarea>').on("input propertychange",N),d&&d.info&&!d.info.useTextAreaEvent||f.on("keydown",function(t){var i,n,a=t.keyCode;t.stopPropagation(),a==e.ui.keyCode.TAB&&(t.preventDefault(),this.setSelectionRange&&(i=this.value,n=this.selectionStart,this.value=i.substr(0,n)+"\t"+i.substr(this.selectionEnd),n+=1,this.setSelectionRange(n,n))),(t.ctrlKey||t.metaKey)&&(a!="Q".charCodeAt(0)&&a!="W".charCodeAt(0)||(t.preventDefault(),I()),a=="S".charCodeAt(0)&&(t.preventDefault(),S()))}).on("mouseenter",function(){this.focus()}),f.initEditArea=function(e,t,i){f.hide().val(i),this._setupSelEncoding(i)}}return f._setupSelEncoding=function(t){var i=r&&"unknown"!==r?[{value:r}]:[],a=e("<select></select>").hide(),s=function(t){t&&a.appendTo(v.parent()),a.empty().append(e("<option></option>").text(v.val())),v.width(a.width())};""!==t&&r&&"UTF-8"===r||i.push({value:"UTF-8"}),v=l(i).on("touchstart",function(e){e.stopPropagation()}).on("change",function(){O().done(function(e){e||""===P()||(I(),h(o,v.val(),d).fail(function(e){e&&n.error(e)}))}),s()}).on("mouseover",N),f.parent().next().prepend(e('<div class="ui-dialog-buttonset elfinder-edit-extras"></div>').append(v)),s(!0)},f.data("hash",o.hash),y&&(f.editor=y,"function"==typeof y.beforeclose&&(j.beforeclose=function(){return y.beforeclose(f[0],y.instance)}),"function"==typeof y.init&&(f.initEditArea=y.init),"function"==typeof y.getContent&&(f.getContent=y.getContent)),f.initEditArea||(f.initEditArea=function(){}),f.getContent||(f.getContent=function(){return f.val().replace(/\s+$/,"")}),d&&d.info&&d.info.preventGet||(j.buttons[n.i18n("btnSave")]=S,j.buttons[n.i18n("btnSaveClose")]=M,j.buttons[n.i18n("btnSaveAs")]=E,j.buttons[n.i18n("btnCancel")]=I),d&&"function"==typeof d.prepare&&d.prepare(f,j,o),g=i.fmDialog(f,j).attr("id",t).on("keydown keyup keypress",function(e){e.stopPropagation()}).css({overflow:"hidden",minHeight:"7em"}).addClass("elfinder-edit-editor").closest(".ui-dialog").on("changeType",function(t,i){if(i.extention&&i.mime){i.extention,i.mime;var a=e(this).children(".ui-dialog-buttonpane").children(".ui-dialog-buttonset");a.children(".elfinder-btncnt-0,.elfinder-btncnt-1").hide(),U.name=n.splitFileExtention(o.name)[0]+"."+i.extention,U.mime=i.mime,i.keepEditor||a.children(".elfinder-btncnt-2").trigger("click")}}),w=(n.options.dialogContained?n.getUI():e(window)).width(),g.width()>w&&g.width(w),_.promise()}(g,t,o.content,o.encoding,s,o.toasts).done(function(e){m.resolve(e)}).progress(function(e,t,i,a){var o=this;t&&(f=t),n.request({options:{type:"post"},data:{cmd:"put",target:f,encoding:e||i.encoding,content:i},notify:{type:"save",cnt:1},syncOnFail:!0,preventFail:!0,navigate:{target:"changed",toast:{inbuffer:{msg:n.i18n(["complete",n.i18n("btnSave")])}}}}).fail(function(e){m.reject(e),a.reject()}).done(function(e){requestAnimationFrame(function(){o.trigger("focus"),o.editor&&o.editor.focus(o[0],o.editor.instance)}),a.resolve()})}).fail(function(e){m.reject(e)}))}).fail(function(e){var i=n.parseError(e);i=Array.isArray(i)?i[0]:i,t.encoding&&(t.encoding="",n.cache(t,"change")),"errConvUTF8"!==i&&n.sync(),m.reject(e)})}return m.promise()},p={},f={info:{id:"textarea",name:"TextArea",useTextAreaEvent:!0},load:function(t){this.trigger("Prepare",{node:t,editorObj:void 0,instance:void 0,opts:{}}),t.setSelectionRange&&t.setSelectionRange(0,0),e(t).trigger("focus").show()},save:function(){}},m=function(a,o){var s=i.options.editors||[],r=n.cwd().write;return t=n.storage("storedEditors")||{},p={},s.length||(s=[f]),e.each(s,function(t,i){var s;(1===o||!i.info.single)&&(i.info&&i.info.converter?r:a.write)&&(a.size>0||!i.info.converter&&!1!==i.info.canMakeEmpty&&n.mimesCanMakeEmpty[a.mime])&&(!i.info.maxSize||a.size<=i.info.maxSize)&&function(t,i){if(i){if("*"===i[0]||-1!==e.inArray(t,i))return!0;var a,o;for(o=i.length,a=0;a<o;a++)if(0===t.indexOf(i[a]))return!0;return!1}return n.mimeIsText(t)}(a.mime,i.mimes||null)&&function(e,t){if(!t||!t.length)return!0;var i,n,a=e.replace(/^.+\.([^.]+)|(.+)$/,"$1$2").toLowerCase();for(n=t.length,i=0;i<n;i++)if(a===t[i].toLowerCase())return!0;return!1}(a.name,i.exts||null)&&"function"==typeof i.load&&"function"==typeof i.save&&(s=i.info.name?i.info.name:"Editor "+t,i.id=i.info.id?i.info.id:"editor"+t,i.name=s,i.i18n=n.i18n(s),p[i.id]=i)}),!!Object.keys(p).length},g=function(i,a){i&&a&&(e.isPlainObject(t)||(t={}),t[i]=a.id,n.storage("storedEditors",t),n.trigger("selectfiles",{files:n.selected()}))},v=function(){var e=n.storage("useStoredEditor");return e?e>0:i.options.useStoredEditor},b=function(){var e=n.storage("editorMaximized");return e?e>0:i.options.editorMaximized},y=function(t,i){var a=[];return e.each(p,function(e,o){a.push({label:n.escape(o.i18n),icon:o.info&&o.info.icon?o.info.icon:"edit",options:{iconImg:o.info&&o.info.iconImg?n.baseUrl+o.info.iconImg:void 0},callback:function(){g(t[0].mime,o),i&&i.call(o)}})}),a},w=function(e){var i=t[e];return i&&Object.keys(p).length?p[function(e){return e.toLowerCase().replace(/ +/g,"")}(i)]:void 0};this.getEncSelect=l,this.shortcuts=[{pattern:"ctrl+e"}],this.init=function(){var t,i,n=this,a=this.fm,l=this.options,c=[];this.onlyMimes=this.options.mimes||[],a.one("open",function(){l.editors&&Array.isArray(l.editors)&&(a.trigger("canMakeEmptyFile",{mimes:Object.keys(a.storage("mkfileTextMimes")||{}).concat(l.makeTextMimes||["text/plain"])}),e.each(l.editors,function(e,t){t.info&&t.info.cmdCheck&&c.push(t.info.cmdCheck)}),c.length?a.api>=2.103?i=a.request({data:{cmd:"editor",name:c,method:"enabled"},preventDefault:!0}).done(function(e){t=e}).fail(function(){t={}}):(t={},i=e.Deferred().resolve()):i=e.Deferred().resolve(),i.always(function(){t&&(l.editors=e.grep(l.editors,function(e){return!e.info||!e.info.cmdCheck||!!t[e.info.cmdCheck]})),e.each(l.editors,function(e,t){t.setup&&"function"==typeof t.setup&&t.setup.call(t,l,a),t.disabled||(t.mimes&&Array.isArray(t.mimes)&&(o=o.concat(t.mimes),t.info&&t.info.single||(s=s.concat(t.mimes))),!r&&t.mimes&&"*"===t.mimes[0]&&(r=!0),t.info||(t.info={}),t.info.integrate&&a.trigger("helpIntegration",Object.assign({cmd:"edit"},t.info.integrate)),t.info.canMakeEmpty&&a.trigger("canMakeEmptyFile",{mimes:Array.isArray(t.info.canMakeEmpty)?t.info.canMakeEmpty:t.mimes}))}),o=(e.uniqueSort||e.unique)(o),s=(e.uniqueSort||e.unique)(s),l.editors=e.grep(l.editors,function(e){return!e.disabled})}))}).bind("select",function(){p=null}).bind("contextmenucreate",function(t){var i,o,s=function(e){var t=n.title;a.one("contextmenucreatedone",function(){n.title=t}),n.title=a.escape(e.i18n),e.info&&e.info.iconImg&&(n.contextmenuOpts={iconImg:a.baseUrl+e.info.iconImg}),delete n.variants};n.contextmenuOpts=void 0,"files"===t.data.type&&n.enabled()&&(i=a.file(t.data.targets[0]),m(i,t.data.targets.length)&&(Object.keys(p).length>1?v()&&(o=w(i.mime))?(s(o),n.extra={icon:"menu",node:e("<span></span>").attr({title:a.i18n("select")}).on("click touchstart",function(t){if(!("touchstart"===t.type&&t.originalEvent.touches.length>1)){var i=e(this);t.stopPropagation(),t.preventDefault(),a.trigger("contextmenu",{raw:y(a.selectedFiles(),function(){var e=a.selected();a.exec("edit",e,{editor:this}),a.trigger("selectfiles",{files:e})}),x:i.offset().left,y:i.offset().top})}})}):(delete n.extra,n.variants=[],e.each(p,function(e,t){n.variants.push([{editor:t},t.i18n,t.info&&t.info.iconImg?a.baseUrl+t.info.iconImg:"edit"])})):(s(p[Object.keys(p)[0]]),delete n.extra)))}).bind("canMakeEmptyFile",function(t){if(t.data&&t.data.resetTexts){var i=a.arrayFlip(n.options.makeTextMimes||["text/plain"]),o=n.getMkfileHides();e.each(a.storage("mkfileTextMimes")||{},function(e,t){i[e]||(delete a.mimesCanMakeEmpty[e],delete o[e])}),a.storage("mkfileTextMimes",null),Object.keys(o).length?a.storage("mkfileHides",o):a.storage("mkfileHides",null)}})},this.getstate=function(e){var t=this.files(e),i=t.length;return i&&d(t).length==i?0:-1},this.exec=function(t,i){var n,a,o=this.fm,s=d(this.files(t)),r=e.map(s,function(e){return e.hash}),l=[],c=i&&i.editor?i.editor:null,u=e(i&&i._currentNode?i._currentNode:o.cwdHash2Elm(r[0])),f=e.Deferred();return null===p&&m(s[0],r.length),u.length||(u=o.getUI("cwd")),(a=e.Deferred(),!c&&Object.keys(p).length>1?v()&&(c=w(s[0].mime))?a.resolve(c):(o.trigger("contextmenu",{raw:y(s,function(){a.resolve(this)}),x:u.offset().left,y:u.offset().top+22,opened:function(){o.one("closecontextmenu",function(){requestAnimationFrame(function(){"pending"===a.state()&&a.reject()})})}}),o.trigger("selectfiles",{files:r}),a):(Object.keys(p).length>1&&c&&g(s[0].mime,c),a.resolve(c||(Object.keys(p).length?p[Object.keys(p)[0]]:null)))).done(function(t){for(;n=s.shift();)l.push(h(n,n.encoding||void 0,t).fail(function(e){e&&o.error(e)}));l.length?e.when.apply(null,l).done(function(){f.resolve()}).fail(function(){f.reject()}):f.reject()}).fail(function(){f.reject()}),f},this.getMkfileHides=function(){return n.storage("mkfileHides")||n.arrayFlip(i.options.mkfileHideMimes||[])}},u.prototype.commands.empty=function(){var t,i,n=function(e){var n=t.files(e);return n.length||(n=[i.cwd()]),n};this.linkedCmds=["rm"],this.init=function(){t=this,i=this.fm},this.getstate=function(t){var i,a,o,s=n(t);return i=s.length,(a=s,o=!0,e.grep(a,function(e){return o=!!(o&&e.read&&e.write&&"directory"===e.mime)})).length==i?0:-1},this.exec=function(t){var a=n(t),o=a.length,s=e.Deferred().done(function(){var t={changed:{}};i.toast({msg:i.i18n(['"'+r.join('", ')+'"',"complete",i.i18n("cmdempty")])}),e.each(a,function(e,i){t.changed[i.hash]=i}),i.change(t)}).always(function(){var t=i.cwd().hash;i.trigger("selectfiles",{files:e.map(a,function(e){return t===e.phash?e.hash:null})})}),r=[],l=function(e){"number"==typeof e?(r.push(a[e].name),delete a[e].dirs):e&&i.error(e),--o<1&&s[r.length?"resolve":"reject"]()};return e.each(a,function(t,n){var a;return n.write&&"directory"===n.mime?i.isCommandEnabled("rm",n.hash)?(a=setTimeout(function(){i.notify({type:"search",cnt:1,hideCnt:!(o>1)})},i.notifyDelay),void i.request({data:{cmd:"open",target:n.hash},preventDefault:!0,asNotOpen:!0}).done(function(s){var r=[];a&&clearTimeout(a),i.ui.notify.children(".elfinder-notify-search").length&&i.notify({type:"search",cnt:-1,hideCnt:!(o>1)}),s&&s.files&&s.files.length?s.files.length>i.maxTargets?l(["errEmpty",n.name,"errMaxTargets",i.maxTargets]):(i.updateCache(s),e.each(s.files,function(e,t){if(!t.write||t.locked)return l(["errEmpty",n.name,"errRm",t.name,"errPerm"]),r=[],!1;r.push(t.hash)}),r.length&&i.exec("rm",r,{_userAction:!0,addTexts:[i.i18n("folderToEmpty",n.name)]}).fail(function(e){i.trigger("unselectfiles",{files:i.selected()}),l(i.parseError(e)||"")}).done(function(){l(t)})):(i.toast({mode:"warning",msg:i.i18n("filderIsEmpty",n.name)}),l(""))}).fail(function(e){l(i.parseError(e)||"")})):(l(["errCmdNoSupport",'"rm"']),null):(l(["errEmpty",n.name,"errPerm"]),null)}),s}},u.prototype.commands.extract=function(){var t=this,i=t.fm,n=[];this.variants=[],this.disableOnSearch=!0,i.bind("open reload",function(){n=i.option("archivers").extract||[],i.api>2?t.variants=[[{makedir:!0},i.i18n("cmdmkdir")],[{},i.i18n("btnCwd")]]:t.variants=[[{},i.i18n("btnCwd")]],t.change()}),this.getstate=function(t){var a,o,s,r,l=this.files(t),c=l.length;return c&&(s=l,r=!0,e.grep(s,function(t){return r=!(!r||!t.read||-1===e.inArray(t.mime,n))})).length==c?i.searchStatus.state>0?(a=this.fm.cwd().hash,e.each(l,function(e,t){return o=t.phash===a}),o?0:-1):this.fm.cwd().write?0:-1:-1},this.exec=function(t,a){var o,s,r,l=this.files(t),c=e.Deferred(),d=l.length,u=a&&a.makedir?1:0,h=!1,p=!1,f=0,m=i.files(l[0].phash),g=[],v={};e.each(m,function(e,t){v[t.name]=t,g.push(t.name)});var b=function(e){switch(e){case"overwrite_all":h=!0;break;case"omit_all":p=!0}},y=function(t){t.read&&i.file(t.phash).write?-1===e.inArray(t.mime,n)?(s=["errExtract",t.name,"errNoArchive"],i.error(s),c.reject(s)):i.request({data:{cmd:"extract",target:t.hash,makedir:u},notify:{type:"extract",cnt:1},syncOnFail:!0,navigate:{toast:u?{incwd:{msg:i.i18n(["complete",i.i18n("cmdextract")]),action:{cmd:"open",msg:"cmdopen"}},inbuffer:{msg:i.i18n(["complete",i.i18n("cmdextract")]),action:{cmd:"open",msg:"cmdopen"}}}:{inbuffer:{msg:i.i18n(["complete",i.i18n("cmdextract")])}}}}).fail(function(e){"rejected"!=c.state()&&c.reject(e)}).done(function(){}):(s=["errExtract",t.name,"errPerm"],i.error(s),c.reject(s))},w=function(t,n){var a=t[n],s=i.splitFileExtention(a.name)[0],l=e.inArray(s,g)>=0,m=function(){n+1<d?w(t,n+1):c.resolve()};!u&&l&&"directory"!=v[s].mime?i.confirm({title:i.i18n("ntfextract"),text:["errExists",s,"confirmRepl"],accept:{label:"btnYes",callback:function(e){if(b(r=e?"overwrite_all":"overwrite"),h||p){if(h){for(o=n;o<d;o++)y(t[o]);c.resolve()}}else"overwrite"==r&&y(a),n+1<d?w(t,n+1):c.resolve()}},reject:{label:"btnNo",callback:function(e){b(r=e?"omit_all":"omit"),!h&&!p&&n+1<d?w(t,n+1):p&&c.resolve()}},cancel:{label:"btnCancel",callback:function(){c.resolve()}},all:n+1<d}):u?(y(a),m()):0==f?i.confirm({title:i.i18n("cmdextract"),text:[i.i18n("cmdextract")+' "'+a.name+'"',"confirmRepl"],accept:{label:"btnYes",callback:function(e){e&&(f=1),y(a),m()}},reject:{label:"btnNo",callback:function(e){e&&(f=-1),m()}},cancel:{label:"btnCancel",callback:function(){c.resolve()}},all:n+1<d}):(f>0&&y(a),m())};return this.enabled()&&d&&n.length?(d>0&&w(l,0),c):c.reject()}},(u.prototype.commands.forward=function(){this.alwaysEnabled=!0,this.updateOnSelect=!0,this.shortcuts=[{pattern:"ctrl+right"}],this.getstate=function(){return this.fm.history.canForward()?0:-1},this.exec=function(){return this.fm.history.forward()}}).prototype={forceLoad:!0},u.prototype.commands.fullscreen=function(){var t=this,i=this.fm,n=function(e,n){var a;e.preventDefault(),e.stopPropagation(),n&&n.fullscreen&&(a="on"===n.fullscreen,t.update(void 0,a),t.title=i.i18n(a?"reinstate":"cmdfullscreen"))};this.alwaysEnabled=!0,this.updateOnSelect=!1,this.syncTitleOnChange=!0,this.value=!1,this.options={ui:"fullscreenbutton"},this.getstate=function(){return 0},this.exec=function(){var n=i.getUI().get(0),a=n===i.toggleFullscreen(n);return t.title=i.i18n(a?"reinstate":"cmdfullscreen"),t.update(void 0,a),e.Deferred().resolve()},i.bind("init",function(){i.getUI().off("resize."+i.namespace,n).on("resize."+i.namespace,n)})},(u.prototype.commands.getfile=function(){var t=this,i=this.fm;this.alwaysEnabled=!0,this.callback=i.options.getFileCallback,this._disabled="function"==typeof this.callback,this.getstate=function(i){var n,a,o,s=this.files(i),r=s.length;return this.callback&&r&&(n=s,a=t.options,o=!0,n=e.grep(n,function(e){return o=!(!o||"directory"==e.mime&&!a.folders||!e.read)}),a.multiple||1==n.length?n:[]).length==r?0:-1},this.exec=function(i){var n,a,o,s=this.fm,r=this.options,l=this.files(i),c=l.length,d=s.option("url"),u=s.option("tmbUrl"),h=e.Deferred().done(function(e){var i,n=function(){"close"==r.oncomplete?s.hide():"destroy"==r.oncomplete&&s.destroy()},a=function(e){"close"==r.onerror?s.hide():"destroy"==r.onerror?s.destroy():e&&s.error(e)};s.trigger("getfile",{files:e});try{i=t.callback(e,s)}catch(e){return void a(["Error in `getFileCallback`.",e.message])}"object"==typeof i&&"function"==typeof i.done?i.done(n).fail(a):n()}),p=function(t){return r.onlyURL?r.multiple?e.map(l,function(e){return e.url}):l[0].url:r.multiple?l:l[0]},f=[];for(n=0;n<c;n++){if("directory"==(a=l[n]).mime&&!r.folders)return h.reject();a.baseUrl=d,"1"==a.url?f.push(s.request({data:{cmd:"url",target:a.hash},notify:{type:"url",cnt:1,hideCnt:!0},preventDefault:!0}).done(function(e){e.url&&(s.file(this.hash).url=this.url=e.url)}.bind(a))):a.url=s.url(a.hash),r.onlyURL||(r.getPath&&(a.path=s.path(a.hash),""===a.path&&a.phash&&function(){var t=e.Deferred();f.push(t),s.path(a.hash,!1,{}).done(function(e){a.path=e}).fail(function(){a.path=""}).always(function(){t.resolve()})}()),a.tmb&&1!=a.tmb&&(a.tmb=u+a.tmb),a.width||a.height||(a.dim?(o=a.dim.split("x"),a.width=o[0],a.height=o[1]):r.getImgSize&&-1!==a.mime.indexOf("image")&&f.push(s.request({data:{cmd:"dim",target:a.hash},notify:{type:"dim",cnt:1,hideCnt:!0},preventDefault:!0}).done(function(e){if(e.dim){var t=e.dim.split("x"),i=s.file(this.hash);i.width=this.width=t[0],i.height=this.height=t[1]}}.bind(a)))))}return f.length?(e.when.apply(null,f).always(function(){h.resolve(p())}),h):h.resolve(p())}}).prototype={forceLoad:!0},(u.prototype.commands.help=function(){var t,i,n,a,o,s,r=this.fm,l=this,c=/\{author\}/,d=/\{work\}/,u="replace",h='<li class="'+r.res("class","tabstab")+' elfinder-help-tab-{id}"><a href="#'+r.namespace+'-help-{id}" class="ui-tabs-anchor">{title}</a></li>',p=['<div class="ui-tabs ui-widget ui-widget-content ui-corner-all elfinder-help">','<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-top">'],f=e("base").length?r.escape(document.location.href.replace(/#.*$/,"")):"",m=r.res("class","tabsactive"),g=!1,v=!1,b="";this.alwaysEnabled=!0,this.updateOnSelect=!1,this.state=-1,this.shortcuts=[{pattern:"f1",description:this.title}],r.bind("load",function(){var y,w,x,k,C,_,T,D=l.options.view||["about","shortcuts","help","integrations","debug"];-1!==(y=e.inArray("preference",D))&&D.splice(y,1),e.fn.tabs||-1!==(y=e.inArray(D,"debug"))&&D.splice(y,1),e.each(D,function(e,t){p.push(h[u](/\{id\}/g,t)[u](/\{title\}/,r.i18n(t)))}),p.push("</ul>"),-1!==e.inArray("about",D)&&(p.push('<div id="'+r.namespace+'-help-about" class="ui-tabs-panel ui-widget-content ui-corner-bottom">'),p.push('<div class="ui-priority-primary">'+r.i18n("webfm")+"</div>"),p.push('<div class="ui-priority-secondary"> Version File Manager 1.0 </div>'),p.push("</div>")),-1!==e.inArray("shortcuts",D)&&(T=r.shortcuts(),p.push('<div id="'+r.namespace+'-help-shortcuts" class="ui-tabs-panel ui-widget-content ui-corner-bottom">'),T.length?(p.push('<div class="ui-widget-content elfinder-help-shortcuts">'),e.each(T,function(e,t){p.push('<div class="elfinder-help-shortcut"><div class="elfinder-help-shortcut-pattern">{pattern}</div> {descrip}</div>'.replace(/\{pattern\}/,t[0]).replace(/\{descrip\}/,t[1]))}),p.push("</div>")):p.push('<div class="elfinder-help-disabled">'+r.i18n("shortcutsof")+"</div>"),p.push("</div>")),-1!==e.inArray("help",D)&&(w=r.i18nBaseUrl+"help/%s.html.js",p.push('<div id="'+r.namespace+'-help-help" class="ui-tabs-panel ui-widget-content ui-corner-bottom">'),p.push('<a href="javascrip:;" class="elfinder-dont-panic"><span>DON\'T PANIC</span></a>'),p.push("</div>")),-1!==e.inArray("integrations",D)&&(g=!0,p.push('<div id="'+r.namespace+'-help-integrations" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div>')),-1!==e.inArray("debug",D)&&(v=!0,p.push('<div id="'+r.namespace+'-help-debug" class="ui-tabs-panel ui-widget-content ui-corner-bottom">'),p.push('<div class="ui-widget-content elfinder-help-debug"><ul></ul></div>'),p.push("</div>")),p.push("</div>"),(b=e(p.join(""))).find(".ui-tabs-nav li").on("mouseenter mouseleave",function(t){e(this).toggleClass("ui-state-hover","mouseenter"===t.type)}).on("focus blur","a",function(t){e(t.delegateTarget).toggleClass("ui-state-focus","focusin"===t.type)}).children().on("click",function(t){var i=e(this);t.preventDefault(),t.stopPropagation(),i.parent().addClass(m).siblings().removeClass(m),b.children(".ui-tabs-panel").hide().filter(i.attr("href")).show()}).filter(":first").trigger("click"),g&&(i=b.find(".elfinder-help-tab-integrations").hide(),n=b.find("#"+r.namespace+"-help-integrations").hide().append(e('<div class="elfinder-help-integrations-desc"></div>').html(r.i18n("integrationWith"))),r.bind("helpIntegration",function(t){var a,o,s,l,c=n.children("ul:first");t.data&&(e.isPlainObject(t.data)?((a=Object.assign({link:"",title:"",banner:""},t.data)).title||a.link)&&(a.title||(a.title=a.link),o=a.link?e("<a></a>").attr("href",a.link).attr("target","_blank").text(a.title):e("<span></span>").text(a.title),a.banner&&(o=e("<span></span>").append(e("<img/>").attr(a.banner),o))):(o=e(t.data)).filter("a").each(function(){var t=e(this);t.attr("target")||t.attr("target","_blank")}),o&&(i.show(),c.length||(c=e('<ul class="elfinder-help-integrations"></ul>').appendTo(n)),a&&a.cmd?(l="elfinder-help-integration-"+a.cmd,(s=c.find("ul."+l)).length||(s=e('<ul class="'+l+'"></ul>'),c.append(e("<li></li>").append(e("<span></span>").html(r.i18n("cmd"+a.cmd))).append(s))),o=s.append(e("<li></li>").append(o))):c.append(e("<li></li>").append(o))))}).bind("themechange",function(){b.find("div.elfinder-help-term-theme").replaceWith(r.theme&&r.theme.author?'<div class="elfinder-help-team"><div>{author}</div>{work}</div>'[u]("elfinder-help-team","elfinder-help-team elfinder-help-term-theme")[u](c,r.i18n(r.theme.author)+(r.theme.email?" &lt;"+r.theme.email+"&gt;":""))[u](d,r.i18n("theme")+" ("+r.i18n(r.theme.name)+")"):'<div class="elfinder-help-team elfinder-help-term-theme" style="display:none"></div>')})),v&&(a=b.find(".elfinder-help-tab-debug").hide(),o=b.find("#"+r.namespace+"-help-debug").children("div:first"),s=o.children("ul:first").on("click",function(e){e.preventDefault(),e.stopPropagation()}),l.debug={},r.bind("backenddebug",function(i){var n,a,c,d,u,h,p,m;v&&i.data&&i.data.debug&&(l.debug={options:i.data.options,debug:Object.assign({cmd:r.currentReqCmd},i.data.debug)},l.dialog&&(p=function(t,i){return e.each(i,function(i,n){t.append(e("<dt></dt>").text(i)),void 0===n?t.append(e("<dd></dd>").append(e("<span></span>").text("undfined"))):"object"!=typeof n||n?"object"==typeof n&&(e.isPlainObject(n)||n.length)?t.append(e("<dd></dd>").append(p(e("<dl></dl>"),n))):t.append(e("<dd></dd>").append(e("<span></span>").text(n&&"object"==typeof n?"[]":n||'""'))):t.append(e("<dd></dd>").append(e("<span></span>").text("null")))}),t},m=s.children("li").length,(l.debug.options||l.debug.debug)&&(m>=5&&(u=s.children("li:last"),(h=o.children("div:last")).is(":hidden")?(u.remove(),h.remove()):(u.prev().remove(),h.prev().remove())),c=r.namespace+"-help-debug-"+ +new Date,n=e("<li></li>").html('<a href="'+f+"#"+c+'">'+l.debug.debug.cmd+"</a>").prependTo(s),a=e('<div id="'+c+'"></div>').data("debug",l.debug),n.on("click.debugrender",function(){var t=a.data("debug");a.removeData("debug"),t&&(a.hide(),t.debug&&(d=e("<fieldset>").append(e("<legend></legend>").text("debug"),p(e("<dl></dl>"),t.debug)),a.append(d)),t.options&&(d=e("<fieldset>").append(e("<legend></legend>").text("options"),p(e("<dl></dl>"),t.options)),a.append(d)),a.show()),n.off("click.debugrender")}),s.after(a),t&&o.tabs("refresh"))))})),b.find("#"+r.namespace+"-help-about").find(".apiver").text(r.api),l.dialog=l.fmDialog(b,{title:l.title,width:530,maxWidth:"window",maxHeight:"window",autoOpen:!1,destroyOnClose:!1,close:function(){v&&(a.hide(),o.tabs("destroy")),t=!1}}).on("click",function(e){e.stopPropagation()}).css({overflow:"hidden"}),x=l.dialog.children(".ui-tabs"),k=x.children(".ui-tabs-nav:first"),C=x.children(".ui-tabs-panel"),_=l.dialog.outerHeight(!0)-l.dialog.height(),l.dialog.closest(".ui-dialog").on("resize",function(){C.height(l.dialog.height()-_-k.outerHeight(!0)-20)}),w&&l.dialog.one("initContents",function(){e.ajax({url:l.options.helpSource?l.options.helpSource:w.replace("%s",r.lang),dataType:"html"}).done(function(t){e("#"+r.namespace+"-help-help").html(t)}).fail(function(){e.ajax({url:w.replace("%s","en"),dataType:"html"}).done(function(t){e("#"+r.namespace+"-help-help").html(t)})})}),l.state=0,r.trigger("helpBuilded",l.dialog)}).one("open",function(){var e=!1;r.one("backenddebug",function(){e=!0}).one("opendone",function(){requestAnimationFrame(function(){!e&&v&&(v=!1,a.hide(),o.hide(),s.hide())})})}),this.getstate=function(){return 0},this.exec=function(i,n){var r=n?n.tab:void 0;return v&&(o.tabs(),s.find("a:first").trigger("click"),a.show(),t=!0),this.dialog.trigger("initContents").elfinderdialog("open").find((r?".elfinder-help-tab-"+r:".ui-tabs-nav li")+" a:first").trigger("click"),e.Deferred().resolve()}}).prototype={forceLoad:!0},u.prototype.commands.hidden=function(){this.hidden=!0,this.updateOnSelect=!1,this.getstate=function(){return-1}},u.prototype.commands.hide=function(){var t,i,n,a,o=this,s={};this.syncTitleOnChange=!0,this.shortcuts=[{pattern:"ctrl+shift+dot",description:this.fm.i18n("toggleHidden")}],this.init=function(){var e=this.fm;t=e.storage("hide")||{items:{}},i=Object.keys(t.items).length,this.title=e.i18n(t.show?"hideHidden":"showHidden"),o.update(void 0,o.title)},this.fm.bind("select contextmenucreate closecontextmenu",function(e,s){var r=(e.data?e.data.selected||e.data.targets:null)||s.selected();"select"===e.type&&e.data?a=e.data.origin:"contextmenucreate"===e.type&&(n=e.data.type),!r.length||("contextmenucreate"!==e.type&&"navbar"!==a||"cwd"===n)&&r[0]===s.cwd().hash?o.title=s.i18n(t.show?"hideHidden":"showHidden"):o.title=s.i18n("cmdhide"),"closecontextmenu"!==e.type?o.update("cwd"===n?i?0:-1:void 0,o.title):(n="",requestAnimationFrame(function(){o.update(void 0,o.title)}))}),this.getstate=function(e){return this.fm.cookieEnabled&&"cwd"!==n&&(e||this.fm.selected()).length||i?0:-1},this.exec=function(n,r){var l,c,d=this.fm,u=e.Deferred().done(function(){d.trigger("hide",{items:p,opts:r})}).fail(function(e){d.error(e)}),h=r||{},p=h.targets?h.targets:n||d.selected(),f=[];if(t=d.storage("hide")||{},e.isPlainObject(t)||(t={}),e.isPlainObject(t.items)||(t.items={}),("shortcut"===r._currentType||!p.length||"navbar"!==r._currentType&&"navbar"!==a&&p[0]===d.cwd().hash)&&(t.show?h.hide=!0:Object.keys(t.items).length&&(h.show=!0)),h.reset&&(h.show=!0,i=0),h.show||h.hide){if(h.show?t.show=!0:delete t.show,h.show)return d.storage("hide",h.reset?null:t),o.title=d.i18n("hideHidden"),o.update(h.reset?-1:void 0,o.title),e.each(t.items,function(e){var t=d.file(e,!0);t&&(d.searchStatus.state||!t.phash||d.file(t.phash))&&f.push(t)}),f.length&&(d.updateCache({added:f}),d.add({added:f})),h.reset&&(t={items:{}}),u.resolve();p=Object.keys(t.items)}return p.length&&(e.each(p,function(e,i){var n;t.items[i]||((n=d.file(i))&&(s[i]=n.i18||n.name),t.items[i]=s[i]?s[i]:i)}),i=Object.keys(t.items).length,l=this.files(p),d.storage("hide",t),d.remove({removed:p}),t.show&&this.exec(void 0,{hide:!0}),h.hide||((c={}).undo={cmd:"hide",callback:function(){var t=d.storage("hide");t&&(e.each(p,function(e,i){delete t.items[i]}),i=Object.keys(t.items).length,d.storage("hide",t),d.trigger("hide",{items:p,opts:{}}),o.update(i?0:-1)),d.updateCache({added:l}),d.add({added:l})}},c.redo={cmd:"hide",callback:function(){return d.exec("hide",void 0,{targets:p})}})),"rejected"==u.state()?u:u.resolve(c)}},(u.prototype.commands.home=function(){this.title="Home",this.alwaysEnabled=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:"ctrl+home ctrl+shift+up",description:"Home"}],this.getstate=function(){var e=this.fm.root(),t=this.fm.cwd().hash;return e&&t&&e!=t?0:-1},this.exec=function(){return this.fm.exec("open",this.fm.root())}}).prototype={forceLoad:!0},(u.prototype.commands.info=function(){var t=this.fm,i="elfinder-spinner",n={calc:t.i18n("calc"),size:t.i18n("size"),unknown:t.i18n("unknown"),path:t.i18n("path"),aliasfor:t.i18n("aliasfor"),modify:t.i18n("modify"),perms:t.i18n("perms"),locked:t.i18n("locked"),dim:t.i18n("dim"),kind:t.i18n("kind"),files:t.i18n("files"),folders:t.i18n("folders"),roots:t.i18n("volumeRoots"),items:t.i18n("items"),yes:t.i18n("yes"),no:t.i18n("no"),link:t.i18n("link"),owner:t.i18n("owner"),group:t.i18n("group"),perm:t.i18n("perm"),getlink:t.i18n("getLink")},a=function(e,t){return t?e.replace(/\u200B/g,""):e.replace(/(\/|\\)/g,"$1â")};this.items=["size","aliasfor","path","link","dim","modify","perms","locked","owner","group","perm"],this.options.custom&&Object.keys(this.options.custom).length&&e.each(this.options.custom,function(e,t){t.label&&this.items.push(t.label)}),this.tpl={main:'<div class="ui-helper-clearfix elfinder-info-title {dirclass}"><span class="elfinder-cwd-icon {class} ui-corner-all"{style}></span>{title}</div><table class="elfinder-info-tb">{content}</table>',itemTitle:'<strong>{name}</strong><span class="elfinder-info-kind">{kind}</span>',groupTitle:"<strong>{items}: {num}</strong>",row:'<tr><td class="elfinder-info-label">{label} : </td><td class="{class}">{value}</td></tr>',spinner:'<span>{text}</span> <span class="'+i+" "+i+'-{name}"></span>'},this.alwaysEnabled=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:"ctrl+i"}],this.init=function(){e.each(n,function(e,i){n[e]=t.i18n(i)})},this.getstate=function(){return 0},this.exec=function(t){var o=this.files(t);o.length||(o=this.files([this.fm.cwd().hash]));var s,r,l,c,d,u,h,p,f,m=this.fm,g=this.options,v=this.tpl,b=v.row,y=o.length,w=[],x=v.main,k="{label}",C="{value}",_=[],T=null,D={title:m.i18n("selectionInfo"),width:"auto",close:function(){e(this).elfinderdialog("destroy"),T&&"pending"===T.state()&&T.reject(),e.grep(_,function(e){e&&"pending"===e.state()&&e.reject()})}},z=[],A=function(e,t,n){I.find("."+i+"-"+t).parent().html(e).addClass(n||"")},S=m.namespace+"-info-"+e.map(o,function(e){return e.hash}).join("-"),I=m.getUI().find("#"+S),M=[],E="",O="elfinder-font-mono elfinder-info-hash",j=[],P=m.ui.notify;if(P.is(":hidden")&&P.children(".elfinder-notify").length&&P.elfinderdialog("open").height("auto"),!y)return e.Deferred().reject();if(I.length)return I.elfinderdialog("toTop"),e.Deferred().resolve();if(p=m.storage("infohides")||m.arrayFlip(g.hideItems,!0),1===y){if((l=o[0]).icon&&(E=" "+m.getIconStyle(l)),x=x.replace("{dirclass}",l.csscls?m.escape(l.csscls):"").replace("{class}",m.mime2class(l.mime)).replace("{style}",E),c=v.itemTitle.replace("{name}",m.escape(l.i18||l.name)).replace("{kind}",'<span title="'+m.escape(l.mime)+'">'+m.mime2kind(l)+"</span>"),r=m.tmb(l),l.read?"directory"!=l.mime||l.alias?s=m.formatSize(l.size):(s=v.spinner.replace("{text}",n.calc).replace("{name}","size"),z.push(l.hash)):s=n.unknown,!p.size&&w.push(b.replace(k,n.size).replace(C,s)),!p.aleasfor&&l.alias&&w.push(b.replace(k,n.aliasfor).replace(C,l.alias)),p.path||((h=m.path(l.hash,!0))?w.push(b.replace(k,n.path).replace(C,a(m.escape(h))).replace("{class}","elfinder-info-path")):(w.push(b.replace(k,n.path).replace(C,v.spinner.replace("{text}",n.calc).replace("{name}","path")).replace("{class}","elfinder-info-path")),_.push(m.path(l.hash,!0,{notify:null}).fail(function(){A(n.unknown,"path")}).done(function(e){A(a(e),"path")})))),!p.link&&l.read){var F,H=m.escape(l.name);if("1"==l.url)w.push(b.replace(k,n.link).replace(C,'<button class="elfinder-info-button '+i+'-url">'+n.getlink+"</button>"));else{if(l.url)F=l.url;else if("directory"===l.mime)if(g.nullUrlDirLinkSelf&&null===l.url){var N=window.location;F=N.pathname+N.search+"#elf_"+l.hash}else""!==l.url&&m.option("url",!m.isRoot(l)&&l.phash||l.hash)&&(F=m.url(l.hash));else F=m.url(l.hash);F&&w.push(b.replace(k,n.link).replace(C,'<a href="'+F+'" target="_blank">'+H+"</a>"))}}p.dim||(l.dim?w.push(b.replace(k,n.dim).replace(C,l.dim)):-1!==l.mime.indexOf("image")&&(l.width&&l.height?w.push(b.replace(k,n.dim).replace(C,l.width+"x"+l.height)):l.size&&"0"!==l.size&&(w.push(b.replace(k,n.dim).replace(C,v.spinner.replace("{text}",n.calc).replace("{name}","dim"))),_.push(m.request({data:{cmd:"dim",target:l.hash},preventDefault:!0}).fail(function(){A(n.unknown,"dim")}).done(function(e){if(A(e.dim||n.unknown,"dim"),e.dim){var t=e.dim.split("x"),i=m.file(l.hash);i.width=t[0],i.height=t[1]}}))))),!p.modify&&w.push(b.replace(k,n.modify).replace(C,m.formatDate(l))),!p.perms&&w.push(b.replace(k,n.perms).replace(C,m.formatPermissions(l))),!p.locked&&w.push(b.replace(k,n.locked).replace(C,l.locked?n.yes:n.no)),!p.owner&&l.owner&&w.push(b.replace(k,n.owner).replace(C,l.owner)),!p.group&&l.group&&w.push(b.replace(k,n.group).replace(C,l.group)),!p.perm&&l.perm&&w.push(b.replace(k,n.perm).replace(C,m.formatFileMode(l.perm))),window.ArrayBuffer&&(m.options.cdns.sparkmd5||m.options.cdns.jssha)&&"directory"!==l.mime&&l.size>0&&(!g.showHashMaxsize||l.size<=g.showHashMaxsize)&&(j=[],e.each(m.storage("hashchekcer")||g.showHashAlgorisms,function(e,t){l[t]?w.push(b.replace(k,m.i18n(t)).replace(C,l[t]).replace("{class}",O)):(w.push(b.replace(k,m.i18n(t)).replace(C,v.spinner.replace("{text}",n.calc).replace("{name}",t))),j.push(t))}),j.length&&(f=e('<div class="elfinder-quicklook-info-progress"></div>'),_.push(m.getContentsHashes(l.hash,j,g.showHashOpts,{progressBar:f}).progress(function(t){e.each(j,function(e,i){t[i]&&A(t[i],i,O)})}).always(function(){e.each(j,function(e,t){A(n.unknown,t)})})))),g.custom&&e.each(g.custom,function(t,i){p[i.label]||i.mimes&&!e.grep(i.mimes,function(e){return l.mime===e||0===l.mime.indexOf(e+"/")}).length||i.hashRegex&&!l.hash.match(i.hashRegex)||(w.push(b.replace(k,m.i18n(i.label)).replace(C,i.tpl.replace("{id}",S))),i.action&&"function"==typeof i.action&&M.push(i.action))})}else x=x.replace("{class}","elfinder-cwd-icon-group"),c=v.groupTitle.replace("{items}",n.items).replace("{num}",y),(d=e.grep(o,function(e){return"directory"==e.mime}).length)?(d-=u=e.grep(o,function(e){return!("directory"!==e.mime||e.phash&&!e.isroot)}).length,w.push(b.replace(k,n.kind).replace(C,u===y||d===y?n[u?"roots":"folders"]:e.map({roots:u,folders:d,files:y-u-d},function(e,t){return e?n[t]+" "+e:null}).join(", "))),!p.size&&w.push(b.replace(k,n.size).replace(C,v.spinner.replace("{text}",n.calc).replace("{name}","size"))),z=e.map(o,function(e){return e.hash})):(s=0,e.each(o,function(e,t){var i=parseInt(t.size);i>=0&&s>=0?s+=i:s="unknown"}),w.push(b.replace(k,n.kind).replace(C,n.files)),!p.size&&w.push(b.replace(k,n.size).replace(C,m.formatSize(s))));return x=x.replace("{title}",c).replace("{content}",w.join("").replace(/{class}/g,"")),(I=this.fmDialog(x,D)).attr("id",S).one("mousedown",".elfinder-info-path",function(){e(this).html(a(e(this).html(),!0))}),j.length&&f.appendTo(I.find("."+i+"-"+j[0]).parent()),m.UA.Mobile&&e.fn.tooltip&&I.children(".ui-dialog-content .elfinder-info-title").tooltip({classes:{"ui-tooltip":"elfinder-ui-tooltip ui-widget-shadow"},tooltipClass:"elfinder-ui-tooltip ui-widget-shadow",track:!0}),l&&"1"==l.url&&I.on("click","."+i+"-url",function(){e(this).parent().html(v.spinner.replace("{text}",m.i18n("ntfurl")).replace("{name}","url")),m.request({data:{cmd:"url",target:l.hash},preventDefault:!0}).fail(function(){A(H,"url")}).done(function(e){e.url?(A('<a href="'+e.url+'" target="_blank">'+H+"</a>"||H,"url"),m.file(l.hash).url=e.url):A(H,"url")})}),r&&e("<img/>").on("load",function(){I.find(".elfinder-cwd-icon").addClass(r.className).css("background-image","url('"+r.url+"')")}).attr("src",r.url),z.length&&(T=m.getSize(z).done(function(e){A(e.formated,"size")}).fail(function(){A(n.unknown,"size")})),M.length&&e.each(M,function(e,t){try{t(l,m,I)}catch(e){m.debug("error",e)}}),e.Deferred().resolve()}}).prototype={forceLoad:!0},u.prototype.commands.mkdir=function(){var t,i=this.fm,n=this;this.value="",this.disableOnSearch=!0,this.updateOnSelect=!1,this.syncTitleOnChange=!0,this.mime="directory",this.prefix="untitled folder",this.exec=function(a,o){var s;return a&&a.length&&o&&o._currentType&&"navbar"===o._currentType?(this.origin=o._currentType,this.data={target:a[0]}):(s=i.cwd().hash===a[0],this.origin=t&&!s?t:"cwd",delete this.data),a||this.options.intoNewFolderToolbtn||i.getUI("cwd").trigger("unselectall"),this.move=this.value===i.i18n("cmdmkdirin"),e.proxy(i.res("mixin","make"),n)()},this.shortcuts=[{pattern:"ctrl+shift+n"}],this.init=function(){this.options.intoNewFolderToolbtn&&(this.syncTitleOnChange=!0)},i.bind("select contextmenucreate closecontextmenu",function(e){var a=(e.data?e.data.selected||e.data.targets:null)||i.selected();n.className="mkdir",t=e.data&&a.length&&(e.data.origin||e.data.type)||"",n.options.intoNewFolderToolbtn||""!==t||(t="cwd"),a.length&&"navbar"!==t&&"cwd"!==t&&i.cwd().hash!==a[0]?(n.title=i.i18n("cmdmkdirin"),n.className+=" elfinder-button-icon-mkdirin"):n.title=i.i18n("cmdmkdir"),"closecontextmenu"!==e.type?n.update(void 0,n.title):requestAnimationFrame(function(){n.update(void 0,n.title)})}),this.getstate=function(n){var a,o,s=i.cwd(),r="navbar"===t||n&&n[0]!==s.hash?this.files(n||i.selected()):[],l=r.length;return"navbar"===t?l&&r[0].write&&r[0].read?0:-1:!s.write||l&&(a=r,o=!0,e.grep(a,function(e){return o=!(!o||!e.read||e.locked)})).length!=l?-1:0}},u.prototype.commands.mkfile=function(){var t=this;this.disableOnSearch=!0,this.updateOnSelect=!1,this.mime="text/plain",this.prefix="untitled file.txt",this.variants=[],this.getTypeName=function(e,i){var n,a=t.fm;return n=(n=a.messages["kind"+a.kinds[e]])?a.i18n(["extentiontype",i.toUpperCase(),n]):a.i18n(["extentionfile",i.toUpperCase()])},this.fm.bind("open reload canMakeEmptyFile",function(){var i=t.fm,n=i.getCommand("edit").getMkfileHides();t.variants=[],i.mimesCanMakeEmpty&&e.each(i.mimesCanMakeEmpty,function(e,a){a&&!n[e]&&i.uploadMimeCheck(e)&&t.variants.push([e,t.getTypeName(e,a)])}),t.change()}),this.getstate=function(){return this.fm.cwd().write?0:-1},this.exec=function(i,n){var a,o,s=t.fm;if(a=s.mimesCanMakeEmpty[n]){if(s.uploadMimeCheck(n))return this.mime=n,this.prefix=s.i18n(["untitled file",a]),e.proxy(s.res("mixin","make"),t)();o=["errMkfile",t.getTypeName(n,a)]}return e.Deferred().reject(o)}},u.prototype.commands.netmount=function(){var t,i=this,n=!1;this.alwaysEnabled=!0,this.updateOnSelect=!1,this.drivers=[],this.handlers={load:function(){var t=i.fm;t.cookieEnabled&&t.one("open",function(){i.drivers=t.netDrivers,i.drivers.length&&e.each(i.drivers,function(){var e=i.options[this];e&&(n=!0,e.integrateInfo&&t.trigger("helpIntegration",Object.assign({cmd:"netmount"},e.integrateInfo)))})})}},this.getstate=function(){return n?0:-1},this.exec=function(){var n,a,o,s,r,l,c,d,u=i.fm,h=e.Deferred(),p=i.options;return i.dialog?i.dialog.elfinderdialog("open"):i.dialog=(o=function(){s.protocol.trigger("change","winfocus")},s={protocol:e("<select></select>").on("change",function(e,i){var a=this.value;t.find(".elfinder-netmount-tr").hide(),t.find(".elfinder-netmount-tr-"+a).show(),n&&n.children(".ui-dialog-buttonpane:first").find("button").show(),"function"==typeof p[a].select&&p[a].select(u,e,i)}).addClass("ui-corner-all")},r={title:u.i18n("netMountDialogTitle"),resizable:!0,modal:!0,destroyOnClose:!1,open:function(){e(window).on("focus."+u.namespace,o),s.protocol.trigger("change")},close:function(){"pending"==h.state()&&h.reject(),e(window).off("focus."+u.namespace,o)},buttons:{}},l=function(){var n,a=s.protocol.val(),o={cmd:"netmount",protocol:a},r=p[a];if(e.each(t.find("input.elfinder-netmount-inputs-"+a),function(t,i){var n,a;(a=e(i)).is(":radio,:checkbox")?a.is(":checked")&&(n=e.trim(a.val())):n=e.trim(a.val()),n&&(o[i.name]=n)}),!o.host)return u.trigger("error",{error:"errNetMountHostReq",opts:{modal:!0}});o.mnt2res&&(n=!0),u.request({data:o,notify:{type:"netmount",cnt:1,hideCnt:!0}}).done(function(e){var t;e.added&&e.added.length&&(n&&s.protocol.trigger("change","reset"),e.added[0].phash&&(t=u.file(e.added[0].phash))&&(t.dirs||(t.dirs=1,u.change({changed:[t]}))),u.one("netmountdone",function(){u.exec("open",e.added[0].hash)})),h.resolve()}).fail(function(e){r.fail&&"function"==typeof r.fail&&r.fail(u,u.parseError(e)),h.reject(e)}),i.dialog.elfinderdialog("close")},c=e('<form autocomplete="off"></form>').on("keydown","input",function(t){var i,n=!0;t.keyCode===e.ui.keyCode.ENTER&&(e.each(c.find("input:visible:not(.elfinder-input-optional)"),function(){if(""===e(this).val())return n=!1,i=e(this),!1}),n?l():i.trigger("focus"))}),d=e("<div></div>"),t=e('<table class="elfinder-info-tb elfinder-netmount-tb"></table>').append(e("<tr></tr>").append(e("<td>"+u.i18n("protocol")+"</td>")).append(e("<td></td>").append(s.protocol))),e.each(i.drivers,function(i,n){p[n]&&(s.protocol.append('<option value="'+n+'">'+u.i18n(p[n].name||n)+"</option>"),e.each(p[n].inputs,function(i,a){a.attr("name",i),"hidden"!=a.attr("type")?(a.addClass("ui-corner-all elfinder-netmount-inputs-"+n),t.append(e("<tr></tr>").addClass("elfinder-netmount-tr elfinder-netmount-tr-"+n).append(e("<td>"+u.i18n(i)+"</td>")).append(e("<td></td>").append(a)))):(a.addClass("elfinder-netmount-inputs-"+n),d.append(a))}),p[n].protocol=s.protocol)}),t.append(d),t.find(".elfinder-netmount-tr").hide(),t.find(".elfinder-netmount-tr-"+i.drivers[0]).show(),r.buttons[u.i18n("btnMount")]=l,r.buttons[u.i18n("btnCancel")]=function(){i.dialog.elfinderdialog("close")},t.find("select,input").addClass("elfinder-tabstop"),a=i.fmDialog(c.append(t),r).ready(function(){s.protocol.trigger("change"),a.elfinderdialog("posInit")}),n=a.closest(".ui-dialog"),a),h.promise()},i.fm.bind("netmount",function(e){var n=e.data||null,a=i.options,o=function(){a[n.protocol]&&"function"==typeof a[n.protocol].done&&(a[n.protocol].done(i.fm,n),t.find("select,input").addClass("elfinder-tabstop"),i.dialog.elfinderdialog("tabstopsInit"))};n&&n.protocol&&(n.mode&&"redirect"===n.mode?i.fm.request({data:{cmd:"netmount",protocol:n.protocol,host:n.host,user:"init",pass:"return",options:n.options},preventDefault:!0}).done(function(e){n=JSON.parse(e.body),o()}):o())})},u.prototype.commands.netunmount=function(){this.alwaysEnabled=!0,this.updateOnSelect=!1,this.drivers=[],this.handlers={load:function(){this.drivers=this.fm.netDrivers}},this.getstate=function(e){var t,i=this.fm;return e&&this.drivers.length&&!this._disabled&&(t=i.file(e[0]))&&t.netkey?0:-1},this.exec=function(t){var i=this,n=this.fm,a=e.Deferred().fail(function(e){e&&n.error(e)}),o=n.file(t[0]);return this._disabled?a.reject():("pending"==a.state()&&n.confirm({title:i.title,text:n.i18n("confirmUnmount",o.name),accept:{label:"btnUnmount",callback:function(){var t,s=o.hash,r=function(t){var i,a=[];return n.leafRoots&&(i=[],e.each(n.leafRoots,function(a,o){var s,r=n.parents(a);-1!==(s=e.inArray(t,r))&&(s=r.length-s,e.each(o,function(e,t){i.push({i:s,hash:t})}))}),i.length&&(i.sort(function(e,t){return e.i<t.i}),e.each(i,function(e,t){a.push(t.hash)}))),a}(s),l=[],c=[],d=function(){e.when(l).done(function(){n.request({data:{cmd:"netmount",protocol:"netunmount",host:o.netkey,user:s,pass:"dum"},notify:{type:"netunmount",cnt:1,hideCnt:!0},preventFail:!0}).fail(function(e){a.reject(e)}).done(function(e){o.volumeid&&delete n.volumeExpires[o.volumeid],a.resolve()})}).fail(function(e){c.length&&n.remove({removed:c}),a.reject(e)})};r.length?n.confirm({title:i.title,text:(t=["unmountChildren"],e.each(r,function(e,i){t.push([n.file(i).name])}),t),accept:{label:"btnUnmount",callback:function(){e.each(r,function(e,t){var i=n.file(t);i.netkey&&l.push(n.request({data:{cmd:"netmount",protocol:"netunmount",host:i.netkey,user:i.hash,pass:"dum"},notify:{type:"netunmount",cnt:1,hideCnt:!0},preventDefault:!0}).done(function(e){e.removed&&(i.volumeid&&delete n.volumeExpires[i.volumeid],c=c.concat(e.removed))}))}),d()}},cancel:{label:"btnCancel",callback:function(){a.reject()}}}):(l=null,d())}},cancel:{label:"btnCancel",callback:function(){a.reject()}}}),a)}},(u.prototype.commands.open=function(){var t=this.fm,i=this;this.alwaysEnabled=!0,this.noChangeDirOnRemovedCwd=!0,this._handlers={dblclick:function(e){var n=e.data&&e.data.file?[e.data.file]:void 0;0===i.getstate(n)&&(e.preventDefault(),t.exec("open",n))},"select enable disable reload":function(e){this.update("disable"==e.type?-1:void 0)}},this.shortcuts=[{pattern:"ctrl+down numpad_enter"+("mac"!=t.OS&&" enter")}],this.getstate=function(i){var n=this.files(i),a=n.length;return 1==a?n[0].read?0:-1:a&&!t.UA.Mobile&&e.grep(n,function(e){return!("directory"==e.mime||!e.read)}).length==a?0:-1},this.exec=function(i,n){var a,o,s,r,l,c,d,u,h,p,f,m,g=e.Deferred().fail(function(e){e&&t.error(e)}),v=this.files(i),b=v.length,y="object"==typeof n&&n.thash,w=this.options,x=w.into||"window";if(!b&&!y)return g.reject();if(y||1==b&&(a=v[0])&&"directory"==a.mime)return y||!a||a.read?t.keyState.ctrlKey&&(t.keyState.shiftKey||"function"!=typeof t.options.getFileCallback)&&t.getCommand("opennew")?t.exec("opennew",[y||a.hash]):t.request({data:{cmd:"open",target:y||a.hash},notify:{type:"open",cnt:1,hideCnt:!0},syncOnFail:!0,lazy:!1}):g.reject(["errOpen",a.name,"errPerm"]);if(v=e.grep(v,function(e){return"directory"!=e.mime}),b!=v.length)return g.reject();var k=function(){var n,f,m=function(i){var u=e('<a rel="noopener">').hide().appendTo(e("body"));if(t.UA.Mobile||!p){if(h)p?u.attr("target","_blank"):u.attr("download",a.name),u.attr("href",i).get(0).click();else if(!(n=window.open(i)))return g.reject("errPopup")}else{if(!("string"==typeof w.method&&"get"===w.method.toLowerCase())&&0===i.indexOf(t.options.url)&&t.customData&&Object.keys(t.customData).length&&!a.mime.match(/^(?:video|audio)/)&&(i=""),"window"===x?(r=c=Math.round(2*screen.availWidth/3),l=d=Math.round(2*screen.availHeight/3),parseInt(a.width)&&parseInt(a.height)?(r=parseInt(a.width),l=parseInt(a.height)):a.dim&&(o=a.dim.split("x"),r=parseInt(o[0]),l=parseInt(o[1])),c>=r&&d>=l?(c=r,d=l):r-c>l-d?d=Math.round(l*(c/r)):c=Math.round(r*(d/l)),s="width="+c+",height="+d,n=window.open(i,f,s+",top=50,left=50,scrollbars=yes,resizable=yes,titlebar=no")):("tabs"===x&&(f=a.hash),n=window.open("about:blank",f)),!n)return g.reject("errPopup");if(""===i){var m=document.createElement("form");m.action=t.options.url,m.method="POST",m.target=f,m.style.display="none";var v=Object.assign({},t.customData,{cmd:"file",target:a.hash,_t:a.ts||parseInt(+new Date/1e3)});e.each(v,function(e,t){var i=document.createElement("input");i.name=e,i.value=t,m.appendChild(i)}),document.body.appendChild(m),m.submit()}else"window"!==x&&(n.location=i);e(n).trigger("focus")}u.remove()};try{u=new RegExp(t.option("dispInlineRegex"),"i")}catch(e){u=!1}for(h="string"==typeof e("<a>").get(0).download,b=v.length;b--;){if(f="elf_open_window",!(a=v[b]).read)return g.reject(["errOpen",a.name,"errPerm"]);p=u&&a.mime.match(u),t.openUrl(a.hash,!p,m)}return g.resolve(i)};if(b>1)t.confirm({title:"openMulti",text:["openMultiConfirm",b+""],accept:{label:"cmdopen",callback:function(){k()}},cancel:{label:"btnCancel",callback:function(){g.reject()}},buttons:t.getCommand("zipdl")&&t.isCommandEnabled("zipdl",t.cwd().hash)?[{label:"cmddownload",callback:function(){t.exec("download",i),g.reject()}}]:[]});else{if((f=t.storage("selectAction")||w.selectAction)&&(e.each(f.split("/"),function(){var e=this.valueOf();if("open"!==e&&(m=t.getCommand(e))&&m.enabled())return!1;m=null}),m))return t.exec(m.name);k()}return g}}).prototype={forceLoad:!0},u.prototype.commands.opendir=function(){this.alwaysEnabled=!0,this.getstate=function(){return 1!==this.fm.selected().length?-1:this.fm.getUI("workzone").hasClass("elfinder-search-result")?0:-1},this.exec=function(t){var i,n=this.fm,a=e.Deferred(),o=this.files(t);return o.length&&o[0].phash?(i=o[0].phash,n.trigger("searchend",{noupdate:!0}),n.request({data:{cmd:"open",target:i},notify:{type:"open",cnt:1,hideCnt:!0},syncOnFail:!1}),a):a.reject()}},u.prototype.commands.opennew=function(){var t=this.fm;this.shortcuts=[{pattern:("function"==typeof t.options.getFileCallback?"shift+":"")+"ctrl+enter"}],this.getstate=function(e){var t=this.files(e);return 1===t.length&&"directory"===t[0].mime&&t[0].read?0:-1},this.exec=function(t){var i,n,a,o,s=e.Deferred(),r=this.files(t),l=r.length,c=this.options;return 1===l&&(i=r[0])&&"directory"===i.mime?(n=window.location,a=c.url?c.url:n.pathname,c.useOriginQuery&&(a.match(/\?/)?n.search&&(a+="&"+n.search.substr(1)):a+=n.search),a+="#elf_"+i.hash,o=window.open(a,"_blank"),setTimeout(function(){o.focus()},1e3),s.resolve()):s.reject()}},u.prototype.commands.paste=function(){this.updateOnSelect=!1,this.handlers={changeclipboard:function(){this.update()}},this.shortcuts=[{pattern:"ctrl+v shift+insert"}],this.getstate=function(e){if(this._disabled)return-1;if(e){if(Array.isArray(e)){if(1!=e.length)return-1;e=this.fm.file(e[0])}}else e=this.fm.cwd();return this.fm.clipboard().length&&"directory"==e.mime&&e.write?0:-1},this.exec=function(t,i){var n,a,o,s=this,r=s.fm,l=i||{},c=t?this.files(t)[0]:r.cwd(),d=r.clipboard(),u=d.length,h=!!u&&d[0].cut,p=l._cmd?l._cmd:h?"move":"copy",f="err"+p.charAt(0).toUpperCase()+p.substr(1),m=[],g=[],v=e.Deferred().fail(function(e){e&&r.error(e)}).always(function(){r.unlockfiles({files:e.map(d,function(e){return e.hash})})});return u&&c&&"directory"==c.mime?c.write?(n=r.parents(c.hash),e.each(d,function(t,i){return i.read?h&&i.locked?!v.reject(["errLocked",i.name]):-1!==e.inArray(i.hash,n)?!v.reject(["errCopyInItself",i.name]):i.mime&&"directory"!==i.mime&&!r.uploadMimeCheck(i.mime,c.hash)?!v.reject([f,i.name,"errUploadMime"]):((a=r.parents(i.hash)).pop(),-1!==e.inArray(c.hash,a)&&e.grep(a,function(e){var t=r.file(e);return t.phash==c.hash&&t.name==i.name}).length?!v.reject(["errReplByChild",i.name]):void(i.phash==c.hash?g.push(i.hash):m.push({hash:i.hash,phash:i.phash,name:i.name}))):!v.reject([f,i.name,"errPerm"])}),"rejected"===v.state()||(o=e.Deferred(),h&&s.options.moveConfirm?r.confirm({title:"moveFiles",text:r.i18n("confirmMove",c.i18||c.name),accept:{label:"btnYes",callback:function(){o.resolve()}},cancel:{label:"btnCancel",callback:function(){o.reject()}}}):o.resolve(),o.done(function(){e.when(function(t){return t.length&&r._commands.duplicate?r.exec("duplicate",t):e.Deferred().resolve()}(g),function(t){var i,n=e.Deferred(),a=[],o={},d=function(t,i){for(var n=[],a=t.length;a--;)-1!==e.inArray(t[a].name,i)&&n.unshift(a);return n},u=function(e){var i=a[e],o=t[i],s=e==a.length-1;o&&r.confirm({title:r.i18n(p+"Files"),text:["errExists",o.name,"restore"===p?"confirmRest":"confirmRepl"],all:!s,accept:{label:"btnYes",callback:function(i){s||i?m(t):u(++e)}},reject:{label:"btnNo",callback:function(i){var n;if(i)for(n=a.length;e<n--;)t[a[n]].remove=!0;else t[a[e]].remove=!0;s||i?m(t):u(++e)}},cancel:{label:"btnCancel",callback:function(){n.resolve()}},buttons:[{label:"btnBackup",callback:function(i){var n;if(i)for(n=a.length;e<n--;)t[a[n]].rename=!0;else t[a[e]].rename=!0;s||i?m(t):u(++e)}}]})},f=function(i){var n,s={};i&&(Array.isArray(i)?i.length&&("string"==typeof i[0]?a=d(t,i):(e.each(i,function(e,t){s[t.name]=t.hash}),a=d(t,e.map(s,function(e,t){return t})),e.each(t,function(e,t){s[t.name]&&(o[s[t.name]]=t.name)}))):(n=[],a=e.map(i,function(e){return"string"==typeof e?e:(n=n.concat(e),!1)}),n.length&&(a=a.concat(n)),a=d(t,a),o=i)),a.length?u(0):m(t)},m=function(t){var i,a,s=[],d=e.grep(t,function(e){return e.rename&&s.push(e.name),!e.remove}),u=d.length;if(!u)return n.resolve();i=e.map(d,function(e){return e.hash}),a={cmd:"paste",dst:c.hash,targets:i,cut:h?1:0,renames:s,hashes:o,suffix:r.options.backupSuffix},r.api<2.1&&(a.src=d[0].phash),r.request({data:a,notify:{type:p,cnt:u},cancel:!0,navigate:{toast:l.noToast?{}:{inbuffer:{msg:r.i18n(["complete",r.i18n("cmd"+p)]),action:{cmd:"open",msg:"cmdopendir",data:[c.hash],done:"select",cwdNot:c.hash}}}}}).done(function(t){var i={},o=t.added&&t.added.length?t.added:null;h&&o&&(e.each(d,function(t,n){var a,s,r=n.phash,l=(a=n.name,e.each(o,function(e,t){if(t.name===a)return s=t.hash,!1}),s);l&&(i[r]?i[r].push(l):i[r]=[l])}),Object.keys(i).length&&(t.undo={cmd:"move",callback:function(){var t=[];return e.each(i,function(e,i){t.push(r.request({data:{cmd:"paste",dst:e,targets:i,cut:1},notify:{type:"undo",cnt:i.length}}))}),e.when.apply(null,t)}},t.redo={cmd:"move",callback:function(){return r.request({data:a,notify:{type:"redo",cnt:u}})}})),n.resolve(t)}).fail(function(e){n.reject(),0===e&&r.sync()}).always(function(){r.unlockfiles({files:d})})};return r.isCommandEnabled(s.name,c.hash)&&t.length?(r.oldAPI?m(t):r.option("copyOverwrite",c.hash)?(i=e.map(t,function(e){return e.name}),c.hash==r.cwd().hash?f(e.map(r.files(),function(e){return e.phash==c.hash?{hash:e.hash,name:e.name}:null})):r.request({data:{cmd:"ls",target:c.hash,intersect:i},notify:{type:"prepare",cnt:1,hideCnt:!0},preventFail:!0}).always(function(e){f(e.list)})):m(t),n):n.resolve()}(m)).done(function(e,t){v.resolve(t&&t.undo?t:void 0)}).fail(function(){v.reject()}).always(function(){h&&r.clipboard([])})}).fail(function(){v.reject()})),v):v.reject([f,d[0].name,"errPerm"]):v.reject()}},u.prototype.commands.places=function(){var t=this,i=this.fm,n=null;this.getstate=function(i){var a,o,s=this.hashes(i),r=s.length;return n&&r&&r==(a=s,o=!0,e.grep(t.files(a),function(e){return o=!(!o||"directory"!=e.mime)})).length?0:-1},this.exec=function(t){var i=this.files(t);return n.trigger("regist",[i]),e.Deferred().resolve()},i.one("load",function(){n=i.ui.places})},u.prototype.commands.preference=function(){var t,i,n=this,a=this.fm,o="replace",s='<li class="'+a.res("class","tabstab")+' elfinder-preference-tab-{id}"><a href="#'+a.namespace+'-preference-{id}" id="'+a.namespace+'-preference-tab-{id}" class="ui-tabs-anchor {class}">{title}</a></li>',r=e('<div class="ui-tabs ui-widget ui-widget-content ui-corner-all elfinder-preference">'),l=e('<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-top">'),c=e('<div class="elfinder-preference-tabs ui-tabs-panel ui-widget-content ui-corner-bottom"></div>'),d=(e("base").length&&document.location.href.replace(/#.*$/,""),function(t){e("#"+a.namespace+"-preference-tab-"+t).trigger("mouseover").trigger("click"),i=t}),u=a.res("class","tabsactive");this.shortcuts=[{pattern:"ctrl+comma",description:this.title}],this.alwaysEnabled=!0,this.getstate=function(){return 0},this.exec=function(h,p){var f,m,g,v,b,y,w,x,k,C,_,T,D,z,A,S,I;return!t&&(S=n.options.categories||{language:["language"],theme:["theme"],toolbar:["toolbarPref"],workspace:["iconSize","columnPref","selectAction","makefileTypes","useStoredEditor","editorMaximized","useFullscreen","showHidden"],dialog:["autoFocusDialog"],selectionInfo:["infoItems","hashChecker"],reset:["clearBrowserData"],all:!0},I=n.options.prefs||["language","theme","toolbarPref","iconSize","columnPref","selectAction","makefileTypes","useStoredEditor","editorMaximized","useFullscreen","showHidden","infoItems","hashChecker","autoFocusDialog","clearBrowserData"],a.cookieEnabled||delete S.language,I=a.arrayFlip(I,!0),a.options.getFileCallback&&delete I.selectAction,a.UA.Fullscreen||delete I.useFullscreen,I.language&&(I.language=(f=e("<select></select>").on("change",function(){var t=e(this).val();a.storage("lang",t),e("#"+a.id).elfinder("reload")}),m=[],g=n.options.langs||{ar:"Ø§ÙØ¹Ø±Ø¨ÙØ©",bg:"ÐÑÐ»Ð³Ð°ÑÑÐºÐ¸",ca:"CatalÃ ",cs:"ÄeÅ¡tina",da:"Dansk",de:"Deutsch",el:"ÎÎ»Î»Î·Î½Î¹ÎºÎ¬",en:"English",es:"EspaÃ±ol",fa:"ÙØ§Ø±Ø³Û",fo:"FÃ¸royskt",fr:"FranÃ§ais",fr_CA:"FranÃ§ais (Canada)",he:"×¢××¨××ª",hr:"Hrvatski",hu:"Magyar",id:"Bahasa Indonesia",it:"Italiano",ja:"æ¥æ¬èª",ko:"íêµ­ì´",nl:"Nederlands",no:"Norsk",pl:"Polski",pt_BR:"PortuguÃªs",ro:"RomÃ¢nÄ",ru:"PÑÑÑÐºÐ¸Ð¹",si:"à·à·à¶à·à¶½",sk:"SlovenÄina",sl:"SlovenÅ¡Äina",sr:"Srpski",sv:"Svenska",tr:"TÃ¼rkÃ§e",ug_CN:"Ø¦ÛÙØºÛØ±ÚÛ",uk:"Ð£ÐºÑÐ°ÑÐ½ÑÑÐºÐ¸Ð¹",vi:"Tiáº¿ng Viá»t",zh_CN:"ç®ä½ä¸­æ",zh_TW:"æ­£é«ä¸­æ"},a.cookieEnabled?(e.each(g,function(e,t){m.push('<option value="'+e+'">'+t+"</option>")}),f.append(m.join("")).val(a.lang)):e())),I.theme&&(I.theme=function(){var t=a.options.themes?Object.keys(a.options.themes).length:0;if(0===t||1===t&&a.options.themes.default)return null;var i=e("<select></select>").on("change",function(){var t=e(this).val();a.changeTheme(t).storage("theme",t)}),n={image:'<img class="elfinder-preference-theme elfinder-preference-theme-image" src="$2" />',link:'<a href="$1" target="_blank" title="$3">$2</a>',data:'<dt>$1</dt><dd><span class="elfinder-preference-theme elfinder-preference-theme-$0">$2</span></dd>'},o=["image","description","author","email","license"],s=e('<button class="ui-button ui-corner-all ui-widget elfinder-preference-theme-default"></button>').text(a.i18n("default")).on("click",function(e){i.val("default").trigger("change")}),r=e('<div class="elfinder-reference-hide-taball"></div>').on("click","button",function(){var t=e(this).data("themeid");i.val(t).trigger("change")});return a.options.themes.default||i.append('<option value="default">'+a.i18n("default")+"</option>"),e.each(a.options.themes,function(t,s){var l,c=e('<option class="elfinder-theme-option-'+t+'" value="'+t+'">'+a.i18n(t)+"</option>"),d=e('<fieldset class="ui-widget ui-widget-content ui-corner-all elfinder-theme-list-'+t+'"><legend>'+a.i18n(t)+'</legend><div><span class="elfinder-spinner"></span></div></fieldset>');i.append(c),r.append(d),l=setTimeout(function(){d.find("span.elfinder-spinner").replaceWith(a.i18n(["errRead",t]))},1e4),a.getTheme(t).always(function(){l&&clearTimeout(l)}).done(function(s){var r,l=e(),u=e("<dl></dl>");r=s.link?n.link.replace(/\$1/g,s.link).replace(/\$3/g,a.i18n("website")):"$2",s.name&&c.html(a.i18n(s.name)),d.children("legend").html(r.replace(/\$2/g,a.i18n(s.name)||t)),e.each(o,function(o,r){var l,c=n[r]||n.data;s[r]&&(l=c.replace(/\$0/g,a.escape(r)).replace(/\$1/g,a.i18n(r)).replace(/\$2/g,a.i18n(s[r])),"image"===r&&s.link&&(l=e(l).on("click",function(){i.val(t).trigger("change")}).attr("title",a.i18n("select"))),u.append(l))}),l=(l=l.add(u)).add(e('<div class="elfinder-preference-theme-btn"></div>').append(e('<button class="ui-button ui-corner-all ui-widget"></button>').data("themeid",t).html(a.i18n("select")))),d.find("span.elfinder-spinner").replaceWith(l)}).fail(function(){d.find("span.elfinder-spinner").replaceWith(a.i18n(["errRead",t]))})}),e("<div></div>").append(i.val(a.theme&&a.theme.id?a.theme.id:"default"),s,r)}()),I.toolbarPref&&(I.toolbarPref=(v=e.map(a.options.uiOptions.toolbar,function(t){return e.isArray(t)?t:null}),b=[],y=a.storage("toolbarhides")||{},e.each(v,function(){var e=this,t=a.i18n("cmd"+e);t==="cmd"+e&&(t=a.i18n(e)),b.push('<span class="elfinder-preference-toolbar-item"><label><input type="checkbox" value="'+e+'" '+(y[e]?"":"checked")+"/>"+t+"</label></span>")}),e(b.join(" ")).on("change","input",function(){var t=e(this).val(),i=e(this).is(":checked");i||y[t]?i&&y[t]&&delete y[t]:y[t]=!0,a.storage("toolbarhides",y),a.trigger("toolbarpref")}))),I.iconSize&&(I.iconSize=(w=a.options.uiOptions.cwd.iconsView.sizeMax||3,x=a.storage("iconsize")||a.options.uiOptions.cwd.iconsView.size||0,k=e('<div class="touch-punch"></div>').slider({classes:{"ui-slider-handle":"elfinder-tabstop"},value:x,max:w,slide:function(e,t){a.getUI("cwd").trigger("iconpref",{size:t.value})},change:function(e,t){a.storage("iconsize",t.value)}}),a.getUI("cwd").on("iconpref",function(e,t){k.slider("option","value",t.size)}),k)),I.columnPref&&(I.columnPref=function(){var t=a.options.uiOptions.cwd.listView.columns,i=[],n=a.storage("columnhides")||{};return e.each(t,function(){var e=this,t=a.getColumnName(e);i.push('<span class="elfinder-preference-column-item"><label><input type="checkbox" value="'+e+'" '+(n[e]?"":"checked")+"/>"+t+"</label></span>")}),e(i.join(" ")).on("change","input",function(){var t=e(this).val(),i=e(this).is(":checked");i||n[t]?i&&n[t]&&delete n[t]:n[t]=!0,a.storage("columnhides",n),a.trigger("columnpref",{repaint:!0})})}()),I.selectAction&&(I.selectAction=function(){var t=e("<select></select>").on("change",function(){var t=e(this).val();a.storage("selectAction","default"===t?null:t)}),i=[],o=n.options.selectActions,s=a.getCommand("open").options.selectAction||"open";return-1===e.inArray(s,o)&&o.unshift(s),e.each(o,function(t,n){var o=e.map(n.split("/"),function(e){var t=a.i18n("cmd"+e);return t==="cmd"+e&&(t=a.i18n(e)),t});i.push('<option value="'+n+'">'+o.join("/")+"</option>")}),t.append(i.join("")).val(a.storage("selectAction")||s)}()),I.makefileTypes&&(I.makefileTypes=function(){var t=a.getCommand("edit").getMkfileHides(),i=function(){var i=[];return t=a.getCommand("edit").getMkfileHides(),e.each(a.mimesCanMakeEmpty,function(e,n){var o=a.getCommand("mkfile").getTypeName(e,n);i.push('<span class="elfinder-preference-column-item" title="'+a.escape(o)+'"><label><input type="checkbox" value="'+e+'" '+(t[e]?"":"checked")+"/>"+n+"</label></span>")}),i.join(" ")},n=e("<div></div>").on("change","input",function(){var i=e(this).val(),n=e(this).is(":checked");n||t[i]?n&&t[i]&&delete t[i]:t[i]=!0,a.storage("mkfileHides",t),a.trigger("canMakeEmptyFile")}).append(i()),o=e("<div></div>").append(e('<input type="text" placeholder="'+a.i18n("typeOfTextfile")+'"/>').on("keydown",function(t){t.keyCode===e.ui.keyCode.ENTER&&e(this).next().trigger("click")}),e('<button class="ui-button"></button>').html(a.i18n("add")).on("click",function(){var t,i=e(this).prev(),n=i.val(),o=a.getUI("toast"),s=function(){return o.appendTo(i.closest(".ui-dialog")),a.toast({msg:a.i18n("errUsupportType"),mode:"warning",onHidden:function(){1===o.children().length&&o.appendTo(a.getUI())}}),i.trigger("focus"),!1};if(!n.match(/\//)){if(!(n=a.arrayFlip(a.mimeTypes)[n]))return s();i.val(n)}if(!a.mimeIsText(n)||!a.mimeTypes[n])return s();a.trigger("canMakeEmptyFile",{mimes:[n],unshift:!0}),(t={})[n]=a.mimeTypes[n],a.storage("mkfileTextMimes",Object.assign(t,a.storage("mkfileTextMimes")||{})),i.val(""),o.appendTo(i.closest(".ui-dialog")),a.toast({msg:a.i18n(["complete",n+" ("+t[n]+")"]),onHidden:function(){1===o.children().length&&o.appendTo(a.getUI())}})}),e('<button class="ui-button"></button>').html(a.i18n("reset")).on("click",function(){a.one("canMakeEmptyFile",{done:function(){n.empty().append(i())}}),a.trigger("canMakeEmptyFile",{resetTexts:!0})}));return a.bind("canMakeEmptyFile",{done:function(e){e.data&&e.data.mimes&&e.data.mimes.length&&n.empty().append(i())}}),e("<div></div>").append(n,o)}()),I.useStoredEditor&&(I.useStoredEditor=e('<input type="checkbox"/>').prop("checked",(C=a.storage("useStoredEditor"),C?C>0:a.options.commandsOptions.edit.useStoredEditor)).on("change",function(t){a.storage("useStoredEditor",e(this).is(":checked")?1:-1)})),I.editorMaximized&&(I.editorMaximized=e('<input type="checkbox"/>').prop("checked",function(){var e=a.storage("editorMaximized");return e?e>0:a.options.commandsOptions.edit.editorMaximized}()).on("change",function(t){a.storage("editorMaximized",e(this).is(":checked")?1:-1)})),I.useFullscreen&&(I.useFullscreen=e('<input type="checkbox"/>').prop("checked",function(){var e=a.storage("useFullscreen");return e?e>0:"screen"===a.options.commandsOptions.fullscreen.mode}()).on("change",function(t){a.storage("useFullscreen",e(this).is(":checked")?1:-1)})),I.showHidden&&(T=function(){var t,i=a.storage("hide"),n=[];i&&i.items&&e.each(i.items,function(e,t){n.push(a.escape(t))}),A.prop("disabled",!n.length)[n.length?"removeClass":"addClass"]("ui-state-disabled"),t=n.length?n.join("\n"):"",I.showHidden.attr("title",t),_&&I.showHidden.tooltip("option","content",t.replace(/\n/g,"<br>")).tooltip("close")},D=e('<input type="checkbox"/>').prop("checked",function(){var e=a.storage("hide");return e&&e.show}()).on("change",function(t){var i={};i[e(this).is(":checked")?"show":"hide"]=!0,a.exec("hide",void 0,i)}),z=e('<button class="ui-button ui-corner-all ui-widget"></button>').append(a.i18n("reset")).on("click",function(){a.exec("hide",void 0,{reset:!0}),e(this).parent().find("input:first").prop("checked",!1),T()}),A=e().add(D).add(z),I.showHidden=e("<div></div>").append(D,z),a.bind("hide",function(e){var t=e.data;t.opts&&(t.opts.show||t.opts.hide)||T()}),a.UA.Mobile&&e.fn.tooltip&&(_=!0,I.showHidden.tooltip({classes:{"ui-tooltip":"elfinder-ui-tooltip ui-widget-shadow"},tooltipClass:"elfinder-ui-tooltip ui-widget-shadow",track:!0}).css("user-select","none"),z.css("user-select","none")),T()),I.infoItems&&(I.infoItems=function(){var t=a.getCommand("info").items,i=[],n=a.storage("infohides")||a.arrayFlip(a.options.commandsOptions.info.hideItems,!0);return e.each(t,function(){var e=this,t=a.i18n(e);i.push('<span class="elfinder-preference-info-item"><label><input type="checkbox" value="'+e+'" '+(n[e]?"":"checked")+"/>"+t+"</label></span>")}),e(i.join(" ")).on("change","input",function(){var t=e(this).val(),i=e(this).is(":checked");i||n[t]?i&&n[t]&&delete n[t]:n[t]=!0,a.storage("infohides",n),a.trigger("infopref",{repaint:!0})})}()),I.hashChecker&&a.hashCheckers.length&&(I.hashChecker=function(){var t=[],i=a.arrayFlip(a.storage("hashchekcer")||a.options.commandsOptions.info.showHashAlgorisms,!0);return e.each(a.hashCheckers,function(){var e=this,n=a.i18n(e);t.push('<span class="elfinder-preference-hashchecker-item"><label><input type="checkbox" value="'+e+'" '+(i[e]?"checked":"")+"/>"+n+"</label></span>")}),e(t.join(" ")).on("change","input",function(){var t=e(this).val();e(this).is(":checked")?i[t]=!0:i[t]&&delete i[t],a.storage("hashchekcer",e.grep(a.hashCheckers,function(e){return i[e]}))})}()),I.autoFocusDialog&&(I.autoFocusDialog=e('<input type="checkbox"/>').prop("checked",function(){var e=a.storage("autoFocusDialog");return e?e>0:a.options.uiOptions.dialog.focusOnMouseOver}()).on("change",function(t){a.storage("autoFocusDialog",e(this).is(":checked")?1:-1)})),I.clearBrowserData&&(I.clearBrowserData=e("<button></button>").text(a.i18n("reset")).button().on("click",function(t){t.preventDefault(),a.storage(),e("#"+a.id).elfinder("reload")})),e.each(S,function(t,n){var r,d;!0===n?d=1:n&&(r=e(),e.each(n,function(t,i){var n,o,s,l="";(n=I[i])&&(d=2,o=a.i18n(i),(s=e(n).filter('input[type="checkbox"]')).length||(s=e(n).find('input[type="checkbox"]')),1===s.length?(s.attr("id")||s.attr("id","elfinder-preference-"+i+"-checkbox"),o='<label for="'+s.attr("id")+'">'+o+"</label>"):s.length>1&&(l=" elfinder-preference-checkboxes"),r=r.add(e('<dt class="elfinder-preference-'+i+l+'">'+o+"</dt>")).add(e('<dd class="elfinder-preference-'+i+l+'"></dd>').append(n)))})),d&&(l.append(s[o](/\{id\}/g,t)[o](/\{title\}/,a.i18n(t))[o](/\{class\}/,i===t?"elfinder-focus":"")),2===d&&c.append(e('<div id="'+a.namespace+"-preference-"+t+'" class="elfinder-preference-content"></div>').hide().append(e("<dl></dl>").append(r))))}),l.on("click","a",function(t){var i=e(t.target),n=i.attr("href");t.preventDefault(),t.stopPropagation(),l.children().removeClass(u),i.removeClass("ui-state-hover").parent().addClass(u),n.match(/all$/)?c.addClass("elfinder-preference-taball").children().show():(c.removeClass("elfinder-preference-taball").children().hide(),e(n).show())}).on("focus blur","a",function(t){e(this).parent().toggleClass("ui-state-focus","focusin"===t.type)}).on("mouseenter mouseleave","li",function(t){e(this).toggleClass("ui-state-hover","mouseenter"===t.type)}),c.find("a,input,select,button").addClass("elfinder-tabstop"),r.append(l,c),(t=n.fmDialog(r,{title:n.title,width:n.options.width||600,height:n.options.height||400,maxWidth:"window",maxHeight:"window",autoOpen:!1,destroyOnClose:!1,allowMinimize:!1,open:function(){i&&d(i),i=null},resize:function(){c.height(t.height()-l.outerHeight(!0)-(c.outerHeight(!0)-c.height())-5)}}).on("click",function(e){e.stopPropagation()}).css({overflow:"hidden"})).closest(".ui-dialog").css({overflow:"hidden"}).addClass("elfinder-bg-translucent"),i="all"),p&&(p.tab?d(p.tab):"cwd"===p._currentType&&d("workspace")),t.elfinderdialog("open"),e.Deferred().resolve()}},(u.prototype.commands.quicklook=function(){var t,i,n,a,o,s,r,l,c,d,u=this,h=u.fm,p=0,f=Element.update?"quicklookupdate":"update",m="elfinder-quicklook-navbar-icon",g="elfinder-quicklook-fullscreen",v="elfinder-quicklook-info-wrapper",b=function(t){e(document).trigger(e.Event("keydown",{keyCode:t,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1}))},y=function(e){var t,i=h.getUI().offset(),n=(t=e.find(".elfinder-cwd-file-wrapper")).length?t:e,a=n.offset()||{top:0,left:0};return{opacity:0,width:n.width(),height:n.height()-30,top:a.top-i.top,left:a.left-i.left}},w={},x=function(e,t){var i=t||e.substr(0,e.indexOf("/")),n=w[i]?w[i]:w[i]=document.createElement(i),a=!1;try{a=n.canPlayType&&n.canPlayType(e)}catch(e){}return!(!a||""===a||"no"==a)},k=-1!=window.navigator.platform.indexOf("Win"),C=!1,_=!1,T=!1,D=null,z=e.ui.keyCode.LEFT,A=e.ui.keyCode.RIGHT,S="mousemove touchstart "+("onwheel"in document?"wheel":"onmousewheel"in document?"mousewheel":"DOMMouseScroll"),I=e('<span class="elfinder-dialog-title elfinder-quicklook-title"></span>'),M=e("<div></div>"),E=e('<div class="elfinder-quicklook-info"></div>'),O=e('<div class="ui-front elfinder-quicklook-cover"></div>'),j=e('<div class="'+m+" "+m+'-fullscreen"></div>').on("click touchstart",function(t){if(!T){var i=u.window,n=i.hasClass(g),o=e(window),s=function(){u.preview.trigger("changesize")};t.stopPropagation(),t.preventDefault(),n?(B="",F(),i.toggleClass(g).css(i.data("position")),o.trigger(u.resize).off(u.resize,s),R.off("mouseenter mouseleave"),O.off(S)):(i.toggleClass(g).data("position",{left:i.css("left"),top:i.css("top"),width:i.width(),height:i.height(),display:"block"}).removeAttr("style"),e(window).on(u.resize,s).trigger(u.resize),O.on(S,function(e){_||("mousemove"!==e.type&&"touchstart"!==e.type||(F(),D=setTimeout(function(){(h.UA.Mobile||R.parent().find(".elfinder-quicklook-navbar:hover").length<1)&&R.fadeOut("slow",function(){O.show()})},3e3)),O.is(":visible")&&(H(),O.data("tm",setTimeout(function(){O.show()},3e3))))}).show().trigger("mousemove"),R.on("mouseenter mouseleave",function(e){_||("mouseenter"===e.type?F():O.trigger("mousemove"))})),h.zIndex&&i.css("z-index",h.zIndex+1),h.UA.Mobile?R.attr("style",B):R.attr("style",B).draggable(n?"destroy":{start:function(){_=!0,T=!0,O.show(),F()},stop:function(){_=!1,B=u.navbar.attr("style"),requestAnimationFrame(function(){T=!1})}}),e(this).toggleClass(m+"-fullscreen-off");var r=i;a.is(".ui-resizable")&&(r=r.add(a)),r.resizable(n?"enable":"disable").removeClass("ui-state-disabled"),i.trigger("viewchange")}}),P=function(){u.update(void 0,function(){var t,i=u.fm,n=i.selectedFiles(),a=n.length;u.docked();return a||(a=1,n=[i.cwd()]),1===a?n[0]:(t=0,e.each(n,function(e,i){var n=parseInt(i.ts);t>=0?n>t&&(t=n):t="unknown"}),{hash:n[0].hash+"/"+ +new Date,name:i.i18n("items")+": "+a,mime:"group",size:W,ts:t,files:e.map(n,function(e){return e.hash}),getSize:!0})}())},F=function(){u.window.hasClass(g)&&(D&&clearTimeout(D),D=null,R.stop(!0,!0).css("display","block"),H())},H=function(){O.data("tm")&&clearTimeout(O.data("tm")),O.removeData("tm"),O.hide()},N=e('<div class="'+m+" "+m+'-prev"></div>').on("click touchstart",function(e){return!T&&b(z),!1}),U=e('<div class="'+m+" "+m+'-next"></div>').on("click touchstart",function(e){return!T&&b(A),!1}),R=e('<div class="elfinder-quicklook-navbar"></div>').append(N).append(j).append(U).append('<div class="elfinder-quicklook-navbar-separator"></div>').append(e('<div class="'+m+" "+m+'-close"></div>').on("click touchstart",function(e){return!T&&u.window.trigger("close"),!1})),q=e('<span class="ui-front ui-icon elfinder-icon-close ui-icon-closethick"></span>').on("mousedown",function(e){e.stopPropagation(),u.window.trigger("close")}),L=e('<span class="ui-front ui-icon elfinder-icon-minimize ui-icon-minusthick"></span>').on("mousedown",function(e){e.stopPropagation(),u.docked()?u.window.trigger("navdockout"):u.window.trigger("navdockin")}),W='<span class="elfinder-spinner-text">'+h.i18n("calc")+'</span><span class="elfinder-spinner"></span>',B="",$=!0;this.flags={},this.cover=O,this.evUpdate=f,(this.navbar=R)._show=F,this.resize="resize."+h.namespace,this.info=e("<div></div>").addClass(v).append(M).append(E),this.autoPlay=function(){return!!u.opened()&&!!u.options[u.docked()?"dockAutoplay":"autoplay"]},this.preview=e('<div class="elfinder-quicklook-preview ui-helper-clearfix"></div>').on("change",function(){F(),R.attr("style",B),u.docked()&&R.hide(),u.preview.attr("style","").removeClass("elfinder-overflow-auto"),u.info.attr("style","").hide(),u.cover.removeClass("elfinder-quicklook-coverbg"),M.removeAttr("class").attr("style",""),E.html("")}).on(f,function(t){u.preview;var i,n,a,s=t.file,r='<div class="elfinder-quicklook-info-data">{value}</div>',c=[];s&&!Object.keys(s).length&&(s=h.cwd()),s&&l&&"pending"===l.state()&&l._hash!==s.hash&&l.reject(),s&&(t.forceUpdate||u.window.data("hash")!==s.hash)?(a=u.window.css("overflow","hidden"),n=h.escape(s.i18||s.name),!s.read&&t.stopImmediatePropagation(),u.window.data("hash",s.hash),u.preview.off("changesize").trigger("change").children().remove(),I.html(n),N.css("visibility",""),U.css("visibility",""),s.hash===h.cwdId2Hash(o.find("[id]:not(.elfinder-cwd-parent):first").attr("id"))&&N.css("visibility","hidden"),s.hash===h.cwdId2Hash(o.find("[id]:last").attr("id"))&&U.css("visibility","hidden"),"directory"===s.mime?c=[s.hash]:"group"===s.mime&&s.getSize&&(c=s.files),E.html(r.replace(/\{value\}/,n)+r.replace(/\{value\}/,h.mime2kind(s))+r.replace(/\{value\}/,c.length?W:h.formatSize(s.size))+r.replace(/\{value\}/,h.i18n("modify")+": "+h.formatDate(s))),c.length&&((l=h.getSize(c).done(function(e){E.find("span.elfinder-spinner").parent().html(e.formated)}).fail(function(){E.find("span.elfinder-spinner").parent().html(h.i18n("unknown"))}).always(function(){l=null}))._hash=s.hash),M.addClass("elfinder-cwd-icon ui-corner-all "+h.mime2class(s.mime)),s.icon&&M.css(h.getIconStyle(s,!0)),u.info.attr("class",v),s.csscls&&u.info.addClass(s.csscls),s.read&&(i=h.tmb(s))&&e("<img/>").hide().appendTo(u.preview).on("load",function(){M.addClass(i.className).css("background-image","url('"+i.url+"')"),e(this).remove()}).attr("src",i.url),u.info.delay(100).fadeIn(10),u.window.hasClass(g)&&O.trigger("mousemove"),a.css("overflow","")):t.stopImmediatePropagation()}),this.window=e('<div class="ui-front ui-helper-reset ui-widget elfinder-quicklook touch-punch" style="position:absolute"></div>').hide().addClass(h.UA.Touch?"elfinder-touch":"").on("click",function(e){var t=this;e.stopPropagation(),2===p&&requestAnimationFrame(function(){2===p&&h.toFront(t)})}).append(e('<div class="ui-dialog-titlebar ui-widget-header ui-corner-top ui-helper-clearfix elfinder-quicklook-titlebar"></div>').append(e('<span class="ui-widget-header ui-dialog-titlebar-close ui-corner-all elfinder-titlebar-button elfinder-quicklook-titlebar-icon'+(k?" elfinder-titlebar-button-right":"")+'"></span>').append(q,L),I),this.preview,u.info.hide(),O.hide(),R).draggable({handle:"div.elfinder-quicklook-titlebar"}).on("open",function(n,a){var o=u.window,r=u.value,l=h.getUI("cwd"),d=function(e){p=e,u.update(1,u.value),u.change(),o.trigger("resize."+h.namespace)};$||0!==p?4===p&&(h.getUI("navdock").data("addNode")(c),d(3),u.preview.trigger("changesize"),h.storage("previewDocked","1"),0===h.getUI("navdock").width()&&o.trigger("navdockout")):(r&&r.hash!==s&&(l=h.cwdHash2Elm(r.hash.split("/",2)[0])),B="",R.attr("style",""),p=1,l.trigger("scrolltoview"),H(),o.css(a||y(l)).show().animate(function(){var n=u.options.contain||h.options.dialogContained,a=n?h.getUI():e(window),o=h.getUI().offset(),s=Math.min(t,a.width()-10),r=Math.min(i,a.height()-80);return{opacity:1,width:s,height:r,top:parseInt((a.height()-r-60)/2+(n?0:a.scrollTop()-o.top)),left:parseInt((a.width()-s)/2+(n?0:a.scrollLeft()-o.left))}}(),550,function(){d(2),F()}),h.toFront(o))}).on("close",function(e,t){var i,n=u.window,a=u.preview.trigger("change"),s=(u.value,(n.data("hash")||"").split("/",2)[0]),r=function(e,i){p=e,i&&h.toHide(n),a.children().remove(),u.update(0,u.value),n.data("hash",""),t&&t.resolve()};u.opened()&&(l&&"pending"===l.state()&&l.reject(),u.docked()?(c=h.getUI("navdock").data("removeNode")(u.window.attr("id"),"detach"),r(4),h.storage("previewDocked","2")):(p=1,n.hasClass(g)&&j.click(),s&&(i=o.find("#"+s)).length?n.animate(y(i),500,function(){a.off("changesize"),r(0,!0)}):r(0,!0)))}).on("navdockin",function(e,t){var i=u.window,a=h.getUI("navdock"),o=r||a.width(),s=t||{};$&&(s.init=!0),p=3,n=i.attr("style"),i.toggleClass("ui-front").removeClass("ui-widget").draggable("disable").resizable("disable").removeAttr("style").css({width:"100%",height:o,boxSizing:"border-box",paddingBottom:0,zIndex:"unset"}),R.hide(),L.toggleClass("ui-icon-plusthick ui-icon-minusthick elfinder-icon-full elfinder-icon-minimize"),h.toHide(i,!0),a.data("addNode")(i,s),u.preview.trigger("changesize"),h.storage("previewDocked","1")}).on("navdockout",function(t){var i=u.window,a=h.getUI("navdock"),o=(e.Deferred(),y(u.preview));r=i.outerHeight(),a.data("removeNode")(i.attr("id"),h.getUI()),i.toggleClass("ui-front").addClass("ui-widget").draggable("enable").resizable("enable").attr("style",n),L.toggleClass("ui-icon-plusthick ui-icon-minusthick elfinder-icon-full elfinder-icon-minimize"),p=0,i.trigger("open",o),h.storage("previewDocked","0")}).on("resize."+h.namespace,function(){u.preview.trigger("changesize")}),this.alwaysEnabled=!0,this.value=null,this.handlers={select:function(e,t){d&&cancelAnimationFrame(d),e.data&&e.data.selected&&e.data.selected.length?u.opened()&&P():d=requestAnimationFrame(function(){u.opened()&&P()})},error:function(){u.window.is(":visible")&&u.window.trigger("close")},"searchshow searchhide":function(){this.opened()&&this.window.trigger("close")},navbarshow:function(){requestAnimationFrame(function(){u.docked()&&u.preview.trigger("changesize")})},destroy:function(){u.window.remove()}},this.shortcuts=[{pattern:"space"}],this.support={audio:{ogg:x("audio/ogg;"),webm:x("audio/webm;"),mp3:x("audio/mpeg;"),wav:x("audio/wav;"),m4a:x("audio/mp4;")||x("audio/x-m4a;")||x("audio/aac;"),flac:x("audio/flac;"),amr:x("audio/amr;")},video:{ogg:x("video/ogg;"),webm:x("video/webm;"),mp4:x("video/mp4;"),mkv:x("video/x-matroska;")||x("video/webm;"),"3gp":x("video/3gpp;")||x("video/mp4;"),m3u8:x("application/x-mpegURL","video")||x("application/vnd.apple.mpegURL","video"),mpd:x("application/dash+xml","video")}},w={},this.closed=function(){return 0==p||4==p},this.opened=function(){return 2==p||3==p},this.docked=function(){return 3==p},this.addIntegration=function(e){requestAnimationFrame(function(){h.trigger("helpIntegration",Object.assign({cmd:"quicklook"},e))})},this.init=function(){var n,l=this.options,c=this.window,d=this.preview;t=l.width>0?parseInt(l.width):450,i=l.height>0?parseInt(l.height):300,"auto"!==l.dockHeight&&((r=parseInt(l.dockHeight))||(r=void 0)),h.one("load",function(){!(C=h.getUI("navdock").data("dockEnabled"))&&L.hide(),a=h.getUI(),o=h.getUI("cwd"),h.zIndex&&c.css("z-index",h.zIndex+1),c.appendTo(a),e(document).on("keydown."+h.namespace,function(t){t.keyCode==e.ui.keyCode.ESCAPE&&u.opened()&&!u.docked()&&c.hasClass("elfinder-frontmost")&&c.trigger("close")}),c.resizable({handles:"se",minWidth:350,minHeight:120,resize:function(){d.trigger("changesize")}}),u.change(function(){u.opened()&&u.value&&(u.value.tmb&&1==u.value.tmb&&(u.value=Object.assign({},h.file(u.value.hash))),d.trigger(e.Event(f,{file:u.value})))}),d.on(f,function(e){var t,i,a;if(t=e.file){if(i=t.hash,a=h.searchStatus.mixed&&h.searchStatus.state>1,"directory"!==t.mime)if(parseInt(t.size)||t.mime.match(l.mimeRegexNotEmptyCheck)){if(u.dispInlineRegex=n,a||h.optionsByHashes[i])try{u.dispInlineRegex=new RegExp(h.option("dispInlineRegex",i),"i")}catch(e){try{u.dispInlineRegex=new RegExp(h.isRoot(t)?h.options.dispInlineRegex:h.option("dispInlineRegex",t.phash),"i")}catch(e){u.dispInlineRegex=/^$/}}}else e.stopImmediatePropagation();else u.dispInlineRegex=/^$/;u.info.show()}else e.stopImmediatePropagation()}),e.each(h.commands.quicklook.plugins||[],function(e,t){"function"==typeof t&&new t(u)})}).one("open",function(){var e,t=Number(h.storage("previewDocked")||l.docked);C&&t>=1&&(e=u.window,u.exec(),e.trigger("navdockin",{init:!0}),2===t?e.trigger("close"):(u.update(void 0,h.cwd()),u.change())),$=!1}).bind("open",function(){s=h.cwd().hash,u.value=h.cwd();try{n=new RegExp(h.option("dispInlineRegex"),"i")}catch(e){n=/^$/}}).bind("change",function(t){t.data&&t.data.changed&&u.opened()&&e.each(t.data.changed,function(){if(u.window.data("hash")===this.hash)return u.window.data("hash",null),u.preview.trigger(f),!1})}).bind("navdockresizestart navdockresizestop",function(e){O["navdockresizestart"===e.type?"show":"hide"]()})},this.getstate=function(){return u.opened()?1:0},this.exec=function(){return u.closed()&&P(),u.enabled()&&u.window.trigger(u.opened()?"close":"open"),e.Deferred().resolve()},this.hideinfo=function(){this.info.stop(!0,!0).hide()}}).prototype={forceLoad:!0},u.prototype.commands.quicklook.plugins=[function(t){var i,n,a=["image/jpeg","image/png","image/gif","image/svg+xml","image/x-ms-bmp"],o=t.fm.returnBytes(t.options.getDimThreshold||0),s=t.preview;(i=new Image).onload=i.onerror=function(){2==i.height&&a.push("image/webp")},i.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",e.each(navigator.mimeTypes,function(t,i){var n=i.type;0===n.indexOf("image/")&&e.inArray(n,a)&&a.push(n)}),s.on(t.evUpdate,function(i){var r,l,c,d,u=t.fm,h=i.file,p=!1,f=null,m=function(e){var t=u.file(h.hash);t.width=e[0],t.height=e[1]},g=function(){var e,t,i,n,a;f&&f.state&&"pending"===f.state()&&f.reject(),p||(p=!0,e=r.get(0),(t=h.width&&h.height?{w:h.width,h:h.height}:e.naturalWidth?null:{w:r.width(),h:r.height()})&&r.removeAttr("width").removeAttr("height"),i=h.width||e.naturalWidth||e.width||r.width(),n=h.height||e.naturalHeight||e.height||r.height(),h.width&&h.height||m([i,n]),t&&r.width(t.w).height(t.h),a=(i/n).toFixed(2),s.on("changesize",function(){var e,t,i=parseInt(s.width()),n=parseInt(s.height());a<(i/n).toFixed(2)?(t=n,e=Math.floor(t*a)):(e=i,t=Math.floor(e/a)),r.width(e).height(t).css("margin-top",t<n?Math.floor((n-t)/2):0)}).trigger("changesize"),r.fadeIn(100))};n||(n=u.arrayFlip(a)),n[h.mime]&&t.dispInlineRegex.test(h.mime)&&(i.stopImmediatePropagation(),l=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+u.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),c=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(l),r=e("<img/>").hide().appendTo(s).on("load",function(){l.remove(),t.hideinfo(),g()}).on("error",function(){l.remove()}),d=u.openUrl(h.hash,!1,function(e){r.attr("src",e)},{progressBar:c}),s.one("change",function(){d&&d.state&&"pending"===d.state()&&d.reject()}),h.width&&h.height?g():h.size>o&&(f=u.request({data:{cmd:"dim",target:h.hash},preventDefault:!0}).done(function(e){if(e.dim){var t=e.dim.split("x");h.width=t[0],h.height=t[1],m(t),g()}})))})},function(t){var i=t.fm,n=t.preview;window.Worker&&window.Uint8Array&&n.on(t.evUpdate,function(a){var o,s,r,l,c,d=a.file,u=function(e){l&&l.terminate(),o.remove(),i.debug("error",e)};"image/tiff"===d.mime&&(a.stopImmediatePropagation(),o=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+i.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),s=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(o),n.one("change",function(){l&&l.terminate(),o.remove()}),c=i.getContents(d.hash,"arraybuffer",{progressBar:s}).done(function(a){if(a){r=e("<div></div>").css({width:"100%",height:"100%"}).hide().appendTo(n);try{(l=i.getWorker()).onmessage=function(a){var s,c,u,h,p,f,m=a.data;l&&l.terminate(),c=(s=document.createElement("canvas")).getContext("2d"),s.width=m.width,s.height=m.height,(u=c.createImageData(m.width,m.height)).data.set(new Uint8Array(m.image)),c.putImageData(u,0,0),r.append(s).show(),o.remove(),h=(m.width/m.height).toFixed(2),n.on("changesize",function(){var t,i,a=parseInt(n.width()),o=parseInt(n.height());h<(a/o).toFixed(2)?(i=o,t=Math.floor(i*h)):(t=a,i=Math.floor(t/h)),e(s).width(t).height(i).css("margin-top",i<o?Math.floor((o-i)/2):0)}).trigger("changesize"),d.width&&d.height||(p=[m.width,m.height],(f=i.file(d.hash)).width=p[0],f.height=p[1]),t.hideinfo()},l.onerror=u,l.postMessage({scripts:[i.options.cdns.tiff,i.getWorkerUrl("quicklook.tiff.js")],data:{data:a}})}catch(e){u(e)}}else u()}),n.one("change",function(){c&&c.state&&"pending"===c.state()&&c.reject()}))})},function(t){var i,n=t.fm,a=n.arrayFlip(["image/vnd.adobe.photoshop","image/x-photoshop"]),o=t.preview,s=function(e,a,s){try{n.replaceXhrSend(),i.fromURL(e).then(function(e){var i;a.attr("src",e.image.toBase64()),requestAnimationFrame(function(){i=(a.width()/a.height()).toFixed(2),o.on("changesize",function(){var e,t,n=parseInt(o.width()),s=parseInt(o.height());i<(n/s).toFixed(2)?(t=s,e=Math.floor(t*i)):(e=n,t=Math.floor(e/i)),a.width(e).height(t).css("margin-top",t<s?Math.floor((s-t)/2):0)}).trigger("changesize"),s.remove(),t.hideinfo(),a.fadeIn(100)})},function(){s.remove(),a.remove()}),n.restoreXhrSend()}catch(e){n.restoreXhrSend(),s.remove(),a.remove()}};o.on(t.evUpdate,function(r){var l,c,d,u,h,p,f=r.file;a[f.mime]&&n.options.cdns.psd&&!n.UA.ltIE10&&t.dispInlineRegex.test(f.mime)&&(r.stopImmediatePropagation(),c=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+n.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),d=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(c),p=n.openUrl(f.hash,"sameorigin",function(t){t&&(l=e("<img/>").hide().appendTo(o),i?s(t,l,c):(u=window.define,h=window.require,window.require=null,window.define=null,n.loadScript([n.options.cdns.psd],function(){i=require("psd"),u?window.define=u:delete window.define,h?window.require=h:delete window.require,s(t,l,c)})))},{progressBar:d}),o.one("change",function(){p&&p.state&&"pending"===p.state()&&p.reject()}))})},function(t){var i=t.fm,n=i.arrayFlip(["text/html","application/xhtml+xml"]),a=t.preview;a.on(t.evUpdate,function(o){var s,r,l,c=o.file;n[c.mime]&&t.dispInlineRegex.test(c.mime)&&(!t.options.getSizeMax||c.size<=t.options.getSizeMax)&&(o.stopImmediatePropagation(),r=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+i.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),l=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(r),a.one("change",function(){"pending"==s.state()&&s.reject()}).addClass("elfinder-overflow-auto"),s=i.request({data:{cmd:"get",target:c.hash,conv:1,_t:c.ts},options:{type:"get",cache:!0},preventDefault:!0,progressBar:l}).done(function(i){t.hideinfo();var n=e('<iframe class="elfinder-quicklook-preview-html"></iframe>').appendTo(a)[0].contentWindow.document;n.open(),n.write(i.content),n.close()}).always(function(){r.remove()}))})},function(t){var i=t.fm,n=i.arrayFlip(["text/x-markdown"]),a=t.preview,o=null,s=function(i,n){t.hideinfo();var s=e('<iframe class="elfinder-quicklook-preview-html"></iframe>').appendTo(a)[0].contentWindow.document;s.open(),s.write((o.parse||o)(i.content)),s.close(),n.remove()},r=function(e){o=!1,e.remove()};a.on(t.evUpdate,function(l){var c,d,u,h=l.file;n[h.mime]&&i.options.cdns.marked&&!1!==o&&t.dispInlineRegex.test(h.mime)&&(!t.options.getSizeMax||h.size<=t.options.getSizeMax)&&(l.stopImmediatePropagation(),d=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+i.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),u=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(d),a.one("change",function(){"pending"==c.state()&&c.reject()}).addClass("elfinder-overflow-auto"),c=i.request({data:{cmd:"get",target:h.hash,conv:1,_t:h.ts},options:{type:"get",cache:!0},preventDefault:!0,progressBar:u}).done(function(e){o||window.marked?(o||(o=window.marked),s(e,d)):i.loadScript([i.options.cdns.marked],function(t){o=t||window.marked||!1,delete window.marked,o?s(e,d):r(d)},{tryRequire:!0,error:function(){r(d)}})}).fail(function(){r(d)}))})},function(t){if(t.options.viewerjs){var i=t.fm,n=t.preview,a=t.options.viewerjs,o=a.url?i.arrayFlip(a.mimes||[]):[],s=t.window,r=t.navbar,l=function(){r.css("bottom",s.hasClass("elfinder-quicklook-fullscreen")?"30px":"")};a.url&&n.on("update",function(r){var c,d,u,h,p=r.file;!o[p.mime]||"application/pdf"===p.mime&&a.pdfNative&&t.flags.pdfNative||(r.stopImmediatePropagation(),d=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+i.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),u=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(d),h=i.openUrl(p.hash,"sameorigin",function(i){i&&(c=e('<iframe class="elfinder-quicklook-preview-iframe"></iframe>').css("background-color","transparent").on("load",function(){t.hideinfo(),d.remove(),c.css("background-color","#fff")}).on("error",function(){d.remove(),c.remove()}).appendTo(n).attr("src",a.url+"#"+i),s.on("viewchange.viewerjs",l),l(),n.one("change",function(){s.off("viewchange.viewerjs"),d.remove(),c.off("load").remove()}))},{progressBar:u}),n.one("change",function(){h&&h.state&&"pending"===h.state()&&h.reject()}))})}},function(t){var i=t.fm,n="application/pdf",a=t.preview,o=!1,s="";i.UA.Safari&&"mac"===i.OS&&!i.UA.iOS||i.UA.IE||i.UA.Firefox?o=!0:e.each(navigator.plugins,function(t,i){e.each(i,function(e,t){if(t.type===n)return!(o=!0)})}),t.flags.pdfNative=o,o&&(void 0===t.options.pdfToolbar||t.options.pdfToolbar||(s="#toolbar=0"),a.on(t.evUpdate,function(r){var l,c=r.file;o&&c.mime===n&&t.dispInlineRegex.test(c.mime)&&(r.stopImmediatePropagation(),l=i.openUrl(c.hash,!1,function(n){n&&(t.hideinfo(),t.cover.addClass("elfinder-quicklook-coverbg"),e('<object class="elfinder-quicklook-preview-pdf" data="'+n+s+'" type="application/pdf" ></object>').on("error",function(e){o=!1,t.update(void 0,i.cwd()),t.update(void 0,c)}).appendTo(a))}),a.one("change",function(){l&&l.state&&"pending"===l.state()&&l.reject()}))}))},function(t){var i=t.fm,n="application/x-shockwave-flash",a=t.preview,o=!1;e.each(navigator.plugins,function(t,i){e.each(i,function(e,t){if(t.type===n)return!(o=!0)})}),o&&a.on(t.evUpdate,function(o){var s,r=o.file;r.mime===n&&t.dispInlineRegex.test(r.mime)&&(o.stopImmediatePropagation(),s=i.openUrl(r.hash,!1,function(i){i&&(t.hideinfo(),e('<embed class="elfinder-quicklook-preview-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+i+'" quality="high" type="application/x-shockwave-flash" wmode="transparent" />').appendTo(a))}),a.one("change",function(){s&&s.state&&"pending"===s.state()&&s.reject()}))})},function(t){var i,n,a,o,s,r,l=t.fm,c=t.preview,d={"audio/mpeg":"mp3","audio/mpeg3":"mp3","audio/mp3":"mp3","audio/x-mpeg3":"mp3","audio/x-mp3":"mp3","audio/x-wav":"wav","audio/wav":"wav","audio/x-m4a":"m4a","audio/aac":"m4a","audio/mp4":"m4a","audio/x-mp4":"m4a","audio/ogg":"ogg","audio/webm":"webm","audio/flac":"flac","audio/x-flac":"flac","audio/amr":"amr"},u=t.window,h=t.navbar,p="string"==typeof t.options.mediaControlsList&&t.options.mediaControlsList?' controlsList="'+l.escape(t.options.mediaControlsList)+'"':"",f=function(){h.css("bottom",u.hasClass("elfinder-quicklook-fullscreen")?"50px":"")},m=function(t,n){return e('<audio class="elfinder-quicklook-preview-audio ui-front" controls'+p+' preload="auto" autobuffer><source src="'+t+'" ></source></audio>').on("change",function(e){e.stopPropagation()}).on("error",function(e){i&&i.data("hash")===n&&v()}).data("hash",n).appendTo(c)},g=function(e){var t,n=i.data("hash");o&&(t=e.play()),t&&t.catch&&t.catch(function(t){e.paused||i&&i.data("hash")===n&&v()})},v=function(){if(i&&i.parent().length){var e=i[0],t=i.children("source").attr("src");u.off("viewchange.audio");try{e.pause(),i.empty(),t.match(/^blob:/)&&URL.revokeObjectURL(t),e.src="",e.load()}catch(e){}i.remove(),i=null}};c.on(t.evUpdate,function(h){var p,v,b,y,w,x,k=h.file,C=d[k.mime];d[k.mime]&&t.dispInlineRegex.test(k.mime)&&((p=t.support.audio[C])||"amr"===C)&&(o=t.autoPlay(),n=k.hash,p?(h.stopImmediatePropagation(),s=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+l.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),r=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(s),v=l.openUrl(n,!1,function(e){s.remove(),e?(i=m(e,n),g(i[0]),u.on("viewchange.audio",f),f()):i.remove()},{progressBar:r}),c.one("change",function(){v&&v.state&&"pending"===v.state()&&v.reject()})):l.options.cdns.amr&&"amr"===C&&!1!==a&&(h.stopImmediatePropagation(),s=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+l.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),r=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(s),i=m("",n),(b=k.hash,w=e.Deferred(),x=e.Deferred().done(function(){var e;e=l.getContents(b,"arraybuffer",{progressBar:r}).done(function(e){try{var t=a.toWAV(new Uint8Array(e));t?w.resolve(URL.createObjectURL(new Blob([t],{type:"audio/x-wav"}))):w.reject()}catch(e){w.reject()}}).fail(function(){w.reject()}),c.one("change",function(){e&&e.state&&"pending"===e.state()&&e.reject()})}).fail(function(){a=!1,w.reject()}),window.TextEncoder&&window.URL&&URL.createObjectURL&&void 0===a?(y=window.AMR,delete window.AMR,l.loadScript([l.options.cdns.amr],function(){a=!!window.AMR&&window.AMR,window.AMR=y,x[a?"resolve":"reject"]()},{error:function(){x.reject()}})):x[a?"resolve":"reject"](),w).done(function(e){if(s.remove(),n===k.hash){var t=i[0];try{i.children("source").attr("src",e),t.pause(),t.load(),g(t),u.on("viewchange.audio",f),f()}catch(t){URL.revokeObjectURL(e),i.remove()}}else URL.revokeObjectURL(e)}).fail(function(){i.remove()})))}).one("change",v)},function(t){var i,n,a,o,s,r,l,c,d,u,h=t.fm,p=t.preview,f={"video/mp4":"mp4","video/x-m4v":"mp4","video/quicktime":"mp4","video/mpeg":"mpeg","video/ogg":"ogg","application/ogg":"ogg","video/webm":"webm","video/x-matroska":"mkv","video/3gpp":"3gp","application/vnd.apple.mpegurl":"m3u8","application/x-mpegurl":"m3u8","application/dash+xml":"mpd","video/x-flv":"flv","video/x-msvideo":"avi"},m=t.window,g=t.navbar,v="string"==typeof t.options.mediaControlsList&&t.options.mediaControlsList?' controlsList="'+h.escape(t.options.mediaControlsList)+'"':"",b=function(){h.UA.iOS?m.hasClass("elfinder-quicklook-fullscreen")?(p.css("height","-webkit-calc(100% - 50px)"),g._show()):p.css("height",""):g.css("bottom",m.hasClass("elfinder-quicklook-fullscreen")?"50px":"")},y=function(n,a){var s,r=function(e){l>1&&(c&&clearTimeout(c),c=setTimeout(function(){!s&&T(!0)},800))},l=0;o=null,a=a||{},t.hideinfo(),(i=e('<video class="elfinder-quicklook-preview-video" controls'+v+' preload="auto" autobuffer playsinline></video>').on("change",function(e){e.stopPropagation()}).on("timeupdate progress",r).on("canplay",function(){s=!0}).data("hash",n.hash))[0].addEventListener("error",function(e){a.src&&h.convAbsUrl(a.src)===h.convAbsUrl(e.target.src)&&(++l,r())},!0),a.src&&i.append('<source src="'+a.src+'" type="'+n.mime+'"></source><source src="'+a.src+'"></source>'),i.appendTo(p),m.on("viewchange.video",b),b()},w=function(e){var t,a;a=h.openUrl(e.hash,!1,function(a){d.remove(),a&&(y(e),(t=new n).loadSource(a),t.attachMedia(i[0]),l&&t.on(n.Events.MANIFEST_PARSED,function(){_(i[0])}))},{progressBar:u}),p.one("change",function(){a&&a.state&&"pending"===a.state()&&a.reject()})},x=function(e){var t;t=h.openUrl(e.hash,!1,function(t){var n;d.remove(),t&&(y(e),(n=(o=window.dashjs.MediaPlayer().create()).getDebug()).setLogLevel?n.setLogLevel(dashjs.Debug.LOG_LEVEL_FATAL):n.setLogToBrowserConsole&&n.setLogToBrowserConsole(!1),o.initialize(i[0],t,l),o.on("error",function(e){T(!0)}))},{progressBar:u}),p.one("change",function(){t&&t.state&&"pending"===t.state()&&t.reject()})},k=function(e){var t;s.isSupported()?(t=h.openUrl(e.hash,!1,function(t){if(d.remove(),t){var n=s.createPlayer({type:"flv",url:t});y(e),n.on(s.Events.ERROR,function(){n.destroy(),T(!0)}),n.attachMediaElement(i[0]),n.load(),_(n)}},{progressBar:u}),p.one("change",function(){t&&t.state&&"pending"===t.state()&&t.reject()})):s=!1},C=function(e){var t;t=h.openUrl(e.hash,!1,function(t){d.remove(),t&&(y(e),i[0].src=t,r(i[0],{src:t}))},{progressBar:u}),p.one("change",function(){t&&t.state&&"pending"===t.state()&&t.reject()})},_=function(e){var t,n=i.data("hash");l&&(t=e.play()),t&&t.catch&&t.catch(function(t){e.paused||i&&i.data("hash")===n&&T(!0)})},T=function(e){if(c&&clearTimeout(c),i&&i.parent().length){var n=i[0];m.off("viewchange.video"),o&&o.reset();try{n.pause(),i.empty(),n.src="",n.load()}catch(e){}i.remove(),i=null}e&&t.info.show()};p.on(t.evUpdate,function(o){var c,m,g=o.file,v=g.mime.toLowerCase(),b=f[v];f[v]&&t.dispInlineRegex.test(g.mime)&&(l=t.autoPlay(),d=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+h.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>'),u=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(d),t.support.video[b]&&("m3u8"!==b||h.UA.Safari)?(o.stopImmediatePropagation(),d.appendTo(t.info.find(".elfinder-quicklook-info")),m=h.openUrl(g.hash,!1,function(e){d.remove(),e&&(y(g,{src:e}),_(i[0]))},{progressBar:u}),p.one("change",function(){m&&m.state&&"pending"===m.state()&&m.reject()})):!1!==n&&h.options.cdns.hls&&"m3u8"===b?(o.stopImmediatePropagation(),d.appendTo(t.info.find(".elfinder-quicklook-info")),n?w(g):(c=window.Hls,delete window.Hls,h.loadScript([h.options.cdns.hls],function(e){n=e||window.Hls||!1,window.Hls=c,n&&w(g)},{tryRequire:!0,error:function(){n=!1}}))):!1!==a&&h.options.cdns.dash&&"mpd"===b?(o.stopImmediatePropagation(),d.appendTo(t.info.find(".elfinder-quicklook-info")),a?x(g):h.loadScript([h.options.cdns.dash],function(){(a=!!window.dashjs)&&x(g)},{tryRequire:!0,error:function(){a=!1}})):!1!==s&&h.options.cdns.flv&&"flv"===b?(o.stopImmediatePropagation(),d.appendTo(t.info.find(".elfinder-quicklook-info")),s?k(g):(c=window.flvjs,delete window.flvjs,h.loadScript([h.options.cdns.flv],function(e){s=e||window.flvjs||!1,window.flvjs=c,s&&k(g)},{tryRequire:!0,error:function(){s=!1}}))):h.options.cdns.videojs&&(o.stopImmediatePropagation(),d.appendTo(t.info.find(".elfinder-quicklook-info")),r?C(g):h.loadScript([h.options.cdns.videojs+"/video.min.js"],function(e){(r=e||window.videojs||!1)&&C(g)},{tryRequire:!0,error:function(){r=!1}}).loadCss([h.options.cdns.videojs+"/video-js.min.css"])))}).one("change",T)},function(t){var i,n=t.preview,a=[],o=t.window,s=t.navbar;e.each(navigator.plugins,function(t,i){e.each(i,function(e,t){(0===t.type.indexOf("audio/")||0===t.type.indexOf("video/"))&&a.push(t.type)})}),a=t.fm.arrayFlip(a),n.on(t.evUpdate,function(r){var l,c,d,u,h=r.file,p=h.mime,f=function(){s.css("bottom",o.hasClass("elfinder-quicklook-fullscreen")?"50px":"")};a[h.mime]&&t.dispInlineRegex.test(h.mime)&&(r.stopImmediatePropagation(),d=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+fm.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),u=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(d),c=t.fm.openUrl(h.hash,!1,function(a){d.remove(),a&&((l=0===p.indexOf("video/"))&&t.hideinfo(),i=e('<embed src="'+a+'" type="'+p+'" class="elfinder-quicklook-preview-'+(l?"video":"audio")+'"/>').appendTo(n),o.on("viewchange.embed",f),f())},{progressBar:u}),n.one("change",function(){c&&c.state&&"pending"===c.state()&&c.reject()}))}).one("change",function(){i&&i.parent().length&&(o.off("viewchange.embed"),i.remove(),i=null)})},function(t){var i=t.fm,n=i.arrayFlip(["application/zip","application/x-gzip","application/x-tar","application/x-bzip2"]),a=t.preview,o=i.returnBytes(t.options.unzipMaxSize||0),s=!(!i.options.cdns.zlibUnzip||!i.options.cdns.zlibGunzip),r=!!i.options.cdns.bzip2;window.Worker&&window.Uint8Array&&window.DataView&&a.on(t.evUpdate,function(l){var c=l.file,d="application/x-tar"===c.mime,u="application/x-bzip2"===c.mime,h="application/zip"===c.mime||"application/x-gzip"===c.mime;if(n[c.mime]&&(!o||c.size<=o)&&(d||u&&r||h&&s)){var p,f,m,g,v=function(n){var o,s,r=0;n&&n.length&&((n=e.map(n,function(e){return i.decodeRawString(e)})).sort(),s=i.escape(n.join("\n").replace(/\{formatSize\((\d+)\)\}/g,function(e,t){return r+=parseInt(t),i.formatSize(t)})),o="<strong>"+i.escape(c.mime)+"</strong> ("+i.formatSize(c.size)+" / "+i.formatSize(r)+")<hr/>",e('<div class="elfinder-quicklook-preview-archive-wrapper">'+o+'<pre class="elfinder-quicklook-preview-text">'+s+"</pre></div>").on("touchstart",function(t){e(this)["scroll"+("ltr"===i.direction?"Right":"Left")]()>5&&(t.originalEvent._preventSwipeX=!0)}).appendTo(a),t.hideinfo()),m.remove()};l.stopImmediatePropagation(),m=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+i.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),g=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(m),a.one("change",function(){"pending"===p.state()&&p.reject(),f&&f.terminate(),m.remove()}),p=i.getContents(c.hash,"arraybuffer",{progressBar:g}).fail(function(){m.remove()}).done(function(e){var t=function(e){f&&f.terminate(),m.remove(),h?s=!1:u&&(r=!1),i.debug("error",e)};try{(f=i.getWorker()).onmessage=function(e){f&&f.terminate(),m.remove(),!e.data||e.data.error?new Error(e.data&&e.data.error?e.data.error:""):v(e.data.files)},f.onerror=t,"application/x-tar"===c.mime?f.postMessage({scripts:[i.getWorkerUrl("quicklook.unzip.js")],data:{type:"tar",bin:e}}):"application/zip"===c.mime?f.postMessage({scripts:[i.options.cdns.zlibUnzip,i.getWorkerUrl("quicklook.unzip.js")],data:{type:"zip",bin:e}}):"application/x-gzip"===c.mime?f.postMessage({scripts:[i.options.cdns.zlibGunzip,i.getWorkerUrl("quicklook.unzip.js")],data:{type:"gzip",bin:e}}):"application/x-bzip2"===c.mime&&f.postMessage({scripts:[i.options.cdns.bzip2,i.getWorkerUrl("quicklook.unzip.js")],data:{type:"bzip2",bin:e}})}catch(e){t(e)}})}})},function(t){var i,n=t.fm,a=n.arrayFlip(["application/x-rar"]),o=t.preview;window.DataView&&o.on(t.evUpdate,function(s){var r=s.file;if(a[r.mime]&&n.options.cdns.rar&&!1!==i){var l,c,d,u,h,p,f=function(a){if(u)l.remove();else try{d=i({file:a,type:2,xhrHeaders:n.customHeaders,xhrFields:n.xhrFields},function(i){l.remove();var a,s=[];u||i?i&&n.debug("error",i):(e.each(d.entries,function(){s.push(this.path+(this.size?" ("+n.formatSize(this.size)+")":""))}),s.length&&((s=e.map(s,function(e){return n.decodeRawString(e)})).sort(),a="<strong>"+n.escape(r.mime)+"</strong> ("+n.formatSize(r.size)+")<hr/>",e('<div class="elfinder-quicklook-preview-archive-wrapper">'+a+'<pre class="elfinder-quicklook-preview-text">'+n.escape(s.join("\n"))+"</pre></div>").on("touchstart",function(t){e(this)["scroll"+("ltr"===n.direction?"Right":"Left")]()>5&&(t.originalEvent._preventSwipeX=!0)}).appendTo(o),t.hideinfo()))})}catch(e){l.remove()}},m=function(){i=!1,l.remove()};s.stopImmediatePropagation(),l=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+n.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),c=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(l),o.one("change",function(){d&&(d.abort=!0),l.remove(),u=!0}),p=n.openUrl(r.hash,"sameorigin",function(e){e&&(i?f(e):(window.RarArchive&&(h=window.RarArchive,delete window.RarArchive),n.loadScript([n.options.cdns.rar],function(){n.hasRequire?require(["rar"],function(t){i=t,f(e)},m):(i=window.RarArchive)?(h?window.RarArchive=h:delete window.RarArchive,f(e)):m()},{tryRequire:!0,error:m})))},{progressBar:c,temporary:!0}),o.one("change",function(){p&&p.state&&"pending"===p.state()&&p.reject()})}})},function(t){var i,n=t.fm,a=n.arrayFlip(t.options.sharecadMimes||[]),o=t.preview;t.window;t.options.sharecadMimes.length&&t.addIntegration({title:"ShareCAD.org CAD and 3D-Models viewer",link:"https://sharecad.org/DWGOnlinePlugin"}),o.on(t.evUpdate,function(s){var r=s.file;if(a[r.mime.toLowerCase()]&&n.option("onetimeUrl",r.hash)){var l,c,d;t.window;s.stopImmediatePropagation(),"1"==r.url&&(o.hide(),e('<div class="elfinder-quicklook-info-data"><button class="elfinder-info-button">'+n.i18n("getLink")+"</button></div>").appendTo(t.info.find(".elfinder-quicklook-info")).on("click",function(){var i=e(this);i.html('<span class="elfinder-spinner">'),n.request({data:{cmd:"url",target:r.hash},preventDefault:!0,progressBar:c}).always(function(){i.html("")}).done(function(e){var i=n.file(r.hash);r.url=i.url=e.url||"",r.url&&o.trigger({type:t.evUpdate,file:r,forceUpdate:!0})})})),""!==r.url&&"1"!=r.url&&(o.one("change",function(){l.remove(),i.off("load").remove(),i=null}).addClass("elfinder-overflow-auto"),l=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+n.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),c=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(l),d=n.convAbsUrl(n.url(r.hash)),i=e('<iframe class="elfinder-quicklook-preview-iframe" scrolling="no"></iframe>').css("background-color","transparent").appendTo(o).on("load",function(){t.hideinfo(),l.remove(),t.preview.after(t.info),e(this).css("background-color","#fff").show()}).on("error",function(){l.remove(),t.preview.after(t.info)}).attr("src","//sharecad.org/cadframe/load?url="+encodeURIComponent(d)),t.info.after(t.preview))}})},function(t){var i,n,a,o,s,r=t.fm,l={"application/vnd.google-earth.kml+xml":!0,"application/vnd.google-earth.kmz":!0},c=t.preview;t.options.googleMapsApiKey&&(t.addIntegration({title:"Google Maps",link:"https://www.google.com/intl/"+r.lang.replace("_","-")+"/help/terms_maps.html"}),i=window.google&&google.maps,n=function(e,n,a){var s=t.options.googleMapsOpts.maps;r.forExternalUrl(e.hash,{progressBar:a}).done(function(e){if(e)try{new i.KmlLayer(e,Object.assign({map:new i.Map(n.get(0),s)},t.options.googleMapsOpts.kml)),t.hideinfo()}catch(e){o()}else o()})},a=window.gm_authFailure,o=function(){s=null},s="https://maps.googleapis.com/maps/api/js?key="+t.options.googleMapsApiKey,window.gm_authFailure=function(){o(),a&&a()},c.on(t.evUpdate,function(a){var o=a.file;if(s&&l[o.mime.toLowerCase()]){t.window;var d,u,h,p="1"==o.url&&!r.option("onetimeUrl",o.hash);a.stopImmediatePropagation(),d=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+r.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),u=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(d),p&&(c.hide(),e('<div class="elfinder-quicklook-info-data"><button class="elfinder-info-button">'+r.i18n("getLink")+"</button></div>").appendTo(t.info.find(".elfinder-quicklook-info")).on("click",function(){var i=e(this);i.html('<span class="elfinder-spinner">'),r.request({data:{cmd:"url",target:o.hash},preventDefault:!0,progressBar:u}).always(function(){d.remove(),i.html("")}).done(function(e){var i=r.file(o.hash);o.url=i.url=e.url||"",o.url&&c.trigger({type:t.evUpdate,file:o,forceUpdate:!0})})})),""===o.url||p||(h=e('<div style="width:100%;height:100%;"></div>').appendTo(c),c.one("change",function(){h.remove(),h=null}),i?n(o,h,u):r.loadScript([s],function(){(i=window.google&&google.maps)&&n(o,h,u)}))}}))},function(t){var i,n,a=t.fm,o=Object.assign(a.arrayFlip(t.options.googleDocsMimes||[],"g"),a.arrayFlip(t.options.officeOnlineMimes||[],"m")),s=t.preview,r=(t.window,t.navbar),l={g:"docs.google.com/gview?embedded=true&url=",m:"view.officeapps.live.com/op/embed.aspx?wdStartOn=0&src="},c={g:"56px",m:"24px"},d={xls:5242880,xlsb:5242880,xlsx:5242880,xlsm:5242880,other:10485760};t.options.googleDocsMimes.length&&(n=!0,t.addIntegration({title:"Google Docs Viewer",link:"https://docs.google.com/"})),t.options.officeOnlineMimes.length&&(n=!0,t.addIntegration({title:"MS Online Doc Viewer",link:"https://products.office.com/office-online/view-office-documents-online"})),n&&s.on(t.evUpdate,function(n){var u,h,p=n.file;if(p.size<=26214400&&(u=o[p.mime])){var f,m,g,v=t.window,b=function(){r.css("bottom",v.hasClass("elfinder-quicklook-fullscreen")?c[u]:"")},y=a.mimeTypes[p.mime],w="1"==p.url&&!a.option("onetimeUrl",p.hash);"m"===u&&(d[y]&&p.size>d[y]||p.size>d.other)&&(u="g"),w&&(s.hide(),e('<div class="elfinder-quicklook-info-data"><button class="elfinder-info-button">'+a.i18n("getLink")+"</button></div>").appendTo(t.info.find(".elfinder-quicklook-info")).on("click",function(){var i=e(this);i.html('<span class="elfinder-spinner">'),a.request({data:{cmd:"url",target:p.hash},preventDefault:!0}).always(function(){i.html("")}).done(function(e){var i=a.file(p.hash);p.url=i.url=e.url||"",p.url&&s.trigger({type:t.evUpdate,file:p,forceUpdate:!0})})})),""===p.url||w||(n.stopImmediatePropagation(),s.one("change",function(){h&&h.status&&"pending"===h.status()&&h.reject(),v.off("viewchange.googledocs"),f.remove(),i.off("load").remove(),i=null}).addClass("elfinder-overflow-auto"),f=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+a.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),m=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(f),i=e('<iframe class="elfinder-quicklook-preview-iframe"></iframe>').css("background-color","transparent").appendTo(s),h=a.forExternalUrl(p.hash,{progressBar:m}).done(function(n){var a=function(){try{!i||i.attr("src")&&!i.get(0).contentWindow.document||(i.attr("src","https://"+l[u]+encodeURIComponent(n)),g=setTimeout(a,2e3))}catch(e){}};n?(p.ts&&(n+=(n.match(/\?/)?"&":"?")+"_t="+p.ts),i.on("load",function(){g&&clearTimeout(g),t.hideinfo(),f.remove(),t.preview.after(t.info),e(this).css("background-color","#fff").show()}).on("error",function(){g&&clearTimeout(g),f.remove(),t.preview.after(t.info)}),a()):(f.remove(),i.remove())}),v.on("viewchange.googledocs",b),b(),t.info.after(t.preview))}})},function(t){"use strict";var i,n,a=t.fm,o=t.preview,s=parseInt(t.options.textInitialLines)||150,r=parseInt(t.options.prettifyMaxLines)||500,l=function(){c=function(){return!1},n&&(window.PR=n),i=!1},c=function(e){a.options.cdns.prettify?(c=function(e){return setTimeout(function(){u(e)},100),"pending"},window.PR&&(n=window.PR),a.loadScript([a.options.cdns.prettify+(a.options.cdns.prettify.match(/\?/)?"&":"?")+"autorun=false"],function(t){"object"==typeof(i=t||window.PR)?(c=function(){return!0},n?window.PR=n:delete window.PR,d(e)):l()},{tryRequire:!0,error:l})):l()},d=function(e){e&&!e.hasClass("prettyprinted")&&(e.css("cursor","wait"),requestAnimationFrame(function(){i.prettyPrint&&i.prettyPrint(null,e.get(0)),e.css("cursor","")}))},u=function(e){!0===c(e)&&d(e)};o.on(t.evUpdate,function(n){var l,c,d,h,p=n.file;p.mime;a.mimeIsText(p.mime)&&(!t.options.getSizeMax||p.size<=t.options.getSizeMax)&&!1!==i&&(n.stopImmediatePropagation(),c=e('<div class="elfinder-quicklook-info-data"><span class="elfinder-spinner-text">'+a.i18n("nowLoading")+'</span><span class="elfinder-spinner"></span></div>').appendTo(t.info.find(".elfinder-quicklook-info")),d=e('<div class="elfinder-quicklook-info-progress"></div>').appendTo(c),o.one("change",function(){"pending"==l.state()&&l.reject(),h&&h.remove()}),l=a.request({data:{cmd:"get",target:p.hash,conv:p.encoding||1,_t:p.ts},options:{type:"get",cache:!0},preventDefault:!0,progressBar:d}).done(function(i){var n,l,c,d,h,f=new RegExp("^(data:"+p.mime.replace(/([.+])/g,"\\$1")+";base64,)","i"),m=i.content;"string"==typeof m&&(t.hideinfo(),window.atob&&(h=m.match(f))&&(m=atob(m.substr(h[1].length))),(l=(d=m.match(/([^\r\n]{1,100}[\r\n]*)/g)).length-s)>10?n=d.splice(0,s).join(""):l=0,c=e('<div class="elfinder-quicklook-preview-text-wrapper"><pre class="elfinder-quicklook-preview-text prettyprint"></pre></div>'),l&&c.append(e('<div class="elfinder-quicklook-preview-charsleft"><hr/><span>'+a.i18n("linesLeft",a.toLocaleString(l))+"</span></div>").on("click",function(){var t=c.scrollTop();e(this).remove(),c.children("pre").removeClass("prettyprinted").text(m).scrollTop(t),d.length<=r&&u(c)})),c.children("pre").text(n||m),c.on("touchstart",function(t){e(this)["scroll"+("ltr"===a.direction?"Right":"Left")]()>5&&(t.originalEvent._preventSwipeX=!0)}).appendTo(o),i.toasts&&Array.isArray(i.toasts)&&e.each(i.toasts,function(){this.msg&&a.toast(this)}),u(c))}).always(function(i){var n,s,r;(n=a.getCommand("edit"))&&(r=[],i&&i.encoding&&r.push({value:i.encoding}),r.push({value:"UTF-8"}),(s=n.getEncSelect(r)).on("change",function(){p.encoding=s.val(),a.cache(p,"change"),o.trigger({type:t.evUpdate,file:p,forceUpdate:!0})}),h=e('<div class="elfinder-quicklook-encoding"></div>').append(s),t.window.append(h)),c.remove()}))})}],(u.prototype.commands.reload=function(){"use strict";var t=this,i=!1;this.alwaysEnabled=!0,this.updateOnSelect=!0,this.shortcuts=[{pattern:"ctrl+shift+r f5"}],this.getstate=function(){return 0},this.init=function(){this.fm.bind("search searchend",function(){i="search"==this.type})},this.fm.bind("contextmenu",function(){var i=t.fm;i.options.sync>=1e3&&(t.extra={icon:"accept",node:e("<span></span>").attr({title:i.i18n("autoSync")}).on("click touchstart",function(t){"touchstart"===t.type&&t.originalEvent.touches.length>1||(t.stopPropagation(),t.preventDefault(),e(this).parent().toggleClass("ui-state-disabled",i.options.syncStart).parent().removeClass("ui-state-hover"),i.options.syncStart=!i.options.syncStart,i.autoSync(i.options.syncStart?null:"stop"))}).on("ready",function(){e(this).parent().toggleClass("ui-state-disabled",!i.options.syncStart).css("pointer-events","auto")})})}),this.exec=function(){var t=this.fm;if(!i){var n=t.sync(),a=setTimeout(function(){t.notify({type:"reload",cnt:1,hideCnt:!0}),n.always(function(){t.notify({type:"reload",cnt:-1})})},t.notifyDelay);return n.always(function(){clearTimeout(a),t.trigger("reload")})}e("div.elfinder-toolbar > div."+t.res("class","searchbtn")+" > span.ui-icon-search").click()}}).prototype={forceLoad:!0},u.prototype.commands.rename=function(){"use strict";this.alwaysEnabled=!0,this.syncTitleOnChange=!0;var t=this,i=t.fm,n=function(t,n,a,o){var s,r=n?[a.hash].concat(n):[a.hash],l=r.length,c={};if(i.lockfiles({files:r}),i.isRoot(a)&&!a.netkey){if((s=i.storage("rootNames"))||(s={}),""===o){if(!s[a.hash])return t&&t.reject(),void i.unlockfiles({files:r}).trigger("selectfiles",{files:r});a.name=a._name,a.i18=a._i18,delete s[a.hash],delete a._name,delete a._i18}else void 0===a._name&&(a._name=a.name,a._i18=a.i18),a.name=s[a.hash]=o,delete a.i18;return i.storage("rootNames",s),c={changed:[a]},i.updateCache(c),i.change(c),t&&t.resolve(c),void i.unlockfiles({files:r}).trigger("selectfiles",{files:r})}c={cmd:"rename",name:o,target:a.hash},l>1&&(c.targets=n,o.match(/\*/)&&(c.q=o)),i.request({data:c,notify:{type:"rename",cnt:l},navigate:{}}).fail(function(e){var n=i.parseError(e);t&&t.reject(),n&&Array.isArray(n)&&"errRename"===n[0]||i.sync()}).done(function(n){var s;n.added&&n.added.length&&1===l&&(n.undo={cmd:"rename",callback:function(){return i.request({data:{cmd:"rename",target:n.added[0].hash,name:a.name},notify:{type:"undo",cnt:1}})}},n.redo={cmd:"rename",callback:function(){return i.request({data:{cmd:"rename",target:a.hash,name:o},notify:{type:"rename",cnt:1}})}}),t&&t.resolve(n),(s=i.cwd().hash)&&s!==a.hash||i.exec("open",e.map(n.added,function(e){return"directory"===e.mime?e.hash:null})[0])}).always(function(){i.unlockfiles({files:r}).trigger("selectfiles",{files:r})})},a=function(e,t){var n,a,o,s=t||i.selected(),r=i.splitFileExtention(e),l=i.file(s[0]),c=i.file(s[1]);return n=r[1]?"."+r[1]:"",r[1]&&"*"===r[0]?(a='"'+i.splitFileExtention(l.name)[0]+n+'", ',a+='"'+i.splitFileExtention(c.name)[0]+n+'"'):r[0].length>1&&("*"===r[0].substr(-1)?(a='"'+(o=r[0].substr(0,r[0].length-1))+l.name+'", ',a+='"'+o+c.name+'"'):"*"===r[0].substr(0,1)&&(o=r[0].substr(1),a='"'+i.splitFileExtention(l.name)[0]+o+n+'", ',a+='"'+i.splitFileExtention(c.name)[0]+o+n+'"')),a||(a='"'+r[0]+"1"+n+'", "'+r[0]+"2"+n+'"'),s.length>2&&(a+=" ..."),a},o=function(){var o,s=i.selected(),r='<input name="type" type="radio" class="elfinder-tabstop">',l=function(t,n){return e('<label class="elfinder-rename-batch-checks">'+i.i18n(n)+"</label>").prepend(t)},c=e('<input type="text" class="ui-corner-all elfinder-tabstop">'),d=e(r),u=e(r),h=e(r),p=e(r),f=e("<div></div>").append(l(d,"plusNumber"),l(u,"asPrefix"),l(h,"asSuffix"),l(p,"changeExtention")),m=e('<div class="elfinder-rename-batch-preview"></div>'),g=e('<div class="elfinder-rename-batch"></div>').append(e('<div class="elfinder-rename-batch-name"></div>').append(c),e('<div class="elfinder-rename-batch-type"></div>').append(f),m),v={title:i.i18n("batchRename"),modal:!0,destroyOnClose:!0,width:Math.min(380,i.getUI().width()-20),buttons:{},open:function(){c.on("input",y).trigger("focus")}},b=function(){var e=c.val(),t=i.splitFileExtention(i.file(s[0]).name)[1];return(""!==e||d.is(":checked"))&&(u.is(":checked")?e+="*":h.is(":checked")?e="*"+e+"."+t:p.is(":checked")?e="*."+e:t&&(e+="."+t)),e},y=function(){var e=b();""!==e?m.html(i.i18n(["renameMultiple",s.length,a(e)])):m.empty()},w=f.find("input:radio").on("change",y);v.buttons[i.i18n("btnApply")]=function(){var e,t,a=b();""!==a&&(o.elfinderdialog("close"),t=s,e=i.file(t.shift()),n(void 0,t,e,a))},v.buttons[i.i18n("btnCancel")]=function(){o.elfinderdialog("close")},e.fn.checkboxradio?w.checkboxradio({create:function(e,t){this===d.get(0)&&d.prop("checked",!0).change()}}):f.buttonset({create:function(e,t){d.prop("checked",!0).change()}}),o=t.fmDialog(g,v)};this.noChangeDirOnRemovedCwd=!0,this.shortcuts=[{pattern:"f2"+("mac"==i.OS?" enter":"")},{pattern:"shift+f2",description:"batchRename",callback:function(){i.selected().length>1&&o()}}],this.getstate=function(n){var a,s,r,l,c,d,u=this.files(n),h=u.length;return h?(h>1&&u[0].phash&&(a=u[0].phash,s=i.splitFileExtention(u[0].name)[1].toLowerCase(),r=u[0].mime),1===h&&(d=i.isRoot(u[0])),c=1===h&&(i.cookieEnabled&&d||!u[0].locked)||i.api>2.103&&h===e.grep(u,function(e){return!(l||e.locked||e.phash!==a||i.isRoot(e)||r!==e.mime&&s!==i.splitFileExtention(e.name)[1].toLowerCase())||(l&&(l=!0),!1)}).length?0:-1,!d&&0===c&&i.option("disabledFlip",u[0].hash).rename&&(c=-1),-1!==c&&h>1?t.extra={icon:"preference",node:e("<span></span>").attr({title:i.i18n("batchRename")}).on("click touchstart",function(e){"touchstart"===e.type&&e.originalEvent.touches.length>1||(e.stopPropagation(),e.preventDefault(),i.getUI().trigger("click"),o())})}:delete t.extra,c):-1},this.exec=function(t,o){i.getUI("cwd");var s,r=t||!!i.selected().length&&i.selected()||[i.cwd().hash],l=r.length,c=i.file(r.shift()),d=".elfinder-cwd-filename",u=o||{},h=i.cwd().hash==c.hash,p="files"!==("navbar"===u._currentType||"files"===u._currentType?u._currentType:h?"navbar":"files"),f=i[p?"navHash2Elm":"cwdHash2Elm"](c.hash),m=!p&&"list"!=i.storage("view"),g=function(){requestAnimationFrame(function(){w&&w.trigger("blur")})},v=function(){_.is(":hidden")||_.elfinderoverlay("hide").off("click close",T),C.removeClass("ui-front").css("position","").off("unselect."+i.namespace,g),m?k&&k.css("max-height",""):p||C.css("width","").parent("td").css("overflow","")},b=e.Deferred().fail(function(e){var t=w.parent(),n=i.escape(c.i18||c.name);w.off(),m&&(n=n.replace(/([_.])/g,"&#8203;$1")),requestAnimationFrame(function(){p?w.replaceWith(n):t.length?(w.remove(),t.html(n)):f.find(d).html(n)}),e&&i.error(e)}).always(function(){v(),i.unbind("resize",D),i.enable()}),y=function(t){var o=e.trim(w.val()),s=(i.splitFileExtention(o),!0),d=function(){w.off(),v(),p?w.replaceWith(i.escape(o)):k.html(i.escape(o)),n(b,r,c,o)};if(_.is(":hidden")||C.css("z-index",""),""===o){if(!i.isRoot(c))return T();p?w.replaceWith(i.escape(c.name)):k.html(i.escape(c.name))}if(!z&&C.length){if(w.off("blur"),1===l&&o===c.name)return b.reject();if(i.options.validName&&i.options.validName.test)try{s=i.options.validName.test(o)}catch(t){s=!1}if("."===o||".."===o||!s)return z=!0,i.error("directory"===c.mime?"errInvDirname":"errInvName",{modal:!0,close:function(){setTimeout(x,120)}}),!1;if(1===l&&i.fileByName(o,c.phash))return z=!0,i.error(["errExists",o],{modal:!0,close:function(){setTimeout(x,120)}}),!1;1===l?d():(i.confirm({title:"cmdrename",text:["renameMultiple",l,a(o,[c.hash].concat(r))],accept:{label:"btnYes",callback:d},cancel:{label:"btnCancel",callback:function(){setTimeout(function(){z=!0,x()},120)}}}),setTimeout(function(){i.trigger("unselectfiles",{files:i.selected()}).trigger("selectfiles",{files:[c.hash].concat(r)})},120))}},w=e(m?"<textarea></textarea>":'<input type="text"/>').on("keyup text",function(){m?(this.style.height="1px",this.style.height=this.scrollHeight+"px"):s&&(this.style.width=s+"px",this.scrollWidth>s&&(this.style.width=this.scrollWidth+10+"px"))}).on("keydown",function(t){t.stopImmediatePropagation(),t.keyCode==e.ui.keyCode.ESCAPE?b.reject():t.keyCode==e.ui.keyCode.ENTER&&(t.preventDefault(),w.trigger("blur"))}).on("mousedown click dblclick",function(e){e.stopPropagation(),"dblclick"===e.type&&e.preventDefault()}).on("blur",y).on("dragenter dragleave dragover drop",function(e){e.stopPropagation()}),x=function(){var e=i.splitFileExtention(w.val())[0];z||!i.UA.Mobile||i.UA.iOS||(_.on("click close",T).elfinderoverlay("show"),C.css("z-index",_.css("z-index")+1)),!i.enabled()&&i.enable(),z&&(z=!1,w.on("blur",y)),w.trigger("focus").trigger("select"),w[0].setSelectionRange&&w[0].setSelectionRange(0,e.length)},k=p?f.contents().filter(function(){return 3==this.nodeType&&e(this).parent().attr("id")===i.navHash2Id(c.hash)}):f.find(d),C=k.parent(),_=i.getUI("overlay"),T=function(e){_.is(":hidden")||C.css("z-index",""),z||(b.reject(),e&&(e.stopPropagation(),e.preventDefault()))},D=function(){f.trigger("scrolltoview",{blink:!1})},z=!1;return C.addClass("ui-front").css("position","relative").on("unselect."+i.namespace,g),i.bind("resize",D),p?k.replaceWith(w.val(c.name)):(m?k.css("max-height","none"):p||(s=C.width(),C.width(s-15).parent("td").css("overflow","visible")),k.empty().append(w.val(c.name))),l>1&&i.api<=2.103?b.reject():c&&k.length?c.locked&&!i.isRoot(c)?b.reject(["errLocked",c.name]):(i.one("select",function(){w.parent().length&&c&&-1===e.inArray(c.hash,i.selected())&&w.trigger("blur")}),w.trigger("keyup"),x(),b):b.reject("errCmdParams",this.title)},i.bind("select contextmenucreate closecontextmenu",function(e){var n,a=(e.data?e.data.selected||e.data.targets:null)||i.selected();a&&1===a.length&&(n=i.file(a[0]))&&i.isRoot(n)?t.title=i.i18n("kindAlias")+" ("+i.i18n("preference")+")":t.title=i.i18n("cmdrename"),"closecontextmenu"!==e.type?t.update(void 0,t.title):requestAnimationFrame(function(){t.update(void 0,t.title)})}).remove(function(t){var n;t.data&&t.data.removed&&(n=i.storage("rootNames"))&&(e.each(t.data.removed,function(e,t){n[t]&&delete n[t]}),i.storage("rootNames",n))})},u.prototype.commands.resize=function(){"use strict";var t=this.fm,i=0;this.updateOnSelect=!1,this.getstate=function(){var e=t.selectedFiles();return 1==e.length&&e[0].read&&e[0].write&&-1!==e[0].mime.indexOf("image/")?0:-1},this.resizeRequest=function(i,n,a){var o,s=n||t.file(i.target);s&&s.tmb;return t.isCommandEnabled("resize",i.target)&&(!s||s&&s.read&&s.write&&-1!==s.mime.indexOf("image/"))?t.request({data:Object.assign(i,{cmd:"resize"}),notify:{type:"resize",cnt:1}}).fail(function(e){a&&a.reject(e)}).done(function(){i.quality&&t.storage("jpgQuality",i.quality===t.option("jpgQuality")?null:i.quality),a&&a.resolve()}):(o=s?-1===s.mime.indexOf("image/")?["errResize",s.name,"errUsupportType"]:["errResize",s.name,"errPerm"]:["errResize",i.target,"errPerm"],a?a.reject(o):t.error(o),e.Deferred().reject(o))},this.exec=function(n){var a,o,s,r,l=this,c=this.files(n),d=e.Deferred(),u=t.api>1,h=this.options,p=t.getUI(),f=e().controlgroup?"controlgroup":"buttonset",m=void 0===h.grid8px||"disable"!==h.grid8px,g=Array.isArray(h.presetSize)?h.presetSize:[],v="elfinder-dialog-active",b=t.res("class","editing"),y=function(n,a,o){var c,y,w,x,k,C,_,T="image/jpeg"===n.mime,D=e('<div class="elfinder-resize-container"></div>'),z='<input type="number" class="ui-corner-all"/>',A='<div class="elfinder-resize-row"></div>',S='<div class="elfinder-resize-label"></div>',I=null,M=!1,E=function(){M=!0},O=function(){M&&(M=!1,j.trigger("change"))},j=e('<div class="elfinder-resize-control"></div>').on("focus","input[type=text],input[type=number]",function(){e(this).trigger("select")}).on("change",function(){I&&cancelAnimationFrame(I),I=requestAnimationFrame(function(){var i,n,a,o,s,l,c,d,u,h,p,f;it&&!M&&(a=it.data("canvas"))&&(i=j.children("div.elfinder-resize-control-panel:visible"),(n=i.find("input.elfinder-resize-quality")).is(":visible")&&(o=it.data("ctx"),s=it.get(0),i.hasClass("elfinder-resize-uiresize")?(d=a.width=V.val(),u=a.height=X.val(),o.drawImage(s,0,0,d,u)):i.hasClass("elfinder-resize-uicrop")?(l=G.val(),c=J.val(),d=Q.val(),u=Z.val(),a.width=d,a.height=u,o.drawImage(s,l,c,d,u,0,0,d,u)):(h=te.val(),p=te.val()*Math.PI/180,f=function(t,i,n){var a=[{x:t/2,y:i/2},{x:-t/2,y:i/2},{x:-t/2,y:-i/2},{x:t/2,y:-i/2}],o=[],s={x:Number.MAX_VALUE,y:Number.MAX_VALUE},r={x:Number.MIN_VALUE,y:Number.MIN_VALUE};return e.each(a,function(e,t){o.push({x:t.x*Math.cos(n)-t.y*Math.sin(n),y:t.x*Math.sin(n)+t.y*Math.cos(n)})}),e.each(o,function(e,t){s.x=Math.min(s.x,t.x),s.y=Math.min(s.y,t.y),r.x=Math.max(r.x,t.x),r.y=Math.max(r.y,t.y)}),{width:r.x-s.x,height:r.y-s.y}}(fe,me,p),d=a.width=f.width,u=a.height=f.height,o.save(),h%90!=0&&(o.fillStyle=de.val()||"#FFF",o.fillRect(0,0,d,u)),o.translate(d/2,u/2),o.rotate(p),o.drawImage(s,-s.width/2,-s.height/2,fe,me),o.restore()),a.toBlob(function(e){e&&(r=e.size,n.next("span").text(" ("+t.formatSize(e.size)+")"))},"image/jpeg",Math.max(Math.min(n.val(),100),1)/100)))})}).on("mouseup","input",function(t){e(t.target).trigger("change")}),P=e('<div class="elfinder-resize-preview"></div>').on("touchmove",function(t){e(t.target).hasClass("touch-punch")&&(t.stopPropagation(),t.preventDefault())}),F=e('<div class="elfinder-resize-loading">'+t.i18n("ntfloadimg")+"</div>"),H=e('<div class="elfinder-resize-handle touch-punch"></div>'),N=e('<div class="elfinder-resize-handle touch-punch"></div>'),U=e('<div class="elfinder-resize-uiresize elfinder-resize-control-panel"></div>'),R=e('<div class="elfinder-resize-uicrop elfinder-resize-control-panel"></div>'),q=e('<div class="elfinder-resize-rotate elfinder-resize-control-panel"></div>'),L=e("<button></button>").attr("title",t.i18n("rotate-cw")).append(e('<span class="elfinder-button-icon elfinder-button-icon-rotate-l"></span>')),W=e("<button></button>").attr("title",t.i18n("rotate-ccw")).append(e('<span class="elfinder-button-icon elfinder-button-icon-rotate-r"></span>')),B=e("<span ></span>"),$=e('<button class="elfinder-resize-reset">').text(t.i18n("reset")).on("click",function(){qe()}).button({icons:{primary:"ui-icon-arrowrefresh-1-n"},text:!1}),Y=e('<div class="elfinder-resize-type"></div>').append('<input type="radio" name="type" id="'+a+'-resize" value="resize" checked="checked" /><label for="'+a+'-resize">'+t.i18n("resize")+"</label>",'<input class="api2" type="radio" name="type" id="'+a+'-crop" value="crop" /><label class="api2" for="'+a+'-crop">'+t.i18n("crop")+"</label>",'<input class="api2" type="radio" name="type" id="'+a+'-rotate" value="rotate" /><label class="api2" for="'+a+'-rotate">'+t.i18n("rotate")+"</label>"),K="resize",V=(Y[f]()[f]("disable").find("input").on("change",function(){K=e(this).val(),qe(),$e(!0),Ye(!0),Ke(!0),"resize"==K?(U.show(),q.hide(),R.hide(),$e(),T&&De.insertAfter(U.find(".elfinder-resize-grid8"))):"crop"==K?(q.hide(),U.hide(),R.show(),Ye(),T&&De.insertAfter(R.find(".elfinder-resize-grid8"))):"rotate"==K&&(U.hide(),R.hide(),q.show(),Ke())}),e(z).on("change",function(){var e=Re(parseInt(V.val())),t=Re(ge?e/he:parseInt(X.val()));e>0&&t>0&&(Le.updateView(e,t),V.val(e),X.val(t))}).addClass("elfinder-focus")),X=e(z).on("change",function(){var e=Re(parseInt(X.val())),t=Re(ge?e*he:parseInt(V.val()));t>0&&e>0&&(Le.updateView(t,e),V.val(t),X.val(e))}),G=e(z).on("change",function(){We.updateView()}),J=e(z).on("change",function(){We.updateView()}),Q=e(z).on("change",function(){We.updateView("w")}),Z=e(z).on("change",function(){We.updateView("h")}),ee=T&&u?e(z).val(t.storage("jpgQuality")>0?t.storage("jpgQuality"):t.option("jpgQuality")).addClass("elfinder-resize-quality").attr("min","1").attr("max","100").attr("title","1 - 100").on("blur",function(){var e=Math.min(100,Math.max(1,parseInt(this.value)));j.find("input.elfinder-resize-quality").val(e)}):null,te=e('<input type="number" class="ui-corner-all" maxlength="3" value="0" />').on("change",function(){Be.update()}),ie=e('<div class="elfinder-resize-rotate-slider touch-punch"></div>').slider({min:0,max:360,value:te.val(),animate:!0,start:E,stop:O,change:function(e,t){t.value!=ie.slider("value")&&Be.update(t.value)},slide:function(e,t){Be.update(t.value,!1)}}).find(".ui-slider-handle").addClass("elfinder-tabstop").off("keydown").on("keydown",function(t){t.keyCode!=e.ui.keyCode.LEFT&&t.keyCode!=e.ui.keyCode.RIGHT||(t.stopPropagation(),t.preventDefault(),Be.update(Number(te.val())+(t.keyCode==e.ui.keyCode.RIGHT?1:-1),!1))}).end(),ne={},ae=function(e){var t,i,n,a;try{t=ne[Math.round(e.offsetX)][Math.round(e.offsetY)]}catch(e){}t&&(i=t[0],n=t[1],a=t[2],t[3],t[4],t[5],se(i,n,a,"click"===e.type))},oe=function(t){se(e(this).css("backgroundColor"),"","","click"===t.type)},se=function(t,i,n,a){var o,s,r;"string"==typeof t&&(i="",t&&(o=e("<span>").css("backgroundColor",t).css("backgroundColor"))&&(s=o.match(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i))&&(t=Number(s[1]),i=Number(s[2]),n=Number(s[3]))),r=""===i?t:"#"+re(t,i,n),de.val(r).css({backgroundColor:r,backgroundImage:"none",color:t+i+n<384?"#fff":"#000"}),P.css("backgroundColor",r),a&&(Ue.off(".picker").removeClass("elfinder-resize-picking"),ue.off(".picker").removeClass("elfinder-resize-picking"))},re=function(t,i,n){return e.map([t,i,n],function(e){return("0"+parseInt(e).toString(16)).slice(-2)}).join("")},le=e("<button>").text(t.i18n("colorPicker")).on("click",function(){Ue.on("mousemove.picker click.picker",ae).addClass("elfinder-resize-picking"),ue.on("mousemove.picker click.picker","span",oe).addClass("elfinder-resize-picking")}).button({icons:{primary:"ui-icon-pin-s"},text:!1}),ce=e("<button>").text(t.i18n("reset")).on("click",function(){se("","","",!0)}).button({icons:{primary:"ui-icon-arrowrefresh-1-n"},text:!1}),de=e('<input class="ui-corner-all elfinder-resize-bg" type="text">').on("focus",function(){e(this).attr("style","")}).on("blur",function(){se(e(this).val())}),ue=e('<div class="elfinder-resize-pallet">').on("click","span",function(){se(e(this).css("backgroundColor"))}),he=1,pe=1,fe=0,me=0,ge=!0,ve=!1,be=0,ye=0,we=0,xe=0,ke=0,Ce=!!T&&m,_e=e("<button>").html(t.i18n("aspectRatio")).on("click",function(){ge=!ge,_e.button("option",{icons:{primary:ge?"ui-icon-locked":"ui-icon-unlocked"}}),Le.fixHeight(),H.resizable("option","aspectRatio",ge).data("uiResizable")._aspectRatio=ge}).button({icons:{primary:ge?"ui-icon-locked":"ui-icon-unlocked"},text:!1}),Te=e("<button>").html(t.i18n("aspectRatio")).on("click",function(){ve=!ve,Te.button("option",{icons:{primary:ve?"ui-icon-locked":"ui-icon-unlocked"}}),N.resizable("option","aspectRatio",ve).data("uiResizable")._aspectRatio=ve}).button({icons:{primary:ve?"ui-icon-locked":"ui-icon-unlocked"},text:!1}),De=e("<button>").html(t.i18n(Ce?"enabled":"disabled")).toggleClass("ui-state-active",Ce).on("click",function(){Ce=!Ce,De.html(t.i18n(Ce?"enabled":"disabled")).toggleClass("ui-state-active",Ce),ze()}).button(),ze=function(){var t=Ce?8:1;e.each([V,X,Q,Z,G,J],function(){this.attr("step",t)}),Ce&&(V.val(Re(V.val())),X.val(Re(X.val())),Q.val(Re(Q.val())),Z.val(Re(Z.val())),G.val(Re(G.val())),J.val(Re(J.val())),U.is(":visible")?Le.updateView(V.val(),X.val()):R.is(":visible")&&We.updateView())},Ae=function(){var i,a=function(){de.parent().hide(),ue.hide()};i=Math.min(be,ye)/Math.sqrt(Math.pow(fe,2)+Math.pow(me,2)),we=Math.ceil(fe*i),xe=Math.ceil(me*i),Ue.width(we).height(xe).css("margin-top",(ye-xe)/2+"px").css("margin-left",(be-we)/2+"px"),Ue.is(":visible")&&de.is(":visible")&&("image/png"!==n.mime?(P.css("backgroundColor",de.val()),c=e("<img>"),t.isCORS&&c.attr("crossorigin","use-credentials"),c.on("load",function(){y&&y.width!==we&&Ie()}).on("error",a).attr("src",tt)):a())},Se=function(){Le.updateView(fe,me),Ae(),Fe.width(Pe.width()).height(Pe.height()),He.width(Pe.width()).height(Pe.height()),We.updateView(),nt()},Ie=function(){if(w){var t,i,n,a,o,s,r,l,d,u,h,p,f,m,g,v,b,x,k={},C=[],_=function(e,t,i){var n,a=Math.max(Math.max(e,t),i),o=Math.min(Math.min(e,t),i);return a===o?n=0:e===a?n=((t-i)/(a-o)*60+360)%360:t===a?n=(i-e)/(a-o)*60+120:i===a&&(n=(e-t)/(a-o)*60+240),[n,(a-o)/a,(.3*e+.59*t+.11*i)/255,"hsl"]},T=function(e){return 8*Math.round(e/8)};e:try{i=y.width=Ue.width(),n=y.height=Ue.height(),p=i/fe,w.scale(p,p),w.drawImage(c.get(0),0,0),h=w.getImageData(0,0,i,n).data,f=.1*i,m=.9*i,g=.1*n,v=.9*n;for(var D=0;D<n-1;D++)for(var z=0;z<i-1;z++){if(a=h[t=4*z+D*i*4],o=h[t+1],s=h[t+2],255!==h[t+3]){de.parent().hide(),ue.hide();break e}d=_(a,o,s),u=Math.round(d[0]),r=Math.round(100*d[1]),l=Math.round(100*d[2]),ne[z]||(ne[z]={}),ne[z][D]=[a,o,s,u,r,l],(z<f||z>m)&&(D<g||D>v)&&(k[b=T(a)+","+T(o)+","+T(s)]?++k[b]:k[b]=1)}ue.children(":first").length||(x=1,e.each(k,function(e,t){C.push({c:e,v:t})}),e.each(C.sort(function(e,t){return e.v>t.v?-1:1}),function(){if(this.v<2||x>10)return!1;ue.append(e('<span style="width:20px;height:20px;display:inline-block;background-color:rgb('+this.c+');">')),++x}))}catch(e){le.hide(),ue.hide()}}},Me=null,Ee=!1,Oe=function(e){var i=t.file(n.hash);i.width=e[0],i.height=e[1]},je=function(){var a,o,s;Ee||(Ee=!0,Me&&Me.state&&"pending"===Me.state()&&Me.reject(),t.api>=2.103?0===i&&t.request({data:{cmd:"resize",target:n.hash,degree:0,mode:"rotate"},preventDefault:!0}).done(function(e){1===(i=e.losslessRotate?1:-1)&&te.val()%90==0&&q.children("div.elfinder-resize-quality").hide()}).fail(function(){i=-1}):i=-1,a=Pe.get(0),(o=n.width&&n.height?{w:n.width,h:n.height}:a.naturalWidth?null:{w:Pe.width(),h:Pe.height()})&&Pe.removeAttr("width").removeAttr("height"),fe=n.width||a.naturalWidth||a.width||Pe.width(),me=n.height||a.naturalHeight||a.height||Pe.height(),n.width&&n.height||Oe([fe,me]),o&&Pe.width(o.w).height(o.h),x.show(),(s=me/fe)<1&&P.height()>P.width()*s&&P.height(P.width()*s),P.height()>Pe.height()+20&&P.height(Pe.height()+20),ye=P.height()-(H.outerHeight()-H.height()),F.remove(),he=fe/me,H.append(Pe.show()).show(),V.val(fe),X.val(me),function(){try{y=document.createElement("canvas"),w=y.getContext("2d")}catch(e){le.hide(),ue.hide()}}(),ot.on("click","span.elfinder-resize-preset",function(){var t=e(this),i=t.data("s")[0],n=t.data("s")[1],a=fe/me;t.data("s",[n,i]).text(n+"x"+i),fe>i||me>n?fe<=i?i=Re(n*a):me<=n||fe-i>me-n?n=Re(i/a):i=Re(n*a):(i=fe,n=me),V.val(i),X.val(n),Le.updateView(i,n),nt()}),st.on("click","span.elfinder-resize-preset",function(){var t=e(this),i=t.data("s")[0],n=t.data("s")[1],a=G.val(),o=J.val();t.data("s",[n,i]).text(n+"x"+i),fe>=i&&me>=n&&(fe-i-a<0&&(a=fe-i),me-n-o<0&&(o=me-n),G.val(a),J.val(o),Q.val(i),Z.val(n),We.updateView(),nt())}),st.children("span.elfinder-resize-preset").each(function(){var t=e(this),i=t.data("s")[0],n=t.data("s")[1];t[fe>=i&&me>=n?"show":"hide"]()}),Se(),Y[f]("enable"),j.find("input,select").prop("disabled",!1).filter(":text").on("keydown",function(i){var n;if(i.keyCode==e.ui.keyCode.ENTER)return i.stopPropagation(),i.preventDefault(),n={title:e("input:checked",Y).val(),text:"confirmReq",accept:{label:"btnApply",callback:function(){Xe()}},cancel:{label:"btnCancel",callback:function(){e(this).trigger("focus")}}},rt&&(n.buttons=[{label:"btnSaveAs",callback:function(){requestAnimationFrame(Ge)}}]),void t.confirm(n)}).on("keyup",function(){var t=e(this);t.hasClass("elfinder-resize-bg")||requestAnimationFrame(function(){t.val(t.val().replace(/[^0-9]/g,""))})}).filter(":first"),ze(),!t.UA.Mobile&&V.trigger("focus"),$e())},Pe=e("<img/>").on("load",je).on("error",function(){F.html(t.i18n("ntfsmth")).css("background","transparent")}),Fe=e("<div></div>"),He=e("<img/>"),Ne=e("<div></div>"),Ue=e('<img class="elfinder-resize-imgrotate" />'),Re=function(e,t){return e=Ce?8*Math.round(e/8):Math.round(e),e=Math.max(0,e),t&&e>t&&(e=Ce?8*Math.floor(t/8):t),e},qe=function(){V.val(fe),X.val(me),Le.updateView(fe,me),G.val(0),J.val(0),Q.val(fe),Z.val(me),We.updateView(),nt()},Le={update:function(){V.val(Re(Pe.width()/pe)),X.val(Re(Pe.height()/pe)),nt()},updateView:function(e,t){e>be||t>ye?e/be>t/ye?(pe=be/e,Pe.width(be).height(Re(t*pe))):(pe=ye/t,Pe.height(ye).width(Re(e*pe))):Pe.width(Re(e)).height(Re(t)),pe=Pe.width()/e,B.text("1 : "+(1/pe).toFixed(2)),Le.updateHandle()},updateHandle:function(){H.width(Pe.width()).height(Pe.height())},fixHeight:function(){var e,t;ge&&(e=V.val(),t=Re(e/he),Le.updateView(e,t),X.val(t))}},We={update:function(e){G.val(Re((N.data("x")||N.position().left)/pe,fe)),J.val(Re((N.data("y")||N.position().top)/pe,me)),"xy"!==e&&(Q.val(Re((N.data("w")||N.width())/pe,fe-G.val())),Z.val(Re((N.data("h")||N.height())/pe,me-J.val()))),nt()},updateView:function(e){var t,i,n,a,o;G.val(Re(G.val(),fe-(Ce?8:1))),J.val(Re(J.val(),me-(Ce?8:1))),Q.val(Re(Q.val(),fe-G.val())),Z.val(Re(Z.val(),me-J.val())),ve&&(t=Ne.width()/Ne.height(),"w"===e?Z.val(Re(parseInt(Q.val())/t)):"h"===e&&Q.val(Re(parseInt(Z.val())*t))),i=Math.round(parseInt(G.val())*pe),n=Math.round(parseInt(J.val())*pe),"xy"!==e?(a=Math.round(parseInt(Q.val())*pe),o=Math.round(parseInt(Z.val())*pe)):(a=N.data("w"),o=N.data("h")),N.data({x:i,y:n,w:a,h:o}).width(a).height(o).css({left:i,top:n}),Ne.width(a).height(o)},resize_update:function(e,t){N.data({x:t.position.left,y:t.position.top,w:t.size.width,h:t.size.height}),We.update(),We.updateView()},drag_update:function(e,t){N.data({x:t.position.left,y:t.position.top}),We.update("xy")}},Be={mouseStartAngle:0,imageStartAngle:0,imageBeingRotated:!1,setQuality:function(){q.children("div.elfinder-resize-quality")[i>0&&te.val()%90==0?"hide":"show"]()},update:function(e,i){void 0===e&&(ke=e=parseInt(te.val())),void 0===i&&(i=!0),!i||t.UA.Opera||t.UA.ltIE8?Ue.rotate(e):Ue.animate({rotate:e+"deg"}),(e%=360)<0&&(e+=360),te.val(parseInt(e)),ie.slider("value",te.val()),Be.setQuality()},execute:function(e){if(Be.imageBeingRotated){var t=Be.getCenter(Ue),i=e.originalEvent.touches?e.originalEvent.touches[0]:e,n=i.pageX-t[0],a=i.pageY-t[1],o=Math.atan2(a,n)-Be.mouseStartAngle+Be.imageStartAngle;return o=Math.round(180*parseFloat(o)/Math.PI),e.shiftKey&&(o=15*Math.round((o+6)/15)),Ue.rotate(o),(o%=360)<0&&(o+=360),te.val(o),ie.slider("value",te.val()),Be.setQuality(),!1}},start:function(t){if(!Ue.hasClass("elfinder-resize-picking")){E(),Be.imageBeingRotated=!0;var i=Be.getCenter(Ue),n=t.originalEvent.touches?t.originalEvent.touches[0]:t,a=n.pageX-i[0],o=n.pageY-i[1];return Be.mouseStartAngle=Math.atan2(o,a),Be.imageStartAngle=parseFloat(Ue.rotate())*Math.PI/180,e(document).on("mousemove",Be.execute),Ue.on("touchmove",Be.execute),!1}},stop:function(t){if(Be.imageBeingRotated)return e(document).off("mousemove",Be.execute),Ue.off("touchmove",Be.execute),requestAnimationFrame(function(){Be.imageBeingRotated=!1}),O(),!1},getCenter:function(e){var t=Ue.rotate();Ue.rotate(0);var i=Ue.offset(),n=i.left+Ue.width()/2,a=i.top+Ue.height()/2;return Ue.rotate(t),Array(n,a)}},$e=function(e){e?(H.filter(":ui-resizable").resizable("destroy"),H.hide()):(H.show(),H.resizable({alsoResize:Pe,aspectRatio:ge,resize:Le.update,start:E,stop:function(e){Le.fixHeight,Le.updateView(V.val(),X.val()),O()}}),at())},Ye=function(e){e?(N.filter(":ui-resizable").resizable("destroy").filter(":ui-draggable").draggable("destroy"),Fe.hide()):(Fe.show(),N.resizable({containment:Fe,aspectRatio:ve,resize:We.resize_update,start:E,stop:O,handles:"all"}).draggable({handle:Ne,containment:He,drag:We.drag_update,start:E,stop:function(){We.updateView("xy"),O()}}),at(),We.update())},Ke=function(e){e?Ue.hide():(Ue.show(),at())},Ve=function(){var e,i,n,a,o,l,c="";if("resize"==K)e=parseInt(V.val())||0,i=parseInt(X.val())||0;else if("crop"==K)e=parseInt(Q.val())||0,i=parseInt(Z.val())||0,n=parseInt(G.val())||0,a=parseInt(J.val())||0;else if("rotate"==K){if(e=fe,i=me,(o=parseInt(te.val())||0)<0||o>360)return t.error("Invalid rotate degree"),!1;if(0==o||360==o)return t.error("errResizeNoChange"),!1;c=de.val()}if(l=ee?parseInt(ee.val()):0,"rotate"!=K){if(e<=0||i<=0)return t.error("Invalid image size"),!1;if(e==fe&&i==me&&parseInt(s/1e3)===parseInt(r/1e3))return t.error("errResizeNoChange"),!1}return{w:e,h:i,x:n,y:a,d:o,q:l,b:c}},Xe=function(){var e;(e=Ve())&&(D.elfinderdialog("close"),l.resizeRequest({target:n.hash,width:e.w,height:e.h,x:e.x,y:e.y,degree:e.d,quality:e.q,bg:e.b,mode:K},n,d))},Ge=function(){var i,a=function(){i.addClass(b).fadeIn(function(){k.addClass(v)}),t.disable()},o=function(){l.mime=n.mime,l.prefix=n.name.replace(/ \d+(\.[^.]+)?$/,"$1"),l.requestCmd="mkfile",l.nextAction={},l.data={target:n.phash},e.proxy(t.res("mixin","make"),l)().done(function(o){var s,r;o.added&&o.added.length?(s=o.added[0].hash,r=t.api<2.1032?t.url(n.hash,{async:!0,temporary:!0}):null,e.when(r).done(function(e){t.request({options:{type:"post"},data:{cmd:"put",target:s,encoding:r?"scheme":"hash",content:r?t.convAbsUrl(e):n.hash},notify:{type:"copy",cnt:1},syncOnFail:!0}).fail(a).done(function(e){e=t.normalize(e),t.updateCache(e),n=t.file(s),e.changed&&e.changed.length&&t.change(e),k.show().find(".elfinder-dialog-title").html(t.escape(n.name)),Xe(),i.fadeIn()})}).fail(a)):a()}).fail(a).always(function(){delete l.mime,delete l.prefix,delete l.nextAction,delete l.data}),t.trigger("unselectfiles",{files:[n.hash]})},s=null;Ve()&&(i=p.children("."+l.dialogClass+":visible").removeClass(b).fadeOut(),k.removeClass(v),t.enable(),t.searchStatus.state<2&&n.phash!==t.cwd().hash&&(s=t.exec("open",[n.phash],{thash:n.phash})),e.when([s]).done(function(){s?t.one("cwdrender",o):o()}).fail(a))},Je={},Qe="elfinder-resize-handle-hline",Ze="elfinder-resize-handle-vline",et="elfinder-resize-handle-point",tt=o,it=ee?e("<img>").attr("crossorigin",t.isCORS?"use-credentials":"").attr("src",tt).on("load",function(){try{var e=document.createElement("canvas");it.data("canvas",e).data("ctx",e.getContext("2d")),nt()}catch(e){it.removeData("canvas").removeData("ctx")}}):null,nt=function(){j.find("input.elfinder-resize-quality:visible").trigger("change")},at=function(i){if(!k.hasClass("elfinder-dialog-minimized")&&!k.is(":hidden")){ot.hide(),st.hide();var n,a,o,s=t.options.dialogContained?p:e(window),r=s.height(),l=s.width(),c="auto",d=!0;k.width(Math.min(650,l-30)),P.attr("style",""),fe&&me&&(be=P.width()-(H.outerWidth()-H.width()),ye=P.height()-(H.outerHeight()-H.height()),Le.updateView(fe,me)),a=D.find("div.elfinder-resize-control").width(),(o=P.width())>(n=D.width()-20)?(P.width(n),d=!1):n-o<a&&(l>r?P.width(n-a-20):(P.css({float:"none",marginLeft:"auto",marginRight:"auto"}),d=!1)),d&&(c=a),be=P.width()-(H.outerWidth()-H.width()),p.hasClass("elfinder-fullscreen")?k.height()>r&&(r-=2,P.height(r-k.height()+P.height()),k.css("top",0-p.offset().top)):(r-=30,P.height()>r&&P.height(r)),ye=P.height()-(H.outerHeight()-H.height()),fe&&me&&Se(),Pe.height()&&P.height()>Pe.height()+20&&(P.height(Pe.height()+20),ye=P.height()-(H.outerHeight()-H.height()),Ae()),ot.css("width",c).show(),st.css("width",c).show(),st.children("span.elfinder-resize-preset:visible").length||st.hide(),D.elfinderdialog("posInit")}},ot=(_=e('<fieldset class="elfinder-resize-preset-container">').append(e("<legend>").html(t.i18n("presets"))).css("box-sizing","border-box").hide(),e.each(g,function(t,i){2===i.length&&(C=!0,_.append(e('<span class="elfinder-resize-preset"></span>').data("s",i).text(i[0]+"x"+i[1]).button()))}),C?_:e()),st=ot.clone(!0),rt=t.uploadMimeCheck(n.mime,n.phash);s=r=n.size,U.append(e(A).append(e(S).text(t.i18n("width")),V),e(A).append(e(S).text(t.i18n("height")),X,e('<div class="elfinder-resize-whctrls">').append(_e,$)),ee?e(A).append(e(S).text(t.i18n("quality")),ee,e("<span></span>")):e(),T?e(A).append(e(S).text(t.i18n("8pxgrid")).addClass("elfinder-resize-grid8"),De):e(),e(A).append(e(S).text(t.i18n("scale")),B),e(A).append(ot)),u&&(R.append(e(A).append(e(S).text("X"),G),e(A).append(e(S).text("Y")).append(J),e(A).append(e(S).text(t.i18n("width")),Q),e(A).append(e(S).text(t.i18n("height")),Z,e('<div class="elfinder-resize-whctrls">').append(Te,$.clone(!0))),ee?e(A).append(e(S).text(t.i18n("quality")),ee.clone(!0),e("<span></span>")):e(),T?e(A).append(e(S).text(t.i18n("8pxgrid")).addClass("elfinder-resize-grid8")):e(),e(A).append(st)),q.append(e(A).addClass("elfinder-resize-degree").append(e(S).text(t.i18n("rotate")),te,e("<span></span>").text(t.i18n("degree")),e("<div></div>").append(L,W)[f]()),e(A).css("height","20px").append(ie),ee?e(A)[i<1?"show":"hide"]().addClass("elfinder-resize-quality").append(e(S).text(t.i18n("quality")),ee.clone(!0),e("<span></span>")):e(),e(A).append(e(S).text(t.i18n("bgcolor")),de,le,ce),e(A).css("height","20px").append(ue)),L.on("click",function(){ke-=90,Be.update(ke)}),W.on("click",function(){ke+=90,Be.update(ke)})),D.append(Y).on("resize",function(e){e.stopPropagation()}),u?j.append(U,R.hide(),q.hide()):j.append(U),H.append('<div class="'+Qe+" "+Qe+'-top"></div>','<div class="'+Qe+" "+Qe+'-bottom"></div>','<div class="'+Ze+" "+Ze+'-left"></div>','<div class="'+Ze+" "+Ze+'-right"></div>','<div class="'+et+" "+et+'-e"></div>','<div class="'+et+" "+et+'-se"></div>','<div class="'+et+" "+et+'-s"></div>'),P.append(F).append(H.hide()).append(Pe.hide()),u&&(N.css("position","absolute").append('<div class="'+Qe+" "+Qe+'-top"></div>','<div class="'+Qe+" "+Qe+'-bottom"></div>','<div class="'+Ze+" "+Ze+'-left"></div>','<div class="'+Ze+" "+Ze+'-right"></div>','<div class="'+et+" "+et+'-n"></div>','<div class="'+et+" "+et+'-e"></div>','<div class="'+et+" "+et+'-s"></div>','<div class="'+et+" "+et+'-w"></div>','<div class="'+et+" "+et+'-ne"></div>','<div class="'+et+" "+et+'-se"></div>','<div class="'+et+" "+et+'-sw"></div>','<div class="'+et+" "+et+'-nw"></div>'),P.append(Fe.css("position","absolute").hide().append(He,N.append(Ne))),P.append(Ue.hide())),P.css("overflow","hidden"),D.append(P,j),Je[t.i18n("btnApply")]=Xe,rt&&(Je[t.i18n("btnSaveAs")]=function(){requestAnimationFrame(Ge)}),Je[t.i18n("btnCancel")]=function(){D.elfinderdialog("close")},D.find("input,button").addClass("elfinder-tabstop"),k=l.fmDialog(D,{title:t.escape(n.name),width:650,resizable:!1,buttons:Je,open:function(){var e=function(e){Me=t.request({data:{cmd:"dim",target:n.hash,substitute:a?400:""},preventDefault:!0}).done(function(e){if(!e.url&&i)D.elfinderdialog("close"),t.error(["errOpen",n.name]);else if(e.dim){var a=e.dim.split("x");return n.width=a[0],n.height=a[1],Oe(a),e.url&&(Pe.attr("src",e.url),He.attr("src",e.url),Ue.attr("src",e.url)),je()}})},i=!{"image/jpeg":!0,"image/png":!0,"image/gif":!0}[n.mime],a=!(!t.option("substituteImg",n.hash)||!(i||n.size>h.dimSubImgSize)),s=!(!n.width||!n.height);if(x=k.find(".ui-dialog-titlebar .elfinder-titlebar-minimize").hide(),t.bind("resize",at),Pe.attr("src",o).one("error.dimreq",function(){e()}),He.attr("src",o),Ue.attr("src",o),u&&(Ue.on("mousedown touchstart",Be.start).on("touchend",Be.stop),k.on("mouseup",Be.stop)),s&&!a)return je();if(n.size>(h.getDimThreshold||0))Pe.off("error.dimreq"),e();else if(s)return je()},close:function(){u&&(Ue.off("mousedown touchstart",Be.start).off("touchend",Be.stop),e(document).off("mouseup",Be.stop)),t.unbind("resize",at),e(this).elfinderdialog("destroy")},resize:function(e,t){t&&"off"===t.minimize&&at()}}).attr("id",a).closest(".ui-dialog").addClass(b),t.UA.ltIE8&&e(".elfinder-dialog").css("filter",""),Ne.css({opacity:.2,"background-color":"#fff",position:"absolute"}),N.css("cursor","move"),N.find(".elfinder-resize-handle-point").css({"background-color":"#fff",opacity:.5,"border-color":"#000"}),u||Y.find(".api2").remove(),j.find("input,select").prop("disabled",!0),j.find("input.elfinder-resize-quality").next("span").addClass("elfinder-resize-jpgsize").attr("title",t.i18n("roughFileSize"))};return c.length&&-1!==c[0].mime.indexOf("image/")?(a="resize-"+t.namespace+"-"+c[0].hash,(o=p.find("#"+a)).length?(o.elfinderdialog("toTop"),d.resolve()):(t.openUrl(c[0].hash,"sameorigin",function(e){y(c[0],a,e)}),d)):d.reject()}},function(e){var t=function(e,t){var i=0;for(i in t)if(void 0!==e[t[i]])return t[i];return e[t[i]]="",t[i]};if(e.cssHooks.rotate={get:function(t,i,n){return e(t).rotate()},set:function(t,i){return e(t).rotate(i),i}},e.cssHooks.transform={get:function(e,i,n){var a=t(e.style,["WebkitTransform","MozTransform","OTransform","msTransform","transform"]);return e.style[a]},set:function(e,i){var n=t(e.style,["WebkitTransform","MozTransform","OTransform","msTransform","transform"]);return e.style[n]=i,i}},e.fn.rotate=function(e){var t;return void 0===e?window.opera?(t=this.css("transform").match(/rotate\((.*?)\)/))&&t[1]?Math.round(180*parseFloat(t[1])/Math.PI):0:(t=this.css("transform").match(/rotate\((.*?)\)/))&&t[1]?parseInt(t[1]):0:(this.css("transform",this.css("transform").replace(/none|rotate\(.*?\)/,"")+"rotate("+parseInt(e)+"deg)"),this)},e.fx.step.rotate=function(t){0==t.state&&(t.start=e(t.elem).rotate(),t.now=t.start),e(t.elem).rotate(t.now)},void 0===window.addEventListener&&void 0===document.getElementsByClassName){var i=function(e){if("static"==e.currentStyle.position){var t=function(e){for(var t=e,i=t.offsetLeft,n=t.offsetTop;t.offsetParent&&((t=t.offsetParent)==document.body||"static"==t.currentStyle.position);)t!=document.body&&t!=document.documentElement&&(i-=t.scrollLeft,n-=t.scrollTop),i+=t.offsetLeft,n+=t.offsetTop;return{x:i,y:n}}(e);e.style.position="absolute",e.style.left=t.x+"px",e.style.top=t.y+"px"}},n=e.cssHooks.transform.set;e.cssHooks.transform.set=function(e,t){return n.apply(this,[e,t]),function(e,t){var n,a=1,o=1,s=1,r=1;if(void 0!==e.style.msTransform)return!0;i(e);var l=(n=t.match(/rotate\((.*?)\)/))&&n[1]?parseInt(n[1]):0;(l%=360)<0&&(l=360+l);var c=l*Math.PI/180,d=Math.cos(c),u=Math.sin(c);a*=d,o*=-u,s*=u,r*=d,e.style.filter=(e.style.filter||"").replace(/progid:DXImageTransform\.Microsoft\.Matrix\([^)]*\)/,"")+"progid:DXImageTransform.Microsoft.Matrix(M11="+a+",M12="+o+",M21="+s+",M22="+r+",FilterType='bilinear',sizingMethod='auto expand')";var h=parseInt(e.style.width||e.width||0),p=parseInt(e.style.height||e.height||0);c=l*Math.PI/180;var f=Math.abs(Math.cos(c)),m=Math.abs(Math.sin(c)),g=(h-(h*f+p*m))/2,v=(p-(h*m+p*f))/2;e.style.marginLeft=Math.floor(g)+"px",e.style.marginTop=Math.floor(v)+"px"}(e,t),t}}}(jQuery),(u.prototype.commands.restore=function(){"use strict";var t=this,i=this.fm,n=0,a=function(t){var o,s=e.Deferred(),r=[],l=[],c=[],d=[];return s._xhrReject=function(){e.each(c,function(){this&&this.reject&&this.reject()}),o&&o._xhrReject()},e.each(t,function(e,t){"directory"===t.mime?r.push(t):l.push(t)}),r.length?(e.each(r,function(e,t){c.push(i.request({data:{cmd:"open",target:t.hash},preventDefault:!0,asNotOpen:!0})),d[e]=t.hash}),e.when.apply(e,c).fail(function(){s.reject()}).done(function(){var t=[];e.each(arguments,function(e,i){i.files&&(i.files.length?t=t.concat(i.files):t.push({hash:"fakefile_"+n++,phash:d[e],mime:"fakefile",name:"fakefile",ts:0}))}),i.cache(t),o=a(t).done(function(e){l=l.concat(e),s.resolve(l)})})):s.resolve(l),s};this.restore=function(t,o,s,r){var l,c,d,u={},h=[],p=!1,f=r||{},m=+new Date;i.lockfiles({files:s}),l=e.map(o,function(e){return"directory"===e.mime?e.hash:null}),t.done(function(){l&&i.exec("rm",l,{forceRm:!0,quiet:!0})}).always(function(){i.unlockfiles({files:s})}),c=setTimeout(function(){i.notify({type:"search",id:m,cnt:1,hideCnt:!0,cancel:function(){d&&d._xhrReject(),t.reject()}})},i.notifyDelay),n=0,d=a(o).always(function(){c&&clearTimeout(c),i.notify({type:"search",id:m,cnt:-1,hideCnt:!0})}).fail(function(){t.reject("errRestore","errFileNotFound")}).done(function(n){var a=["errRestore","errFolderNotFound"],o="";n.length?(e.each(n,function(t,n){for(var a,s,r,l=n.phash;l;){if(s=i.trashes[l]){if(!u[s]){if(p)return h.push(n.hash),null;u[s]={},p=!0}""===(r=(r=i.path(n.hash).substr(i.path(l).length).replace(/\\/g,"/")).replace(/\/[^\/]+?$/,""))&&(r="/"),u[s][r]||(u[s][r]=[]),"fakefile"===n.mime?i.updateCache({removed:[n.hash]}):u[s][r].push(n.hash),(!o||o.length>r.length)&&(o=r);break}(a=i.file(l))?l=a.phash:(l=!1,e.each(i.trashes,function(e){var t=i.file(e),a=i.path(e);if((!t.volumeid||0===n.hash.indexOf(t.volumeid))&&0===i.path(n.hash).indexOf(a))return l=e,!1}))}}),p?e.each(u,function(n,r){var l=Object.keys(r),c=l.length;i.request({data:{cmd:"mkdir",target:n,dirs:l},notify:{type:"chkdir",cnt:c},preventFail:!0}).fail(function(e){t.reject(e),i.unlockfiles({files:s})}).done(function(n){var s;(s=n.hashes)?i.getCommand("paste")?i.one("mkdirdone",function(){var n=!1;e.each(r,function(e,r){s[e]&&(r.length?i.file(s[e])?(i.clipboard(r,!0),i.exec("paste",[s[e]],{_cmd:"restore",noToast:f.noToast||e!==o}).done(function(e){e&&(e.error||e.warning)&&(n=!0)}).fail(function(){n=!0}).always(function(){--c<1&&(t[n?"reject":"resolve"](),h.length&&i.exec("restore",h))})):t.reject(a):--c<1&&(t.resolve(),h.length&&i.exec("restore",h)))})}):t.reject(["errRestore","errCmdNoSupport","(paste)"]):t.reject(a)})}):t.reject(a)):(t.reject("errFileNotFound"),l&&i.exec("rm",l,{forceRm:!0,quiet:!0}))})},this.linkedCmds=["copy","paste","mkdir","rm"],this.updateOnSelect=!1,this.init=function(){t=this,i=this.fm},this.getstate=function(t,n){return(t=t||i.selected()).length&&e.grep(t,function(e){var t=i.file(e);return!(!t||t.locked||i.isRoot(t))}).length==t.length?0:-1},this.exec=function(n,a){var o=e.Deferred().fail(function(e){e&&i.error(e)}),s=t.files(n);return s.length?(e.each(s,function(e,t){return i.isRoot(t)?!o.reject(["errRestore",t.name]):t.locked?!o.reject(["errLocked",t.name]):void 0}),"pending"===o.state()&&this.restore(o,s,n,a),o):o.reject()}}).prototype={forceLoad:!0},u.prototype.commands.rm=function(){"use strict";var t=this,i=this.fm,n='<div class="ui-helper-clearfix elfinder-rm-title"><span class="elfinder-cwd-icon {class} ui-corner-all"></span>{title}<div class="elfinder-rm-desc">{desc}</div></div>',a=function(e,t,n){var a=n?{}:{type:"rm",cnt:t.length};i.request({data:{cmd:"rm",targets:t},notify:a,preventFail:!0}).fail(function(t){e.reject(t)}).done(function(t){(t.error||t.warning)&&(t.sync=!0),e.resolve(t)}).always(function(){i.unlockfiles({files:t})})},o=function(t){var n,a=null;return t&&t.length&&(t.length>1&&2===i.searchStatus.state?(n=i.file(i.root(t[0])).volumeid,e.grep(t,function(e){return 0!==e.indexOf(n)}).length||(a=i.option("trashHash",t[0]))):a=i.option("trashHash",t[0])),a},s=!1;this.confirm=function(o,r,l,c,d){var u,h,p,f,m,g,v=r.length,b=i.cwd().hash,y=[],w=i.i18n("calc")+'<span class="elfinder-spinner"></span>';v>1?(f=0,e.each(l,function(e,t){if(!t.size||"unknown"==t.size||"directory"===t.mime)return f="unknown",!1;var i=parseInt(t.size);i>=0&&f>=0&&(f+=i)}),s="unknown"===f,y.push(i.i18n("size")+": "+(s?w:i.formatSize(f))),h=[e(n.replace("{class}","elfinder-cwd-icon-group").replace("{title}","<strong>"+i.i18n("items")+": "+v+"</strong>").replace("{desc}",y.join("<br>")))]):(m=l[0],p=i.tmb(m),s="directory"===m.mime,y.push(i.i18n("size")+": "+(s?w:i.formatSize(m.size))),y.push(i.i18n("modify")+": "+i.formatDate(m)),g=i.escape(m.i18||m.name).replace(/([_.])/g,"&#8203;$1"),h=[e(n.replace("{class}",i.mime2class(m.mime)).replace("{title}","<strong>"+g+"</strong>").replace("{desc}",y.join("<br>")))]),d&&(h=h.concat(d)),h.push(c?"confirmTrash":"confirmRm"),u=i.confirm({title:t.title,text:h,accept:{label:"btnRm",callback:function(){c?t.toTrash(o,r,c):a(o,r)}},cancel:{label:"btnCancel",callback:function(){i.unlockfiles({files:r}),1===r.length&&i.file(r[0]).phash!==b?i.select({selected:r}):i.selectfiles({files:r}),o.reject()}}}),p&&e("<img/>").on("load",function(){u.find(".elfinder-cwd-icon").addClass(p.className).css("background-image","url('"+p.url+"')")}).attr("src",p.url),s&&(s=i.getSize(e.map(l,function(e){return"directory"===e.mime?e.hash:null})).done(function(e){u.find("span.elfinder-spinner").parent().html(i.i18n("size")+": "+e.formated)}).fail(function(){u.find("span.elfinder-spinner").parent().html(i.i18n("size")+": "+i.i18n("unknown"))}).always(function(){s=!1}))},this.toTrash=function(n,a,o){var s,r,l,c={},d=a.length,u=t.options.toTrashMaxItems,h=[],p=e.Deferred();d>u?t.confirm(n,a,t.files(a),null,[i.i18n("tooManyToTrash")]):(e.each(a,function(e,t){var n=i.file(t),a=i.path(t).replace(/\\/g,"/").match(/^[^\/]+?(\/(?:[^\/]+?\/)*)[^\/]+?$/);n&&(a&&(a[1]=a[1].replace(/(^\/.*?)\/?$/,"$1"),c[a[1]]||(c[a[1]]=[]),c[a[1]].push(t)),"directory"===n.mime&&h.push(t))}),h.length?(s=i.request({data:{cmd:"size",targets:h},notify:{type:"readdir",cnt:1,hideCnt:!0},preventDefault:!0}).done(function(e){var t=0;e.fileCnt&&(t+=parseInt(e.fileCnt)),e.dirCnt&&(t+=parseInt(e.dirCnt)),p[t>u?"reject":"resolve"]()}).fail(function(){p.reject()}),setTimeout(function(){var e=s&&s.xhr?s.xhr:null;e&&"pending"==e.state()&&(s.syncOnFail(!1),s.reject(),p.reject())},1e3*t.options.infoCheckWait)):p.resolve(),p.done(function(){r=Object.keys(c),(l=r.length)?i.request({data:{cmd:"mkdir",target:o,dirs:r},notify:{type:"chkdir",cnt:l},preventFail:!0}).fail(function(e){n.reject(e),i.unlockfiles({files:a})}).done(function(t){var o,s,r,d,u=["errTrash"],h={},p=function(){return i.ui.notify.children(".elfinder-notify-trash").length};(o=t.hashes)?(r=1/l*100,d=1===l?100:5,s=setTimeout(function(){i.notify({type:"trash",cnt:1,hideCnt:!0,progress:d})},i.notifyDelay),e.each(c,function(t,c){var f;i.file(c[0]).phash;o[t]&&(f={cmd:"paste",dst:o[t],targets:c,cut:1},i.request({data:f,preventDefault:!0}).fail(function(e){e&&(u=u.concat(e))}).done(function(t){t=i.normalize(t),i.updateCache(t),function(t,n,o){var s,r,l,c;e.each(t,function(e,t){Array.isArray(t)&&(h[e]?h[e]=h[e].concat(t):h[e]=t)}),t.sync&&(h.sync=1),t.added&&t.added.length&&(s=function(){var n=[],a=e.map(t.added,function(e){return"directory"===e.mime?e.hash:null});return e.each(t.added,function(t,i){-1===e.inArray(i.phash,a)&&n.push(i.hash)}),i.exec("restore",n,{noToast:!0})},l=function(){return i.request({data:o,notify:{type:"redo",cnt:a.length}})},h.undo?(r=h.undo,h.undo=function(){s(),r()}):h.undo=s,h.redo?(c=h.redo,h.redo=function(){l(),c()}):h.redo=l)}(t,0,f),t.warning&&(u=u.concat(t.warning),delete t.warning),t.removed&&t.removed.length&&i.remove(t),t.added&&t.added.length&&i.add(t),t.changed&&t.changed.length&&i.change(t),i.trigger("paste",t),i.trigger("pastedone"),t.sync&&i.sync()}).always(function(){var t=[],o=2;p()?i.notify({type:"trash",cnt:0,hideCnt:!0,progress:r}):d+=r,--l<1&&(s&&clearTimeout(s),p()&&i.notify({type:"trash",cnt:-1}),i.unlockfiles({files:a}),Object.keys(h).length?(u.length>1&&((h.removed||h.removed.length)&&(t=e.grep(a,function(t){return-1===e.inArray(t,h.removed)})),t.length?(u.length>o&&(o=-1===(i.messages[u[o-1]]||"").indexOf("$")?o:o+1),n.reject(),i.exec("rm",t,{addTexts:u.slice(0,o),forceRm:!0})):i.error(u)),h._noSound=!0,h.undo&&h.redo&&(h.undo={cmd:"trash",callback:h.undo},h.redo={cmd:"trash",callback:h.redo}),n.resolve(h)):n.reject(u))}))})):(n.reject("errFolderNotFound"),i.unlockfiles({files:a}))}):(n.reject(["error","The folder hierarchy to be deleting can not be determined."]),i.unlockfiles({files:a}))}).fail(function(){t.confirm(n,a,t.files(a),null,[i.i18n("tooManyToTrash")])}))},this.remove=a,this.syncTitleOnChange=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:"delete ctrl+backspace shift+delete"}],this.value="rm",this.init=function(){var n=function(n){var a;delete t.extra,t.title=i.i18n("cmd"+t.value),t.className=t.value,t.button&&t.button.children("span.elfinder-button-icon")["trash"===t.value?"addClass":"removeClass"]("elfinder-button-icon-trash"),n&&"cwd"!==n&&(t.state>-1||"navbar"===n)&&"trash"===t.value&&(t.extra={icon:"rm",node:e("<span></span>").attr({title:i.i18n("cmdrm")}).on("ready",function(e,t){a=t.targets}).on("click touchstart",function(e){"touchstart"===e.type&&e.originalEvent.touches.length>1||(e.stopPropagation(),e.preventDefault(),i.getUI().trigger("click"),i.exec("rm",a,{_userAction:!0,forceRm:!0}))})})};t=this,i=this.fm,t.change(function(){n()}),i.bind("contextmenucreate",function(e){n(e.data.type)})},this.getstate=function(t){var n,a,o=this.hashes(t);return o.length&&(n=o,a=!0,e.grep(n,function(e){var t;return a=!(!a||!(t=i.file(e))||t.locked||i.isRoot(t))})).length==o.length?0:-1},this.exec=function(n,r){var l,c=r||{},d=e.Deferred().always(function(){s&&s.state&&"pending"===s.state()&&s.reject()}).fail(function(e){e&&i.error(e)}).done(function(e){!c.quiet&&!e._noSound&&e.removed&&e.removed.length&&i.trigger("playsound",{soundFile:"rm.wav"})}),u=t.files(n),h=u.length,p=null,f=c.addTexts?c.addTexts:null,m=c.forceRm,g=c.quiet;return h?(e.each(u,function(e,t){return i.isRoot(t)?!d.reject(["errRm",t.name,"errPerm"]):t.locked?!d.reject(["errLocked",t.name]):void 0}),"pending"===d.state()&&(l=t.hashes(n),h=u.length,(m||t.event&&t.event.originalEvent&&t.event.originalEvent.shiftKey)&&(p="",t.title=i.i18n("cmdrm")),null===p&&(p=o(l)),i.lockfiles({files:l}),p&&t.options.quickTrash?t.toTrash(d,l,p):g?a(d,l,g):t.confirm(d,l,u,p,f)),d):d.reject()},i.bind("select contextmenucreate closecontextmenu",function(e){var n=(e.data?e.data.selected||e.data.targets:null)||i.selected();n&&n.length&&t.update(void 0,(n?o(n):i.option("trashHash"))?"trash":"rm")})},u.prototype.commands.search=function(){"use strict";this.title="Find files",this.options={ui:"searchbutton"},this.alwaysEnabled=!0,this.updateOnSelect=!1,this.getstate=function(){return 0},this.exec=function(t,i,n,a){var o,s,r=this.fm,l=[],c=a||"",d=r.options.onlyMimes,u=[],h=function(e){return c&&"SearchName"!==c&&"SearchMime"!==c&&(e.type=c),e};return"string"==typeof t&&t?("object"==typeof i&&(n=i.mime||"",i=i.target||""),i=i||"",n?(n=e.trim(n).replace(","," ").split(" "),d.length&&(n=e.map(n,function(t){return(t=e.trim(t))&&(-1!==e.inArray(t,d)||e.grep(d,function(e){return 0===t.indexOf(e)}).length)?t:null}))):n=[].concat(d),r.trigger("searchstart",h({query:t,target:i,mimes:n})),!d.length||n.length?""===i&&r.api>=2.1?(s=Object.keys(r.roots).length,e.each(r.roots,function(e,i){l.push(r.request({data:h({cmd:"search",q:t,target:i,mimes:n}),notify:{type:"search",cnt:1,hideCnt:!(s>1)},cancel:!0,preventDone:!0}))})):(l.push(r.request({data:h({cmd:"search",q:t,target:i,mimes:n}),notify:{type:"search",cnt:1,hideCnt:!0},cancel:!0,preventDone:!0})),""!==i&&r.api>=2.1&&Object.keys(r.leafRoots).length&&e.each(r.leafRoots,function(a,s){for(o=a;o;)i===o&&e.each(s,function(){var e=r.file(this);e&&e.volumeid&&u.push(e.volumeid),l.push(r.request({data:h({cmd:"search",q:t,target:this,mimes:n}),notify:{type:"search",cnt:1,hideCnt:!1},cancel:!0,preventDone:!0}))}),o=(r.file(o)||{}).phash})):l=[e.Deferred().resolve({files:[]})],r.searchStatus.mixed=l.length>1&&u,e.when.apply(e,l).done(function(e){var t,i=arguments.length;if(e.warning&&r.error(e.warning),i>1)for(e.files=e.files||[],t=1;t<i;t++)arguments[t].warning&&r.error(arguments[t].warning),arguments[t].files&&e.files.push.apply(e.files,arguments[t].files);e.files&&e.files.length&&r.cache(e.files),r.lazy(function(){r.trigger("search",e)}).then(function(){return r.lazy(function(){r.trigger("searchdone")})}).then(function(){e.sync&&r.sync()})})):(r.getUI("toolbar").find("."+r.res("class","searchbtn")+" :text").trigger("focus"),e.Deferred().reject())}},u.prototype.commands.selectall=function(){"use strict";var t=0;this.fm.bind("select",function(e){t=e.data&&e.data.selectall?-1:0}),this.state=0,this.updateOnSelect=!1,this.getstate=function(){return t},this.exec=function(){return e(document).trigger(e.Event("keydown",{keyCode:65,ctrlKey:!0,shiftKey:!1,altKey:!1,metaKey:!1})),e.Deferred().resolve()}},u.prototype.commands.selectinvert=function(){"use strict";this.updateOnSelect=!1,this.getstate=function(){return 0},this.exec=function(){return e(document).trigger(e.Event("keydown",{keyCode:73,ctrlKey:!0,shiftKey:!0,altKey:!1,metaKey:!1})),e.Deferred().resolve()}},u.prototype.commands.selectnone=function(){"use strict";var t=this.fm,i=-1;t.bind("select",function(e){i=e.data&&e.data.unselectall?-1:0}),this.state=-1,this.updateOnSelect=!1,this.getstate=function(){return i},this.exec=function(){return t.getUI("cwd").trigger("unselectall"),e.Deferred().resolve()}},u.prototype.commands.sort=function(){"use strict";var t=this,i=t.fm,n=function(){t.variants=[],e.each(i.sortRules,function(e,n){if(i.sorters[e]){var a=e===i.sortType?"asc"===i.sortOrder?"n":"s":"";t.variants.push([e,(a?'<span class="ui-icon ui-icon-arrowthick-1-'+a+'"></span>':"")+"&nbsp;"+i.i18n("sort"+e)])}}),t.variants.push("|"),t.variants.push(["stick",(i.sortStickFolders?'<span class="ui-icon ui-icon-check"></span>':"")+"&nbsp;"+i.i18n("sortFoldersFirst")]),i.ui.tree&&null!==i.options.sortAlsoTreeview&&(t.variants.push("|"),t.variants.push(["tree",(i.sortAlsoTreeview?'<span class="ui-icon ui-icon-check"></span>':"")+"&nbsp;"+i.i18n("sortAlsoTreeview")])),a()},a=function(){var t,n=i.getUI("contextmenu");n.is(":visible")&&((t=n.find("span.elfinder-button-icon-sort").siblings("div.elfinder-contextmenu-sub")).find("span.ui-icon").remove(),t.children("div.elfinder-contextsubmenu-item").each(function(){var t,n=e(this).children("span"),a=n.text().trim();a===(o.stick||(o.stick=i.i18n("sortFoldersFirst")))?i.sortStickFolders&&n.prepend('<span class="ui-icon ui-icon-check"></span>'):a===(o.tree||(o.tree=i.i18n("sortAlsoTreeview")))?i.sortAlsoTreeview&&n.prepend('<span class="ui-icon ui-icon-check"></span>'):a===(o[i.sortType]||(o[i.sortType]=i.i18n("sort"+i.sortType)))&&(t="asc"===i.sortOrder?"n":"s",n.prepend('<span class="ui-icon ui-icon-arrowthick-1-'+t+'"></span>'))}))},o={};this.options={ui:"sortbutton"},this.keepContextmenu=!0,i.bind("sortchange",n).bind("sorterupdate",function(){n(),i.getUI().children(".elfinder-button-sort-menu").children(".elfinder-button-menu-item").each(function(){var t=e(this),n=t.attr("rel");t.toggle(!(n&&!i.sorters[n]))})}).bind("cwdrender",function(){var t=e(i.cwd).find("div.elfinder-cwd-wrapper-list table");t.length&&e.each(i.sortRules,function(n,a){var o=t.find("thead tr td.elfinder-cwd-view-th-"+n);if(o.length){var s,r=n==i.sortType,l={type:n,order:r?"asc"==i.sortOrder?"desc":"asc":i.sortOrder};r&&(o.addClass("ui-state-active"),s="asc"==i.sortOrder?"n":"s",e('<span class="ui-icon ui-icon-triangle-1-'+s+'"></span>').appendTo(o)),e(o).on("click",function(t){e(this).data("dragging")||(t.stopPropagation(),i.getUI("cwd").data("longtap")||i.exec("sort",[],l))}).on("mouseenter mouseleave",function(t){e(this).toggleClass("ui-state-hover","mouseenter"===t.type)})}})}),this.getstate=function(){return 0},this.exec=function(t,i){var n,a=this.fm,o=e.isPlainObject(i)?i:(n={},"stick"==(i+="")?n.stick=!a.sortStickFolders:"tree"===i?n.tree=!a.sortAlsoTreeview:a.sorters[i]&&(a.sortType===i?n.order="asc"===a.sortOrder?"desc":"asc":n.type=i),n),s=Object.assign({type:a.sortType,order:a.sortOrder,stick:a.sortStickFolders,tree:a.sortAlsoTreeview},o);return a.lazy(function(){a.setSort(s.type,s.order,s.stick,s.tree),this.resolve()})}},u.prototype.commands.undo=function(){"use strict";var t=this,i=this.fm,n=function(e){e?(t.title=i.i18n("cmdundo")+" "+i.i18n("cmd"+e.cmd),t.state=0):(t.title=i.i18n("cmdundo"),t.state=-1),t.change()},a=[];this.alwaysEnabled=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:"ctrl+z"}],this.syncTitleOnChange=!0,this.getstate=function(){return a.length?0:-1},this.setUndo=function(t,o){var s={};t&&e.isPlainObject(t)&&t.cmd&&t.callback&&(Object.assign(s,t),o?(delete o.undo,s.redo=o):i.getCommand("redo").setRedo(null),a.push(s),n(s))},this.exec=function(){var t,o,s=i.getCommand("redo"),r=e.Deferred(),l={};return a.length?((t=a.pop()).redo?(Object.assign(l,t.redo),delete t.redo):l=null,r.done(function(){l&&s.setRedo(l,t)}),n(a.length?a[a.length-1]:void 0),(o=t.callback())&&o.done?o.done(function(){r.resolve()}).fail(function(){r.reject()}):r.resolve(),a.length?this.update(0,a[a.length-1].name):this.update(-1,"")):r.reject(),r},i.bind("exec",function(e){var i=e.data||{};i.opts&&i.opts._userAction&&i.dfrd&&i.dfrd.done&&i.dfrd.done(function(e){e&&e.undo&&e.redo&&(e.undo.redo=e.redo,t.setUndo(e.undo))})})},u.prototype.commands.redo=function(){"use strict";var t=this,i=this.fm,n=function(e){e&&e.callback?(t.title=i.i18n("cmdredo")+" "+i.i18n("cmd"+e.cmd),t.state=0):(t.title=i.i18n("cmdredo"),t.state=-1),t.change()},a=[];this.alwaysEnabled=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:"shift+ctrl+z ctrl+y"}],this.syncTitleOnChange=!0,this.getstate=function(){return a.length?0:-1},this.setRedo=function(e,t){null===e?(a=[],n()):e&&e.cmd&&e.callback&&(t&&(e.undo=t),a.push(e),n(e))},this.exec=function(){var t,o,s=i.getCommand("undo"),r=e.Deferred(),l={},c={};return a.length?((t=a.pop()).undo&&(Object.assign(l,t.undo),Object.assign(c,t),delete c.undo,r.done(function(){s.setUndo(l,c)})),n(a.length?a[a.length-1]:void 0),(o=t.callback())&&o.done?o.done(function(){r.resolve()}).fail(function(){r.reject()}):r.resolve(),r):r.reject()}},(u.prototype.commands.up=function(){"use strict";this.alwaysEnabled=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:"ctrl+up"}],this.getstate=function(){return this.fm.cwd().phash?0:-1},this.exec=function(){var t=this.fm,i=t.cwd().hash;return this.fm.cwd().phash?this.fm.exec("open",this.fm.cwd().phash).done(function(){t.one("opendone",function(){t.selectfiles({files:[i]})})}):e.Deferred().reject()}}).prototype={forceLoad:!0},u.prototype.commands.upload=function(){"use strict";var t=this.fm.res("class","hover");this.disableOnSearch=!0,this.updateOnSelect=!1,this.shortcuts=[{pattern:"ctrl+u"}],this.getstate=function(e){var t,i=this.fm,n=e||[i.cwd().hash];return this._disabled||1!=n.length||(t=i.file(n[0])),t&&"directory"==t.mime&&t.write?0:-1},this.exec=function(i){var n,a,o,s,r,l,c,d,u=this.fm,h=u.cwd().hash,p=(c=i&&i instanceof Array?i:null,(!i||i instanceof Array)&&(c||1!==(l=u.selected()).length||"directory"!==u.file(l[0]).mime?c&&1===c.length&&"directory"===u.file(c[0]).mime||(c=[h]):c=l),c),f=p?p[0]:i&&i.target?i.target:null,m=f?u.file(f):u.cwd(),g=function(t){u.upload(t).fail(function(e){w.reject(e)}).done(function(t){var i;u.getUI("cwd");if(w.resolve(t),t&&t.added&&t.added[0]&&!u.ui.notify.children(".elfinder-notify-upload").length){var n=u.findCwdNodes(t.added);n.length?n.trigger("scrolltoview"):(m.hash!==h?i=e("<div></div>").append(e('<button type="button" class="ui-button ui-widget ui-state-default ui-corner-all elfinder-tabstop"><span class="ui-button-text">'+u.i18n("cmdopendir")+"</span></button>").on("mouseenter mouseleave",function(t){e(this).toggleClass("ui-state-hover","mouseenter"==t.type)}).on("click",function(){u.exec("open",f).done(function(){u.one("opendone",function(){u.trigger("selectfiles",{files:e.map(t.added,function(e){return e.hash})})})})})):u.trigger("selectfiles",{files:e.map(t.added,function(e){return e.hash})}),u.toast({msg:u.i18n(["complete",u.i18n("cmdupload")]),extNode:i}))}}).progress(function(){w.notifyWith(this,Array.from(arguments))})},v=function(e){n.elfinderdialog("close"),p&&(e.target=p[0]),g(e)},b=function(){var t=m.hash,i=e.map(u.files(t),function(e){return"directory"===e.mime&&e.write?e:null});return i.length?e('<div class="elfinder-upload-dirselect elfinder-tabstop" title="'+u.i18n("folders")+'"></div>').on("click",function(t){t.stopPropagation(),t.preventDefault(),i=u.sortFiles(i);var a=e(this),o=(u.cwd(),n.closest("div.ui-dialog")),s=function(e,t){return{label:u.escape(e.i18||e.name),icon:t,remain:!1,callback:function(){var t=o.children(".ui-dialog-titlebar:first").find("span.elfinder-upload-target");p=[e.hash],t.html(" - "+u.escape(e.i18||e.name)),a.trigger("focus")},options:{className:p&&p.length&&e.hash===p[0]?"ui-state-active":"",iconClass:e.csscls||"",iconImg:e.icon||""}}},r=[s(m,"opendir"),"|"];e.each(i,function(e,t){r.push(s(t,"dir"))}),a.trigger("blur"),u.trigger("contextmenu",{raw:r,x:t.pageX||e(this).offset().left,y:t.pageY||e(this).offset().top,prevNode:o,fitHeight:!0})}).append('<span class="elfinder-button-icon elfinder-button-icon-dir" ></span>'):e()},y=function(i,n){var a=e('<input type="file" '+i+"/>").on("click",function(){u.UA.IE&&setTimeout(function(){o.css("display","none").css("position","relative"),requestAnimationFrame(function(){o.css("display","").css("position","")})},100)}).on("change",function(){v({input:a.get(0),type:"files"})}).on("dragover",function(e){e.originalEvent.dataTransfer.dropEffect="copy"}),o=e("<form></form>").append(a).on("click",function(e){e.stopPropagation()});return e('<div class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only elfinder-tabstop elfinder-focus"><span class="ui-button-text">'+u.i18n(n)+"</span></div>").append(o).on("click",function(e){e.stopPropagation(),e.preventDefault(),a.trigger("click")}).on("mouseenter mouseleave",function(i){e(this).toggleClass(t,"mouseenter"===i.type)})},w=e.Deferred();return a=function(t){t.stopPropagation(),t.preventDefault();var i,n=!1,a="",o=null,s="",r=null,l=t._target||null,c=t.dataTransfer||null,d="";if(c){c.types&&c.types.length&&-1!==e.inArray("Files",c.types)?d="file":c.items&&c.items.length&&c.items[0].kind&&(d=c.items[0].kind);try{if((o=c.getData("elfinderfrom"))&&(s=window.location.href+u.cwd().hash,!l&&o===s||l===s))return void w.reject()}catch(t){}if("file"===d&&(c.items[0].getAsEntry||c.items[0].webkitGetAsEntry))n=c,a="data";else if("string"!==d&&c.files&&c.files.length&&-1===e.inArray("Text",c.types))n=c.files,a="files";else{try{(r=c.getData("text/html"))&&r.match(/<(?:img|a)/i)&&(n=[r],a="html")}catch(t){}n||((r=c.getData("text"))?(n=[r],a="text"):c&&c.files&&(d="file"))}}n?g({files:n,type:a,target:l,dropEvt:t}):(i=["errUploadNoFiles"],"file"===d&&i.push("errFolderUpload"),u.error(i),w.reject())},!p&&i?(i.input||i.files?(i.type="files",g(i)):i.dropEvt&&a(i.dropEvt),w):(o=function(t){var i,n=t.originalEvent||t,a=[],o=[];if(n.clipboardData){if(n.clipboardData.items&&n.clipboardData.items.length){o=n.clipboardData.items;for(var s=0;s<o.length;s++)"file"==n.clipboardData.items[s].kind&&(i=n.clipboardData.items[s].getAsFile(),a.push(i))}else n.clipboardData.files&&n.clipboardData.files.length&&(a=n.clipboardData.files);if(a.length)return void v({files:a,type:"files",clipdata:!0})}var r=n.target||n.srcElement;requestAnimationFrame(function(){var t,i="text";r.innerHTML&&(e(r).find("img").each(function(t,i){i.src.match(/^webkit-fake-url:\/\//)&&e(i).remove()}),e(r).find("a,img").length&&(i="html"),t=r.innerHTML,r.innerHTML="",v({files:[t],type:i}))})},n=e('<div class="elfinder-upload-dialog-wrapper"></div>').append(y("multiple","selectForUpload")),u.UA.Mobile||void 0===(d=document.createElement("input")).webkitdirectory&&void 0===d.directory||n.append(y("multiple webkitdirectory directory","selectFolder")),m.dirs&&(m.hash===h||u.navHash2Elm(m.hash).hasClass("elfinder-subtree-loaded")?b().appendTo(n):(s=e('<div class="elfinder-upload-dirselect" title="'+u.i18n("nowLoading")+'"></div>').append('<span class="elfinder-button-icon elfinder-button-icon-spinner" ></span>').appendTo(n),u.request({cmd:"tree",target:m.hash}).done(function(){u.one("treedone",function(){s.replaceWith(b()),r.elfinderdialog("tabstopsInit")})}).fail(function(){s.remove()}))),u.dragUpload?e('<div class="ui-corner-all elfinder-upload-dropbox elfinder-tabstop" contenteditable="true" data-ph="'+u.i18n("dropPasteFiles")+'"></div>').on("paste",function(e){o(e)}).on("mousedown click",function(){e(this).trigger("focus")}).on("focus",function(){this.innerHTML=""}).on("mouseover",function(){e(this).addClass(t)}).on("mouseout",function(){e(this).removeClass(t)}).on("dragenter",function(i){i.stopPropagation(),i.preventDefault(),e(this).addClass(t)}).on("dragleave",function(i){i.stopPropagation(),i.preventDefault(),e(this).removeClass(t)}).on("dragover",function(i){i.stopPropagation(),i.preventDefault(),i.originalEvent.dataTransfer.dropEffect="copy",e(this).addClass(t)}).on("drop",function(e){n.elfinderdialog("close"),p&&(e.originalEvent._target=p[0]),a(e.originalEvent)}).prependTo(n).after('<div class="elfinder-upload-dialog-or">'+u.i18n("or")+"</div>")[0]:e('<div class="ui-corner-all elfinder-upload-dropbox" contenteditable="true">'+u.i18n("dropFilesBrowser")+"</div>").on("paste drop",function(e){o(e)}).on("mousedown click",function(){e(this).trigger("focus")}).on("focus",function(){this.innerHTML=""}).on("dragenter mouseover",function(){e(this).addClass(t)}).on("dragleave mouseout",function(){e(this).removeClass(t)}).prependTo(n).after('<div class="elfinder-upload-dialog-or">'+u.i18n("or")+"</div>")[0],r=this.fmDialog(n,{title:this.title+'<span class="elfinder-upload-target">'+(m?" - "+u.escape(m.i18||m.name):"")+"</span>",modal:!0,resizable:!1,destroyOnClose:!0,propagationEvents:["mousemove","mouseup","click"],close:function(){var e=u.getUI("contextmenu");e.is(":visible")&&e.click()}}),w)}},u.prototype.commands.view=function(){"use strict";var t,i=this,n=this.fm;this.value=n.viewType,this.alwaysEnabled=!0,this.updateOnSelect=!1,this.options={ui:"viewbutton"},this.getstate=function(){return 0},this.extra={icon:"menu",node:e("<span></span>").attr({title:n.i18n("viewtype")}).on("click touchstart",function(t){if(!("touchstart"===t.type&&t.originalEvent.touches.length>1)){var i=e(this);t.stopPropagation(),t.preventDefault(),n.trigger("contextmenu",{raw:getSubMenuRaw(),x:i.offset().left,y:i.offset().top})}})},this.exec=function(){var e=this,t="list"==this.value?"icons":"list";return n.storage("view",t),n.lazy(function(){n.viewchange(),e.update(void 0,t),this.resolve()})},n.bind("init",function(){t=function(){var e,t=n.getUI("cwd"),a=[],o=n.options.uiOptions.cwd.iconsView.sizeNames,s=n.options.uiOptions.cwd.iconsView.sizeMax;for(e=0;e<=s;e++)a.push({label:n.i18n(o[e]||"Size-"+e+" icons"),icon:"view",callback:function(e){return function(){t.trigger("iconpref",{size:e}),n.storage("iconsize",e),"list"===i.value&&i.exec()}}(e)});return a.push("|"),a.push({label:n.i18n("viewlist"),icon:"view-list",callback:function(){"list"!==i.value&&i.exec()}}),a}()}).bind("contextmenucreate",function(){i.extra={icon:"menu",node:e("<span></span>").attr({title:n.i18n("cmdview")}).on("click touchstart",function(a){if(!("touchstart"===a.type&&a.originalEvent.touches.length>1)){var o,s,r=e(this);t.concat();for(o="list"===i.value?t.length-1:parseInt(n.storage("iconsize")||0),s=0;s<t.length;s++)"|"!==t[s]&&(t[s].options=s===o?{className:"ui-state-active"}:void 0);a.stopPropagation(),a.preventDefault(),n.trigger("contextmenu",{raw:t,x:r.offset().left,y:r.offset().top})}})}})},u});
